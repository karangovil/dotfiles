!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=12)}({12:function(e,t){function n(){r(),o()}function r(){chrome.management.getSelf(function(e){var t=chrome.i18n.getMessage("addPage");t+="development"===e.installType?" (dev)":"",chrome.contextMenus.create({title:t,contexts:["page"],onclick:i})})}function o(){chrome.management.getSelf(function(e){var t=chrome.i18n.getMessage("addLink");t+="development"===e.installType?" (dev)":"",chrome.contextMenus.create({title:t,contexts:["link"],onclick:c})})}function c(e,t){var n={},r=document.createElement("a");r.href=e.linkUrl,-1!==r.hostname.toLowerCase().indexOf("google")&&"/url"===r.pathname&&(e.linkUrl=a(r,"url"));var o=void 0;o=d?e.linkText:e.selectionText,n[e.linkUrl]={url:e.linkUrl,title:o,favIconUrl:""+s+e.linkUrl,addedAt:Date.now()},chrome.storage.sync.set(n)}function a(e,t){for(var n=e.search.substring(1),r=n.split("&"),o=0;o<r.length;o++){var c=r[o].split("=");if(decodeURIComponent(c[0])===t)return decodeURIComponent(c[1])}return e}function i(e,t){var n={};n[t.url]={url:t.url,title:t.title,favIconUrl:t.favIconUrl,addedAt:Date.now()},chrome.storage.sync.set(n,function(){return l(t.url,t.id)}),chrome.runtime.sendMessage({type:"add",url:t.url,info:n[t.url]})}function l(e,t,n){if(!t)return void chrome.browserAction.setBadgeText({text:""});e&&chrome.storage.sync.get(e,function(r){var o=r&&r.hasOwnProperty(e);chrome.browserAction.setBadgeText({text:o?"âœ”":"",tabId:t}),"function"==typeof n&&n(o,r)})}function u(e){chrome.storage.sync.get(e,function(t){t[e]&&(t[e].viewed=!0,chrome.storage.sync.set(t))})}var s="https://plus.google.com/_/favicon?domain=";chrome.browserAction.setBadgeText({text:""}),chrome.browserAction.setBadgeBackgroundColor({color:"#2ea99c"});var d="undefined"!=typeof InstallTrigger,f={settings:{theme:"light",addContextMenu:!0,addPageAction:!0,animateItems:!d,openNewTab:!1,viewAll:!0}};chrome.storage.sync.get(f,function(e){e.settings.addContextMenu&&n()}),window.createContextMenus=n,chrome.tabs.onUpdated.addListener(function(e,t,n){d&&chrome.storage.sync.get(f,function(t){t.settings.addPageAction?chrome.pageAction.show(e):chrome.pageAction.hide(e)}),e&&"complete"===t.status&&n.url&&l(n.url,e,function(e,t){var r=e?t[n.url]:null,o={};n.active&&u(n.url),!r||r.hasOwnProperty("favIconUrl")&&-1===r.favIconUrl.indexOf(s)||!n.favIconUrl||(o[n.url]=r,o[n.url].favIconUrl=n.favIconUrl,chrome.storage.sync.set(o))})}),chrome.tabs.onActivated.addListener(function(e,t){chrome.tabs.query({currentWindow:!0,active:!0},function(e){e[0].url&&u(e[0].url)})}),d&&chrome.pageAction.onClicked.addListener(function(){chrome.tabs.query({currentWindow:!0,active:!0},function(e){var t=e[0];t.url&&chrome.storage.sync.get(t.url,function(e){e&&e.hasOwnProperty(t.url)?(chrome.storage.sync.remove(t.url,function(){return l(t.url,t.id)}),chrome.runtime.sendMessage({type:"remove",url:t.url})):i(null,t)})})})}});