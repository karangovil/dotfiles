/*!
 AWS SDK for JavaScript v2.0.27
 Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 License at https://sdk.amazonaws.com/js/BUNDLE_LICENSE.txt
*/
/**
 * Copyright 2014 Amazon.com,
 * Inc. or its affiliates. All Rights Reserved.
 *
 * Licensed under the Amazon Software License (the "License").
 * You may not use this file except in compliance with the
 * License. A copy of the License is located at
 *
 *     http://aws.amazon.com/asl/
 *
 * or in the "license" file accompanying this file. This file is
 * distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
 * CONDITIONS OF ANY KIND, express or implied. See the License
 * for the specific language governing permissions and
 * limitations under the License.
 */
if(_xamzrequire=function e(t,n,r){function i(o,s){if(!n[o]){if(!t[o]){var c="function"==typeof _xamzrequire&&_xamzrequire;if(!s&&c)return c(o,!0);if(a)return a(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return i(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var a="function"==typeof _xamzrequire&&_xamzrequire,o=0;o<r.length;o++)i(r[o]);return i}({24:[function(e,t){AWS={util:e("./util")};var n={};n.toString(),t.exports=AWS,AWS.util.update(AWS,{VERSION:"2.4.0",Signers:{},Protocol:{Json:e("./protocol/json"),Query:e("./protocol/query"),Rest:e("./protocol/rest"),RestJson:e("./protocol/rest_json"),RestXml:e("./protocol/rest_xml")},XML:{Builder:e("./xml/builder"),Parser:null},JSON:{Builder:e("./json/builder"),Parser:e("./json/parser")},Model:{Api:e("./model/api"),Operation:e("./model/operation"),Shape:e("./model/shape"),Paginator:e("./model/paginator"),ResourceWaiter:e("./model/resource_waiter")},util:e("./util"),apiLoader:function(){throw new Error("No API loader set")}}),e("./service"),e("./credentials"),e("./credentials/credential_provider_chain"),e("./credentials/temporary_credentials"),e("./credentials/web_identity_credentials"),e("./credentials/cognito_identity_credentials"),e("./credentials/saml_credentials"),e("./config"),e("./http"),e("./sequential_executor"),e("./event_listeners"),e("./request"),e("./response"),e("./resource_waiter"),e("./signers/request_signer"),e("./param_validator"),AWS.events=new AWS.SequentialExecutor},{"./config":23,"./credentials":25,"./credentials/cognito_identity_credentials":26,"./credentials/credential_provider_chain":27,"./credentials/saml_credentials":28,"./credentials/temporary_credentials":29,"./credentials/web_identity_credentials":30,"./event_listeners":36,"./http":37,"./json/builder":39,"./json/parser":40,"./model/api":41,"./model/operation":43,"./model/paginator":44,"./model/resource_waiter":45,"./model/shape":46,"./param_validator":47,"./protocol/json":48,"./protocol/query":49,"./protocol/rest":50,"./protocol/rest_json":51,"./protocol/rest_xml":52,"./request":56,"./resource_waiter":57,"./response":58,"./sequential_executor":60,"./service":61,"./signers/request_signer":77,"./util":84,"./xml/builder":86}],86:[function(e,t){function n(){}function r(e,t,n){switch(n.type){case"structure":return i(e,t,n);case"map":return a(e,t,n);case"list":return o(e,t,n);default:return s(e,t,n)}}function i(e,t,n){u.arrayEach(n.memberNames,function(i){var a=n.members[i];if("body"===a.location){var o=t[i],s=a.name;if(void 0!==o&&null!==o)if(a.isXmlAttribute)e.att(s,o);else if(a.flattened)r(e,o,a);else{var u=e.ele(s);c(u,a),r(u,o,a)}}})}function a(e,t,n){var i=n.key.name||"key",a=n.value.name||"value";u.each(t,function(t,o){var s=e.ele(n.flattened?n.name:"entry");r(s.ele(i),t,n.key),r(s.ele(a),o,n.value)})}function o(e,t,n){n.flattened?u.arrayEach(t,function(t){var i=n.member.name||n.name,a=e.ele(i);r(a,t,n.member)}):u.arrayEach(t,function(t){var i=n.member.name||"member",a=e.ele(i);r(a,t,n.member)})}function s(e,t,n){e.txt(n.toWireFormat(t))}function c(e,t){var n,r="xmlns";t.xmlNamespaceUri?(n=t.xmlNamespaceUri,t.xmlNamespacePrefix&&(r+=":"+t.xmlNamespacePrefix)):e.isRoot&&t.api.xmlNamespaceUri&&(n=t.api.xmlNamespaceUri),n&&e.att(r,n)}var u=e("../util"),l=e("xmlbuilder");n.prototype.toXML=function(e,t,n,i){var a=l.create(n);return c(a,t),r(a,e,t),a.children.length>0||i?a.root().toString():""},t.exports=n},{"../util":84,xmlbuilder:104}],104:[function(e,t){(function(){var n,r;r=e("lodash/object/assign"),n=e("./XMLBuilder"),t.exports.create=function(e,t,i,a){return a=r({},t,i,a),new n(e,a).root()}}).call(this)},{"./XMLBuilder":89,"lodash/object/assign":146}],146:[function(e,t){var n=e("../internal/baseAssign"),r=e("../internal/createAssigner"),i=r(n);t.exports=i},{"../internal/baseAssign":107,"../internal/createAssigner":125}],125:[function(e,t){function n(e){return function(){var t=arguments,n=t.length,a=t[0];if(n<2||null==a)return a;var o=t[n-2],s=t[n-1],c=t[3];n>3&&"function"==typeof o?(o=r(o,s,5),n-=2):(o=n>2&&"function"==typeof s?s:null,n-=o?1:0),c&&i(t[1],t[2],c)&&(o=3==n?null:o,n=2);for(var u=0;++u<n;){var l=t[u];l&&e(a,l,o)}return a}}var r=e("./bindCallback"),i=e("./isIterateeCall");t.exports=n},{"./bindCallback":124,"./isIterateeCall":131}],107:[function(e,t){function n(e,t,n){var a=i(t);if(!n)return r(t,e,a);for(var o=-1,s=a.length;++o<s;){var c=a[o],u=e[c],l=n(u,t[c],c,e,t);(l===l?l===u:u!==u)&&("undefined"!=typeof u||c in e)||(e[c]=l)}return e}var r=e("./baseCopy"),i=e("../object/keys");t.exports=n},{"../object/keys":148,"./baseCopy":109}],89:[function(e,t){(function(){var n,r,i,a,o;o=e("./XMLStringifier"),r=e("./XMLDeclaration"),i=e("./XMLDocType"),a=e("./XMLElement"),t.exports=n=function(){function e(e,t){var n,r;if(null==e)throw new Error("Root element needs a name");null==t&&(t={}),this.options=t,this.stringify=new o(t),r=new a(this,"doc"),n=r.element(e),n.isRoot=!0,n.documentObject=this,this.rootObject=n,t.headless||(n.declaration(t),null==t.pubID&&null==t.sysID||n.doctype(t))}return e.prototype.root=function(){return this.rootObject},e.prototype.end=function(e){return this.toString(e)},e.prototype.toString=function(e){var t,n,r,i,a,o,s,c;return i=(null!=e?e.pretty:void 0)||!1,t=null!=(o=null!=e?e.indent:void 0)?o:"  ",r=null!=(s=null!=e?e.offset:void 0)?s:0,n=null!=(c=null!=e?e.newline:void 0)?c:"\n",a="",null!=this.xmldec&&(a+=this.xmldec.toString(e)),null!=this.doctype&&(a+=this.doctype.toString(e)),a+=this.rootObject.toString(e),i&&a.slice(-n.length)===n&&(a=a.slice(0,-n.length)),a},e}()}).call(this)},{"./XMLDeclaration":96,"./XMLDocType":97,"./XMLElement":98,"./XMLStringifier":102}],102:[function(e,t){(function(){var e,n=function(e,t){return function(){return e.apply(t,arguments)}},r={}.hasOwnProperty;t.exports=e=function(){function e(e){this.assertLegalChar=n(this.assertLegalChar,this);var t,i,a;this.allowSurrogateChars=null!=e?e.allowSurrogateChars:void 0,i=(null!=e?e.stringify:void 0)||{};for(t in i)r.call(i,t)&&(a=i[t],this[t]=a)}return e.prototype.eleName=function(e){return e=""+e||"",this.assertLegalChar(e)},e.prototype.eleText=function(e){return e=""+e||"",this.assertLegalChar(this.elEscape(e))},e.prototype.cdata=function(e){if(e=""+e||"",e.match(/]]>/))throw new Error("Invalid CDATA text: "+e);return this.assertLegalChar(e)},e.prototype.comment=function(e){if(e=""+e||"",e.match(/--/))throw new Error("Comment text cannot contain double-hypen: "+e);return this.assertLegalChar(e)},e.prototype.raw=function(e){return""+e||""},e.prototype.attName=function(e){return""+e||""},e.prototype.attValue=function(e){return e=""+e||"",this.attEscape(e)},e.prototype.insTarget=function(e){return""+e||""},e.prototype.insValue=function(e){if(e=""+e||"",e.match(/\?>/))throw new Error("Invalid processing instruction value: "+e);return e},e.prototype.xmlVersion=function(e){if(e=""+e||"",!e.match(/1\.[0-9]+/))throw new Error("Invalid version number: "+e);return e},e.prototype.xmlEncoding=function(e){if(e=""+e||"",!e.match(/[A-Za-z](?:[A-Za-z0-9._-]|-)*/))throw new Error("Invalid encoding: "+e);return e},e.prototype.xmlStandalone=function(e){return e?"yes":"no"},e.prototype.dtdPubID=function(e){return""+e||""},e.prototype.dtdSysID=function(e){return""+e||""},e.prototype.dtdElementValue=function(e){return""+e||""},e.prototype.dtdAttType=function(e){return""+e||""},e.prototype.dtdAttDefault=function(e){return null!=e?""+e||"":e},e.prototype.dtdEntityValue=function(e){return""+e||""},e.prototype.dtdNData=function(e){return""+e||""},e.prototype.convertAttKey="@",e.prototype.convertPIKey="?",e.prototype.convertTextKey="#text",e.prototype.convertCDataKey="#cdata",e.prototype.convertCommentKey="#comment",e.prototype.convertRawKey="#raw",e.prototype.convertListKey="#list",e.prototype.assertLegalChar=function(e){var t,n;if(t=this.allowSurrogateChars?/[\u0000-\u0008\u000B-\u000C\u000E-\u001F\uFFFE-\uFFFF]/:/[\u0000-\u0008\u000B-\u000C\u000E-\u001F\uD800-\uDFFF\uFFFE-\uFFFF]/,n=e.match(t))throw new Error("Invalid character ("+n+") in string: "+e+" at index "+n.index);return e},e.prototype.elEscape=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;")},e.prototype.attEscape=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;")},e}()}).call(this)},{}],96:[function(e,t){(function(){var n,r,i,a,o=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},s={}.hasOwnProperty;i=e("lodash/object/create"),a=e("lodash/lang/isObject"),r=e("./XMLNode"),t.exports=n=function(e){function t(e,n,r,i){var o;t.__super__.constructor.call(this,e),a(n)&&(o=n,n=o.version,r=o.encoding,i=o.standalone),n||(n="1.0"),null!=n&&(this.version=this.stringify.xmlVersion(n)),null!=r&&(this.encoding=this.stringify.xmlEncoding(r)),null!=i&&(this.standalone=this.stringify.xmlStandalone(i))}return o(t,e),t.prototype.clone=function(){return i(t.prototype,this)},t.prototype.toString=function(e,t){var n,r,i,a,o,s,c,u,l;return a=(null!=e?e.pretty:void 0)||!1,n=null!=(s=null!=e?e.indent:void 0)?s:"  ",i=null!=(c=null!=e?e.offset:void 0)?c:0,r=null!=(u=null!=e?e.newline:void 0)?u:"\n",t||(t=0),l=new Array(t+i+1).join(n),o="",a&&(o+=l),o+="<?xml",null!=this.version&&(o+=' version="'+this.version+'"'),null!=this.encoding&&(o+=' encoding="'+this.encoding+'"'),null!=this.standalone&&(o+=' standalone="'+this.standalone+'"'),o+="?>",a&&(o+=r),o},t}(r)}).call(this)},{"./XMLNode":99,"lodash/lang/isObject":143,"lodash/object/create":147}],99:[function(e,t){(function(){var n,r,i,a,o,s,c,u,l,d,h,f,p={}.hasOwnProperty;f=e("lodash/lang/isObject"),l=e("lodash/lang/isArray"),h=e("lodash/lang/isFunction"),d=e("lodash/lang/isEmpty"),o=null,n=null,r=null,i=null,a=null,c=null,u=null,t.exports=s=function(){function t(t){this.parent=t,this.options=this.parent.options,this.stringify=this.parent.stringify,null===o&&(o=e("./XMLElement"),n=e("./XMLCData"),r=e("./XMLComment"),i=e("./XMLDeclaration"),a=e("./XMLDocType"),c=e("./XMLRaw"),u=e("./XMLText"))}return t.prototype.clone=function(){throw new Error("Cannot clone generic XMLNode")},t.prototype.element=function(e,t,n){var r,i,a,o,s,c,u;if(o=null,null==t&&(t={}),t=t.valueOf(),f(t)||(c=[t,n],n=c[0],t=c[1]),null!=e&&(e=e.valueOf()),l(e))for(i=0,s=e.length;i<s;i++)r=e[i],o=this.element(r);else if(h(e))o=this.element(e.apply());else if(f(e))for(a in e)p.call(e,a)&&(u=e[a],h(u)&&(u=u.apply()),f(u)&&d(u)&&(u=null),!this.options.ignoreDecorators&&this.stringify.convertAttKey&&0===a.indexOf(this.stringify.convertAttKey)?o=this.attribute(a.substr(this.stringify.convertAttKey.length),u):!this.options.ignoreDecorators&&this.stringify.convertPIKey&&0===a.indexOf(this.stringify.convertPIKey)?o=this.instruction(a.substr(this.stringify.convertPIKey.length),u):f(u)?!this.options.ignoreDecorators&&this.stringify.convertListKey&&0===a.indexOf(this.stringify.convertListKey)&&l(u)?o=this.element(u):(o=this.element(a),o.element(u)):o=this.element(a,u));else o=!this.options.ignoreDecorators&&this.stringify.convertTextKey&&0===e.indexOf(this.stringify.convertTextKey)?this.text(n):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&0===e.indexOf(this.stringify.convertCDataKey)?this.cdata(n):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&0===e.indexOf(this.stringify.convertCommentKey)?this.comment(n):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&0===e.indexOf(this.stringify.convertRawKey)?this.raw(n):this.node(e,t,n);if(null==o)throw new Error("Could not create any elements with: "+e);return o},t.prototype.insertBefore=function(e,t,n){var r,i,a;if(this.isRoot)throw new Error("Cannot insert elements at root level");return i=this.parent.children.indexOf(this),a=this.parent.children.splice(i),r=this.parent.element(e,t,n),Array.prototype.push.apply(this.parent.children,a),r},t.prototype.insertAfter=function(e,t,n){var r,i,a;if(this.isRoot)throw new Error("Cannot insert elements at root level");return i=this.parent.children.indexOf(this),a=this.parent.children.splice(i+1),r=this.parent.element(e,t,n),Array.prototype.push.apply(this.parent.children,a),r},t.prototype.remove=function(){var e,t;if(this.isRoot)throw new Error("Cannot remove the root element");return e=this.parent.children.indexOf(this),[].splice.apply(this.parent.children,[e,e-e+1].concat(t=[])),t,this.parent},t.prototype.node=function(e,t,n){var r,i;return null!=e&&(e=e.valueOf()),null==t&&(t={}),t=t.valueOf(),f(t)||(i=[t,n],n=i[0],t=i[1]),r=new o(this,e,t),null!=n&&r.text(n),this.children.push(r),r},t.prototype.text=function(e){var t;return t=new u(this,e),this.children.push(t),this},t.prototype.cdata=function(e){var t;return t=new n(this,e),this.children.push(t),this},t.prototype.comment=function(e){var t;return t=new r(this,e),this.children.push(t),this},t.prototype.raw=function(e){var t;return t=new c(this,e),this.children.push(t),this},t.prototype.declaration=function(e,t,n){var r,a;return r=this.document(),a=new i(r,e,t,n),r.xmldec=a,r.root()},t.prototype.doctype=function(e,t){var n,r;return n=this.document(),r=new a(n,e,t),n.doctype=r,r},t.prototype.up=function(){if(this.isRoot)throw new Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent},t.prototype.root=function(){var e;if(this.isRoot)return this;for(e=this.parent;!e.isRoot;)e=e.parent;return e},t.prototype.document=function(){return this.root().documentObject},t.prototype.end=function(e){return this.document().toString(e)},t.prototype.prev=function(){var e;if(this.isRoot)throw new Error("Root node has no siblings");if(e=this.parent.children.indexOf(this),e<1)throw new Error("Already at the first node");return this.parent.children[e-1]},t.prototype.next=function(){var e;if(this.isRoot)throw new Error("Root node has no siblings");if(e=this.parent.children.indexOf(this),e===-1||e===this.parent.children.length-1)throw new Error("Already at the last node");return this.parent.children[e+1]},t.prototype.importXMLBuilder=function(e){var t;return t=e.root().clone(),t.parent=this,t.isRoot=!1,this.children.push(t),this},t.prototype.ele=function(e,t,n){return this.element(e,t,n)},t.prototype.nod=function(e,t,n){return this.node(e,t,n)},t.prototype.txt=function(e){return this.text(e)},t.prototype.dat=function(e){return this.cdata(e)},t.prototype.com=function(e){return this.comment(e)},t.prototype.doc=function(){return this.document()},t.prototype.dec=function(e,t,n){return this.declaration(e,t,n)},t.prototype.dtd=function(e,t){return this.doctype(e,t)},t.prototype.e=function(e,t,n){return this.element(e,t,n)},t.prototype.n=function(e,t,n){return this.node(e,t,n)},t.prototype.t=function(e){return this.text(e)},t.prototype.d=function(e){return this.cdata(e)},t.prototype.c=function(e){return this.comment(e)},t.prototype.r=function(e){return this.raw(e)},t.prototype.u=function(){return this.up()},t}()}).call(this)},{"./XMLCData":90,"./XMLComment":91,"./XMLDeclaration":96,"./XMLDocType":97,"./XMLElement":98,"./XMLRaw":101,"./XMLText":103,"lodash/lang/isArray":139,"lodash/lang/isEmpty":140,"lodash/lang/isFunction":141,"lodash/lang/isObject":143}],140:[function(e,t){function n(e){if(null==e)return!0;var t=e.length;return o(t)&&(i(e)||c(e)||r(e)||s(e)&&a(e.splice))?!t:!u(e).length}var r=e("./isArguments"),i=e("./isArray"),a=e("./isFunction"),o=e("../internal/isLength"),s=e("../internal/isObjectLike"),c=e("./isString"),u=e("../object/keys");t.exports=n},{"../internal/isLength":132,"../internal/isObjectLike":133,"../object/keys":148,"./isArguments":138,"./isArray":139,"./isFunction":141,"./isString":144}],144:[function(e,t){function n(e){return"string"==typeof e||r(e)&&o.call(e)==i||!1}var r=e("../internal/isObjectLike"),i="[object String]",a=Object.prototype,o=a.toString;t.exports=n},{"../internal/isObjectLike":133}],103:[function(e,t){(function(){var n,r,i,a=function(e,t){function n(){this.constructor=e}for(var r in t)o.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},o={}.hasOwnProperty;i=e("lodash/object/create"),n=e("./XMLNode"),t.exports=r=function(e){function t(e,n){if(t.__super__.constructor.call(this,e),null==n)throw new Error("Missing element text");this.value=this.stringify.eleText(n)}return a(t,e),t.prototype.clone=function(){return i(t.prototype,this)},t.prototype.toString=function(e,t){var n,r,i,a,o,s,c,u,l;return a=(null!=e?e.pretty:void 0)||!1,n=null!=(s=null!=e?e.indent:void 0)?s:"  ",i=null!=(c=null!=e?e.offset:void 0)?c:0,r=null!=(u=null!=e?e.newline:void 0)?u:"\n",t||(t=0),l=new Array(t+i+1).join(n),o="",a&&(o+=l),o+=this.value,a&&(o+=r),o},t}(n)}).call(this)},{"./XMLNode":99,"lodash/object/create":147}],101:[function(e,t){(function(){var n,r,i,a=function(e,t){function n(){this.constructor=e}for(var r in t)o.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},o={}.hasOwnProperty;i=e("lodash/object/create"),n=e("./XMLNode"),t.exports=r=function(e){function t(e,n){if(t.__super__.constructor.call(this,e),null==n)throw new Error("Missing raw text");this.value=this.stringify.raw(n)}return a(t,e),t.prototype.clone=function(){return i(t.prototype,this)},t.prototype.toString=function(e,t){var n,r,i,a,o,s,c,u,l;return a=(null!=e?e.pretty:void 0)||!1,n=null!=(s=null!=e?e.indent:void 0)?s:"  ",i=null!=(c=null!=e?e.offset:void 0)?c:0,r=null!=(u=null!=e?e.newline:void 0)?u:"\n",t||(t=0),l=new Array(t+i+1).join(n),o="",a&&(o+=l),o+=this.value,a&&(o+=r),o},t}(n)}).call(this)},{"./XMLNode":99,"lodash/object/create":147}],98:[function(e,t){(function(){var n,r,i,a,o,s,c,u,l,d=function(e,t){function n(){this.constructor=e}for(var r in t)h.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},h={}.hasOwnProperty;o=e("lodash/object/create"),l=e("lodash/lang/isObject"),c=e("lodash/lang/isArray"),u=e("lodash/lang/isFunction"),s=e("lodash/collection/every"),i=e("./XMLNode"),n=e("./XMLAttribute"),a=e("./XMLProcessingInstruction"),t.exports=r=function(e){function t(e,n,r){if(t.__super__.constructor.call(this,e),null==n)throw new Error("Missing element name");this.name=this.stringify.eleName(n),this.children=[],this.instructions=[],this.attributes={},null!=r&&this.attribute(r)}return d(t,e),t.prototype.clone=function(){var e,n,r,i,a,s,c,u;r=o(t.prototype,this),r.isRoot&&(r.documentObject=null),r.attributes={},c=this.attributes;for(n in c)h.call(c,n)&&(e=c[n],r.attributes[n]=e.clone());for(r.instructions=[],u=this.instructions,i=0,a=u.length;i<a;i++)s=u[i],r.instructions.push(s.clone());return r.children=[],this.children.forEach(function(e){var t;return t=e.clone(),t.parent=r,r.children.push(t)}),r},t.prototype.attribute=function(e,t){var r,i;if(null!=e&&(e=e.valueOf()),l(e))for(r in e)h.call(e,r)&&(i=e[r],this.attribute(r,i));else u(t)&&(t=t.apply()),this.options.skipNullAttributes&&null==t||(this.attributes[e]=new n(this,e,t));return this},t.prototype.removeAttribute=function(e){var t,n,r;if(null==e)throw new Error("Missing attribute name");if(e=e.valueOf(),c(e))for(n=0,r=e.length;n<r;n++)t=e[n],delete this.attributes[t];else delete this.attributes[e];return this},t.prototype.instruction=function(e,t){var n,r,i,o,s;if(null!=e&&(e=e.valueOf()),null!=t&&(t=t.valueOf()),c(e))for(n=0,s=e.length;n<s;n++)r=e[n],this.instruction(r);else if(l(e))for(r in e)h.call(e,r)&&(i=e[r],this.instruction(r,i));else u(t)&&(t=t.apply()),o=new a(this,e,t),this.instructions.push(o);return this},t.prototype.toString=function(e,t){var n,r,i,a,o,c,u,l,d,f,p,m,g,y,v,b,w,_,E,k;for(m=(null!=e?e.pretty:void 0)||!1,a=null!=(y=null!=e?e.indent:void 0)?y:"  ",p=null!=(v=null!=e?e.offset:void 0)?v:0,f=null!=(b=null!=e?e.newline:void 0)?b:"\n",t||(t=0),k=new Array(t+p+1).join(a),g="",w=this.instructions,i=0,u=w.length;i<u;i++)o=w[i],g+=o.toString(e,t+1);m&&(g+=k),g+="<"+this.name,_=this.attributes;for(d in _)h.call(_,d)&&(n=_[d],g+=n.toString(e));if(0===this.children.length||s(this.children,function(e){return""===e.value}))g+="/>",m&&(g+=f);else if(m&&1===this.children.length&&null!=this.children[0].value)g+=">",g+=this.children[0].value,g+="</"+this.name+">",g+=f;else{for(g+=">",m&&(g+=f),E=this.children,c=0,l=E.length;c<l;c++)r=E[c],g+=r.toString(e,t+1);m&&(g+=k),g+="</"+this.name+">",m&&(g+=f)}return g},t.prototype.att=function(e,t){return this.attribute(e,t)},t.prototype.ins=function(e,t){return this.instruction(e,t)},t.prototype.a=function(e,t){return this.attribute(e,t)},t.prototype.i=function(e,t){return this.instruction(e,t)},t}(i)}).call(this)},{"./XMLAttribute":88,"./XMLNode":99,"./XMLProcessingInstruction":100,"lodash/collection/every":105,"lodash/lang/isArray":139,"lodash/lang/isFunction":141,"lodash/lang/isObject":143,"lodash/object/create":147}],141:[function(e,t){(function(n){var r=e("../internal/baseIsFunction"),i=e("./isNative"),a="[object Function]",o=Object.prototype,s=o.toString,c=i(c=n.Uint8Array)&&c,u=r(/x/)||c&&!r(c)?function(e){return s.call(e)==a}:r;t.exports=u}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../internal/baseIsFunction":117,"./isNative":142}],117:[function(e,t){function n(e){return"function"==typeof e||!1}t.exports=n},{}],105:[function(e,t){function n(e,t,n){var s=o(e)?r:a;return"function"==typeof t&&"undefined"==typeof n||(t=i(t,n,3)),s(e,t)}var r=e("../internal/arrayEvery"),i=e("../internal/baseCallback"),a=e("../internal/baseEvery"),o=e("../lang/isArray");t.exports=n},{"../internal/arrayEvery":106,"../internal/baseCallback":108,"../internal/baseEvery":112,"../lang/isArray":139}],112:[function(e,t){function n(e,t){var n=!0;return r(e,function(e,r,i){return n=!!t(e,r,i)}),n}var r=e("./baseEach");t.exports=n},{"./baseEach":111}],111:[function(e,t){function n(e,t){var n=e?e.length:0;if(!i(n))return r(e,t);for(var o=-1,s=a(e);++o<n&&t(s[o],o,s)!==!1;);return e}var r=e("./baseForOwn"),i=e("./isLength"),a=e("./toObject");t.exports=n},{"./baseForOwn":114,"./isLength":132,"./toObject":137}],114:[function(e,t){function n(e,t){return r(e,t,i)}var r=e("./baseFor"),i=e("../object/keys");t.exports=n},{"../object/keys":148,"./baseFor":113}],113:[function(e,t){function n(e,t,n){for(var i=-1,a=r(e),o=n(e),s=o.length;++i<s;){var c=o[i];if(t(a[c],c,a)===!1)break}return e}var r=e("./toObject");t.exports=n},{"./toObject":137}],137:[function(e,t){function n(e){return r(e)?e:Object(e)}var r=e("../lang/isObject");t.exports=n},{"../lang/isObject":143}],108:[function(e,t){function n(e,t,n){var u=typeof e;return"function"==u?"undefined"!=typeof t&&c(e)?o(e,t,n):e:null==e?s:"object"==u?r(e):"undefined"==typeof t?a(e+""):i(e+"",t)}var r=e("./baseMatches"),i=e("./baseMatchesProperty"),a=e("./baseProperty"),o=e("./bindCallback"),s=e("../utility/identity"),c=e("./isBindable");t.exports=n},{"../utility/identity":152,"./baseMatches":119,"./baseMatchesProperty":120,"./baseProperty":121,"./bindCallback":124,"./isBindable":129}],129:[function(e,t){function n(e){var t=!(a.funcNames?e.name:a.funcDecomp);if(!t){var n=c.call(e);a.funcNames||(t=!o.test(n)),t||(t=s.test(n)||i(e),r(e,t))}return t}var r=e("./baseSetData"),i=e("../lang/isNative"),a=e("../support"),o=/^\s*function[ \n\r\t]+\w/,s=/\bthis\b/,c=Function.prototype.toString;t.exports=n},{"../lang/isNative":142,"../support":151,"./baseSetData":122}],122:[function(e,t){var n=e("../utility/identity"),r=e("./metaMap"),i=r?function(e,t){return r.set(e,t),e}:n;t.exports=i},{"../utility/identity":152,"./metaMap":135}],135:[function(e,t){(function(n){var r=e("../lang/isNative"),i=r(i=n.WeakMap)&&i,a=i&&new i;t.exports=a}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../lang/isNative":142}],124:[function(e,t){function n(e,t,n){if("function"!=typeof e)return r;if("undefined"==typeof t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,a){return e.call(t,n,r,i,a)};case 5:return function(n,r,i,a,o){return e.call(t,n,r,i,a,o)}}return function(){return e.apply(t,arguments)}}var r=e("../utility/identity");t.exports=n},{"../utility/identity":152}],152:[function(e,t){function n(e){return e}t.exports=n},{}],121:[function(e,t){function n(e){return function(t){return null==t?void 0:t[e]}}t.exports=n},{}],120:[function(e,t){function n(e,t){return i(t)?function(n){return null!=n&&n[e]===t}:function(n){return null!=n&&r(t,n[e],null,!0)}}var r=e("./baseIsEqual"),i=e("./isStrictComparable");t.exports=n},{"./baseIsEqual":115,"./isStrictComparable":134}],119:[function(e,t){function n(e){var t=a(e),n=t.length;if(1==n){var o=t[0],c=e[o];if(i(c))return function(e){return null!=e&&e[o]===c&&s.call(e,o)}}for(var u=Array(n),l=Array(n);n--;)c=e[t[n]],u[n]=c,l[n]=i(c);return function(e){return r(e,t,u,l)}}var r=e("./baseIsMatch"),i=e("./isStrictComparable"),a=e("../object/keys"),o=Object.prototype,s=o.hasOwnProperty;t.exports=n},{"../object/keys":148,"./baseIsMatch":118,"./isStrictComparable":134}],134:[function(e,t){function n(e){return e===e&&(0===e?1/e>0:!r(e))}var r=e("../lang/isObject");t.exports=n},{"../lang/isObject":143}],118:[function(e,t){function n(e,t,n,i,o){var s=t.length;if(null==e)return!s;for(var c=-1,u=!o;++c<s;)if(u&&i[c]?n[c]!==e[t[c]]:!a.call(e,t[c]))return!1;for(c=-1;++c<s;){var l=t[c];if(u&&i[c])var d=a.call(e,l);else{var h=e[l],f=n[c];d=o?o(h,f,l):void 0,"undefined"==typeof d&&(d=r(f,h,o,!0))}if(!d)return!1}return!0}var r=e("./baseIsEqual"),i=Object.prototype,a=i.hasOwnProperty;t.exports=n},{"./baseIsEqual":115}],115:[function(e,t){function n(e,t,i,a,o,s){if(e===t)return 0!==e||1/e==1/t;var c=typeof e,u=typeof t;return"function"!=c&&"object"!=c&&"function"!=u&&"object"!=u||null==e||null==t?e!==e&&t!==t:r(e,t,n,i,a,o,s)}var r=e("./baseIsEqualDeep");t.exports=n},{"./baseIsEqualDeep":116}],116:[function(e,t){function n(e,t,n,d,p,m,g){var y=o(e),v=o(t),b=u,w=u;y||(b=f.call(e),b==c?b=l:b!=l&&(y=s(e))),v||(w=f.call(t),w==c?w=l:w!=l&&(v=s(t)));var _=b==l,E=w==l,k=b==w;if(k&&!y&&!_)return i(e,t,b);var A=_&&h.call(e,"__wrapped__"),S=E&&h.call(t,"__wrapped__");if(A||S)return n(A?e.value():e,S?t.value():t,d,p,m,g);if(!k)return!1;m||(m=[]),g||(g=[]);for(var T=m.length;T--;)if(m[T]==e)return g[T]==t;m.push(e),g.push(t);var I=(y?r:a)(e,t,n,d,p,m,g);return m.pop(),g.pop(),I}var r=e("./equalArrays"),i=e("./equalByTag"),a=e("./equalObjects"),o=e("../lang/isArray"),s=e("../lang/isTypedArray"),c="[object Arguments]",u="[object Array]",l="[object Object]",d=Object.prototype,h=d.hasOwnProperty,f=d.toString;t.exports=n},{"../lang/isArray":139,"../lang/isTypedArray":145,"./equalArrays":126,"./equalByTag":127,"./equalObjects":128}],145:[function(e,t){function n(e){return i(e)&&r(e.length)&&C[D.call(e)]||!1}var r=e("../internal/isLength"),i=e("../internal/isObjectLike"),a="[object Arguments]",o="[object Array]",s="[object Boolean]",c="[object Date]",u="[object Error]",l="[object Function]",d="[object Map]",h="[object Number]",f="[object Object]",p="[object RegExp]",m="[object Set]",g="[object String]",y="[object WeakMap]",v="[object ArrayBuffer]",b="[object Float32Array]",w="[object Float64Array]",_="[object Int8Array]",E="[object Int16Array]",k="[object Int32Array]",A="[object Uint8Array]",S="[object Uint8ClampedArray]",T="[object Uint16Array]",I="[object Uint32Array]",C={};C[b]=C[w]=C[_]=C[E]=C[k]=C[A]=C[S]=C[T]=C[I]=!0,C[a]=C[o]=C[v]=C[s]=C[c]=C[u]=C[l]=C[d]=C[h]=C[f]=C[p]=C[m]=C[g]=C[y]=!1;var N=Object.prototype,D=N.toString;t.exports=n},{"../internal/isLength":132,"../internal/isObjectLike":133}],128:[function(e,t){function n(e,t,n,i,o,s,c){var u=r(e),l=u.length,d=r(t),h=d.length;if(l!=h&&!o)return!1;for(var f,p=-1;++p<l;){var m=u[p],g=a.call(t,m);if(g){var y=e[m],v=t[m];g=void 0,i&&(g=o?i(v,y,m):i(y,v,m)),"undefined"==typeof g&&(g=y&&y===v||n(y,v,i,o,s,c))}if(!g)return!1;f||(f="constructor"==m)}if(!f){var b=e.constructor,w=t.constructor;if(b!=w&&"constructor"in e&&"constructor"in t&&!("function"==typeof b&&b instanceof b&&"function"==typeof w&&w instanceof w))return!1}return!0}var r=e("../object/keys"),i=Object.prototype,a=i.hasOwnProperty;t.exports=n},{"../object/keys":148}],127:[function(e,t){function n(e,t,n){switch(n){case r:case i:return+e==+t;case a:return e.name==t.name&&e.message==t.message;case o:return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case s:case c:return e==t+""}return!1}var r="[object Boolean]",i="[object Date]",a="[object Error]",o="[object Number]",s="[object RegExp]",c="[object String]";t.exports=n},{}],126:[function(e,t){function n(e,t,n,r,i,a,o){var s=-1,c=e.length,u=t.length,l=!0;if(c!=u&&!(i&&u>c))return!1;for(;l&&++s<c;){var d=e[s],h=t[s];if(l=void 0,r&&(l=i?r(h,d,s):r(d,h,s)),"undefined"==typeof l)if(i)for(var f=u;f--&&(h=t[f],!(l=d&&d===h||n(d,h,r,i,a,o))););else l=d&&d===h||n(d,h,r,i,a,o)}return!!l}t.exports=n},{}],106:[function(e,t){function n(e,t){for(var n=-1,r=e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}t.exports=n},{}],88:[function(e,t){(function(){var n,r;r=e("lodash/object/create"),t.exports=n=function(){function e(e,t,n){if(this.stringify=e.stringify,null==t)throw new Error("Missing attribute name of element "+e.name);if(null==n)throw new Error("Missing attribute value for attribute "+t+" of element "+e.name);this.name=this.stringify.attName(t),this.value=this.stringify.attValue(n)}return e.prototype.clone=function(){return r(e.prototype,this)},e.prototype.toString=function(){return" "+this.name+'="'+this.value+'"'},e}()}).call(this)},{"lodash/object/create":147}],97:[function(e,t){(function(){var n,r,i,a,o,s,c,u,l,d;l=e("lodash/object/create"),d=e("lodash/lang/isObject"),n=e("./XMLCData"),r=e("./XMLComment"),i=e("./XMLDTDAttList"),o=e("./XMLDTDEntity"),a=e("./XMLDTDElement"),s=e("./XMLDTDNotation"),u=e("./XMLProcessingInstruction"),t.exports=c=function(){function e(e,t,n){var r,i;this.documentObject=e,this.stringify=this.documentObject.stringify,this.children=[],d(t)&&(r=t,t=r.pubID,n=r.sysID),null==n&&(i=[t,n],n=i[0],t=i[1]),null!=t&&(this.pubID=this.stringify.dtdPubID(t)),null!=n&&(this.sysID=this.stringify.dtdSysID(n))}return e.prototype.clone=function(){return l(e.prototype,this)},e.prototype.element=function(e,t){var n;return n=new a(this,e,t),this.children.push(n),this},e.prototype.attList=function(e,t,n,r,a){var o;return o=new i(this,e,t,n,r,a),this.children.push(o),this},e.prototype.entity=function(e,t){var n;return n=new o(this,!1,e,t),this.children.push(n),this},e.prototype.pEntity=function(e,t){var n;return n=new o(this,!0,e,t),this.children.push(n),this},e.prototype.notation=function(e,t){var n;return n=new s(this,e,t),this.children.push(n),this},e.prototype.cdata=function(e){var t;return t=new n(this,e),this.children.push(t),this},e.prototype.comment=function(e){var t;return t=new r(this,e),this.children.push(t),this},e.prototype.instruction=function(e,t){var n;return n=new u(this,e,t),this.children.push(n),this},e.prototype.root=function(){return this.documentObject.root()},e.prototype.document=function(){return this.documentObject},e.prototype.toString=function(e,t){var n,r,i,a,o,s,c,u,l,d,h,f,p;if(c=(null!=e?e.pretty:void 0)||!1,i=null!=(l=null!=e?e.indent:void 0)?l:"  ",s=null!=(d=null!=e?e.offset:void 0)?d:0,o=null!=(h=null!=e?e.newline:void 0)?h:"\n",t||(t=0),p=new Array(t+s+1).join(i),u="",c&&(u+=p),u+="<!DOCTYPE "+this.root().name,this.pubID&&this.sysID?u+=' PUBLIC "'+this.pubID+'" "'+this.sysID+'"':this.sysID&&(u+=' SYSTEM "'+this.sysID+'"'),this.children.length>0){for(u+=" [",c&&(u+=o),f=this.children,r=0,a=f.length;r<a;r++)n=f[r],u+=n.toString(e,t+1);u+="]"}return u+=">",c&&(u+=o),u},e.prototype.ele=function(e,t){return this.element(e,t)},e.prototype.att=function(e,t,n,r,i){return this.attList(e,t,n,r,i)},e.prototype.ent=function(e,t){return this.entity(e,t)},e.prototype.pent=function(e,t){return this.pEntity(e,t)},e.prototype.not=function(e,t){return this.notation(e,t)},e.prototype.dat=function(e){return this.cdata(e)},e.prototype.com=function(e){return this.comment(e)},e.prototype.ins=function(e,t){return this.instruction(e,t)},e.prototype.up=function(){return this.root()},e.prototype.doc=function(){return this.document()},e}()}).call(this)},{"./XMLCData":90,"./XMLComment":91,"./XMLDTDAttList":92,"./XMLDTDElement":93,"./XMLDTDEntity":94,"./XMLDTDNotation":95,"./XMLProcessingInstruction":100,"lodash/lang/isObject":143,"lodash/object/create":147}],100:[function(e,t){(function(){var n,r;r=e("lodash/object/create"),t.exports=n=function(){function e(e,t,n){if(this.stringify=e.stringify,
null==t)throw new Error("Missing instruction target");this.target=this.stringify.insTarget(t),n&&(this.value=this.stringify.insValue(n))}return e.prototype.clone=function(){return r(e.prototype,this)},e.prototype.toString=function(e,t){var n,r,i,a,o,s,c,u,l;return a=(null!=e?e.pretty:void 0)||!1,n=null!=(s=null!=e?e.indent:void 0)?s:"  ",i=null!=(c=null!=e?e.offset:void 0)?c:0,r=null!=(u=null!=e?e.newline:void 0)?u:"\n",t||(t=0),l=new Array(t+i+1).join(n),o="",a&&(o+=l),o+="<?",o+=this.target,this.value&&(o+=" "+this.value),o+="?>",a&&(o+=r),o},e}()}).call(this)},{"lodash/object/create":147}],95:[function(e,t){(function(){var n,r;r=e("lodash/object/create"),t.exports=n=function(){function e(e,t,n){if(this.stringify=e.stringify,null==t)throw new Error("Missing notation name");if(!n.pubID&&!n.sysID)throw new Error("Public or system identifiers are required for an external entity");this.name=this.stringify.eleName(t),null!=n.pubID&&(this.pubID=this.stringify.dtdPubID(n.pubID)),null!=n.sysID&&(this.sysID=this.stringify.dtdSysID(n.sysID))}return e.prototype.clone=function(){return r(e.prototype,this)},e.prototype.toString=function(e,t){var n,r,i,a,o,s,c,u,l;return a=(null!=e?e.pretty:void 0)||!1,n=null!=(s=null!=e?e.indent:void 0)?s:"  ",i=null!=(c=null!=e?e.offset:void 0)?c:0,r=null!=(u=null!=e?e.newline:void 0)?u:"\n",t||(t=0),l=new Array(t+i+1).join(n),o="",a&&(o+=l),o+="<!NOTATION "+this.name,this.pubID&&this.sysID?o+=' PUBLIC "'+this.pubID+'" "'+this.sysID+'"':this.pubID?o+=' PUBLIC "'+this.pubID+'"':this.sysID&&(o+=' SYSTEM "'+this.sysID+'"'),o+=">",a&&(o+=r),o},e}()}).call(this)},{"lodash/object/create":147}],94:[function(e,t){(function(){var n,r,i;r=e("lodash/object/create"),i=e("lodash/lang/isObject"),t.exports=n=function(){function e(e,t,n,r){if(this.stringify=e.stringify,null==n)throw new Error("Missing entity name");if(null==r)throw new Error("Missing entity value");if(this.pe=!!t,this.name=this.stringify.eleName(n),i(r)){if(!r.pubID&&!r.sysID)throw new Error("Public and/or system identifiers are required for an external entity");if(r.pubID&&!r.sysID)throw new Error("System identifier is required for a public external entity");if(null!=r.pubID&&(this.pubID=this.stringify.dtdPubID(r.pubID)),null!=r.sysID&&(this.sysID=this.stringify.dtdSysID(r.sysID)),null!=r.nData&&(this.nData=this.stringify.dtdNData(r.nData)),this.pe&&this.nData)throw new Error("Notation declaration is not allowed in a parameter entity")}else this.value=this.stringify.dtdEntityValue(r)}return e.prototype.clone=function(){return r(e.prototype,this)},e.prototype.toString=function(e,t){var n,r,i,a,o,s,c,u,l;return a=(null!=e?e.pretty:void 0)||!1,n=null!=(s=null!=e?e.indent:void 0)?s:"  ",i=null!=(c=null!=e?e.offset:void 0)?c:0,r=null!=(u=null!=e?e.newline:void 0)?u:"\n",t||(t=0),l=new Array(t+i+1).join(n),o="",a&&(o+=l),o+="<!ENTITY",this.pe&&(o+=" %"),o+=" "+this.name,this.value?o+=' "'+this.value+'"':(this.pubID&&this.sysID?o+=' PUBLIC "'+this.pubID+'" "'+this.sysID+'"':this.sysID&&(o+=' SYSTEM "'+this.sysID+'"'),this.nData&&(o+=" NDATA "+this.nData)),o+=">",a&&(o+=r),o},e}()}).call(this)},{"lodash/lang/isObject":143,"lodash/object/create":147}],93:[function(e,t){(function(){var n,r,i;r=e("lodash/object/create"),i=e("lodash/lang/isArray"),t.exports=n=function(){function e(e,t,n){if(this.stringify=e.stringify,null==t)throw new Error("Missing DTD element name");n||(n="(#PCDATA)"),i(n)&&(n="("+n.join(",")+")"),this.name=this.stringify.eleName(t),this.value=this.stringify.dtdElementValue(n)}return e.prototype.clone=function(){return r(e.prototype,this)},e.prototype.toString=function(e,t){var n,r,i,a,o,s,c,u,l;return a=(null!=e?e.pretty:void 0)||!1,n=null!=(s=null!=e?e.indent:void 0)?s:"  ",i=null!=(c=null!=e?e.offset:void 0)?c:0,r=null!=(u=null!=e?e.newline:void 0)?u:"\n",t||(t=0),l=new Array(t+i+1).join(n),o="",a&&(o+=l),o+="<!ELEMENT "+this.name+" "+this.value+">",a&&(o+=r),o},e}()}).call(this)},{"lodash/lang/isArray":139,"lodash/object/create":147}],92:[function(e,t){(function(){var n,r;r=e("lodash/object/create"),t.exports=n=function(){function e(e,t,n,r,i,a){if(this.stringify=e.stringify,null==t)throw new Error("Missing DTD element name");if(null==n)throw new Error("Missing DTD attribute name");if(!r)throw new Error("Missing DTD attribute type");if(!i)throw new Error("Missing DTD attribute default");if(0!==i.indexOf("#")&&(i="#"+i),!i.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT");if(a&&!i.match(/^(#FIXED|#DEFAULT)$/))throw new Error("Default value only applies to #FIXED or #DEFAULT");this.elementName=this.stringify.eleName(t),this.attributeName=this.stringify.attName(n),this.attributeType=this.stringify.dtdAttType(r),this.defaultValue=this.stringify.dtdAttDefault(a),this.defaultValueType=i}return e.prototype.clone=function(){return r(e.prototype,this)},e.prototype.toString=function(e,t){var n,r,i,a,o,s,c,u,l;return a=(null!=e?e.pretty:void 0)||!1,n=null!=(s=null!=e?e.indent:void 0)?s:"  ",i=null!=(c=null!=e?e.offset:void 0)?c:0,r=null!=(u=null!=e?e.newline:void 0)?u:"\n",t||(t=0),l=new Array(t+i+1).join(n),o="",a&&(o+=l),o+="<!ATTLIST "+this.elementName+" "+this.attributeName+" "+this.attributeType,"#DEFAULT"!==this.defaultValueType&&(o+=" "+this.defaultValueType),this.defaultValue&&(o+=' "'+this.defaultValue+'"'),o+=">",a&&(o+=r),o},e}()}).call(this)},{"lodash/object/create":147}],91:[function(e,t){(function(){var n,r,i,a=function(e,t){function n(){this.constructor=e}for(var r in t)o.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},o={}.hasOwnProperty;i=e("lodash/object/create"),r=e("./XMLNode"),t.exports=n=function(e){function t(e,n){if(t.__super__.constructor.call(this,e),null==n)throw new Error("Missing comment text");this.text=this.stringify.comment(n)}return a(t,e),t.prototype.clone=function(){return i(t.prototype,this)},t.prototype.toString=function(e,t){var n,r,i,a,o,s,c,u,l;return a=(null!=e?e.pretty:void 0)||!1,n=null!=(s=null!=e?e.indent:void 0)?s:"  ",i=null!=(c=null!=e?e.offset:void 0)?c:0,r=null!=(u=null!=e?e.newline:void 0)?u:"\n",t||(t=0),l=new Array(t+i+1).join(n),o="",a&&(o+=l),o+="<!-- "+this.text+" -->",a&&(o+=r),o},t}(r)}).call(this)},{"./XMLNode":99,"lodash/object/create":147}],90:[function(e,t){(function(){var n,r,i,a=function(e,t){function n(){this.constructor=e}for(var r in t)o.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},o={}.hasOwnProperty;i=e("lodash/object/create"),r=e("./XMLNode"),t.exports=n=function(e){function t(e,n){if(t.__super__.constructor.call(this,e),null==n)throw new Error("Missing CDATA text");this.text=this.stringify.cdata(n)}return a(t,e),t.prototype.clone=function(){return i(t.prototype,this)},t.prototype.toString=function(e,t){var n,r,i,a,o,s,c,u,l;return a=(null!=e?e.pretty:void 0)||!1,n=null!=(s=null!=e?e.indent:void 0)?s:"  ",i=null!=(c=null!=e?e.offset:void 0)?c:0,r=null!=(u=null!=e?e.newline:void 0)?u:"\n",t||(t=0),l=new Array(t+i+1).join(n),o="",a&&(o+=l),o+="<![CDATA["+this.text+"]]>",a&&(o+=r),o},t}(r)}).call(this)},{"./XMLNode":99,"lodash/object/create":147}],147:[function(e,t){function n(e,t,n){var s=i(e);return n&&a(e,t,n)&&(t=null),t?r(t,s,o(t)):s}var r=e("../internal/baseCopy"),i=e("../internal/baseCreate"),a=e("../internal/isIterateeCall"),o=e("./keys");t.exports=n},{"../internal/baseCopy":109,"../internal/baseCreate":110,"../internal/isIterateeCall":131,"./keys":148}],148:[function(e,t){var n=e("../internal/isLength"),r=e("../lang/isNative"),i=e("../lang/isObject"),a=e("../internal/shimKeys"),o=r(o=Object.keys)&&o,s=o?function(e){if(e)var t=e.constructor,r=e.length;return"function"==typeof t&&t.prototype===e||"function"!=typeof e&&r&&n(r)?a(e):i(e)?o(e):[]}:a;t.exports=s},{"../internal/isLength":132,"../internal/shimKeys":136,"../lang/isNative":142,"../lang/isObject":143}],136:[function(e,t){function n(e){for(var t=s(e),n=t.length,u=n&&e.length,d=u&&o(u)&&(i(e)||c.nonEnumArgs&&r(e)),h=-1,f=[];++h<n;){var p=t[h];(d&&a(p,u)||l.call(e,p))&&f.push(p)}return f}var r=e("../lang/isArguments"),i=e("../lang/isArray"),a=e("./isIndex"),o=e("./isLength"),s=e("../object/keysIn"),c=e("../support"),u=Object.prototype,l=u.hasOwnProperty;t.exports=n},{"../lang/isArguments":138,"../lang/isArray":139,"../object/keysIn":149,"../support":151,"./isIndex":130,"./isLength":132}],149:[function(e,t){function n(e){if(null==e)return[];s(e)||(e=Object(e));var t=e.length;t=t&&o(t)&&(i(e)||c.nonEnumArgs&&r(e))&&t||0;for(var n=e.constructor,u=-1,d="function"==typeof n&&n.prototype===e,h=Array(t),f=t>0;++u<t;)h[u]=u+"";for(var p in e)f&&a(p,t)||"constructor"==p&&(d||!l.call(e,p))||h.push(p);return h}var r=e("../lang/isArguments"),i=e("../lang/isArray"),a=e("../internal/isIndex"),o=e("../internal/isLength"),s=e("../lang/isObject"),c=e("../support"),u=Object.prototype,l=u.hasOwnProperty;t.exports=n},{"../internal/isIndex":130,"../internal/isLength":132,"../lang/isArguments":138,"../lang/isArray":139,"../lang/isObject":143,"../support":151}],151:[function(e,t){(function(n){var r=e("./lang/isNative"),i=/\bthis\b/,a=Object.prototype,o=(o=n.window)&&o.document,s=a.propertyIsEnumerable,c={};!function(){c.funcDecomp=!r(n.WinRTError)&&i.test(function(){return this}),c.funcNames="string"==typeof Function.name;try{c.dom=11===o.createDocumentFragment().nodeType}catch(e){c.dom=!1}try{c.nonEnumArgs=!s.call(arguments,1)}catch(e){c.nonEnumArgs=!0}}(0,0),t.exports=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./lang/isNative":142}],139:[function(e,t){var n=e("../internal/isLength"),r=e("./isNative"),i=e("../internal/isObjectLike"),a="[object Array]",o=Object.prototype,s=o.toString,c=r(c=Array.isArray)&&c,u=c||function(e){return i(e)&&n(e.length)&&s.call(e)==a||!1};t.exports=u},{"../internal/isLength":132,"../internal/isObjectLike":133,"./isNative":142}],142:[function(e,t){function n(e){return null!=e&&(u.call(e)==a?l.test(c.call(e)):i(e)&&o.test(e)||!1)}var r=e("../string/escapeRegExp"),i=e("../internal/isObjectLike"),a="[object Function]",o=/^\[object .+?Constructor\]$/,s=Object.prototype,c=Function.prototype.toString,u=s.toString,l=RegExp("^"+r(u).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=n},{"../internal/isObjectLike":133,"../string/escapeRegExp":150}],150:[function(e,t){function n(e){return e=r(e),e&&a.test(e)?e.replace(i,"\\$&"):e}var r=e("../internal/baseToString"),i=/[.*+?^${}()|[\]\/\\]/g,a=RegExp(i.source);t.exports=n},{"../internal/baseToString":123}],123:[function(e,t){function n(e){return"string"==typeof e?e:null==e?"":e+""}t.exports=n},{}],138:[function(e,t){function n(e){var t=i(e)?e.length:void 0;return r(t)&&s.call(e)==a||!1}var r=e("../internal/isLength"),i=e("../internal/isObjectLike"),a="[object Arguments]",o=Object.prototype,s=o.toString;t.exports=n},{"../internal/isLength":132,"../internal/isObjectLike":133}],133:[function(e,t){function n(e){return e&&"object"==typeof e||!1}t.exports=n},{}],131:[function(e,t){function n(e,t,n){if(!a(n))return!1;var o=typeof t;if("number"==o)var s=n.length,c=i(s)&&r(t,s);else c="string"==o&&t in n;if(c){var u=n[t];return e===e?e===u:u!==u}return!1}var r=e("./isIndex"),i=e("./isLength"),a=e("../lang/isObject");t.exports=n},{"../lang/isObject":143,"./isIndex":130,"./isLength":132}],132:[function(e,t){function n(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}var r=Math.pow(2,53)-1;t.exports=n},{}],130:[function(e,t){function n(e,t){return e=+e,t=null==t?r:t,e>-1&&e%1==0&&e<t}var r=Math.pow(2,53)-1;t.exports=n},{}],110:[function(e,t){(function(n){var r=e("../lang/isObject"),i=function(){function e(){}return function(t){if(r(t)){e.prototype=t;var i=new e;e.prototype=null}return i||n.Object()}}();t.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../lang/isObject":143}],143:[function(e,t){function n(e){var t=typeof e;return"function"==t||e&&"object"==t||!1}t.exports=n},{}],109:[function(e,t){function n(e,t,n){n||(n=t,t={});for(var r=-1,i=n.length;++r<i;){var a=n[r];t[a]=e[a]}return t}t.exports=n},{}],77:[function(e){var t=e("../core"),n=t.util.inherit;t.Signers.RequestSigner=n({constructor:function(e){this.request=e}}),t.Signers.RequestSigner.getVersion=function(e){switch(e){case"v2":return t.Signers.V2;case"v3":return t.Signers.V3;case"v4":return t.Signers.V4;case"s3":return t.Signers.S3;case"v3https":return t.Signers.V3Https}throw new Error("Unknown signing version "+e)},e("./v2"),e("./v3"),e("./v3https"),e("./v4"),e("./s3"),e("./presign")},{"../core":24,"./presign":76,"./s3":78,"./v2":79,"./v3":80,"./v3https":81,"./v4":82}],82:[function(e,t){var n=e("../core"),r=n.util.inherit,i={},a="presigned-expires";n.Signers.V4=r(n.Signers.RequestSigner,{constructor:function(e,t,r){n.Signers.RequestSigner.call(this,e),this.serviceName=t,this.signatureCache=r},algorithm:"AWS4-HMAC-SHA256",addAuthorization:function(e,t){var r=n.util.date.iso8601(t).replace(/[:\-]|\.\d{3}/g,"");this.isPresigned()?this.updateForPresigned(e,r):this.addHeaders(e,r),this.request.headers.Authorization=this.authorization(e,r)},addHeaders:function(e,t){this.request.headers["X-Amz-Date"]=t,e.sessionToken&&(this.request.headers["x-amz-security-token"]=e.sessionToken)},updateForPresigned:function(e,t){var r=this.credentialString(t),i={"X-Amz-Date":t,"X-Amz-Algorithm":this.algorithm,"X-Amz-Credential":e.accessKeyId+"/"+r,"X-Amz-Expires":this.request.headers[a],"X-Amz-SignedHeaders":this.signedHeaders()};e.sessionToken&&(i["X-Amz-Security-Token"]=e.sessionToken),this.request.headers["Content-Type"]&&(i["Content-Type"]=this.request.headers["Content-Type"]),this.request.headers["Content-MD5"]&&(i["Content-MD5"]=this.request.headers["Content-MD5"]),this.request.headers["Cache-Control"]&&(i["Cache-Control"]=this.request.headers["Cache-Control"]),n.util.each.call(this,this.request.headers,function(e,t){e!==a&&this.isSignableHeader(e)&&0===e.toLowerCase().indexOf("x-amz-")&&(i[e]=t)});var o=this.request.path.indexOf("?")>=0?"&":"?";this.request.path+=o+n.util.queryParamsToString(i)},authorization:function(e,t){var n=[],r=this.credentialString(t);return n.push(this.algorithm+" Credential="+e.accessKeyId+"/"+r),n.push("SignedHeaders="+this.signedHeaders()),n.push("Signature="+this.signature(e,t)),n.join(", ")},signature:function(e,t){var r=null;if(this.signatureCache)var r=i[this.serviceName];var a=t.substr(0,8);if(!r||r.akid!==e.accessKeyId||r.region!==this.request.region||r.date!==a){var o=e.secretAccessKey,s=n.util.crypto.hmac("AWS4"+o,a,"buffer"),c=n.util.crypto.hmac(s,this.request.region,"buffer"),u=n.util.crypto.hmac(c,this.serviceName,"buffer"),l=n.util.crypto.hmac(u,"aws4_request","buffer");if(!this.signatureCache)return n.util.crypto.hmac(l,this.stringToSign(t),"hex");i[this.serviceName]={region:this.request.region,date:a,key:l,akid:e.accessKeyId}}var d=i[this.serviceName].key;return n.util.crypto.hmac(d,this.stringToSign(t),"hex")},stringToSign:function(e){var t=[];return t.push("AWS4-HMAC-SHA256"),t.push(e),t.push(this.credentialString(e)),t.push(this.hexEncodedHash(this.canonicalString())),t.join("\n")},canonicalString:function(){var e=[],t=this.request.pathname();return"s3"!==this.serviceName&&(t=n.util.uriEscapePath(t)),e.push(this.request.method),e.push(t),e.push(this.request.search()),e.push(this.canonicalHeaders()+"\n"),e.push(this.signedHeaders()),e.push(this.hexEncodedBodyHash()),e.join("\n")},canonicalHeaders:function(){var e=[];n.util.each.call(this,this.request.headers,function(t,n){e.push([t,n])}),e.sort(function(e,t){return e[0].toLowerCase()<t[0].toLowerCase()?-1:1});var t=[];return n.util.arrayEach.call(this,e,function(e){var n=e[0].toLowerCase();this.isSignableHeader(n)&&t.push(n+":"+this.canonicalHeaderValues(e[1].toString()))}),t.join("\n")},canonicalHeaderValues:function(e){return e.replace(/\s+/g," ").replace(/^\s+|\s+$/g,"")},signedHeaders:function(){var e=[];return n.util.each.call(this,this.request.headers,function(t){t=t.toLowerCase(),this.isSignableHeader(t)&&e.push(t)}),e.sort().join(";")},credentialString:function(e){var t=[];return t.push(e.substr(0,8)),t.push(this.request.region),t.push(this.serviceName),t.push("aws4_request"),t.join("/")},hexEncodedHash:function(e){return n.util.crypto.sha256(e,"hex")},hexEncodedBodyHash:function(){return this.isPresigned()&&"s3"===this.serviceName&&!this.request.body?"UNSIGNED-PAYLOAD":this.request.headers["X-Amz-Content-Sha256"]?this.request.headers["X-Amz-Content-Sha256"]:this.hexEncodedHash(this.request.body||"")},unsignableHeaders:["authorization","content-type","content-length","user-agent",a,"expect"],isSignableHeader:function(e){return 0===e.toLowerCase().indexOf("x-amz-")||this.unsignableHeaders.indexOf(e)<0},isPresigned:function(){return!!this.request.headers[a]}}),t.exports=n.Signers.V4},{"../core":24}],81:[function(e,t){var n=e("../core"),r=n.util.inherit;e("./v3"),n.Signers.V3Https=r(n.Signers.V3,{authorization:function(e){return"AWS3-HTTPS AWSAccessKeyId="+e.accessKeyId+",Algorithm=HmacSHA256,Signature="+this.signature(e)},stringToSign:function(){return this.request.headers["X-Amz-Date"]}}),t.exports=n.Signers.V3Https},{"../core":24,"./v3":80}],80:[function(e,t){var n=e("../core"),r=n.util.inherit;n.Signers.V3=r(n.Signers.RequestSigner,{addAuthorization:function(e,t){var r=n.util.date.rfc822(t);this.request.headers["X-Amz-Date"]=r,e.sessionToken&&(this.request.headers["x-amz-security-token"]=e.sessionToken),this.request.headers["X-Amzn-Authorization"]=this.authorization(e,r)},authorization:function(e){return"AWS3 AWSAccessKeyId="+e.accessKeyId+",Algorithm=HmacSHA256,SignedHeaders="+this.signedHeaders()+",Signature="+this.signature(e)},signedHeaders:function(){var e=[];return n.util.arrayEach(this.headersToSign(),function(t){e.push(t.toLowerCase())}),e.sort().join(";")},canonicalHeaders:function(){var e=this.request.headers,t=[];return n.util.arrayEach(this.headersToSign(),function(n){t.push(n.toLowerCase().trim()+":"+String(e[n]).trim())}),t.sort().join("\n")+"\n"},headersToSign:function(){var e=[];return n.util.each(this.request.headers,function(t){("Host"===t||"Content-Encoding"===t||t.match(/^X-Amz/i))&&e.push(t)}),e},signature:function(e){return n.util.crypto.hmac(e.secretAccessKey,this.stringToSign(),"base64")},stringToSign:function(){var e=[];return e.push(this.request.method),e.push("/"),e.push(""),e.push(this.canonicalHeaders()),e.push(this.request.body),n.util.crypto.sha256(e.join("\n"))}}),t.exports=n.Signers.V3},{"../core":24}],79:[function(e,t){var n=e("../core"),r=n.util.inherit;n.Signers.V2=r(n.Signers.RequestSigner,{addAuthorization:function(e,t){t||(t=n.util.date.getDate());var r=this.request;r.params.Timestamp=n.util.date.iso8601(t),r.params.SignatureVersion="2",r.params.SignatureMethod="HmacSHA256",r.params.AWSAccessKeyId=e.accessKeyId,e.sessionToken&&(r.params.SecurityToken=e.sessionToken),delete r.params.Signature,r.params.Signature=this.signature(e),r.body=n.util.queryParamsToString(r.params),r.headers["Content-Length"]=r.body.length},signature:function(e){return n.util.crypto.hmac(e.secretAccessKey,this.stringToSign(),"base64")},stringToSign:function(){var e=[];return e.push(this.request.method),e.push(this.request.endpoint.host.toLowerCase()),e.push(this.request.pathname()),e.push(n.util.queryParamsToString(this.request.params)),e.join("\n")}}),t.exports=n.Signers.V2},{"../core":24}],78:[function(e,t){var n=e("../core"),r=n.util.inherit;n.Signers.S3=r(n.Signers.RequestSigner,{subResources:{acl:1,accelerate:1,cors:1,lifecycle:1,"delete":1,location:1,logging:1,notification:1,partNumber:1,policy:1,requestPayment:1,replication:1,restore:1,tagging:1,torrent:1,uploadId:1,uploads:1,versionId:1,versioning:1,versions:1,website:1},responseHeaders:{"response-content-type":1,"response-content-language":1,"response-expires":1,"response-cache-control":1,"response-content-disposition":1,"response-content-encoding":1},addAuthorization:function(e,t){this.request.headers["presigned-expires"]||(this.request.headers["X-Amz-Date"]=n.util.date.rfc822(t)),e.sessionToken&&(this.request.headers["x-amz-security-token"]=e.sessionToken);var r=this.sign(e.secretAccessKey,this.stringToSign()),i="AWS "+e.accessKeyId+":"+r;this.request.headers.Authorization=i},stringToSign:function(){var e=this.request,t=[];t.push(e.method),t.push(e.headers["Content-MD5"]||""),t.push(e.headers["Content-Type"]||""),t.push(e.headers["presigned-expires"]||"");var n=this.canonicalizedAmzHeaders();return n&&t.push(n),t.push(this.canonicalizedResource()),t.join("\n")},canonicalizedAmzHeaders:function(){var e=[];n.util.each(this.request.headers,function(t){t.match(/^x-amz-/i)&&e.push(t)}),e.sort(function(e,t){return e.toLowerCase()<t.toLowerCase()?-1:1});var t=[];return n.util.arrayEach.call(this,e,function(e){t.push(e.toLowerCase()+":"+String(this.request.headers[e]))}),t.join("\n")},canonicalizedResource:function(){var e=this.request,t=e.path.split("?"),r=t[0],i=t[1],a="";if(e.virtualHostedBucket&&(a+="/"+e.virtualHostedBucket),a+=r,i){var o=[];n.util.arrayEach.call(this,i.split("&"),function(e){var t=e.split("=")[0],n=e.split("=")[1];if(this.subResources[t]||this.responseHeaders[t]){var r={name:t};void 0!==n&&(this.subResources[t]?r.value=n:r.value=decodeURIComponent(n)),o.push(r)}}),o.sort(function(e,t){return e.name<t.name?-1:1}),o.length&&(i=[],n.util.arrayEach(o,function(e){void 0===e.value?i.push(e.name):i.push(e.name+"="+e.value)}),a+="?"+i.join("&"))}return a},sign:function(e,t){return n.util.crypto.hmac(e,t,"base64","sha1")}}),t.exports=n.Signers.S3},{"../core":24}],76:[function(e,t){function n(e){var t=e.httpRequest.headers[o],n=e.service.getSignerClass(e);if(delete e.httpRequest.headers["User-Agent"],delete e.httpRequest.headers["X-Amz-User-Agent"],n===i.Signers.V4){if(t>604800){var r="Presigning does not support expiry time greater than a week with SigV4 signing.";throw i.util.error(new Error,{code:"InvalidExpiryTime",message:r,retryable:!1})}e.httpRequest.headers[o]=t}else{if(n!==i.Signers.S3)throw i.util.error(new Error,{message:"Presigning only supports S3 or SigV4 signing.",code:"UnsupportedSigner",retryable:!1});e.httpRequest.headers[o]=parseInt(i.util.date.unixTimestamp()+t,10).toString()}}function r(e){var t=e.httpRequest.endpoint,n=i.util.urlParse(e.httpRequest.path),r={};n.search&&(r=i.util.queryStringParse(n.search.substr(1))),i.util.each(e.httpRequest.headers,function(e,t){e===o&&(e="Expires"),0===e.indexOf("x-amz-meta-")&&(e=e.toLowerCase()),r[e]=t}),delete e.httpRequest.headers[o];var a=r.Authorization.split(" ");if("AWS"===a[0])a=a[1].split(":"),r.AWSAccessKeyId=a[0],r.Signature=a[1];else if("AWS4-HMAC-SHA256"===a[0]){a.shift();var s=a.join(" "),c=s.match(/Signature=(.*?)(?:,|\s|\r?\n|$)/)[1];r["X-Amz-Signature"]=c,delete r.Expires}delete r.Authorization,delete r.Host,t.pathname=n.pathname,t.search=i.util.queryParamsToString(r)}var i=e("../core"),a=i.util.inherit,o="presigned-expires";i.Signers.Presign=a({sign:function(e,t,a){if(e.httpRequest.headers[o]=t||3600,e.on("build",n),e.on("sign",r),e.removeListener("afterBuild",i.EventListeners.Core.SET_CONTENT_LENGTH),e.removeListener("afterBuild",i.EventListeners.Core.COMPUTE_SHA256),e.emit("beforePresign",[e]),!a){if(e.build(),e.response.error)throw e.response.error;return i.util.urlFormat(e.httpRequest.endpoint)}e.build(function(){this.response.error?a(this.response.error):a(null,i.util.urlFormat(e.httpRequest.endpoint))})}}),t.exports=i.Signers.Presign},{"../core":24}],61:[function(e){var t=e("./core"),n=e("./model/api"),r=e("./region_config"),i=t.util.inherit;t.Service=i({constructor:function(e){if(!this.loadServiceClass)throw t.util.error(new Error,"Service must be constructed with `new' operator");var n=this.loadServiceClass(e||{});if(n){var r=t.util.copy(e),i=new n(e);return Object.defineProperty(i,"_originalConfig",{get:function(){return r},enumerable:!1,configurable:!0}),i}this.initialize(e)},initialize:function(e){var n=t.config[this.serviceIdentifier];this.config=new t.Config(t.config),n&&this.config.update(n,!0),e&&this.config.update(e,!0),this.validateService(),this.config.endpoint||r(this),this.config.endpoint=this.endpointFromTemplate(this.config.endpoint),this.setEndpoint(this.config.endpoint)},validateService:function(){},loadServiceClass:function(e){var n=e;if(t.util.isEmpty(this.api)){if(n.apiConfig)return t.Service.defineServiceApi(this.constructor,n.apiConfig);if(this.constructor.services){n=new t.Config(t.config),n.update(e,!0);var r=n.apiVersions[this.constructor.serviceIdentifier];return r=r||n.apiVersion,this.getLatestServiceClass(r)}return null}return null},getLatestServiceClass:function(e){return e=this.getLatestServiceVersion(e),null===this.constructor.services[e]&&t.Service.defineServiceApi(this.constructor,e),this.constructor.services[e]},getLatestServiceVersion:function(e){if(!this.constructor.services||0===this.constructor.services.length)throw new Error("No services defined on "+this.constructor.serviceIdentifier);if(e?t.util.isType(e,Date)&&(e=t.util.date.iso8601(e).split("T")[0]):e="latest",Object.hasOwnProperty(this.constructor.services,e))return e;for(var n=Object.keys(this.constructor.services).sort(),r=null,i=n.length-1;i>=0;i--)if("*"!==n[i][n[i].length-1]&&(r=n[i]),n[i].substr(0,10)<=e)return r;throw new Error("Could not find "+this.constructor.serviceIdentifier+" API to satisfy version constraint `"+e+"'")},api:{},defaultRetryCount:3,makeRequest:function(e,n,r){if("function"==typeof n&&(r=n,n=null),n=n||{},this.config.params){var i=this.api.operations[e];i&&(n=t.util.copy(n),t.util.each(this.config.params,function(e,t){i.input.members[e]&&(void 0!==n[e]&&null!==n[e]||(n[e]=t))}))}var a=new t.Request(this,e,n);return this.addAllRequestListeners(a),r&&a.send(r),a},makeUnauthenticatedRequest:function(e,t,n){"function"==typeof t&&(n=t,t={});var r=this.makeRequest(e,t).toUnauthenticated();return n?r.send(n):r},waitFor:function(e,n,r){var i=new t.ResourceWaiter(this,e);return i.wait(n,r)},addAllRequestListeners:function(e){for(var n=[t.events,t.EventListeners.Core,this.serviceInterface(),t.EventListeners.CorePost],r=0;r<n.length;r++)n[r]&&e.addListeners(n[r]);this.config.paramValidation||e.removeListener("validate",t.EventListeners.Core.VALIDATE_PARAMETERS),this.config.logger&&e.addListeners(t.EventListeners.Logger),this.setupRequestListeners(e)},setupRequestListeners:function(){},getSignerClass:function(){var e;return e=this.config.signatureVersion?this.config.signatureVersion:this.api.signatureVersion,t.Signers.RequestSigner.getVersion(e)},serviceInterface:function(){switch(this.api.protocol){case"ec2":return t.EventListeners.Query;case"query":return t.EventListeners.Query;case"json":return t.EventListeners.Json;case"rest-json":return t.EventListeners.RestJson;case"rest-xml":return t.EventListeners.RestXml}if(this.api.protocol)throw new Error("Invalid service `protocol' "+this.api.protocol+" in API config")},successfulResponse:function(e){return e.httpResponse.statusCode<300},numRetries:function(){return void 0!==this.config.maxRetries?this.config.maxRetries:this.defaultRetryCount},retryDelays:function(e){var t=this.config.retryDelayOptions||{},n=t.customBackoff||null;if("function"==typeof n)return n(e);var r=t.base||30,i=Math.random()*(Math.pow(2,e)*r);return i},retryableError:function(e){return!!this.networkingError(e)||(!!this.expiredCredentialsError(e)||(!!this.throttledError(e)||e.statusCode>=500))},networkingError:function(e){return"NetworkingError"===e.code},expiredCredentialsError:function(e){return"ExpiredTokenException"===e.code},clockSkewError:function(e){switch(e.code){case"RequestTimeTooSkewed":case"RequestExpired":case"InvalidSignatureException":case"SignatureDoesNotMatch":case"AuthFailure":case"RequestInTheFuture":return!0;default:return!1}},throttledError:function(e){switch(e.code){case"ProvisionedThroughputExceededException":case"Throttling":case"ThrottlingException":case"RequestLimitExceeded":case"RequestThrottled":return!0;default:return!1}},endpointFromTemplate:function(e){if("string"!=typeof e)return e;var t=e;return t=t.replace(/\{service\}/g,this.api.endpointPrefix),t=t.replace(/\{region\}/g,this.config.region),t=t.replace(/\{scheme\}/g,this.config.sslEnabled?"https":"http")},setEndpoint:function(e){this.endpoint=new t.Endpoint(e,this.config)},paginationConfig:function(e,n){var r=this.api.operations[e].paginator;if(!r){if(n){var i=new Error;throw t.util.error(i,"No pagination configuration for "+e)}return null}return r}}),t.util.update(t.Service,{defineMethods:function(e){t.util.each(e.prototype.api.operations,function(t){if(!e.prototype[t]){var n=e.prototype.api.operations[t];"none"===n.authtype?e.prototype[t]=function(e,n){return this.makeUnauthenticatedRequest(t,e,n)}:e.prototype[t]=function(e,n){return this.makeRequest(t,e,n)}}})},defineService:function(e,n,r){t.Service._serviceMap[e]=!0,Array.isArray(n)||(r=n,n=[]);var a=i(t.Service,r||{});if("string"==typeof e){t.Service.addVersions(a,n);var o=a.serviceIdentifier||e;a.serviceIdentifier=o}else a.prototype.api=e,t.Service.defineMethods(a);return a},addVersions:function(e,t){Array.isArray(t)||(t=[t]),e.services=e.services||{};for(var n=0;n<t.length;n++)void 0===e.services[t[n]]&&(e.services[t[n]]=null);e.apiVersions=Object.keys(e.services).sort()},defineServiceApi:function(e,r,a){function o(e){e.isApi?s.prototype.api=e:s.prototype.api=new n(e)}var s=i(e,{serviceIdentifier:e.serviceIdentifier});if("string"==typeof r){if(a)o(a);else try{o(t.apiLoader(e.serviceIdentifier,r))}catch(n){throw t.util.error(n,{message:"Could not find API configuration "+e.serviceIdentifier+"-"+r})}e.services.hasOwnProperty(r)||(e.apiVersions=e.apiVersions.concat(r).sort()),e.services[r]=s}else o(r);return t.Service.defineMethods(s),s},hasService:function(e){return t.Service._serviceMap.hasOwnProperty(e)},_serviceMap:{}})},{"./core":24,"./model/api":41,"./region_config":55}],55:[function(e,t){function n(e){if(!e)return null;var t=e.split("-");return t.length<3?null:t.slice(0,t.length-2).join("-")+"-*"}function r(e){var t=e.config.region,r=n(t),i=e.api.endpointPrefix;return[[t,i],[r,i],[t,"*"],[r,"*"],["*",i],["*","*"]].map(function(e){return e[0]&&e[1]?e.join("/"):null})}function i(e,t){o.each(t,function(t,n){"globalEndpoint"!==t&&(void 0!==e.config[t]&&null!==e.config[t]||(e.config[t]=n))})}function a(e){for(var t=r(e),n=0;n<t.length;n++){var a=t[n];if(a&&s.rules.hasOwnProperty(a)){var o=s.rules[a];return"string"==typeof o&&(o=s.patterns[o]),e.isGlobalEndpoint=!!o.globalEndpoint,o.signatureVersion||(o.signatureVersion="v4"),void i(e,o)}}}var o=e("./util"),s=e("./region_config.json");t.exports=a},{"./region_config.json":54,"./util":84}],54:[function(e,t){t.exports={rules:{"*/*":{endpoint:"{service}.{region}.amazonaws.com"},"cn-*/*":{endpoint:"{service}.{region}.amazonaws.com.cn"},"*/cloudfront":"globalSSL","*/iam":"globalSSL","*/sts":"globalSSL","*/importexport":{endpoint:"{service}.amazonaws.com",signatureVersion:"v2",globalEndpoint:!0},"*/route53":{endpoint:"https://{service}.amazonaws.com",signatureVersion:"v3https",globalEndpoint:!0},"*/waf":"globalSSL","us-gov-*/iam":"globalGovCloud","us-gov-*/sts":{endpoint:"{service}.{region}.amazonaws.com"},"us-gov-west-1/s3":"s3dash","us-west-1/s3":"s3dash","us-west-2/s3":"s3dash","eu-west-1/s3":"s3dash","ap-southeast-1/s3":"s3dash","ap-southeast-2/s3":"s3dash","ap-northeast-1/s3":"s3dash","sa-east-1/s3":"s3dash","us-east-1/s3":{endpoint:"{service}.amazonaws.com",signatureVersion:"s3"},"us-east-1/sdb":{endpoint:"{service}.amazonaws.com",signatureVersion:"v2"},"*/sdb":{endpoint:"{service}.{region}.amazonaws.com",signatureVersion:"v2"}},patterns:{globalSSL:{endpoint:"https://{service}.amazonaws.com",globalEndpoint:!0},globalGovCloud:{endpoint:"{service}.us-gov.amazonaws.com"},s3dash:{endpoint:"{service}-{region}.amazonaws.com",signatureVersion:"s3"}}}},{}],58:[function(e){var t=e("./core"),n=t.util.inherit,r=e("jmespath");t.Response=n({constructor:function(e){this.request=e,this.data=null,this.error=null,this.retryCount=0,this.redirectCount=0,this.httpResponse=new t.HttpResponse,e&&(this.maxRetries=e.service.numRetries(),this.maxRedirects=e.service.config.maxRedirects)},nextPage:function(e){var n,r=this.request.service,i=this.request.operation;try{n=r.paginationConfig(i,!0)}catch(e){this.error=e}if(!this.hasNextPage()){if(e)e(this.error,null);else if(this.error)throw this.error;return null}var a=t.util.copy(this.request.params);if(this.nextPageTokens){var o=n.inputToken;"string"==typeof o&&(o=[o]);for(var s=0;s<o.length;s++)a[o[s]]=this.nextPageTokens[s];return r.makeRequest(this.request.operation,a,e)}return e?e(null,null):null;
},hasNextPage:function(){return this.cacheNextPageTokens(),!!this.nextPageTokens||void 0===this.nextPageTokens&&void 0},cacheNextPageTokens:function(){if(this.hasOwnProperty("nextPageTokens"))return this.nextPageTokens;this.nextPageTokens=void 0;var e=this.request.service.paginationConfig(this.request.operation);if(!e)return this.nextPageTokens;if(this.nextPageTokens=null,e.moreResults&&!r.search(this.data,e.moreResults))return this.nextPageTokens;var n=e.outputToken;return"string"==typeof n&&(n=[n]),t.util.arrayEach.call(this,n,function(e){var t=r.search(this.data,e);t&&(this.nextPageTokens=this.nextPageTokens||[],this.nextPageTokens.push(t))}),this.nextPageTokens}})},{"./core":24,jmespath:87}],57:[function(e){function t(e){var t=e.request._waiter,n=t.config.acceptors,r=!1,i="retry";n.forEach(function(n){if(!r){var a=t.matchers[n.matcher];a&&a(e,n.expected,n.argument)&&(r=!0,i=n.state)}}),!r&&e.error&&(i="failure"),"success"===i?t.setSuccess(e):t.setError(e,"retry"===i)}var n=e("./core"),r=n.util.inherit,i=e("jmespath");n.ResourceWaiter=r({constructor:function(e,t){this.service=e,this.state=t,this.loadWaiterConfig(this.state)},service:null,state:null,config:null,matchers:{path:function(e,t,n){var r=i.search(e.data,n);return i.strictDeepEqual(r,t)},pathAll:function(e,t,n){var r=i.search(e.data,n);Array.isArray(r)||(r=[r]);var a=r.length;if(!a)return!1;for(var o=0;o<a;o++)if(!i.strictDeepEqual(r[o],t))return!1;return!0},pathAny:function(e,t,n){var r=i.search(e.data,n);Array.isArray(r)||(r=[r]);for(var a=r.length,o=0;o<a;o++)if(i.strictDeepEqual(r[o],t))return!0;return!1},status:function(e,t){var n=e.httpResponse.statusCode;return"number"==typeof n&&n===t},error:function(e,t){return"string"==typeof t&&e.error?t===e.error.code:t===!!e.error}},listeners:(new n.SequentialExecutor).addNamedListeners(function(e){e("RETRY_CHECK","retry",function(e){var t=e.request._waiter;e.error&&"ResourceNotReady"===e.error.code&&(e.error.retryDelay=1e3*(t.config.delay||0))}),e("CHECK_OUTPUT","extractData",t),e("CHECK_ERROR","extractError",t)}),wait:function(e,t){"function"==typeof e&&(t=e,e=void 0);var n=this.service.makeRequest(this.config.operation,e);return n._waiter=this,n.response.maxRetries=this.config.maxAttempts,n.addListeners(this.listeners),t&&n.send(t),n},setSuccess:function(e){e.error=null,e.data=e.data||{},e.request.removeAllListeners("extractData")},setError:function(e,t){e.data=null,e.error=n.util.error(e.error||new Error,{code:"ResourceNotReady",message:"Resource is not in the state "+this.state,retryable:t})},loadWaiterConfig:function(e){if(!this.service.api.waiters[e])throw new n.util.error(new Error,{code:"StateNotFoundError",message:"State "+e+" not found."});this.config=this.service.api.waiters[e]}})},{"./core":24,jmespath:87}],56:[function(e){(function(t){function n(e){return c.hasOwnProperty(e._asm.currentState)}var r=e("./core"),i=e("./state_machine"),a=r.util.inherit,o=r.util.nodeRequire("domain"),s=e("jmespath"),c={success:1,error:1,complete:1},u=new i;u.setupStates=function(){var e=function(e,t){var r=this;r._haltHandlersOnError=!1,r.emit(r._asm.currentState,function(e){if(e)if(n(r)){if(!(o&&r.domain instanceof o.Domain))throw e;e.domainEmitter=r,e.domain=r.domain,e.domainThrown=!1,r.domain.emit("error",e)}else r.response.error=e,t(e);else t(r.response.error)})};this.addState("validate","build","error",e),this.addState("build","afterBuild","restart",e),this.addState("afterBuild","sign","restart",e),this.addState("sign","send","retry",e),this.addState("retry","afterRetry","afterRetry",e),this.addState("afterRetry","sign","error",e),this.addState("send","validateResponse","retry",e),this.addState("validateResponse","extractData","extractError",e),this.addState("extractError","extractData","retry",e),this.addState("extractData","success","retry",e),this.addState("restart","build","error",e),this.addState("success","complete","complete",e),this.addState("error","complete","complete",e),this.addState("complete",null,null,e)},u.setupStates(),r.Request=a({constructor:function(e,t,n){var a=e.endpoint,s=e.config.region,c=e.config.customUserAgent;e.isGlobalEndpoint&&(s="us-east-1"),this.domain=o&&o.active,this.service=e,this.operation=t,this.params=n||{},this.httpRequest=new r.HttpRequest(a,s,c),this.startTime=r.util.date.getDate(),this.response=new r.Response(this),this._asm=new i(u.states,"validate"),this._haltHandlersOnError=!1,r.SequentialExecutor.call(this),this.emit=this.emitEvent},send:function(e){return e&&this.on("complete",function(t){e.call(t,t.error,t.data)}),this.runTo(),this.response},build:function(e){return this.runTo("send",e)},runTo:function(e,t){return this._asm.runTo(e,t,this),this},abort:function(){return this.removeAllListeners("validateResponse"),this.removeAllListeners("extractError"),this.on("validateResponse",function(e){e.error=r.util.error(new Error("Request aborted by user"),{code:"RequestAbortedError",retryable:!1})}),this.httpRequest.stream&&(this.httpRequest.stream.abort(),this.httpRequest._abortCallback?this.httpRequest._abortCallback():this.removeAllListeners("send")),this},eachPage:function(e){function t(n){e.call(n,n.error,n.data,function(i){i!==!1&&(n.hasNextPage()?n.nextPage().on("complete",t).send():e.call(n,null,null,r.util.fn.noop))})}e=r.util.fn.makeAsync(e,3),this.on("complete",t).send()},eachItem:function(e){function t(t,i){if(t)return e(t,null);if(null===i)return e(null,null);var a=n.service.paginationConfig(n.operation),o=a.resultKey;Array.isArray(o)&&(o=o[0]);var c=s.search(i,o);r.util.arrayEach(c,function(t){e(null,t)})}var n=this;this.eachPage(t)},isPageable:function(){return!!this.service.paginationConfig(this.operation)},createReadStream:function(){var e=r.util.nodeRequire("stream"),n=this,i=null;return 2===r.HttpClient.streamsApiVersion?(i=new e.PassThrough,n.send()):(i=new e.Stream,i.readable=!0,i.sent=!1,i.on("newListener",function(e){i.sent||"data"!==e||(i.sent=!0,t.nextTick(function(){n.send()}))})),this.on("httpHeaders",function(e,t,a){if(e<300){n.removeListener("httpData",r.EventListeners.Core.HTTP_DATA),n.removeListener("httpError",r.EventListeners.Core.HTTP_ERROR),n.on("httpError",function(e){a.error=e,a.error.retryable=!1});var o=a.httpResponse.createUnbufferedStream();2===r.HttpClient.streamsApiVersion?o.pipe(i):(o.on("data",function(e){i.emit("data",e)}),o.on("end",function(){i.emit("end")})),o.on("error",function(e){i.emit("error",e)})}}),this.on("error",function(e){i.emit("error",e)}),i},emitEvent:function(e,t,n){"function"==typeof t&&(n=t,t=null),n||(n=function(){}),t||(t=this.eventParameters(e,this.response));var i=r.SequentialExecutor.prototype.emit;i.call(this,e,t,function(e){e&&(this.response.error=e),n.call(this,e)})},eventParameters:function(e){switch(e){case"restart":case"validate":case"sign":case"build":case"afterValidate":case"afterBuild":return[this];case"error":return[this.response.error,this.response];default:return[this.response]}},presign:function(e,t){return t||"function"!=typeof e||(t=e,e=null),(new r.Signers.Presign).sign(this.toGet(),e,t)},isPresigned:function(){return this.httpRequest.headers.hasOwnProperty("presigned-expires")},toUnauthenticated:function(){return this.removeListener("validate",r.EventListeners.Core.VALIDATE_CREDENTIALS),this.removeListener("sign",r.EventListeners.Core.SIGN),this},toGet:function(){return"query"!==this.service.api.protocol&&"ec2"!==this.service.api.protocol||(this.removeListener("build",this.buildAsGet),this.addListener("build",this.buildAsGet)),this},buildAsGet:function(e){e.httpRequest.method="GET",e.httpRequest.path=e.service.endpoint.path+"?"+e.httpRequest.body,e.httpRequest.body="",delete e.httpRequest.headers["Content-Length"],delete e.httpRequest.headers["Content-Type"]},haltHandlersOnError:function(){this._haltHandlersOnError=!0}}),r.util.addPromisesToRequests(r.Request),r.util.mixin(r.Request,r.SequentialExecutor)}).call(this,e("_process"))},{"./core":24,"./state_machine":83,_process:13,jmespath:87}],87:[function(e,t,n){!function(e){"use strict";function t(e){return null!==e&&"[object Array]"===Object.prototype.toString.call(e)}function n(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}function r(e,i){if(e===i)return!0;var a=Object.prototype.toString.call(e);if(a!==Object.prototype.toString.call(i))return!1;if(t(e)===!0){if(e.length!==i.length)return!1;for(var o=0;o<e.length;o++)if(r(e[o],i[o])===!1)return!1;return!0}if(n(e)===!0){var s={};for(var c in e)if(hasOwnProperty.call(e,c)){if(r(e[c],i[c])===!1)return!1;s[c]=!0}for(var u in i)if(hasOwnProperty.call(i,u)&&s[u]!==!0)return!1;return!0}return!1}function i(e){if(""===e||e===!1||null===e)return!0;if(t(e)&&0===e.length)return!0;if(n(e)){for(var r in e)if(e.hasOwnProperty(r))return!1;return!0}return!1}function a(e){for(var t=Object.keys(e),n=[],r=0;r<t.length;r++)n.push(e[t[r]]);return n}function o(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"||"_"===e}function s(e){return e>="0"&&e<="9"||"-"===e}function c(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"||e>="0"&&e<="9"||"_"===e}function u(){}function l(){}function d(e){this.runtime=e}function h(e){this._interpreter=e,this.functionTable={abs:{_func:this._functionAbs,_signature:[{types:[y]}]},avg:{_func:this._functionAvg,_signature:[{types:[S]}]},ceil:{_func:this._functionCeil,_signature:[{types:[y]}]},contains:{_func:this._functionContains,_signature:[{types:[b,w]},{types:[v]}]},ends_with:{_func:this._functionEndsWith,_signature:[{types:[b]},{types:[b]}]},floor:{_func:this._functionFloor,_signature:[{types:[y]}]},length:{_func:this._functionLength,_signature:[{types:[b,w,_]}]},map:{_func:this._functionMap,_signature:[{types:[k]},{types:[w]}]},max:{_func:this._functionMax,_signature:[{types:[S,T]}]},merge:{_func:this._functionMerge,_signature:[{types:[_],variadic:!0}]},max_by:{_func:this._functionMaxBy,_signature:[{types:[w]},{types:[k]}]},sum:{_func:this._functionSum,_signature:[{types:[S]}]},starts_with:{_func:this._functionStartsWith,_signature:[{types:[b]},{types:[b]}]},min:{_func:this._functionMin,_signature:[{types:[S,T]}]},min_by:{_func:this._functionMinBy,_signature:[{types:[w]},{types:[k]}]},type:{_func:this._functionType,_signature:[{types:[v]}]},keys:{_func:this._functionKeys,_signature:[{types:[_]}]},values:{_func:this._functionValues,_signature:[{types:[_]}]},sort:{_func:this._functionSort,_signature:[{types:[T,S]}]},sort_by:{_func:this._functionSortBy,_signature:[{types:[w]},{types:[k]}]},join:{_func:this._functionJoin,_signature:[{types:[b]},{types:[T]}]},reverse:{_func:this._functionReverse,_signature:[{types:[b,w]}]},to_array:{_func:this._functionToArray,_signature:[{types:[v]}]},to_string:{_func:this._functionToString,_signature:[{types:[v]}]},to_number:{_func:this._functionToNumber,_signature:[{types:[v]}]},not_null:{_func:this._functionNotNull,_signature:[{types:[v],variadic:!0}]}}}function f(e){var t=new l,n=t.parse(e);return n}function p(e){var t=new u;return t.tokenize(e)}function m(e,t){var n=new l,r=new h,i=new d(r);r._interpreter=i;var a=n.parse(t);return i.search(a,e)}var g;g="function"==typeof String.prototype.trimLeft?function(e){return e.trimLeft()}:function(e){return e.match(/^\s*(.*)/)[1]};var y=0,v=1,b=2,w=3,_=4,E=5,k=6,A=7,S=8,T=9,I="EOF",C="UnquotedIdentifier",N="QuotedIdentifier",D="Rbracket",x="Rparen",M="Comma",R="Colon",P="Rbrace",O="Number",B="Current",L="Expref",q="Pipe",F="Or",U="And",j="EQ",H="GT",z="LT",W="GTE",J="LTE",V="NE",G="Flatten",K="Star",X="Filter",Z="Dot",Y="Not",Q="Lbrace",$="Lbracket",ee="Lparen",te="Literal",ne={".":Z,"*":K,",":M,":":R,"{":Q,"}":P,"]":D,"(":ee,")":x,"@":B},re={"<":!0,">":!0,"=":!0,"!":!0},ie={" ":!0,"\t":!0,"\n":!0};u.prototype={tokenize:function(e){var t=[];this._current=0;for(var n,r,i;this._current<e.length;)if(o(e[this._current]))n=this._current,r=this._consumeUnquotedIdentifier(e),t.push({type:C,value:r,start:n});else if(void 0!==ne[e[this._current]])t.push({type:ne[e[this._current]],value:e[this._current],start:this._current}),this._current++;else if(s(e[this._current]))i=this._consumeNumber(e),t.push(i);else if("["===e[this._current])i=this._consumeLBracket(e),t.push(i);else if('"'===e[this._current])n=this._current,r=this._consumeQuotedIdentifier(e),t.push({type:N,value:r,start:n});else if("'"===e[this._current])n=this._current,r=this._consumeRawStringLiteral(e),t.push({type:te,value:r,start:n});else if("`"===e[this._current]){n=this._current;var a=this._consumeLiteral(e);t.push({type:te,value:a,start:n})}else if(void 0!==re[e[this._current]])t.push(this._consumeOperator(e));else if(void 0!==ie[e[this._current]])this._current++;else if("&"===e[this._current])n=this._current,this._current++,"&"===e[this._current]?(this._current++,t.push({type:U,value:"&&",start:n})):t.push({type:L,value:"&",start:n});else{if("|"!==e[this._current]){var c=new Error("Unknown character:"+e[this._current]);throw c.name="LexerError",c}n=this._current,this._current++,"|"===e[this._current]?(this._current++,t.push({type:F,value:"||",start:n})):t.push({type:q,value:"|",start:n})}return t},_consumeUnquotedIdentifier:function(e){var t=this._current;for(this._current++;this._current<e.length&&c(e[this._current]);)this._current++;return e.slice(t,this._current)},_consumeQuotedIdentifier:function(e){var t=this._current;this._current++;for(var n=e.length;'"'!==e[this._current]&&this._current<n;){var r=this._current;"\\"!==e[r]||"\\"!==e[r+1]&&'"'!==e[r+1]?r++:r+=2,this._current=r}return this._current++,JSON.parse(e.slice(t,this._current))},_consumeRawStringLiteral:function(e){var t=this._current;this._current++;for(var n=e.length;"'"!==e[this._current]&&this._current<n;){var r=this._current;"\\"!==e[r]||"\\"!==e[r+1]&&"'"!==e[r+1]?r++:r+=2,this._current=r}this._current++;var i=e.slice(t+1,this._current-1);return i.replace("\\'","'")},_consumeNumber:function(e){var t=this._current;this._current++;for(var n=e.length;s(e[this._current])&&this._current<n;)this._current++;var r=parseInt(e.slice(t,this._current));return{type:O,value:r,start:t}},_consumeLBracket:function(e){var t=this._current;return this._current++,"?"===e[this._current]?(this._current++,{type:X,value:"[?",start:t}):"]"===e[this._current]?(this._current++,{type:G,value:"[]",start:t}):{type:$,value:"[",start:t}},_consumeOperator:function(e){var t=this._current,n=e[t];return this._current++,"!"===n?"="===e[this._current]?(this._current++,{type:V,value:"!=",start:t}):{type:Y,value:"!",start:t}:"<"===n?"="===e[this._current]?(this._current++,{type:J,value:"<=",start:t}):{type:z,value:"<",start:t}:">"===n?"="===e[this._current]?(this._current++,{type:W,value:">=",start:t}):{type:H,value:">",start:t}:"="===n&&"="===e[this._current]?(this._current++,{type:j,value:"==",start:t}):void 0},_consumeLiteral:function(e){this._current++;for(var t,n=this._current,r=e.length;"`"!==e[this._current]&&this._current<r;){var i=this._current;"\\"!==e[i]||"\\"!==e[i+1]&&"`"!==e[i+1]?i++:i+=2,this._current=i}var a=g(e.slice(n,this._current));return a=a.replace("\\`","`"),t=this._looksLikeJSON(a)?JSON.parse(a):JSON.parse('"'+a+'"'),this._current++,t},_looksLikeJSON:function(e){var t='[{"',n=["true","false","null"],r="-0123456789";if(""===e)return!1;if(t.indexOf(e[0])>=0)return!0;if(n.indexOf(e)>=0)return!0;if(!(r.indexOf(e[0])>=0))return!1;try{return JSON.parse(e),!0}catch(e){return!1}}};var ae={};ae[I]=0,ae[C]=0,ae[N]=0,ae[D]=0,ae[x]=0,ae[M]=0,ae[P]=0,ae[O]=0,ae[B]=0,ae[L]=0,ae[q]=1,ae[F]=2,ae[U]=3,ae[j]=5,ae[H]=5,ae[z]=5,ae[W]=5,ae[J]=5,ae[V]=5,ae[G]=9,ae[K]=20,ae[X]=21,ae[Z]=40,ae[Y]=45,ae[Q]=50,ae[$]=55,ae[ee]=60,l.prototype={parse:function(e){this._loadTokens(e),this.index=0;var t=this.expression(0);if(this._lookahead(0)!==I){var n=this._lookaheadToken(0),r=new Error("Unexpected token type: "+n.type+", value: "+n.value);throw r.name="ParserError",r}return t},_loadTokens:function(e){var t=new u,n=t.tokenize(e);n.push({type:I,value:"",start:e.length}),this.tokens=n},expression:function(e){var t=this._lookaheadToken(0);this._advance();for(var n=this.nud(t),r=this._lookahead(0);e<ae[r];)this._advance(),n=this.led(r,n),r=this._lookahead(0);return n},_lookahead:function(e){return this.tokens[this.index+e].type},_lookaheadToken:function(e){return this.tokens[this.index+e]},_advance:function(){this.index++},nud:function(e){var t,n,r;switch(e.type){case te:return{type:"Literal",value:e.value};case C:return{type:"Field",name:e.value};case N:var i={type:"Field",name:e.value};if(this._lookahead(0)===ee)throw new Error("Quoted identifier not allowed for function names.");return i;case Y:return n=this.expression(ae.Not),{type:"NotExpression",children:[n]};case K:return t={type:"Identity"},n=null,n=this._lookahead(0)===D?{type:"Identity"}:this._parseProjectionRHS(ae.Star),{type:"ValueProjection",children:[t,n]};case X:return this.led(e.type,{type:"Identity"});case Q:return this._parseMultiselectHash();case G:return t={type:G,children:[{type:"Identity"}]},n=this._parseProjectionRHS(ae.Flatten),{type:"Projection",children:[t,n]};case $:return this._lookahead(0)===O||this._lookahead(0)===R?(n=this._parseIndexExpression(),this._projectIfSlice({type:"Identity"},n)):this._lookahead(0)===K&&this._lookahead(1)===D?(this._advance(),this._advance(),n=this._parseProjectionRHS(ae.Star),{type:"Projection",children:[{type:"Identity"},n]}):this._parseMultiselectList();case B:return{type:B};case L:return r=this.expression(ae.Expref),{type:"ExpressionReference",children:[r]};case ee:for(var a=[];this._lookahead(0)!==x;)this._lookahead(0)===B?(r={type:B},this._advance()):r=this.expression(0),a.push(r);return this._match(x),a[0];default:this._errorToken(e)}},led:function(e,t){var n;switch(e){case Z:var r=ae.Dot;return this._lookahead(0)!==K?(n=this._parseDotRHS(r),{type:"Subexpression",children:[t,n]}):(this._advance(),n=this._parseProjectionRHS(r),{type:"ValueProjection",children:[t,n]});case q:return n=this.expression(ae.Pipe),{type:q,children:[t,n]};case F:return n=this.expression(ae.Or),{type:"OrExpression",children:[t,n]};case U:return n=this.expression(ae.And),{type:"AndExpression",children:[t,n]};case ee:for(var i,a,o=t.name,s=[];this._lookahead(0)!==x;)this._lookahead(0)===B?(i={type:B},this._advance()):i=this.expression(0),this._lookahead(0)===M&&this._match(M),s.push(i);return this._match(x),a={type:"Function",name:o,children:s};case X:var c=this.expression(0);return this._match(D),n=this._lookahead(0)===G?{type:"Identity"}:this._parseProjectionRHS(ae.Filter),{type:"FilterProjection",children:[t,n,c]};case G:var u={type:G,children:[t]},l=this._parseProjectionRHS(ae.Flatten);return{type:"Projection",children:[u,l]};case j:case V:case H:case W:case z:case J:return this._parseComparator(t,e);case $:var d=this._lookaheadToken(0);return d.type===O||d.type===R?(n=this._parseIndexExpression(),this._projectIfSlice(t,n)):(this._match(K),this._match(D),n=this._parseProjectionRHS(ae.Star),{type:"Projection",children:[t,n]});default:this._errorToken(this._lookaheadToken(0))}},_match:function(e){if(this._lookahead(0)!==e){var t=this._lookaheadToken(0),n=new Error("Expected "+e+", got: "+t.type);throw n.name="ParserError",n}this._advance()},_errorToken:function(e){var t=new Error("Invalid token ("+e.type+'): "'+e.value+'"');throw t.name="ParserError",t},_parseIndexExpression:function(){if(this._lookahead(0)===R||this._lookahead(1)===R)return this._parseSliceExpression();var e={type:"Index",value:this._lookaheadToken(0).value};return this._advance(),this._match(D),e},_projectIfSlice:function(e,t){var n={type:"IndexExpression",children:[e,t]};return"Slice"===t.type?{type:"Projection",children:[n,this._parseProjectionRHS(ae.Star)]}:n},_parseSliceExpression:function(){for(var e=[null,null,null],t=0,n=this._lookahead(0);n!==D&&t<3;){if(n===R)t++,this._advance();else{if(n!==O){var r=this._lookahead(0),i=new Error("Syntax error, unexpected token: "+r.value+"("+r.type+")");throw i.name="Parsererror",i}e[t]=this._lookaheadToken(0).value,this._advance()}n=this._lookahead(0)}return this._match(D),{type:"Slice",children:e}},_parseComparator:function(e,t){var n=this.expression(ae[t]);return{type:"Comparator",name:t,children:[e,n]}},_parseDotRHS:function(e){var t=this._lookahead(0),n=[C,N,K];return n.indexOf(t)>=0?this.expression(e):t===$?(this._match($),this._parseMultiselectList()):t===Q?(this._match(Q),this._parseMultiselectHash()):void 0},_parseProjectionRHS:function(e){var t;if(ae[this._lookahead(0)]<10)t={type:"Identity"};else if(this._lookahead(0)===$)t=this.expression(e);else if(this._lookahead(0)===X)t=this.expression(e);else{if(this._lookahead(0)!==Z){var n=this._lookaheadToken(0),r=new Error("Sytanx error, unexpected token: "+n.value+"("+n.type+")");throw r.name="ParserError",r}this._match(Z),t=this._parseDotRHS(e)}return t},_parseMultiselectList:function(){for(var e=[];this._lookahead(0)!==D;){var t=this.expression(0);if(e.push(t),this._lookahead(0)===M&&(this._match(M),this._lookahead(0)===D))throw new Error("Unexpected token Rbracket")}return this._match(D),{type:"MultiSelectList",children:e}},_parseMultiselectHash:function(){for(var e,t,n,r,i=[],a=[C,N];;){if(e=this._lookaheadToken(0),a.indexOf(e.type)<0)throw new Error("Expecting an identifier token, got: "+e.type);if(t=e.value,this._advance(),this._match(R),n=this.expression(0),r={type:"KeyValuePair",name:t,value:n},i.push(r),this._lookahead(0)===M)this._match(M);else if(this._lookahead(0)===P){this._match(P);break}}return{type:"MultiSelectHash",children:i}}},d.prototype={search:function(e,t){return this.visit(e,t)},visit:function(e,o){var s,c,u,l,d,h,f,p,m,g;switch(e.type){case"Field":return null===o?null:n(o)?(h=o[e.name],void 0===h?null:h):null;case"Subexpression":for(u=this.visit(e.children[0],o),g=1;g<e.children.length;g++)if(u=this.visit(e.children[1],u),null===u)return null;return u;case"IndexExpression":return f=this.visit(e.children[0],o),p=this.visit(e.children[1],f);case"Index":if(!t(o))return null;var y=e.value;return y<0&&(y=o.length+y),u=o[y],void 0===u&&(u=null),u;case"Slice":if(!t(o))return null;var v=e.children.slice(0),b=this.computeSliceParams(o.length,v),w=b[0],_=b[1],E=b[2];if(u=[],E>0)for(g=w;g<_;g+=E)u.push(o[g]);else for(g=w;g>_;g+=E)u.push(o[g]);return u;case"Projection":var k=this.visit(e.children[0],o);if(!t(k))return null;for(m=[],g=0;g<k.length;g++)c=this.visit(e.children[1],k[g]),null!==c&&m.push(c);return m;case"ValueProjection":if(k=this.visit(e.children[0],o),!n(k))return null;m=[];var A=a(k);for(g=0;g<A.length;g++)c=this.visit(e.children[1],A[g]),null!==c&&m.push(c);return m;case"FilterProjection":if(k=this.visit(e.children[0],o),!t(k))return null;var S=[],T=[];for(g=0;g<k.length;g++)s=this.visit(e.children[2],k[g]),i(s)||S.push(k[g]);for(var I=0;I<S.length;I++)c=this.visit(e.children[1],S[I]),null!==c&&T.push(c);return T;case"Comparator":switch(l=this.visit(e.children[0],o),d=this.visit(e.children[1],o),e.name){case j:u=r(l,d);break;case V:u=!r(l,d);break;case H:u=l>d;break;case W:u=l>=d;break;case z:u=l<d;break;case J:u=l<=d;break;default:throw new Error("Unknown comparator: "+e.name)}return u;case G:var C=this.visit(e.children[0],o);if(!t(C))return null;var N=[];for(g=0;g<C.length;g++)c=C[g],t(c)?N.push.apply(N,c):N.push(c);return N;case"Identity":return o;case"MultiSelectList":if(null===o)return null;for(m=[],g=0;g<e.children.length;g++)m.push(this.visit(e.children[g],o));return m;case"MultiSelectHash":if(null===o)return null;m={};var D;for(g=0;g<e.children.length;g++)D=e.children[g],m[D.name]=this.visit(D.value,o);return m;case"OrExpression":return s=this.visit(e.children[0],o),i(s)&&(s=this.visit(e.children[1],o)),s;case"AndExpression":return l=this.visit(e.children[0],o),i(l)===!0?l:this.visit(e.children[1],o);case"NotExpression":return l=this.visit(e.children[0],o),i(l);case"Literal":return e.value;case q:return f=this.visit(e.children[0],o),this.visit(e.children[1],f);case B:return o;case"Function":var x=[];for(g=0;g<e.children.length;g++)x.push(this.visit(e.children[g],o));return this.runtime.callFunction(e.name,x);case"ExpressionReference":var M=e.children[0];return M.jmespathType=L,M;default:throw new Error("Unknown node type: "+e.type)}},computeSliceParams:function(e,t){var n=t[0],r=t[1],i=t[2],a=[null,null,null];if(null===i)i=1;else if(0===i){var o=new Error("Invalid slice, step cannot be 0");throw o.name="RuntimeError",o}var s=i<0;return n=null===n?s?e-1:0:this.capSliceRange(e,n,i),r=null===r?s?-1:e:this.capSliceRange(e,r,i),a[0]=n,a[1]=r,a[2]=i,a},capSliceRange:function(e,t,n){return t<0?(t+=e,t<0&&(t=n<0?-1:0)):t>=e&&(t=n<0?e-1:e),t}},h.prototype={callFunction:function(e,t){var n=this.functionTable[e];if(void 0===n)throw new Error("Unknown function: "+e+"()");return this._validateArgs(e,t,n._signature),n._func.call(this,t)},_validateArgs:function(e,t,n){var r;if(n[n.length-1].variadic){if(t.length<n.length)throw r=1===n.length?" argument":" arguments",new Error("ArgumentError: "+e+"() takes at least"+n.length+r+" but received "+t.length)}else if(t.length!==n.length)throw r=1===n.length?" argument":" arguments",new Error("ArgumentError: "+e+"() takes "+n.length+r+" but received "+t.length);for(var i,a,o,s=0;s<n.length;s++){o=!1,i=n[s].types,a=this._getTypeName(t[s]);for(var c=0;c<i.length;c++)if(this._typeMatches(a,i[c],t[s])){o=!0;break}if(!o)throw new Error("TypeError: "+e+"() expected argument "+(s+1)+" to be type "+i+" but received type "+a+" instead.")}},_typeMatches:function(e,t,n){if(t===v)return!0;if(t!==T&&t!==S&&t!==w)return e===t;if(t===w)return e===w;if(e===w){var r;t===S?r=y:t===T&&(r=b);for(var i=0;i<n.length;i++)if(!this._typeMatches(this._getTypeName(n[i]),r,n[i]))return!1;return!0}},_getTypeName:function(e){switch(Object.prototype.toString.call(e)){case"[object String]":return b;case"[object Number]":return y;case"[object Array]":return w;case"[object Boolean]":return E;case"[object Null]":return A;case"[object Object]":return e.jmespathType===L?k:_}},_functionStartsWith:function(e){return 0===e[0].lastIndexOf(e[1])},_functionEndsWith:function(e){var t=e[0],n=e[1];return t.indexOf(n,t.length-n.length)!==-1},_functionReverse:function(e){var t=this._getTypeName(e[0]);if(t===b){for(var n=e[0],r="",i=n.length-1;i>=0;i--)r+=n[i];return r}var a=e[0].slice(0);return a.reverse(),a},_functionAbs:function(e){return Math.abs(e[0])},_functionCeil:function(e){return Math.ceil(e[0])},_functionAvg:function(e){for(var t=0,n=e[0],r=0;r<n.length;r++)t+=n[r];return t/n.length},_functionContains:function(e){return e[0].indexOf(e[1])>=0},_functionFloor:function(e){return Math.floor(e[0])},_functionLength:function(e){return n(e[0])?Object.keys(e[0]).length:e[0].length},_functionMap:function(e){for(var t=[],n=this._interpreter,r=e[0],i=e[1],a=0;a<i.length;a++)t.push(n.visit(r,i[a]));return t},_functionMerge:function(e){for(var t={},n=0;n<e.length;n++){var r=e[n];for(var i in r)t[i]=r[i]}return t},_functionMax:function(e){if(e[0].length>0){var t=this._getTypeName(e[0][0]);if(t===y)return Math.max.apply(Math,e[0]);for(var n=e[0],r=n[0],i=1;i<n.length;i++)r.localeCompare(n[i])<0&&(r=n[i]);return r}return null},_functionMin:function(e){if(e[0].length>0){var t=this._getTypeName(e[0][0]);if(t===y)return Math.min.apply(Math,e[0]);for(var n=e[0],r=n[0],i=1;i<n.length;i++)n[i].localeCompare(r)<0&&(r=n[i]);return r}return null},_functionSum:function(e){for(var t=0,n=e[0],r=0;r<n.length;r++)t+=n[r];return t},_functionType:function(e){switch(this._getTypeName(e[0])){case y:return"number";case b:return"string";case w:return"array";case _:return"object";case E:return"boolean";case k:return"expref";case A:return"null"}},_functionKeys:function(e){return Object.keys(e[0])},_functionValues:function(e){for(var t=e[0],n=Object.keys(t),r=[],i=0;i<n.length;i++)r.push(t[n[i]]);return r},_functionJoin:function(e){var t=e[0],n=e[1];return n.join(t)},_functionToArray:function(e){return this._getTypeName(e[0])===w?e[0]:[e[0]]},_functionToString:function(e){return this._getTypeName(e[0])===b?e[0]:JSON.stringify(e[0])},_functionToNumber:function(e){var t,n=this._getTypeName(e[0]);return n===y?e[0]:n!==b||(t=+e[0],isNaN(t))?null:t},_functionNotNull:function(e){for(var t=0;t<e.length;t++)if(this._getTypeName(e[t])!==A)return e[t];return null},_functionSort:function(e){var t=e[0].slice(0);return t.sort(),t},_functionSortBy:function(e){var t=e[0].slice(0);if(0===t.length)return t;var n=this._interpreter,r=e[1],i=this._getTypeName(n.visit(r,t[0]));if([y,b].indexOf(i)<0)throw new Error("TypeError");for(var a=this,o=[],s=0;s<t.length;s++)o.push([s,t[s]]);o.sort(function(e,t){var o=n.visit(r,e[1]),s=n.visit(r,t[1]);if(a._getTypeName(o)!==i)throw new Error("TypeError: expected "+i+", received "+a._getTypeName(o));if(a._getTypeName(s)!==i)throw new Error("TypeError: expected "+i+", received "+a._getTypeName(s));return o>s?1:o<s?-1:e[0]-t[0]});for(var c=0;c<o.length;c++)t[c]=o[c][1];return t},_functionMaxBy:function(e){for(var t,n,r=e[1],i=e[0],a=this.createKeyFunction(r,[y,b]),o=-(1/0),s=0;s<i.length;s++)n=a(i[s]),n>o&&(o=n,t=i[s]);return t},_functionMinBy:function(e){for(var t,n,r=e[1],i=e[0],a=this.createKeyFunction(r,[y,b]),o=1/0,s=0;s<i.length;s++)n=a(i[s]),n<o&&(o=n,t=i[s]);return t},createKeyFunction:function(e,t){var n=this,r=this._interpreter,i=function(i){var a=r.visit(e,i);if(t.indexOf(n._getTypeName(a))<0){var o="TypeError: expected one of "+t+", received "+n._getTypeName(a);throw new Error(o)}return a};return i}},e.tokenize=p,e.compile=f,e.search=m,e.strictDeepEqual=r}("undefined"==typeof n?this.jmespath={}:n)},{}],83:[function(e,t){function n(e,t){this.currentState=t||null,this.states=e||{}}n.prototype.runTo=function(e,t,n,r){"function"==typeof e&&(r=n,n=t,t=e,e=null);var i=this,a=i.states[i.currentState];a.fn.call(n||i,r,function(r){if(r){if(!a.fail)return t?t.call(n,r):null;i.currentState=a.fail}else{if(!a.accept)return t?t.call(n):null;i.currentState=a.accept}return i.currentState===e?t?t.call(n,r):null:void i.runTo(e,t,n,r)})},n.prototype.addState=function(e,t,n,r){return"function"==typeof t?(r=t,t=null,n=null):"function"==typeof n&&(r=n,n=null),this.currentState||(this.currentState=e),this.states[e]={accept:t,fail:n,fn:r},this},t.exports=n},{}],47:[function(e){var t=e("./core");t.ParamValidator=t.util.inherit({constructor:function(e){e!==!0&&void 0!==e||(e={min:!0}),this.validation=e},validate:function(e,n,r){if(this.errors=[],this.validateMember(e,n||{},r||"params"),this.errors.length>1){var i=this.errors.join("\n* ");throw i="There were "+this.errors.length+" validation errors:\n* "+i,t.util.error(new Error(i),{code:"MultipleValidationErrors",errors:this.errors})}if(1===this.errors.length)throw this.errors[0];return!0},fail:function(e,n){this.errors.push(t.util.error(new Error(n),{code:e}))},validateStructure:function(e,t,n){this.validateType(t,n,["object"],"structure");for(var r,i=0;e.required&&i<e.required.length;i++){r=e.required[i];var a=t[r];void 0!==a&&null!==a||this.fail("MissingRequiredParameter","Missing required key '"+r+"' in "+n)}for(r in t)if(t.hasOwnProperty(r)){var o=t[r],s=e.members[r];if(void 0!==s){var c=[n,r].join(".");this.validateMember(s,o,c)}else this.fail("UnexpectedParameter","Unexpected key '"+r+"' found in "+n)}return!0},validateMember:function(e,t,n){switch(e.type){case"structure":return this.validateStructure(e,t,n);case"list":return this.validateList(e,t,n);case"map":return this.validateMap(e,t,n);default:return this.validateScalar(e,t,n)}},validateList:function(e,t,n){if(this.validateType(t,n,[Array])){this.validateRange(e,t.length,n,"list member count");for(var r=0;r<t.length;r++)this.validateMember(e.member,t[r],n+"["+r+"]")}},validateMap:function(e,t,n){if(this.validateType(t,n,["object"],"map")){var r=0;for(var i in t)t.hasOwnProperty(i)&&(this.validateMember(e.key,i,n+"[key='"+i+"']"),this.validateMember(e.value,t[i],n+"['"+i+"']"),r++);this.validateRange(e,r,n,"map member count")}},validateScalar:function(e,t,n){switch(e.type){case null:case void 0:case"string":return this.validateString(e,t,n);case"base64":case"binary":return this.validatePayload(t,n);case"integer":case"float":return this.validateNumber(e,t,n);case"boolean":return this.validateType(t,n,["boolean"]);case"timestamp":return this.validateType(t,n,[Date,/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(\.\d+)?Z$/,"number"],"Date object, ISO-8601 string, or a UNIX timestamp");default:return this.fail("UnkownType","Unhandled type "+e.type+" for "+n)}},validateString:function(e,t,n){this.validateType(t,n,["string"])&&(this.validateEnum(e,t,n),this.validateRange(e,t.length,n,"string length"),this.validatePattern(e,t,n))},validatePattern:function(e,t,n){this.validation.pattern&&void 0!==e.pattern&&(new RegExp(e.pattern).test(t)||this.fail("PatternMatchError",'Provided value "'+t+'" does not match regex pattern /'+e.pattern+"/ for "+n))},validateRange:function(e,t,n,r){this.validation.min&&void 0!==e.min&&t<e.min&&this.fail("MinRangeError","Expected "+r+" >= "+e.min+", but found "+t+" for "+n),
this.validation.max&&void 0!==e.max&&t>e.max&&this.fail("MaxRangeError","Expected "+r+" <= "+e.max+", but found "+t+" for "+n)},validateEnum:function(e,t,n){this.validation["enum"]&&void 0!==e["enum"]&&e["enum"].indexOf(t)===-1&&this.fail("EnumError","Found string value of "+t+", but expected "+e["enum"].join("|")+" for "+n)},validateType:function(e,n,r,i){if(null===e||void 0===e)return!1;for(var a=!1,o=0;o<r.length;o++){if("string"==typeof r[o]){if(typeof e===r[o])return!0}else if(r[o]instanceof RegExp){if((e||"").toString().match(r[o]))return!0}else{if(e instanceof r[o])return!0;if(t.util.isType(e,r[o]))return!0;i||a||(r=r.slice()),r[o]=t.util.typeName(r[o])}a=!0}var s=i;s||(s=r.join(", ").replace(/,([^,]+)$/,", or$1"));var c=s.match(/^[aeiou]/i)?"n":"";return this.fail("InvalidParameterType","Expected "+n+" to be a"+c+" "+s),!1},validateNumber:function(e,t,n){if(null!==t&&void 0!==t){if("string"==typeof t){var r=parseFloat(t);r.toString()===t&&(t=r)}this.validateType(t,n,["number"])&&this.validateRange(e,t,n,"numeric value")}},validatePayload:function(e,n){if(null!==e&&void 0!==e&&"string"!=typeof e&&(!e||"number"!=typeof e.byteLength)){if(t.util.isNode()){var r=t.util.nodeRequire("stream").Stream;if(t.util.Buffer.isBuffer(e)||e instanceof r)return}var i=["Buffer","Stream","File","Blob","ArrayBuffer","DataView"];if(e)for(var a=0;a<i.length;a++){if(t.util.isType(e,i[a]))return;if(t.util.typeName(e.constructor)===i[a])return}this.fail("InvalidParameterType","Expected "+n+" to be a string, Buffer, Stream, Blob, or typed array object")}}})},{"./core":24}],41:[function(e,t){function n(e,t){e=e||{},t=t||{},t.api=this,e.metadata=e.metadata||{},u(this,"isApi",!0,!1),u(this,"apiVersion",e.metadata.apiVersion),u(this,"endpointPrefix",e.metadata.endpointPrefix),u(this,"signingName",e.metadata.signingName),u(this,"globalEndpoint",e.metadata.globalEndpoint),u(this,"signatureVersion",e.metadata.signatureVersion),u(this,"jsonVersion",e.metadata.jsonVersion),u(this,"targetPrefix",e.metadata.targetPrefix),u(this,"protocol",e.metadata.protocol),u(this,"timestampFormat",e.metadata.timestampFormat),u(this,"xmlNamespaceUri",e.metadata.xmlNamespace),u(this,"abbreviation",e.metadata.serviceAbbreviation),u(this,"fullName",e.metadata.serviceFullName),l(this,"className",function(){var t=e.metadata.serviceAbbreviation||e.metadata.serviceFullName;return t?(t=t.replace(/^Amazon|AWS\s*|\(.*|\s+|\W+/g,""),"ElasticLoadBalancing"===t&&(t="ELB"),t):null}),u(this,"operations",new r(e.operations,t,function(e,n){return new i(e,n,t)},c.string.lowerFirst)),u(this,"shapes",new r(e.shapes,t,function(e,n){return a.create(n,t)})),u(this,"paginators",new r(e.paginators,t,function(e,n){return new o(e,n,t)})),u(this,"waiters",new r(e.waiters,t,function(e,n){return new s(e,n,t)},c.string.lowerFirst)),t.documentation&&(u(this,"documentation",e.documentation),u(this,"documentationUrl",e.documentationUrl))}var r=e("./collection"),i=e("./operation"),a=e("./shape"),o=e("./paginator"),s=e("./resource_waiter"),c=e("../util"),u=c.property,l=c.memoizedProperty;t.exports=n},{"../util":84,"./collection":42,"./operation":43,"./paginator":44,"./resource_waiter":45,"./shape":46}],45:[function(e,t){function n(e,t,n){n=n||{},i(this,"name",e),i(this,"api",n.api,!1),t.operation&&i(this,"operation",r.string.lowerFirst(t.operation));var a=this,o=["type","description","delay","maxAttempts","acceptors"];o.forEach(function(e){var n=t[e];n&&i(a,e,n)})}var r=e("../util"),i=r.property;t.exports=n},{"../util":84}],44:[function(e,t){function n(e,t){r(this,"inputToken",t.input_token),r(this,"limitKey",t.limit_key),r(this,"moreResults",t.more_results),r(this,"outputToken",t.output_token),r(this,"resultKey",t.result_key)}var r=e("../util").property;t.exports=n},{"../util":84}],43:[function(e,t){function n(e,t,n){n=n||{},a(this,"name",t.name||e),a(this,"api",n.api,!1),t.http=t.http||{},a(this,"httpMethod",t.http.method||"POST"),a(this,"httpPath",t.http.requestUri||"/"),a(this,"authtype",t.authtype||""),o(this,"input",function(){return t.input?r.create(t.input,n):new r.create({type:"structure"},n)}),o(this,"output",function(){return t.output?r.create(t.output,n):new r.create({type:"structure"},n)}),o(this,"errors",function(){var e=[];if(!t.errors)return null;for(var i=0;i<t.errors.length;i++)e.push(r.create(t.errors[i],n));return e}),o(this,"paginator",function(){return n.api.paginators[e]}),n.documentation&&(a(this,"documentation",t.documentation),a(this,"documentationUrl",t.documentationUrl))}var r=e("./shape"),i=e("../util"),a=i.property,o=i.memoizedProperty;t.exports=n},{"../util":84,"./shape":46}],37:[function(e){var t=e("./core"),n=t.util.inherit;t.Endpoint=n({constructor:function(e,n){if(t.util.hideProperties(this,["slashes","auth","hash","search","query"]),"undefined"==typeof e||null===e)throw new Error("Invalid endpoint: "+e);if("string"!=typeof e)return t.util.copy(e);if(!e.match(/^http/)){var r=n&&void 0!==n.sslEnabled?n.sslEnabled:t.config.sslEnabled;e=(r?"https":"http")+"://"+e}t.util.update(this,t.util.urlParse(e)),this.port?this.port=parseInt(this.port,10):this.port="https:"===this.protocol?443:80}}),t.HttpRequest=n({constructor:function(e,n,r){e=new t.Endpoint(e),this.method="POST",this.path=e.path||"/",this.headers={},this.body="",this.endpoint=e,this.region=n,this.setUserAgent(r)},setUserAgent:function(e){var n=t.util.isBrowser()?"X-Amz-":"",r="";"string"==typeof e&&e&&(r+=" "+e),this.headers[n+"User-Agent"]=t.util.userAgent()+r},pathname:function(){return this.path.split("?",1)[0]},search:function(){var e=this.path.split("?",2)[1];return e?(e=t.util.queryStringParse(e),t.util.queryParamsToString(e)):""}}),t.HttpResponse=n({constructor:function(){this.statusCode=void 0,this.headers={},this.body=void 0,this.streaming=!1,this.stream=null},createUnbufferedStream:function(){return this.streaming=!0,this.stream}}),t.HttpClient=n({}),t.HttpClient.getInstance=function(){return void 0===this.singleton&&(this.singleton=new this),this.singleton}},{"./core":24}],36:[function(e){var t=e("./core"),n=e("./sequential_executor");t.EventListeners={Core:{}},t.EventListeners={Core:(new n).addNamedListeners(function(e,n){n("VALIDATE_CREDENTIALS","validate",function(e,n){return e.service.api.signatureVersion?void e.service.config.getCredentials(function(r){r&&(e.response.error=t.util.error(r,{code:"CredentialsError",message:"Missing credentials in config"})),n()}):n()}),e("VALIDATE_REGION","validate",function(e){e.service.config.region||e.service.isGlobalEndpoint||(e.response.error=t.util.error(new Error,{code:"ConfigError",message:"Missing region in config"}))}),e("VALIDATE_PARAMETERS","validate",function(e){var n=e.service.api.operations[e.operation].input,r=e.service.config.paramValidation;new t.ParamValidator(r).validate(n,e.params)}),n("COMPUTE_SHA256","afterBuild",function(e,n){if(e.haltHandlersOnError(),!e.service.api.signatureVersion)return n();if(e.service.getSignerClass(e)===t.Signers.V4){var r=e.httpRequest.body||"";t.util.computeSha256(r,function(t,r){t?n(t):(e.httpRequest.headers["X-Amz-Content-Sha256"]=r,n())})}else n()}),e("SET_CONTENT_LENGTH","afterBuild",function(e){if(void 0===e.httpRequest.headers["Content-Length"]){var n=t.util.string.byteLength(e.httpRequest.body);e.httpRequest.headers["Content-Length"]=n}}),e("SET_HTTP_HOST","afterBuild",function(e){e.httpRequest.headers.Host=e.httpRequest.endpoint.host}),e("RESTART","restart",function(){var e=this.response.error;e&&e.retryable&&(this.httpRequest=new t.HttpRequest(this.service.endpoint,this.service.region),this.response.retryCount<this.service.config.maxRetries?this.response.retryCount++:this.response.error=null)}),n("SIGN","sign",function(e,n){return e.service.api.signatureVersion?void e.service.config.getCredentials(function(r,i){if(r)return e.response.error=r,n();try{var a=t.util.date.getDate(),o=e.service.getSignerClass(e),s=new o(e.httpRequest,e.service.api.signingName||e.service.api.endpointPrefix,e.service.config.signatureCache);delete e.httpRequest.headers.Authorization,delete e.httpRequest.headers.Date,delete e.httpRequest.headers["X-Amz-Date"],s.addAuthorization(i,a),e.signedAt=a}catch(t){e.response.error=t}n()}):n()}),e("VALIDATE_RESPONSE","validateResponse",function(e){this.service.successfulResponse(e,this)?(e.data={},e.error=null):(e.data=null,e.error=t.util.error(new Error,{code:"UnknownError",message:"An unknown error occurred."}))}),n("SEND","send",function(e,n){function r(r){e.httpResponse.stream=r,r.on("headers",function(n,i){e.request.emit("httpHeaders",[n,i,e]),e.httpResponse.streaming||(2===t.HttpClient.streamsApiVersion?r.on("readable",function(){var t=r.read();null!==t&&e.request.emit("httpData",[t,e])}):r.on("data",function(t){e.request.emit("httpData",[t,e])}))}),r.on("end",function(){e.request.emit("httpDone"),n()})}function i(t){t.on("sendProgress",function(t){e.request.emit("httpUploadProgress",[t,e])}),t.on("receiveProgress",function(t){e.request.emit("httpDownloadProgress",[t,e])})}function a(r){e.error=t.util.error(r,{code:"NetworkingError",region:e.request.httpRequest.region,hostname:e.request.httpRequest.endpoint.hostname,retryable:!0}),e.request.emit("httpError",[e.error,e],function(){n()})}function o(){var n=t.HttpClient.getInstance(),o=e.request.service.config.httpOptions||{};try{var s=n.handleRequest(e.request.httpRequest,o,r,a);i(s)}catch(e){a(e)}}e.httpResponse._abortCallback=n,e.error=null,e.data=null;var s=(t.util.date.getDate()-this.signedAt)/1e3;s>=600?this.emit("sign",[this],function(e){e?n(e):o()}):o()}),e("HTTP_HEADERS","httpHeaders",function(e,n,r){r.httpResponse.statusCode=e,r.httpResponse.headers=n,r.httpResponse.body=new t.util.Buffer(""),r.httpResponse.buffers=[],r.httpResponse.numBytes=0;var i=n.date||n.Date;if(i){var a=Date.parse(i);r.request.service.config.correctClockSkew&&t.util.isClockSkewed(a)&&t.util.applyClockOffset(a)}}),e("HTTP_DATA","httpData",function(e,n){if(e){if(t.util.isNode()){n.httpResponse.numBytes+=e.length;var r=n.httpResponse.headers["content-length"],i={loaded:n.httpResponse.numBytes,total:r};n.request.emit("httpDownloadProgress",[i,n])}n.httpResponse.buffers.push(new t.util.Buffer(e))}}),e("HTTP_DONE","httpDone",function(e){if(e.httpResponse.buffers&&e.httpResponse.buffers.length>0){var n=t.util.buffer.concat(e.httpResponse.buffers);e.httpResponse.body=n}delete e.httpResponse.numBytes,delete e.httpResponse.buffers}),e("FINALIZE_ERROR","retry",function(e){e.httpResponse.statusCode&&(e.error.statusCode=e.httpResponse.statusCode,void 0===e.error.retryable&&(e.error.retryable=this.service.retryableError(e.error,this)))}),e("INVALIDATE_CREDENTIALS","retry",function(e){if(e.error)switch(e.error.code){case"RequestExpired":case"ExpiredTokenException":case"ExpiredToken":e.error.retryable=!0,e.request.service.config.credentials.expired=!0}}),e("EXPIRED_SIGNATURE","retry",function(e){var t=e.error;t&&"string"==typeof t.code&&"string"==typeof t.message&&t.code.match(/Signature/)&&t.message.match(/expired/)&&(e.error.retryable=!0)}),e("CLOCK_SKEWED","retry",function(e){e.error&&this.service.clockSkewError(e.error)&&this.service.config.correctClockSkew&&t.config.isClockSkewed&&(e.error.retryable=!0)}),e("REDIRECT","retry",function(e){e.error&&e.error.statusCode>=300&&e.error.statusCode<400&&e.httpResponse.headers.location&&(this.httpRequest.endpoint=new t.Endpoint(e.httpResponse.headers.location),this.httpRequest.headers.Host=this.httpRequest.endpoint.host,e.error.redirect=!0,e.error.retryable=!0)}),e("RETRY_CHECK","retry",function(e){e.error&&(e.error.redirect&&e.redirectCount<e.maxRedirects?e.error.retryDelay=0:e.retryCount<e.maxRetries&&(e.error.retryDelay=this.service.retryDelays(e.retryCount)||0))}),n("RESET_RETRY_STATE","afterRetry",function(e,t){var n,r=!1;e.error&&(n=e.error.retryDelay||0,e.error.retryable&&e.retryCount<e.maxRetries?(e.retryCount++,r=!0):e.error.redirect&&e.redirectCount<e.maxRedirects&&(e.redirectCount++,r=!0)),r?(e.error=null,setTimeout(t,n)):t()})}),CorePost:(new n).addNamedListeners(function(e){e("EXTRACT_REQUEST_ID","extractData",t.util.extractRequestId),e("EXTRACT_REQUEST_ID","extractError",t.util.extractRequestId),e("ENOTFOUND_ERROR","httpError",function(e){if("NetworkingError"===e.code&&"ENOTFOUND"===e.errno){var n="Inaccessible host: `"+e.hostname+"'. This service may not be available in the `"+e.region+"' region.";this.response.error=t.util.error(new Error(n),{code:"UnknownEndpoint",region:e.region,hostname:e.hostname,retryable:!0,originalError:e})}})}),Logger:(new n).addNamedListeners(function(n){n("LOG_REQUEST","complete",function(n){function r(){var r=t.util.date.getDate().getTime(),o=(r-i.startTime.getTime())/1e3,s=!!a.isTTY,c=n.httpResponse.statusCode,u=e("util").inspect(i.params,!0,null),l="";return s&&(l+="\x1b[33m"),l+="[AWS "+i.service.serviceIdentifier+" "+c,l+=" "+o.toString()+"s "+n.retryCount+" retries]",s&&(l+="\x1b[0;1m"),l+=" "+t.util.string.lowerFirst(i.operation),l+="("+u+")",s&&(l+="\x1b[0m"),l}var i=n.request,a=i.service.config.logger;if(a){var o=r();"function"==typeof a.log?a.log(o):"function"==typeof a.write&&a.write(o+"\n")}})}),Json:(new n).addNamedListeners(function(t){var n=e("./protocol/json");t("BUILD","build",n.buildRequest),t("EXTRACT_DATA","extractData",n.extractData),t("EXTRACT_ERROR","extractError",n.extractError)}),Rest:(new n).addNamedListeners(function(t){var n=e("./protocol/rest");t("BUILD","build",n.buildRequest),t("EXTRACT_DATA","extractData",n.extractData),t("EXTRACT_ERROR","extractError",n.extractError)}),RestJson:(new n).addNamedListeners(function(t){var n=e("./protocol/rest_json");t("BUILD","build",n.buildRequest),t("EXTRACT_DATA","extractData",n.extractData),t("EXTRACT_ERROR","extractError",n.extractError)}),RestXml:(new n).addNamedListeners(function(t){var n=e("./protocol/rest_xml");t("BUILD","build",n.buildRequest),t("EXTRACT_DATA","extractData",n.extractData),t("EXTRACT_ERROR","extractError",n.extractError)}),Query:(new n).addNamedListeners(function(t){var n=e("./protocol/query");t("BUILD","build",n.buildRequest),t("EXTRACT_DATA","extractData",n.extractData),t("EXTRACT_ERROR","extractError",n.extractError)})}},{"./core":24,"./protocol/json":48,"./protocol/query":49,"./protocol/rest":50,"./protocol/rest_json":51,"./protocol/rest_xml":52,"./sequential_executor":60,util:20}],60:[function(e,t){var n=e("./core");n.SequentialExecutor=n.util.inherit({constructor:function(){this._events={}},listeners:function(e){return this._events[e]?this._events[e].slice(0):[]},on:function(e,t){return this._events[e]?this._events[e].push(t):this._events[e]=[t],this},onAsync:function(e,t){return t._isAsync=!0,this.on(e,t)},removeListener:function(e,t){var n=this._events[e];if(n){for(var r=n.length,i=-1,a=0;a<r;++a)n[a]===t&&(i=a);i>-1&&n.splice(i,1)}return this},removeAllListeners:function(e){return e?delete this._events[e]:this._events={},this},emit:function(e,t,n){n||(n=function(){});var r=this.listeners(e),i=r.length;return this.callListeners(r,t,n),i>0},callListeners:function(e,t,r,i){function a(i){return i&&(s=n.util.error(s||new Error,i),o._haltHandlersOnError)?r.call(o,s):void o.callListeners(e,t,r,s)}for(var o=this,s=i||null;e.length>0;){var c=e.shift();if(c._isAsync)return void c.apply(o,t.concat([a]));try{c.apply(o,t)}catch(e){s=n.util.error(s||new Error,e)}if(s&&o._haltHandlersOnError)return void r.call(o,s)}r.call(o,s)},addListeners:function(e){var t=this;return e._events&&(e=e._events),n.util.each(e,function(e,r){"function"==typeof r&&(r=[r]),n.util.arrayEach(r,function(n){t.on(e,n)})}),t},addNamedListener:function(e,t,n){return this[e]=n,this.addListener(t,n),this},addNamedAsyncListener:function(e,t,n){return n._isAsync=!0,this.addNamedListener(e,t,n)},addNamedListeners:function(e){var t=this;return e(function(){t.addNamedListener.apply(t,arguments)},function(){t.addNamedAsyncListener.apply(t,arguments)}),this}}),n.SequentialExecutor.prototype.addListener=n.SequentialExecutor.prototype.on,t.exports=n.SequentialExecutor},{"./core":24}],52:[function(e,t){function n(e){var t=e.service.api.operations[e.operation].input,n=new o.XML.Builder,r=e.params,i=t.payload;if(i){var a=t.members[i];if(r=r[i],void 0===r)return;if("structure"===a.type){var c=a.name;e.httpRequest.body=n.toXML(r,a,c,!0)}else e.httpRequest.body=r}else e.httpRequest.body=n.toXML(r,t,t.name||t.shape||s.string.upperFirst(e.operation)+"Request")}function r(e){c.buildRequest(e),["GET","HEAD"].indexOf(e.httpRequest.method)<0&&n(e)}function i(e){c.extractError(e);var t=(new o.XML.Parser).parse(e.httpResponse.body.toString());t.Errors&&(t=t.Errors),t.Error&&(t=t.Error),t.Code?e.error=s.error(new Error,{code:t.Code,message:t.Message}):e.error=s.error(new Error,{code:e.httpResponse.statusCode,message:null})}function a(e){c.extractData(e);var t,n=e.request,r=e.httpResponse.body,i=n.service.api.operations[n.operation],a=i.output,u=a.payload;if(u){var l=a.members[u];l.isStreaming?e.data[u]=r:"structure"===l.type?(t=new o.XML.Parser,e.data[u]=t.parse(r.toString(),l)):e.data[u]=r.toString()}else if(r.length>0){t=new o.XML.Parser;var d=t.parse(r.toString(),a);s.update(e.data,d)}}var o=e("../core"),s=e("../util"),c=e("./rest");t.exports={buildRequest:r,extractError:i,extractData:a}},{"../core":24,"../util":84,"./rest":50}],51:[function(e,t){function n(e){var t=new u,n=e.service.api.operations[e.operation].input;if(n.payload){var r={},i=n.members[n.payload];if(r=e.params[n.payload],void 0===r)return;"structure"===i.type?e.httpRequest.body=t.build(r,i):e.httpRequest.body=r}else e.httpRequest.body=t.build(e.params,n)}function r(e){s.buildRequest(e),["GET","HEAD","DELETE"].indexOf(e.httpRequest.method)<0&&n(e)}function i(e){c.extractError(e)}function a(e){s.extractData(e);var t=e.request,n=t.service.api.operations[t.operation].output||{};if(n.payload){var r=n.members[n.payload],i=e.httpResponse.body;if(r.isStreaming)e.data[n.payload]=i;else if("structure"===r.type||"list"===r.type){var a=new l;e.data[n.payload]=a.parse(i,r)}else e.data[n.payload]=i.toString()}else{var u=e.data;c.extractData(e),e.data=o.merge(u,e.data)}}var o=e("../util"),s=e("./rest"),c=e("./json"),u=e("../json/builder"),l=e("../json/parser");t.exports={buildRequest:r,extractError:i,extractData:a}},{"../json/builder":39,"../json/parser":40,"../util":84,"./json":48,"./rest":50}],50:[function(e,t){function n(e){e.httpRequest.method=e.service.api.operations[e.operation].httpMethod}function r(e){var t=e.service.api.operations[e.operation],n=t.input,r=[e.httpRequest.endpoint.path,t.httpPath].join("/");r=r.replace(/\/+/g,"/");var i={},a=!1;if(c.each(n.members,function(t,n){var o=e.params[t];if(null!==o&&void 0!==o)if("uri"===n.location){var s=new RegExp("\\{"+n.name+"(\\+)?\\}");r=r.replace(s,function(e,t){var n=t?c.uriEscapePath:c.uriEscape;return n(String(o))})}else"querystring"===n.location&&(a=!0,"list"===n.type?i[n.name]=o.map(function(e){return c.uriEscape(String(e))}):"map"===n.type?c.each(o,function(e,t){Array.isArray(t)?i[e]=t.map(function(e){return c.uriEscape(String(e))}):i[e]=c.uriEscape(String(t))}):i[n.name]=c.uriEscape(String(o)))}),a){r+=r.indexOf("?")>=0?"&":"?";var o=[];c.arrayEach(Object.keys(i).sort(),function(e){Array.isArray(i[e])||(i[e]=[i[e]]);for(var t=0;t<i[e].length;t++)o.push(c.uriEscape(String(e))+"="+i[e][t])}),r+=o.join("&")}e.httpRequest.path=r}function i(e){var t=e.service.api.operations[e.operation];c.each(t.input.members,function(t,n){var r=e.params[t];null!==r&&void 0!==r&&("headers"===n.location&&"map"===n.type?c.each(r,function(t,r){e.httpRequest.headers[n.name+t]=r}):"header"===n.location&&(r=n.toWireFormat(r).toString(),e.httpRequest.headers[n.name]=r))})}function a(e){n(e),r(e),i(e)}function o(){}function s(e){var t=e.request,n={},r=e.httpResponse,i=t.service.api.operations[t.operation],a=i.output,o={};c.each(r.headers,function(e,t){o[e.toLowerCase()]=t}),c.each(a.members,function(e,t){var i=(t.name||e).toLowerCase();if("headers"===t.location&&"map"===t.type){n[e]={};var a=t.isLocationName?t.name:"",s=new RegExp("^"+a+"(.+)","i");c.each(r.headers,function(t,r){var i=t.match(s);null!==i&&(n[e][i[1]]=r)})}else"header"===t.location?void 0!==o[i]&&(n[e]=o[i]):"statusCode"===t.location&&(n[e]=parseInt(r.statusCode,10))}),e.data=n}var c=e("../util");t.exports={buildRequest:a,extractError:o,extractData:s}},{"../util":84}],49:[function(e,t){function n(e){var t=e.service.api.operations[e.operation],n=e.httpRequest;n.headers["Content-Type"]="application/x-www-form-urlencoded; charset=utf-8",n.params={Version:e.service.api.apiVersion,Action:t.name};var r=new s;r.serialize(e.params,t.input,function(e,t){n.params[e]=t}),n.body=o.queryParamsToString(n.params)}function r(e){var t,n=e.httpResponse.body.toString();t=n.match("<UnknownOperationException")?{Code:"UnknownOperation",Message:"Unknown operation "+e.request.operation}:(new a.XML.Parser).parse(n),t.requestId&&!e.requestId&&(e.requestId=t.requestId),t.Errors&&(t=t.Errors),t.Error&&(t=t.Error),t.Code?e.error=o.error(new Error,{code:t.Code,message:t.Message}):e.error=o.error(new Error,{code:e.httpResponse.statusCode,message:null})}function i(e){var t=e.request,n=t.service.api.operations[t.operation],r=n.output||{},i=r;if(i.resultWrapper){var s=c.create({type:"structure"});s.members[i.resultWrapper]=r,s.memberNames=[i.resultWrapper],o.property(r,"name",r.resultWrapper),r=s}var u=new a.XML.Parser;if(r&&r.members&&!r.members._XAMZRequestId){var l=c.create({type:"string"},{api:{protocol:"query"}},"requestId");r.members._XAMZRequestId=l}var d=u.parse(e.httpResponse.body.toString(),r);e.requestId=d._XAMZRequestId||d.requestId,d._XAMZRequestId&&delete d._XAMZRequestId,i.resultWrapper&&d[i.resultWrapper]&&(o.update(d,d[i.resultWrapper]),delete d[i.resultWrapper]),e.data=d}var a=e("../core"),o=e("../util"),s=e("../query/query_param_serializer"),c=e("../model/shape");t.exports={buildRequest:n,extractError:r,extractData:i}},{"../core":24,"../model/shape":46,"../query/query_param_serializer":53,"../util":84}],53:[function(e,t){function n(){}function r(e){return e.isQueryName||"ec2"!==e.api.protocol?e.name:e.name[0].toUpperCase()+e.name.substr(1)}function i(e,t,n,i){c.each(n.members,function(n,a){var o=t[n];if(null!==o&&void 0!==o){var c=r(a);c=e?e+"."+c:c,s(c,o,a,i)}})}function a(e,t,n,r){var i=1;c.each(t,function(t,a){var o=n.flattened?".":".entry.",c=o+i++ +".",u=c+(n.key.name||"key"),l=c+(n.value.name||"value");s(e+u,t,n.key,r),s(e+l,a,n.value,r)})}function o(e,t,n,i){var a=n.member||{};return 0===t.length?void i.call(this,e,null):void c.arrayEach(t,function(t,o){var c="."+(o+1);if("ec2"===n.api.protocol)c+="";else if(n.flattened){if(a.name){var u=e.split(".");u.pop(),u.push(r(a)),e=u.join(".")}}else c=".member"+c;s(e+c,t,a,i)})}function s(e,t,n,r){null!==t&&void 0!==t&&("structure"===n.type?i(e,t,n,r):"list"===n.type?o(e,t,n,r):"map"===n.type?a(e,t,n,r):r(e,n.toWireFormat(t).toString()))}var c=e("../util");n.prototype.serialize=function(e,t,n){i("",e,t,n)},t.exports=n},{"../util":84}],46:[function(e,t){function n(e,t,n){null!==n&&void 0!==n&&y.property.apply(this,arguments)}function r(e,t){e.constructor.prototype[t]||y.memoizedProperty.apply(this,arguments)}function i(e,t,r){t=t||{},n(this,"shape",e.shape),n(this,"api",t.api,!1),n(this,"type",e.type),n(this,"enum",e["enum"]),n(this,"min",e.min),n(this,"max",e.max),n(this,"pattern",e.pattern),n(this,"location",e.location||this.location||"body"),n(this,"name",this.name||e.xmlName||e.queryName||e.locationName||r),n(this,"isStreaming",e.streaming||this.isStreaming||!1),n(this,"isComposite",e.isComposite||!1),n(this,"isShape",!0,!1),n(this,"isQueryName",!!e.queryName,!1),n(this,"isLocationName",!!e.locationName,!1),t.documentation&&(n(this,"documentation",e.documentation),n(this,"documentationUrl",e.documentationUrl)),e.xmlAttribute&&n(this,"isXmlAttribute",e.xmlAttribute||!1),n(this,"defaultValue",null),this.toWireFormat=function(e){return null===e||void 0===e?"":e},this.toType=function(e){return e}}function a(e){i.apply(this,arguments),n(this,"isComposite",!0),e.flattened&&n(this,"flattened",e.flattened||!1)}function o(e,t){var o=null,s=!this.isShape;a.apply(this,arguments),s&&(n(this,"defaultValue",function(){return{}}),n(this,"members",{}),n(this,"memberNames",[]),n(this,"required",[]),n(this,"isRequired",function(){return!1})),e.members&&(n(this,"members",new g(e.members,t,function(e,n){return i.create(n,t,e)})),r(this,"memberNames",function(){return e.xmlOrder||Object.keys(e.members)})),e.required&&(n(this,"required",e.required),n(this,"isRequired",function(t){if(!o){o={};for(var n=0;n<e.required.length;n++)o[e.required[n]]=!0}return o[t]},!1,!0)),n(this,"resultWrapper",e.resultWrapper||null),e.payload&&n(this,"payload",e.payload),"string"==typeof e.xmlNamespace?n(this,"xmlNamespaceUri",e.xmlNamespace):"object"==typeof e.xmlNamespace&&(n(this,"xmlNamespacePrefix",e.xmlNamespace.prefix),n(this,"xmlNamespaceUri",e.xmlNamespace.uri))}function s(e,t){var o=this,s=!this.isShape;if(a.apply(this,arguments),s&&n(this,"defaultValue",function(){return[]}),e.member&&r(this,"member",function(){return i.create(e.member,t)}),this.flattened){var c=this.name;r(this,"name",function(){return o.member.name||c})}}function c(e,t){var o=!this.isShape;a.apply(this,arguments),o&&(n(this,"defaultValue",function(){return{}}),n(this,"key",i.create({type:"string"},t)),n(this,"value",i.create({type:"string"},t))),e.key&&r(this,"key",function(){return i.create(e.key,t)}),e.value&&r(this,"value",function(){return i.create(e.value,t)})}function u(e){var t=this;if(i.apply(this,arguments),"header"===this.location)n(this,"timestampFormat","rfc822");else if(e.timestampFormat)n(this,"timestampFormat",e.timestampFormat);else if(this.api)if(this.api.timestampFormat)n(this,"timestampFormat",this.api.timestampFormat);else switch(this.api.protocol){case"json":case"rest-json":n(this,"timestampFormat","unixTimestamp");break;case"rest-xml":case"query":case"ec2":n(this,"timestampFormat","iso8601")}this.toType=function(e){return null===e||void 0===e?null:"function"==typeof e.toUTCString?e:"string"==typeof e||"number"==typeof e?y.date.parseTimestamp(e):null},this.toWireFormat=function(e){return y.date.format(e,t.timestampFormat)}}function l(){if(i.apply(this,arguments),this.api)switch(this.api.protocol){case"rest-xml":case"query":case"ec2":this.toType=function(e){return e||""}}}function d(){i.apply(this,arguments),this.toType=function(e){return null===e||void 0===e?null:parseFloat(e)},this.toWireFormat=this.toType}function h(){i.apply(this,arguments),this.toType=function(e){return null===e||void 0===e?null:parseInt(e,10)},this.toWireFormat=this.toType}function f(){i.apply(this,arguments),this.toType=y.base64.decode,this.toWireFormat=y.base64.encode}function p(){f.apply(this,arguments)}function m(){i.apply(this,arguments),this.toType=function(e){return"boolean"==typeof e?e:null===e||void 0===e?null:"true"===e}}var g=e("./collection"),y=e("../util");i.normalizedTypes={character:"string","double":"float","long":"integer","short":"integer",biginteger:"integer",bigdecimal:"float",blob:"binary"},i.types={structure:o,list:s,map:c,"boolean":m,timestamp:u,"float":d,integer:h,string:l,base64:p,binary:f},i.resolve=function(e,t){if(e.shape){var n=t.api.shapes[e.shape];if(!n)throw new Error("Cannot find shape reference: "+e.shape);return n}return null},i.create=function(e,t,n){if(e.isShape)return e;var r=i.resolve(e,t);if(r){var a=Object.keys(e);if(t.documentation||(a=a.filter(function(e){return!e.match(/documentation/)})),a===["shape"])return r;var o=function(){r.constructor.call(this,e,t,n)};return o.prototype=r,new o}e.type||(e.members?e.type="structure":e.member?e.type="list":e.key?e.type="map":e.type="string");var s=e.type;if(i.normalizedTypes[e.type]&&(e.type=i.normalizedTypes[e.type]),i.types[e.type])return new i.types[e.type](e,t,n);throw new Error("Unrecognized shape type: "+s)},i.shapes={StructureShape:o,ListShape:s,MapShape:c,StringShape:l,BooleanShape:m,Base64Shape:p},t.exports=i},{"../util":84,"./collection":42}],42:[function(e,t){function n(e,t,n,r){i(this,r(e),function(){return n(e,t)})}function r(e,t,r,i){i=i||String;var a=this;for(var o in e)e.hasOwnProperty(o)&&n.call(a,o,e[o],r,i)}var i=e("../util").memoizedProperty;t.exports=r},{"../util":84}],48:[function(e,t){function n(e){var t=e.httpRequest,n=e.service.api,r=n.targetPrefix+"."+n.operations[e.operation].name,i=n.jsonVersion||"1.0",a=n.operations[e.operation].input,s=new o;1===i&&(i="1.0"),t.body=s.build(e.params||{},a),t.headers["Content-Type"]="application/x-amz-json-"+i,t.headers["X-Amz-Target"]=r}function r(e){var t={},n=e.httpResponse;if(t.code=n.headers["x-amzn-errortype"]||"UnknownError","string"==typeof t.code&&(t.code=t.code.split(":")[0]),n.body.length>0){var r=JSON.parse(n.body.toString());(r.__type||r.code)&&(t.code=(r.__type||r.code).split("#").pop()),"RequestEntityTooLarge"===t.code?t.message="Request body must be less than 1 MB":t.message=r.message||r.Message||null}else t.statusCode=n.statusCode,t.message=n.statusCode.toString();e.error=a.error(new Error,t)}function i(e){var t=e.httpResponse.body.toString()||"{}";if(e.request.service.config.convertResponseTypes===!1)e.data=JSON.parse(t);else{var n=e.request.service.api.operations[e.request.operation],r=n.output||{},i=new s;e.data=i.parse(t,r)}}var a=e("../util"),o=e("../json/builder"),s=e("../json/parser");t.exports={buildRequest:n,extractError:r,extractData:i}},{"../json/builder":39,"../json/parser":40,"../util":84}],40:[function(e,t){function n(){}function r(e,t){if(t&&void 0!==e)switch(t.type){case"structure":return i(e,t);case"map":return o(e,t);case"list":return a(e,t);default:return s(e,t)}}function i(e,t){if(null!=e){var n={},i=t.members;return c.each(i,function(t,i){var a=i.isLocationName?i.name:t;if(e.hasOwnProperty(a)){var o=e[a],s=r(o,i);void 0!==s&&(n[t]=s)}}),n}}function a(e,t){if(null!=e){var n=[];return c.arrayEach(e,function(e){var i=r(e,t.member);void 0===i?n.push(null):n.push(i)}),n}}function o(e,t){if(null!=e){var n={};return c.each(e,function(e,i){var a=r(i,t.value);void 0===a?n[e]=null:n[e]=a}),n}}function s(e,t){return t.toType(e)}var c=e("../util");n.prototype.parse=function(e,t){return r(JSON.parse(e),t)},t.exports=n},{"../util":84}],39:[function(e,t){function n(){}function r(e,t){if(t&&void 0!==e&&null!==e)switch(t.type){case"structure":return i(e,t);case"map":return o(e,t);case"list":return a(e,t);default:return s(e,t)}}function i(e,t){var n={};return c.each(e,function(e,i){var a=t.members[e];if(a){if("body"!==a.location)return;var o=a.isLocationName?a.name:e,s=r(i,a);void 0!==s&&(n[o]=s)}}),n}function a(e,t){var n=[];return c.arrayEach(e,function(e){var i=r(e,t.member);void 0!==i&&n.push(i)}),n}function o(e,t){var n={};return c.each(e,function(e,i){var a=r(i,t.value);void 0!==a&&(n[e]=a)}),n}function s(e,t){return t.toWireFormat(e)}var c=e("../util");n.prototype.build=function(e,t){return JSON.stringify(r(e,t))},t.exports=n},{"../util":84}],84:[function(e,t){(function(n){var r,i=e("crypto"),a=e("buffer").Buffer,o={engine:function(){return o.isBrowser()&&"undefined"!=typeof navigator?navigator.userAgent:n.platform+"/"+n.version},userAgent:function(){var t=o.isBrowser()?"js":"nodejs",n="aws-sdk-"+t+"/"+e("./core").VERSION;return"nodejs"===t&&(n+=" "+o.engine()),n},isBrowser:function(){return n&&n.browser},isNode:function(){return!o.isBrowser()},nodeRequire:function(t){if(o.isNode())return e(t)},multiRequire:function(t,n){return e(o.isNode()?t:n)},uriEscape:function(e){var t=encodeURIComponent(e);return t=t.replace(/[^A-Za-z0-9_.~\-%]+/g,escape),t=t.replace(/[*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})},uriEscapePath:function(e){var t=[];return o.arrayEach(e.split("/"),function(e){t.push(o.uriEscape(e))}),t.join("/")},urlParse:function(t){return e("url").parse(t)},urlFormat:function(t){return e("url").format(t)},queryStringParse:function(t){return e("querystring").parse(t)},queryParamsToString:function(e){var t=[],n=o.uriEscape,r=Object.keys(e).sort();return o.arrayEach(r,function(r){var i=e[r],a=n(r),s=a+"=";if(Array.isArray(i)){var c=[];o.arrayEach(i,function(e){c.push(n(e))}),s=a+"="+c.sort().join("&"+a+"=")}else void 0!==i&&null!==i&&(s=a+"="+n(i));t.push(s)}),t.join("&")},readFileSync:function(e){return o.isBrowser()?null:o.nodeRequire("fs").readFileSync(e,"utf-8")},base64:{encode:function(e){return new a(e).toString("base64")},decode:function(e){return new a(e,"base64")}},Buffer:a,buffer:{toStream:function(e){o.Buffer.isBuffer(e)||(e=new o.Buffer(e));var t=new(o.nodeRequire("stream").Readable),n=0;return t._read=function(r){if(n>=e.length)return t.push(null);var i=n+r;i>e.length&&(i=e.length),t.push(e.slice(n,i)),n=i},t},concat:function(e){var t,n=0,r=0,i=null;for(t=0;t<e.length;t++)n+=e[t].length;for(i=new a(n),t=0;t<e.length;t++)e[t].copy(i,r),r+=e[t].length;
return i}},string:{byteLength:function(e){if(null===e||void 0===e)return 0;if("string"==typeof e&&(e=new a(e)),"number"==typeof e.byteLength)return e.byteLength;if("number"==typeof e.length)return e.length;if("number"==typeof e.size)return e.size;if("string"==typeof e.path)return o.nodeRequire("fs").lstatSync(e.path).size;throw o.error(new Error("Cannot determine length of "+e),{object:e})},upperFirst:function(e){return e[0].toUpperCase()+e.substr(1)},lowerFirst:function(e){return e[0].toLowerCase()+e.substr(1)}},ini:{parse:function(e){var t,n={};return o.arrayEach(e.split(/\r?\n/),function(e){e=e.split(/(^|\s);/)[0];var r=e.match(/^\s*\[([^\[\]]+)\]\s*$/);if(r)t=r[1];else if(t){var i=e.match(/^\s*(.+?)\s*=\s*(.+?)\s*$/);i&&(n[t]=n[t]||{},n[t][i[1]]=i[2])}}),n}},fn:{noop:function(){},makeAsync:function(e,t){return t&&t<=e.length?e:function(){var t=Array.prototype.slice.call(arguments,0),n=t.pop(),r=e.apply(null,t);n(r)}}},date:{getDate:function(){return r||(r=e("./core")),r.config.systemClockOffset?new Date((new Date).getTime()+r.config.systemClockOffset):new Date},iso8601:function(e){return void 0===e&&(e=o.date.getDate()),e.toISOString().replace(/\.\d{3}Z$/,"Z")},rfc822:function(e){return void 0===e&&(e=o.date.getDate()),e.toUTCString()},unixTimestamp:function(e){return void 0===e&&(e=o.date.getDate()),e.getTime()/1e3},from:function(e){return"number"==typeof e?new Date(1e3*e):new Date(e)},format:function(e,t){return t||(t="iso8601"),o.date[t](o.date.from(e))},parseTimestamp:function(e){if("number"==typeof e)return new Date(1e3*e);if(e.match(/^\d+$/))return new Date(1e3*e);if(e.match(/^\d{4}/))return new Date(e);if(e.match(/^\w{3},/))return new Date(e);throw o.error(new Error("unhandled timestamp format: "+e),{code:"TimestampParserError"})}},crypto:{crc32Table:[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],crc32:function(e){var t=o.crypto.crc32Table,n=-1;"string"==typeof e&&(e=new a(e));for(var r=0;r<e.length;r++){var i=e.readUInt8(r);n=n>>>8^t[255&(n^i)]}return(n^-1)>>>0},hmac:function(e,t,n,r){return n||(n="binary"),"buffer"===n&&(n=void 0),r||(r="sha256"),"string"==typeof t&&(t=new a(t)),i.createHmac(r,e).update(t).digest(n)},md5:function(e,t,n){return o.crypto.hash("md5",e,t,n)},sha256:function(e,t,n){return o.crypto.hash("sha256",e,t,n)},hash:function(e,t,n,r){var i=o.crypto.createHash(e);n||(n="binary"),"buffer"===n&&(n=void 0),"string"==typeof t&&(t=new a(t));var s=o.arraySliceFn(t),c=a.isBuffer(t);if(o.isBrowser()&&"undefined"!=typeof ArrayBuffer&&t&&t.buffer instanceof ArrayBuffer&&(c=!0),r&&"object"==typeof t&&"function"==typeof t.on&&!c)t.on("data",function(e){i.update(e)}),t.on("error",function(e){r(e)}),t.on("end",function(){r(null,i.digest(n))});else{if(!r||!s||c||"undefined"==typeof FileReader){o.isBrowser()&&"object"==typeof t&&!c&&(t=new a(new Uint8Array(t)));var u=i.update(t).digest(n);return r&&r(null,u),u}var l=0,d=524288,h=new FileReader;h.onerror=function(){r(new Error("Failed to read data."))},h.onload=function(){var e=new a(new Uint8Array(h.result));i.update(e),l+=e.length,h._continueReading()},h._continueReading=function(){if(l>=t.size)return void r(null,i.digest(n));var e=l+d;e>t.size&&(e=t.size),h.readAsArrayBuffer(s.call(t,l,e))},h._continueReading()}},toHex:function(e){for(var t=[],n=0;n<e.length;n++)t.push(("0"+e.charCodeAt(n).toString(16)).substr(-2,2));return t.join("")},createHash:function(e){return i.createHash(e)}},abort:{},each:function(e,t){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=t.call(this,n,e[n]);if(r===o.abort)break}},arrayEach:function(e,t){for(var n in e)if(e.hasOwnProperty(n)){var r=t.call(this,e[n],parseInt(n,10));if(r===o.abort)break}},update:function(e,t){return o.each(t,function(t,n){e[t]=n}),e},merge:function(e,t){return o.update(o.copy(e),t)},copy:function(e){if(null===e||void 0===e)return e;var t={};for(var n in e)t[n]=e[n];return t},isEmpty:function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},arraySliceFn:function(e){var t=e.slice||e.webkitSlice||e.mozSlice;return"function"==typeof t?t:null},isType:function(e,t){return"function"==typeof t&&(t=o.typeName(t)),Object.prototype.toString.call(e)==="[object "+t+"]"},typeName:function(e){if(e.hasOwnProperty("name"))return e.name;var t=e.toString(),n=t.match(/^\s*function (.+)\(/);return n?n[1]:t},error:function(e,t){var n=null;return"string"==typeof e.message&&""!==e.message&&("string"==typeof t||t&&t.message)&&(n=o.copy(e),n.message=e.message),e.message=e.message||null,"string"==typeof t?e.message=t:"object"==typeof t&&null!==t&&(o.update(e,t),t.message&&(e.message=t.message),(t.code||t.name)&&(e.code=t.code||t.name),t.stack&&(e.stack=t.stack)),"function"==typeof Object.defineProperty&&(Object.defineProperty(e,"name",{writable:!0,enumerable:!1}),Object.defineProperty(e,"message",{enumerable:!0})),e.name=t&&t.name||e.name||e.code||"Error",e.time=new Date,n&&(e.originalError=n),e},inherit:function(e,t){var n=null;if(void 0===t)t=e,e=Object,n={};else{var r=function(){};r.prototype=e.prototype,n=new r}return t.constructor===Object&&(t.constructor=function(){if(e!==Object)return e.apply(this,arguments)}),t.constructor.prototype=n,o.update(t.constructor.prototype,t),t.constructor.__super__=e,t.constructor},mixin:function(){for(var e=arguments[0],t=1;t<arguments.length;t++)for(var n in arguments[t].prototype){var r=arguments[t].prototype[n];"constructor"!==n&&(e.prototype[n]=r)}return e},hideProperties:function(e,t){"function"==typeof Object.defineProperty&&o.arrayEach(t,function(t){Object.defineProperty(e,t,{enumerable:!1,writable:!0,configurable:!0})})},property:function(e,t,n,r,i){var a={configurable:!0,enumerable:void 0===r||r};"function"!=typeof n||i?(a.value=n,a.writable=!0):a.get=n,Object.defineProperty(e,t,a)},memoizedProperty:function(e,t,n,r){var i=null;o.property(e,t,function(){return null===i&&(i=n()),i},r)},hoistPayloadMember:function(e){var t=e.request,n=t.operation,r=t.service.api.operations[n].output;if(r.payload){var i=r.members[r.payload],a=e.data[r.payload];"structure"===i.type&&o.each(a,function(t,n){o.property(e.data,t,n,!1)})}},computeSha256:function(e,t){if(o.isNode()){var n=o.nodeRequire("stream").Stream,r=o.nodeRequire("fs");if(e instanceof n){if("string"!=typeof e.path)return t(new Error("Non-file stream objects are not supported with SigV4"));var i={};"number"==typeof e.start&&(i.start=e.start),"number"==typeof e.end&&(i.end=e.end),e=r.createReadStream(e.path,i)}}o.crypto.sha256(e,"hex",function(e,n){e?t(e):t(null,n)})},isClockSkewed:function(e){if(e)return o.property(r.config,"isClockSkewed",Math.abs((new Date).getTime()-e)>=3e5,!1),r.config.isClockSkewed},applyClockOffset:function(e){e&&(r.config.systemClockOffset=e-(new Date).getTime())},extractRequestId:function(e){var t=e.httpResponse.headers["x-amz-request-id"]||e.httpResponse.headers["x-amzn-requestid"];!t&&e.data&&e.data.ResponseMetadata&&(t=e.data.ResponseMetadata.RequestId),t&&(e.requestId=t),e.error&&(e.error.requestId=t)},addPromisesToRequests:function(e,t){return t=t||null,t||"undefined"==typeof Promise||(t=Promise),"function"!=typeof t?void delete e.prototype.promise:void(e.prototype.promise=function(){var e=this;return new t(function(t,n){e.on("complete",function(e){e.error?n(e.error):t(e.data)}),e.runTo()})})}};t.exports=o}).call(this,e("_process"))},{"./core":24,_process:13,buffer:1,crypto:6,querystring:17,url:18}],30:[function(e){var t=e("../core");t.WebIdentityCredentials=t.util.inherit(t.Credentials,{constructor:function(e){t.Credentials.call(this),this.expired=!0,this.params=e,this.params.RoleSessionName=this.params.RoleSessionName||"web-identity",this.data=null},refresh:function(e){var t=this;t.createClients(),e||(e=function(e){if(e)throw e}),t.service.assumeRoleWithWebIdentity(function(n,r){t.data=null,n||(t.data=r,t.service.credentialsFrom(r,t)),e(n)})},createClients:function(){this.service=this.service||new t.STS({params:this.params})}})},{"../core":24}],29:[function(e){var t=e("../core");t.TemporaryCredentials=t.util.inherit(t.Credentials,{constructor:function(e){t.Credentials.call(this),this.loadMasterCredentials(),this.expired=!0,this.params=e||{},this.params.RoleArn&&(this.params.RoleSessionName=this.params.RoleSessionName||"temporary-credentials")},refresh:function(e){var t=this;t.createClients(),e||(e=function(e){if(e)throw e}),t.service.config.credentials=t.masterCredentials;var n=t.params.RoleArn?t.service.assumeRole:t.service.getSessionToken;n.call(t.service,function(n,r){n||t.service.credentialsFrom(r,t),e(n)})},loadMasterCredentials:function(){for(this.masterCredentials=t.config.credentials;this.masterCredentials.masterCredentials;)this.masterCredentials=this.masterCredentials.masterCredentials},createClients:function(){this.service=this.service||new t.STS({params:this.params})}})},{"../core":24}],28:[function(e){var t=e("../core");t.SAMLCredentials=t.util.inherit(t.Credentials,{constructor:function(e){t.Credentials.call(this),this.expired=!0,this.params=e},refresh:function(e){var t=this;t.createClients(),e||(e=function(e){if(e)throw e}),t.service.assumeRoleWithSAML(function(n,r){n||t.service.credentialsFrom(r,t),e(n)})},createClients:function(){this.service=this.service||new t.STS({params:this.params})}})},{"../core":24}],26:[function(e){var t=e("../core");t.CognitoIdentityCredentials=t.util.inherit(t.Credentials,{localStorageKey:{id:"aws.cognito.identity-id.",providers:"aws.cognito.identity-providers."},constructor:function(e){t.Credentials.call(this),this.expired=!0,this.params=e,this.data=null,this.identityId=null,this.loadCachedId()},refresh:function(e){var t=this;t.createClients(),t.data=null,t.identityId=null,t.getId(function(n){n?(t.clearCachedId(),e(n)):t.params.RoleArn?t.getCredentialsFromSTS(e):t.getCredentialsForIdentity(e)})},clearCachedId:function(){this.identityId=null,delete this.params.IdentityId;var e=this.params.IdentityPoolId,t=this.params.LoginId||"";delete this.storage[this.localStorageKey.id+e+t],delete this.storage[this.localStorageKey.providers+e+t]},getId:function(e){var t=this;return"string"==typeof t.params.IdentityId?e(null,t.params.IdentityId):void t.cognito.getId(function(n,r){!n&&r.IdentityId?(t.params.IdentityId=r.IdentityId,e(null,r.IdentityId)):e(n)})},loadCredentials:function(e,t){e&&t&&(t.expired=!1,t.accessKeyId=e.Credentials.AccessKeyId,t.secretAccessKey=e.Credentials.SecretKey,t.sessionToken=e.Credentials.SessionToken,t.expireTime=e.Credentials.Expiration)},getCredentialsForIdentity:function(e){var t=this;t.cognito.getCredentialsForIdentity(function(n,r){n?t.clearCachedId():(t.cacheId(r),t.data=r,t.loadCredentials(t.data,t)),e(n)})},getCredentialsFromSTS:function(e){var t=this;t.cognito.getOpenIdToken(function(n,r){n?(t.clearCachedId(),e(n)):(t.cacheId(r),t.params.WebIdentityToken=r.Token,t.webIdentityCredentials.refresh(function(n){n?t.clearCachedId():(t.data=t.webIdentityCredentials.data,t.sts.credentialsFrom(t.data,t)),e(n)}))})},loadCachedId:function(){var e=this;if(t.util.isBrowser()&&!e.params.IdentityId){var n=e.getStorage("id");if(n&&e.params.Logins){var r=Object.keys(e.params.Logins),i=(e.getStorage("providers")||"").split(","),a=i.filter(function(e){return r.indexOf(e)!==-1});0!==a.length&&(e.params.IdentityId=n)}else n&&(e.params.IdentityId=n)}},createClients:function(){this.webIdentityCredentials=this.webIdentityCredentials||new t.WebIdentityCredentials(this.params),this.cognito=this.cognito||new t.CognitoIdentity({params:this.params}),this.sts=this.sts||new t.STS},cacheId:function(e){this.identityId=e.IdentityId,this.params.IdentityId=this.identityId,t.util.isBrowser()&&(this.setStorage("id",e.IdentityId),this.params.Logins&&this.setStorage("providers",Object.keys(this.params.Logins).join(",")))},getStorage:function(e){return this.storage[this.localStorageKey[e]+this.params.IdentityPoolId+(this.params.LoginId||"")]},setStorage:function(e,t){try{this.storage[this.localStorageKey[e]+this.params.IdentityPoolId+(this.params.LoginId||"")]=t}catch(e){}},storage:function(){try{return t.util.isBrowser()&&null!==window.localStorage&&"object"==typeof window.localStorage?window.localStorage:{}}catch(e){return{}}}()})},{"../core":24}],23:[function(e){var t=e("./core");e("./credentials"),e("./credentials/credential_provider_chain"),t.Config=t.util.inherit({constructor:function(e){void 0===e&&(e={}),e=this.extractCredentials(e),t.util.each.call(this,this.keys,function(t,n){this.set(t,e[t],n)})},getCredentials:function(e){function n(t){e(t,t?null:o.credentials)}function r(e,n){return new t.util.error(n||new Error,{code:"CredentialsError",message:e})}function i(){o.credentials.get(function(e){if(e){var t="Could not load credentials from "+o.credentials.constructor.name;e=r(t,e)}n(e)})}function a(){var e=null;o.credentials.accessKeyId&&o.credentials.secretAccessKey||(e=r("Missing credentials")),n(e)}var o=this;o.credentials?"function"==typeof o.credentials.get?i():a():o.credentialProvider?o.credentialProvider.resolve(function(e,t){e&&(e=r("Could not load credentials from any providers",e)),o.credentials=t,n(e)}):n(r("No credentials to load"))},update:function(e,n){n=n||!1,e=this.extractCredentials(e),t.util.each.call(this,e,function(e,r){(n||this.keys.hasOwnProperty(e)||t.Service.hasService(e))&&this.set(e,r)})},loadFromPath:function(e){this.clear();var n=JSON.parse(t.util.readFileSync(e)),r=new t.FileSystemCredentials(e),i=new t.CredentialProviderChain;return i.providers.unshift(r),i.resolve(function(e,t){if(e)throw e;n.credentials=t}),this.constructor(n),this},clear:function(){t.util.each.call(this,this.keys,function(e){delete this[e]}),this.set("credentials",void 0),this.set("credentialProvider",void 0)},set:function(e,n,r){void 0===n?(void 0===r&&(r=this.keys[e]),"function"==typeof r?this[e]=r.call(this):this[e]=r):"httpOptions"===e&&this[e]?this[e]=t.util.merge(this[e],n):this[e]=n},keys:{credentials:null,credentialProvider:null,region:null,logger:null,apiVersions:{},apiVersion:null,endpoint:void 0,httpOptions:{timeout:12e4},maxRetries:void 0,maxRedirects:10,paramValidation:!0,sslEnabled:!0,s3ForcePathStyle:!1,s3BucketEndpoint:!1,s3DisableBodySigning:!0,computeChecksums:!0,convertResponseTypes:!0,correctClockSkew:!1,customUserAgent:null,dynamoDbCrc32:!0,systemClockOffset:0,signatureVersion:null,signatureCache:!0,retryDelayOptions:{base:100},useAccelerateEndpoint:!1},extractCredentials:function(e){return e.accessKeyId&&e.secretAccessKey&&(e=t.util.copy(e),e.credentials=new t.Credentials(e)),e},setPromisesDependency:function(e){t.util.addPromisesToRequests(t.Request,e)}}),t.config=new t.Config},{"./core":24,"./credentials":25,"./credentials/credential_provider_chain":27}],27:[function(e){var t=e("../core");t.CredentialProviderChain=t.util.inherit(t.Credentials,{constructor:function(e){e?this.providers=e:this.providers=t.CredentialProviderChain.defaultProviders.slice(0)},resolve:function(e){function t(i,a){if(!i&&a||n===r.length)return void e(i,a);var o=r[n++];a="function"==typeof o?o.call():o,a.get?a.get(function(e){t(e,e?null:a)}):t(null,a)}if(0===this.providers.length)return e(new Error("No providers")),this;var n=0,r=this.providers.slice(0);return t(),this}}),t.CredentialProviderChain.defaultProviders=[]},{"../core":24}],25:[function(e){var t=e("./core");t.Credentials=t.util.inherit({constructor:function(){if(t.util.hideProperties(this,["secretAccessKey"]),this.expired=!1,this.expireTime=null,1===arguments.length&&"object"==typeof arguments[0]){var e=arguments[0].credentials||arguments[0];this.accessKeyId=e.accessKeyId,this.secretAccessKey=e.secretAccessKey,this.sessionToken=e.sessionToken}else this.accessKeyId=arguments[0],this.secretAccessKey=arguments[1],this.sessionToken=arguments[2]},expiryWindow:15,needsRefresh:function(){var e=t.util.date.getDate().getTime(),n=new Date(e+1e3*this.expiryWindow);return!!(this.expireTime&&n>this.expireTime)||(this.expired||!this.accessKeyId||!this.secretAccessKey)},get:function(e){var t=this;this.needsRefresh()?this.refresh(function(n){n||(t.expired=!1),e&&e(n)}):e&&e()},refresh:function(e){this.expired=!1,e()}})},{"./core":24}],20:[function(e,t,n){(function(t,r){function i(e,t){var r={seen:[],stylize:o};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),m(t)?r.showHidden=t:t&&n._extend(r,t),_(r.showHidden)&&(r.showHidden=!1),_(r.depth)&&(r.depth=2),_(r.colors)&&(r.colors=!1),_(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=a),c(r,e,r.depth)}function a(e,t){var n=i.styles[t];return n?"\x1b["+i.colors[n][0]+"m"+e+"\x1b["+i.colors[n][1]+"m":e}function o(e){return e}function s(e){var t={};return e.forEach(function(e){t[e]=!0}),t}function c(e,t,r){if(e.customInspect&&t&&T(t.inspect)&&t.inspect!==n.inspect&&(!t.constructor||t.constructor.prototype!==t)){var i=t.inspect(r,e);return b(i)||(i=c(e,i,r)),i}var a=u(e,t);if(a)return a;var o=Object.keys(t),m=s(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(t)),S(t)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return l(t);if(0===o.length){if(T(t)){var g=t.name?": "+t.name:"";return e.stylize("[Function"+g+"]","special")}if(E(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(A(t))return e.stylize(Date.prototype.toString.call(t),"date");if(S(t))return l(t)}var y="",v=!1,w=["{","}"];if(p(t)&&(v=!0,w=["[","]"]),T(t)){var _=t.name?": "+t.name:"";y=" [Function"+_+"]"}if(E(t)&&(y=" "+RegExp.prototype.toString.call(t)),A(t)&&(y=" "+Date.prototype.toUTCString.call(t)),S(t)&&(y=" "+l(t)),0===o.length&&(!v||0==t.length))return w[0]+y+w[1];if(r<0)return E(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var k;return k=v?d(e,t,r,m,o):o.map(function(n){return h(e,t,r,m,n,v)}),e.seen.pop(),f(k,y,w)}function u(e,t){if(_(t))return e.stylize("undefined","undefined");if(b(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return v(t)?e.stylize(""+t,"number"):m(t)?e.stylize(""+t,"boolean"):g(t)?e.stylize("null","null"):void 0}function l(e){return"["+Error.prototype.toString.call(e)+"]"}function d(e,t,n,r,i){for(var a=[],o=0,s=t.length;o<s;++o)x(t,String(o))?a.push(h(e,t,n,r,String(o),!0)):a.push("");return i.forEach(function(i){i.match(/^\d+$/)||a.push(h(e,t,n,r,i,!0))}),a}function h(e,t,n,r,i,a){var o,s,u;if(u=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]},u.get?s=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(s=e.stylize("[Setter]","special")),x(r,i)||(o="["+i+"]"),s||(e.seen.indexOf(u.value)<0?(s=g(n)?c(e,u.value,null):c(e,u.value,n-1),s.indexOf("\n")>-1&&(s=a?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n"))):s=e.stylize("[Circular]","special")),_(o)){if(a&&i.match(/^\d+$/))return s;o=JSON.stringify(""+i),o.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=e.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=e.stylize(o,"string"))}return o+": "+s}function f(e,t,n){var r=0,i=e.reduce(function(e,t){return r++,t.indexOf("\n")>=0&&r++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function p(e){return Array.isArray(e)}function m(e){return"boolean"==typeof e}function g(e){return null===e}function y(e){return null==e}function v(e){return"number"==typeof e}function b(e){return"string"==typeof e}function w(e){return"symbol"==typeof e}function _(e){return void 0===e}function E(e){return k(e)&&"[object RegExp]"===C(e)}function k(e){return"object"==typeof e&&null!==e}function A(e){return k(e)&&"[object Date]"===C(e)}function S(e){return k(e)&&("[object Error]"===C(e)||e instanceof Error)}function T(e){return"function"==typeof e}function I(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function C(e){return Object.prototype.toString.call(e)}function N(e){return e<10?"0"+e.toString(10):e.toString(10)}function D(){var e=new Date,t=[N(e.getHours()),N(e.getMinutes()),N(e.getSeconds())].join(":");return[e.getDate(),O[e.getMonth()],t].join(" ")}function x(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var M=/%[sdj%]/g;n.format=function(e){if(!b(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(i(arguments[n]));return t.join(" ")}for(var n=1,r=arguments,a=r.length,o=String(e).replace(M,function(e){if("%%"===e)return"%";if(n>=a)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}}),s=r[n];n<a;s=r[++n])o+=g(s)||!k(s)?" "+s:" "+i(s);return o},n.deprecate=function(e,i){function a(){if(!o){if(t.throwDeprecation)throw new Error(i);t.traceDeprecation?console.trace(i):console.error(i),o=!0}return e.apply(this,arguments)}if(_(r.process))return function(){return n.deprecate(e,i).apply(this,arguments)};if(t.noDeprecation===!0)return e;var o=!1;return a};var R,P={};n.debuglog=function(e){if(_(R)&&(R=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!P[e])if(new RegExp("\\b"+e+"\\b","i").test(R)){var r=t.pid;P[e]=function(){var t=n.format.apply(n,arguments);console.error("%s %d: %s",e,r,t)}}else P[e]=function(){};return P[e]},n.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=p,n.isBoolean=m,n.isNull=g,n.isNullOrUndefined=y,n.isNumber=v,n.isString=b,n.isSymbol=w,n.isUndefined=_,n.isRegExp=E,n.isObject=k,n.isDate=A,n.isError=S,n.isFunction=T,n.isPrimitive=I,n.isBuffer=e("./support/isBuffer");var O=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];n.log=function(){console.log("%s - %s",D(),n.format.apply(n,arguments))},n.inherits=e("inherits"),n._extend=function(e,t){if(!t||!k(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":19,_process:13,inherits:12}],19:[function(e,t){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],18:[function(e,t,n){function r(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function i(e,t,n){if(e&&u(e)&&e instanceof r)return e;var i=new r;return i.parse(e,t,n),i}function a(e){return c(e)&&(e=i(e)),e instanceof r?e.format():r.prototype.format.call(e)}function o(e,t){return i(e,!1,!0).resolve(t)}function s(e,t){return e?i(e,!1,!0).resolveObject(t):t}function c(e){return"string"==typeof e}function u(e){return"object"==typeof e&&null!==e}function l(e){return null===e}function d(e){return null==e}var h=e("punycode");n.parse=i,n.resolve=o,n.resolveObject=s,n.format=a,n.Url=r;var f=/^([a-z0-9.+-]+:)/i,p=/:[0-9]*$/,m=["<",">",'"',"`"," ","\r","\n","\t"],g=["{","}","|","\\","^","`"].concat(m),y=["'"].concat(g),v=["%","/","?",";","#"].concat(y),b=["/","?","#"],w=255,_=/^[a-z0-9A-Z_-]{0,63}$/,E=/^([a-z0-9A-Z_-]{0,63})(.*)$/,k={javascript:!0,"javascript:":!0},A={javascript:!0,"javascript:":!0},S={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},T=e("querystring");r.prototype.parse=function(e,t,n){if(!c(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var r=e;r=r.trim();var i=f.exec(r);if(i){i=i[0];var a=i.toLowerCase();this.protocol=a,r=r.substr(i.length)}if(n||i||r.match(/^\/\/[^@\/]+@[^@\/]+/)){var o="//"===r.substr(0,2);!o||i&&A[i]||(r=r.substr(2),this.slashes=!0)}if(!A[i]&&(o||i&&!S[i])){for(var s=-1,u=0;u<b.length;u++){var l=r.indexOf(b[u]);l!==-1&&(s===-1||l<s)&&(s=l)}var d,p;p=s===-1?r.lastIndexOf("@"):r.lastIndexOf("@",s),p!==-1&&(d=r.slice(0,p),r=r.slice(p+1),this.auth=decodeURIComponent(d)),s=-1;for(var u=0;u<v.length;u++){var l=r.indexOf(v[u]);l!==-1&&(s===-1||l<s)&&(s=l)}s===-1&&(s=r.length),this.host=r.slice(0,s),r=r.slice(s),this.parseHost(),this.hostname=this.hostname||"";var m="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!m)for(var g=this.hostname.split(/\./),u=0,I=g.length;u<I;u++){var C=g[u];if(C&&!C.match(_)){for(var N="",D=0,x=C.length;D<x;D++)N+=C.charCodeAt(D)>127?"x":C[D];if(!N.match(_)){var M=g.slice(0,u),R=g.slice(u+1),P=C.match(E);P&&(M.push(P[1]),R.unshift(P[2])),R.length&&(r="/"+R.join(".")+r),this.hostname=M.join(".");break}}}if(this.hostname.length>w?this.hostname="":this.hostname=this.hostname.toLowerCase(),!m){for(var O=this.hostname.split("."),B=[],u=0;u<O.length;++u){var L=O[u];B.push(L.match(/[^A-Za-z0-9_-]/)?"xn--"+h.encode(L):L)}this.hostname=B.join(".")}var q=this.port?":"+this.port:"",F=this.hostname||"";this.host=F+q,this.href+=this.host,m&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==r[0]&&(r="/"+r))}if(!k[a])for(var u=0,I=y.length;u<I;u++){var U=y[u],j=encodeURIComponent(U);j===U&&(j=escape(U)),r=r.split(U).join(j)}var H=r.indexOf("#");H!==-1&&(this.hash=r.substr(H),r=r.slice(0,H));var z=r.indexOf("?");if(z!==-1?(this.search=r.substr(z),this.query=r.substr(z+1),t&&(this.query=T.parse(this.query)),r=r.slice(0,z)):t&&(this.search="",this.query={}),r&&(this.pathname=r),S[a]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var q=this.pathname||"",L=this.search||"";this.path=q+L}return this.href=this.format(),this},r.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,a="";this.host?i=e+this.host:this.hostname&&(i=e+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&u(this.query)&&Object.keys(this.query).length&&(a=T.stringify(this.query));var o=this.search||a&&"?"+a||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||S[t])&&i!==!1?(i="//"+(i||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):i||(i=""),r&&"#"!==r.charAt(0)&&(r="#"+r),o&&"?"!==o.charAt(0)&&(o="?"+o),n=n.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),o=o.replace("#","%23"),t+i+n+o+r},r.prototype.resolve=function(e){return this.resolveObject(i(e,!1,!0)).format()},r.prototype.resolveObject=function(e){if(c(e)){var t=new r;t.parse(e,!1,!0),e=t}var n=new r;if(Object.keys(this).forEach(function(e){n[e]=this[e]},this),n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol)return Object.keys(e).forEach(function(t){"protocol"!==t&&(n[t]=e[t])}),S[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n;if(e.protocol&&e.protocol!==n.protocol){if(!S[e.protocol])return Object.keys(e).forEach(function(t){n[t]=e[t]}),n.href=n.format(),n;if(n.protocol=e.protocol,e.host||A[e.protocol])n.pathname=e.pathname;else{for(var i=(e.pathname||"").split("/");i.length&&!(e.host=i.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==i[0]&&i.unshift(""),i.length<2&&i.unshift(""),n.pathname=i.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var a=n.pathname||"",o=n.search||"";n.path=a+o}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var s=n.pathname&&"/"===n.pathname.charAt(0),u=e.host||e.pathname&&"/"===e.pathname.charAt(0),h=u||s||n.host&&e.pathname,f=h,p=n.pathname&&n.pathname.split("/")||[],i=e.pathname&&e.pathname.split("/")||[],m=n.protocol&&!S[n.protocol];if(m&&(n.hostname="",n.port=null,n.host&&(""===p[0]?p[0]=n.host:p.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===i[0]?i[0]=e.host:i.unshift(e.host)),e.host=null),h=h&&(""===i[0]||""===p[0])),u)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,p=i;else if(i.length)p||(p=[]),p.pop(),p=p.concat(i),n.search=e.search,n.query=e.query;else if(!d(e.search)){if(m){n.hostname=n.host=p.shift();var g=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");g&&(n.auth=g.shift(),n.host=n.hostname=g.shift())}return n.search=e.search,n.query=e.query,l(n.pathname)&&l(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!p.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var y=p.slice(-1)[0],v=(n.host||e.host)&&("."===y||".."===y)||""===y,b=0,w=p.length;w>=0;w--)y=p[w],"."==y?p.splice(w,1):".."===y?(p.splice(w,1),b++):b&&(p.splice(w,1),b--);if(!h&&!f)for(;b--;b)p.unshift("..");!h||""===p[0]||p[0]&&"/"===p[0].charAt(0)||p.unshift(""),v&&"/"!==p.join("/").substr(-1)&&p.push("");var _=""===p[0]||p[0]&&"/"===p[0].charAt(0);if(m){n.hostname=n.host=_?"":p.length?p.shift():"";var g=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");g&&(n.auth=g.shift(),n.host=n.hostname=g.shift())}return h=h||n.host&&p.length,h&&!_&&p.unshift(""),p.length?n.pathname=p.join("/"):(n.pathname=null,n.path=null),l(n.pathname)&&l(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},r.prototype.parseHost=function(){var e=this.host,t=p.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},{punycode:14,querystring:17}],17:[function(e,t,n){"use strict";n.decode=n.parse=e("./decode"),n.encode=n.stringify=e("./encode")},{"./decode":15,"./encode":16}],16:[function(e,t){"use strict";function n(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var r=function(e){switch(typeof e){case"string":return e;case"boolean":
return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};t.exports=function(e,t,o,s){return t=t||"&",o=o||"=",null===e&&(e=void 0),"object"==typeof e?n(a(e),function(a){var s=encodeURIComponent(r(a))+o;return i(e[a])?n(e[a],function(e){return s+encodeURIComponent(r(e))}).join(t):s+encodeURIComponent(r(e[a]))}).join(t):s?encodeURIComponent(r(s))+o+encodeURIComponent(r(e)):""};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},a=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},{}],15:[function(e,t){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.exports=function(e,t,i,a){t=t||"&",i=i||"=";var o={};if("string"!=typeof e||0===e.length)return o;var s=/\+/g;e=e.split(t);var c=1e3;a&&"number"==typeof a.maxKeys&&(c=a.maxKeys);var u=e.length;c>0&&u>c&&(u=c);for(var l=0;l<u;++l){var d,h,f,p,m=e[l].replace(s,"%20"),g=m.indexOf(i);g>=0?(d=m.substr(0,g),h=m.substr(g+1)):(d=m,h=""),f=decodeURIComponent(d),p=decodeURIComponent(h),n(o,f)?r(o[f])?o[f].push(p):o[f]=[o[f],p]:o[f]=p}return o};var r=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{}],14:[function(e,t,n){(function(e){!function(r){function i(e){throw RangeError(R[e])}function a(e,t){for(var n=e.length;n--;)e[n]=t(e[n]);return e}function o(e,t){return a(e.split(M),t).join(".")}function s(e){for(var t,n,r=[],i=0,a=e.length;i<a;)t=e.charCodeAt(i++),t>=55296&&t<=56319&&i<a?(n=e.charCodeAt(i++),56320==(64512&n)?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--)):r.push(t);return r}function c(e){return a(e,function(e){var t="";return e>65535&&(e-=65536,t+=B(e>>>10&1023|55296),e=56320|1023&e),t+=B(e)}).join("")}function u(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:E}function l(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function d(e,t,n){var r=0;for(e=n?O(e/T):e>>1,e+=O(e/t);e>P*A>>1;r+=E)e=O(e/P);return O(r+(P+1)*e/(e+S))}function h(e){var t,n,r,a,o,s,l,h,f,p,m=[],g=e.length,y=0,v=C,b=I;for(n=e.lastIndexOf(N),n<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&i("not-basic"),m.push(e.charCodeAt(r));for(a=n>0?n+1:0;a<g;){for(o=y,s=1,l=E;a>=g&&i("invalid-input"),h=u(e.charCodeAt(a++)),(h>=E||h>O((_-y)/s))&&i("overflow"),y+=h*s,f=l<=b?k:l>=b+A?A:l-b,!(h<f);l+=E)p=E-f,s>O(_/p)&&i("overflow"),s*=p;t=m.length+1,b=d(y-o,t,0==o),O(y/t)>_-v&&i("overflow"),v+=O(y/t),y%=t,m.splice(y++,0,v)}return c(m)}function f(e){var t,n,r,a,o,c,u,h,f,p,m,g,y,v,b,w=[];for(e=s(e),g=e.length,t=C,n=0,o=I,c=0;c<g;++c)m=e[c],m<128&&w.push(B(m));for(r=a=w.length,a&&w.push(N);r<g;){for(u=_,c=0;c<g;++c)m=e[c],m>=t&&m<u&&(u=m);for(y=r+1,u-t>O((_-n)/y)&&i("overflow"),n+=(u-t)*y,t=u,c=0;c<g;++c)if(m=e[c],m<t&&++n>_&&i("overflow"),m==t){for(h=n,f=E;p=f<=o?k:f>=o+A?A:f-o,!(h<p);f+=E)b=h-p,v=E-p,w.push(B(l(p+b%v,0))),h=O(b/v);w.push(B(l(h,0))),o=d(n,y,r==a),n=0,++r}++n,++t}return w.join("")}function p(e){return o(e,function(e){return D.test(e)?h(e.slice(4).toLowerCase()):e})}function m(e){return o(e,function(e){return x.test(e)?"xn--"+f(e):e})}var g="object"==typeof n&&n,y="object"==typeof t&&t&&t.exports==g&&t,v="object"==typeof e&&e;v.global!==v&&v.window!==v||(r=v);var b,w,_=2147483647,E=36,k=1,A=26,S=38,T=700,I=72,C=128,N="-",D=/^xn--/,x=/[^ -~]/,M=/\x2E|\u3002|\uFF0E|\uFF61/g,R={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},P=E-k,O=Math.floor,B=String.fromCharCode;if(b={version:"1.2.4",ucs2:{decode:s,encode:c},decode:h,encode:f,toASCII:m,toUnicode:p},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return b});else if(g&&!g.nodeType)if(y)y.exports=b;else for(w in b)b.hasOwnProperty(w)&&(g[w]=b[w]);else r.punycode=b}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],13:[function(e,t){function n(){if(!o){o=!0;for(var e,t=a.length;t;){e=a,a=[];for(var n=-1;++n<t;)e[n]();t=a.length}o=!1}}function r(){}var i=t.exports={},a=[],o=!1;i.nextTick=function(e){a.push(e),o||setTimeout(n,0)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=r,i.addListener=r,i.once=r,i.off=r,i.removeListener=r,i.removeAllListeners=r,i.emit=r,i.binding=function(){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],12:[function(e,t){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],6:[function(e,t,n){function r(e,t,n){s.isBuffer(t)||(t=new s(t)),s.isBuffer(n)||(n=new s(n)),t.length>f?t=e(t):t.length<f&&(t=s.concat([t,p],f));for(var r=new s(f),i=new s(f),a=0;a<f;a++)r[a]=54^t[a],i[a]=92^t[a];var o=e(s.concat([r,n]));return e(s.concat([i,o]))}function i(e,t){e=e||"sha1";var n=h[e],i=[],o=0;return n||a("algorithm:",e,"is not yet supported"),{update:function(e){return s.isBuffer(e)||(e=new s(e)),i.push(e),o+=e.length,this},digest:function(e){var a=s.concat(i),o=t?r(n,t,a):n(a);return i=null,e?o.toString(e):o}}}function a(){var e=[].slice.call(arguments).join(" ");throw new Error([e,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join("\n"))}function o(e,t){for(var n in e)t(e[n],n)}var s=e("buffer").Buffer,c=e("./sha"),u=e("./sha256"),l=e("./rng"),d=e("./md5"),h={sha1:c,sha256:u,md5:d},f=64,p=new s(f);p.fill(0),n.createHash=function(e){return i(e)},n.createHmac=function(e,t){return i(e,t)},n.randomBytes=function(e,t){if(!t||!t.call)return new s(l(e));try{t.call(this,void 0,new s(l(e)))}catch(e){t(e)}},o(["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman","pbkdf2"],function(e){n[e]=function(){a("sorry,",e,"is not implemented yet")}})},{"./md5":7,"./rng":8,"./sha":9,"./sha256":10,buffer:1}],10:[function(e,t){var n=e("./helpers"),r=function(e,t){var n=(65535&e)+(65535&t),r=(e>>16)+(t>>16)+(n>>16);return r<<16|65535&n},i=function(e,t){return e>>>t|e<<32-t},a=function(e,t){return e>>>t},o=function(e,t,n){return e&t^~e&n},s=function(e,t,n){return e&t^e&n^t&n},c=function(e){return i(e,2)^i(e,13)^i(e,22)},u=function(e){return i(e,6)^i(e,11)^i(e,25)},l=function(e){return i(e,7)^i(e,18)^a(e,3)},d=function(e){return i(e,17)^i(e,19)^a(e,10)},h=function(e,t){var n,i,a,h,f,p,m,g,y,v,b,w,_=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),E=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),k=new Array(64);e[t>>5]|=128<<24-t%32,e[(t+64>>9<<4)+15]=t;for(var y=0;y<e.length;y+=16){n=E[0],i=E[1],a=E[2],h=E[3],f=E[4],p=E[5],m=E[6],g=E[7];for(var v=0;v<64;v++)v<16?k[v]=e[v+y]:k[v]=r(r(r(d(k[v-2]),k[v-7]),l(k[v-15])),k[v-16]),b=r(r(r(r(g,u(f)),o(f,p,m)),_[v]),k[v]),w=r(c(n),s(n,i,a)),g=m,m=p,p=f,f=r(h,b),h=a,a=i,i=n,n=r(b,w);E[0]=r(n,E[0]),E[1]=r(i,E[1]),E[2]=r(a,E[2]),E[3]=r(h,E[3]),E[4]=r(f,E[4]),E[5]=r(p,E[5]),E[6]=r(m,E[6]),E[7]=r(g,E[7])}return E};t.exports=function(e){return n.hash(e,h,32,!0)}},{"./helpers":5}],9:[function(e,t){function n(e,t){e[t>>5]|=128<<24-t%32,e[(t+64>>9<<4)+15]=t;for(var n=Array(80),s=1732584193,c=-271733879,u=-1732584194,l=271733878,d=-1009589776,h=0;h<e.length;h+=16){for(var f=s,p=c,m=u,g=l,y=d,v=0;v<80;v++){v<16?n[v]=e[h+v]:n[v]=o(n[v-3]^n[v-8]^n[v-14]^n[v-16],1);var b=a(a(o(s,5),r(v,c,u,l)),a(a(d,n[v]),i(v)));d=l,l=u,u=o(c,30),c=s,s=b}s=a(s,f),c=a(c,p),u=a(u,m),l=a(l,g),d=a(d,y)}return Array(s,c,u,l,d)}function r(e,t,n,r){return e<20?t&n|~t&r:e<40?t^n^r:e<60?t&n|t&r|n&r:t^n^r}function i(e){return e<20?1518500249:e<40?1859775393:e<60?-1894007588:-899497514}function a(e,t){var n=(65535&e)+(65535&t),r=(e>>16)+(t>>16)+(n>>16);return r<<16|65535&n}function o(e,t){return e<<t|e>>>32-t}var s=e("./helpers");t.exports=function(e){return s.hash(e,n,20,!0)}},{"./helpers":5}],8:[function(e,t){!function(){var e,n,r=this;e=function(e){for(var t,t,n=new Array(e),r=0;r<e;r++)0==(3&r)&&(t=4294967296*Math.random()),n[r]=t>>>((3&r)<<3)&255;return n},r.crypto&&crypto.getRandomValues&&(n=function(e){var t=new Uint8Array(e);return crypto.getRandomValues(t),t}),t.exports=n||e}()},{}],7:[function(e,t){function n(e,t){e[t>>5]|=128<<t%32,e[(t+64>>>9<<4)+14]=t;for(var n=1732584193,r=-271733879,u=-1732584194,l=271733878,d=0;d<e.length;d+=16){var h=n,f=r,p=u,m=l;n=i(n,r,u,l,e[d+0],7,-680876936),l=i(l,n,r,u,e[d+1],12,-389564586),u=i(u,l,n,r,e[d+2],17,606105819),r=i(r,u,l,n,e[d+3],22,-1044525330),n=i(n,r,u,l,e[d+4],7,-176418897),l=i(l,n,r,u,e[d+5],12,1200080426),u=i(u,l,n,r,e[d+6],17,-1473231341),r=i(r,u,l,n,e[d+7],22,-45705983),n=i(n,r,u,l,e[d+8],7,1770035416),l=i(l,n,r,u,e[d+9],12,-1958414417),u=i(u,l,n,r,e[d+10],17,-42063),r=i(r,u,l,n,e[d+11],22,-1990404162),n=i(n,r,u,l,e[d+12],7,1804603682),l=i(l,n,r,u,e[d+13],12,-40341101),u=i(u,l,n,r,e[d+14],17,-1502002290),r=i(r,u,l,n,e[d+15],22,1236535329),n=a(n,r,u,l,e[d+1],5,-165796510),l=a(l,n,r,u,e[d+6],9,-1069501632),u=a(u,l,n,r,e[d+11],14,643717713),r=a(r,u,l,n,e[d+0],20,-373897302),n=a(n,r,u,l,e[d+5],5,-701558691),l=a(l,n,r,u,e[d+10],9,38016083),u=a(u,l,n,r,e[d+15],14,-660478335),r=a(r,u,l,n,e[d+4],20,-405537848),n=a(n,r,u,l,e[d+9],5,568446438),l=a(l,n,r,u,e[d+14],9,-1019803690),u=a(u,l,n,r,e[d+3],14,-187363961),r=a(r,u,l,n,e[d+8],20,1163531501),n=a(n,r,u,l,e[d+13],5,-1444681467),l=a(l,n,r,u,e[d+2],9,-51403784),u=a(u,l,n,r,e[d+7],14,1735328473),r=a(r,u,l,n,e[d+12],20,-1926607734),n=o(n,r,u,l,e[d+5],4,-378558),l=o(l,n,r,u,e[d+8],11,-2022574463),u=o(u,l,n,r,e[d+11],16,1839030562),r=o(r,u,l,n,e[d+14],23,-35309556),n=o(n,r,u,l,e[d+1],4,-1530992060),l=o(l,n,r,u,e[d+4],11,1272893353),u=o(u,l,n,r,e[d+7],16,-155497632),r=o(r,u,l,n,e[d+10],23,-1094730640),n=o(n,r,u,l,e[d+13],4,681279174),l=o(l,n,r,u,e[d+0],11,-358537222),u=o(u,l,n,r,e[d+3],16,-722521979),r=o(r,u,l,n,e[d+6],23,76029189),n=o(n,r,u,l,e[d+9],4,-640364487),l=o(l,n,r,u,e[d+12],11,-421815835),u=o(u,l,n,r,e[d+15],16,530742520),r=o(r,u,l,n,e[d+2],23,-995338651),n=s(n,r,u,l,e[d+0],6,-198630844),l=s(l,n,r,u,e[d+7],10,1126891415),u=s(u,l,n,r,e[d+14],15,-1416354905),r=s(r,u,l,n,e[d+5],21,-57434055),n=s(n,r,u,l,e[d+12],6,1700485571),l=s(l,n,r,u,e[d+3],10,-1894986606),u=s(u,l,n,r,e[d+10],15,-1051523),r=s(r,u,l,n,e[d+1],21,-2054922799),n=s(n,r,u,l,e[d+8],6,1873313359),l=s(l,n,r,u,e[d+15],10,-30611744),u=s(u,l,n,r,e[d+6],15,-1560198380),r=s(r,u,l,n,e[d+13],21,1309151649),n=s(n,r,u,l,e[d+4],6,-145523070),l=s(l,n,r,u,e[d+11],10,-1120210379),u=s(u,l,n,r,e[d+2],15,718787259),r=s(r,u,l,n,e[d+9],21,-343485551),n=c(n,h),r=c(r,f),u=c(u,p),l=c(l,m)}return Array(n,r,u,l)}function r(e,t,n,r,i,a){return c(u(c(c(t,e),c(r,a)),i),n)}function i(e,t,n,i,a,o,s){return r(t&n|~t&i,e,t,a,o,s)}function a(e,t,n,i,a,o,s){return r(t&i|n&~i,e,t,a,o,s)}function o(e,t,n,i,a,o,s){return r(t^n^i,e,t,a,o,s)}function s(e,t,n,i,a,o,s){return r(n^(t|~i),e,t,a,o,s)}function c(e,t){var n=(65535&e)+(65535&t),r=(e>>16)+(t>>16)+(n>>16);return r<<16|65535&n}function u(e,t){return e<<t|e>>>32-t}var l=e("./helpers");t.exports=function(e){return l.hash(e,n,16)}},{"./helpers":5}],5:[function(e,t){function n(e,t){if(e.length%o!==0){var n=e.length+(o-e.length%o);e=a.concat([e,s],n)}for(var r=[],i=t?e.readInt32BE:e.readInt32LE,c=0;c<e.length;c+=o)r.push(i.call(e,c));return r}function r(e,t,n){for(var r=new a(t),i=n?r.writeInt32BE:r.writeInt32LE,o=0;o<e.length;o++)i.call(r,e[o],4*o,!0);return r}function i(e,t,i,o){a.isBuffer(e)||(e=new a(e));var s=t(n(e,o),e.length*c);return r(s,i,o)}var a=e("buffer").Buffer,o=4,s=new a(o);s.fill(0);var c=8;t.exports={hash:i}},{buffer:1}],1:[function(e,t,n){function r(){return i.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function i(e){return this instanceof i?(this.length=0,this.parent=void 0,"number"==typeof e?a(this,e):"string"==typeof e?o(this,e,arguments.length>1?arguments[1]:"utf8"):s(this,e)):arguments.length>1?new i(e,arguments[1]):new i(e)}function a(e,t){if(e=f(e,t<0?0:0|p(t)),!i.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;n++)e[n]=0;return e}function o(e,t,n){"string"==typeof n&&""!==n||(n="utf8");var r=0|g(t,n);return e=f(e,r),e.write(t,n),e}function s(e,t){if(i.isBuffer(t))return c(e,t);if(K(t))return u(e,t);if(null==t)throw new TypeError("must start with number, buffer, array or string");return"undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer?l(e,t):t.length?d(e,t):h(e,t)}function c(e,t){var n=0|p(t.length);return e=f(e,n),t.copy(e,0,0,n),e}function u(e,t){var n=0|p(t.length);e=f(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function l(e,t){var n=0|p(t.length);e=f(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function d(e,t){var n=0|p(t.length);e=f(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function h(e,t){var n,r=0;"Buffer"===t.type&&K(t.data)&&(n=t.data,r=0|p(n.length)),e=f(e,r);for(var i=0;i<r;i+=1)e[i]=255&n[i];return e}function f(e,t){i.TYPED_ARRAY_SUPPORT?e=i._augment(new Uint8Array(t)):(e.length=t,e._isBuffer=!0);var n=0!==t&&t<=i.poolSize>>>1;return n&&(e.parent=X),e}function p(e){if(e>=r())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r().toString(16)+" bytes");return 0|e}function m(e,t){if(!(this instanceof m))return new m(e,t);var n=new i(e,t);return delete n.parent,n}function g(e,t){"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"binary":case"raw":case"raws":return n;case"utf8":case"utf-8":return U(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return z(e).length;default:if(r)return U(e).length;t=(""+t).toLowerCase(),r=!0}}function y(e,t,n){var r=!1;if(t|=0,n=void 0===n||n===1/0?this.length:0|n,e||(e="utf8"),t<0&&(t=0),n>this.length&&(n=this.length),n<=t)return"";for(;;)switch(e){case"hex":return C(this,t,n);case"utf8":case"utf-8":return S(this,t,n);case"ascii":return T(this,t,n);case"binary":return I(this,t,n);case"base64":return A(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function v(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r),r>i&&(r=i)):r=i;var a=t.length;if(a%2!==0)throw new Error("Invalid hex string");r>a/2&&(r=a/2);for(var o=0;o<r;o++){var s=parseInt(t.substr(2*o,2),16);if(isNaN(s))throw new Error("Invalid hex string");e[n+o]=s}return o}function b(e,t,n,r){return W(U(t,e.length-n),e,n,r)}function w(e,t,n,r){return W(j(t),e,n,r)}function _(e,t,n,r){return w(e,t,n,r)}function E(e,t,n,r){return W(z(t),e,n,r)}function k(e,t,n,r){return W(H(t,e.length-n),e,n,r)}function A(e,t,n){return 0===t&&n===e.length?V.fromByteArray(e):V.fromByteArray(e.slice(t,n))}function S(e,t,n){var r="",i="";n=Math.min(e.length,n);for(var a=t;a<n;a++)e[a]<=127?(r+=J(i)+String.fromCharCode(e[a]),i=""):i+="%"+e[a].toString(16);return r+J(i)}function T(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;i++)r+=String.fromCharCode(127&e[i]);return r}function I(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;i++)r+=String.fromCharCode(e[i]);return r}function C(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",a=t;a<n;a++)i+=F(e[a]);return i}function N(e,t,n){for(var r=e.slice(t,n),i="",a=0;a<r.length;a+=2)i+=String.fromCharCode(r[a]+256*r[a+1]);return i}function D(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function x(e,t,n,r,a,o){if(!i.isBuffer(e))throw new TypeError("buffer must be a Buffer instance");if(t>a||t<o)throw new RangeError("value is out of bounds");if(n+r>e.length)throw new RangeError("index out of range")}function M(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,a=Math.min(e.length-n,2);i<a;i++)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function R(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,a=Math.min(e.length-n,4);i<a;i++)e[n+i]=t>>>8*(r?i:3-i)&255}function P(e,t,n,r,i,a){if(t>i||t<a)throw new RangeError("value is out of bounds");if(n+r>e.length)throw new RangeError("index out of range");if(n<0)throw new RangeError("index out of range")}function O(e,t,n,r,i){return i||P(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),G.write(e,t,n,r,23,4),n+4}function B(e,t,n,r,i){return i||P(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),G.write(e,t,n,r,52,8),n+8}function L(e){if(e=q(e).replace(Y,""),e.length<2)return"";for(;e.length%4!==0;)e+="=";return e}function q(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function F(e){return e<16?"0"+e.toString(16):e.toString(16)}function U(e,t){t=t||1/0;for(var n,r=e.length,i=null,a=[],o=0;o<r;o++){if(n=e.charCodeAt(o),n>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(o+1===r){(t-=3)>-1&&a.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&a.push(239,191,189),i=n;continue}n=i-55296<<10|n-56320|65536,i=null}else i&&((t-=3)>-1&&a.push(239,191,189),i=null);if(n<128){if((t-=1)<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<2097152))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function j(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t}function H(e,t){for(var n,r,i,a=[],o=0;o<e.length&&!((t-=2)<0);o++)n=e.charCodeAt(o),r=n>>8,i=n%256,a.push(i),a.push(r);return a}function z(e){return V.toByteArray(L(e))}function W(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);i++)t[i+n]=e[i];return i}function J(e){try{return decodeURIComponent(e)}catch(e){return String.fromCharCode(65533)}}var V=e("base64-js"),G=e("ieee754"),K=e("is-array");n.Buffer=i,n.SlowBuffer=m,n.INSPECT_MAX_BYTES=50,i.poolSize=8192;var X={};i.TYPED_ARRAY_SUPPORT=function(){try{var e=new ArrayBuffer(0),t=new Uint8Array(e);return t.foo=function(){return 42},42===t.foo()&&"function"==typeof t.subarray&&0===new Uint8Array(1).subarray(1,1).byteLength}catch(e){return!1}}(),i.isBuffer=function(e){return!(null==e||!e._isBuffer)},i.compare=function(e,t){if(!i.isBuffer(e)||!i.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,a=0,o=Math.min(n,r);a<o&&e[a]===t[a];)++a;return a!==o&&(n=e[a],r=t[a]),n<r?-1:r<n?1:0},i.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(e,t){if(!K(e))throw new TypeError("list argument must be an Array of Buffers.");if(0===e.length)return new i(0);if(1===e.length)return e[0];var n;if(void 0===t)for(t=0,n=0;n<e.length;n++)t+=e[n].length;var r=new i(t),a=0;for(n=0;n<e.length;n++){var o=e[n];o.copy(r,a),a+=o.length}return r},i.byteLength=g,i.prototype.length=void 0,i.prototype.parent=void 0,i.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?S(this,0,e):y.apply(this,arguments)},i.prototype.equals=function(e){if(!i.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===i.compare(this,e)},i.prototype.inspect=function(){var e="",t=n.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},i.prototype.compare=function(e){if(!i.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?0:i.compare(this,e)},i.prototype.indexOf=function(e,t){function n(e,t,n){for(var r=-1,i=0;n+i<e.length;i++)if(e[n+i]===t[r===-1?0:i-r]){if(r===-1&&(r=i),i-r+1===t.length)return n+r}else r=-1;return-1}if(t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t>>=0,0===this.length)return-1;if(t>=this.length)return-1;if(t<0&&(t=Math.max(this.length+t,0)),"string"==typeof e)return 0===e.length?-1:String.prototype.indexOf.call(this,e,t);if(i.isBuffer(e))return n(this,e,t);if("number"==typeof e)return i.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,e,t):n(this,[e],t);throw new TypeError("val must be string, number or Buffer")},i.prototype.get=function(e){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(e)},i.prototype.set=function(e,t){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(e,t)},i.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else if(isFinite(t))t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0);else{var i=r;r=t,t=0|n,n=i}var a=this.length-t;if((void 0===n||n>a)&&(n=a),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return v(this,e,t,n);case"utf8":case"utf-8":return b(this,e,t,n);case"ascii":return w(this,e,t,n);case"binary":return _(this,e,t,n);case"base64":return E(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},i.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),t<e&&(t=e);var r;if(i.TYPED_ARRAY_SUPPORT)r=i._augment(this.subarray(e,t));else{var a=t-e;r=new i(a,void 0);for(var o=0;o<a;o++)r[o]=this[o+e]}return r.length&&(r.parent=this.parent||this),r},i.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||D(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return r},i.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||D(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},i.prototype.readUInt8=function(e,t){return t||D(e,1,this.length),this[e]},i.prototype.readUInt16LE=function(e,t){return t||D(e,2,this.length),this[e]|this[e+1]<<8},i.prototype.readUInt16BE=function(e,t){return t||D(e,2,this.length),this[e]<<8|this[e+1]},i.prototype.readUInt32LE=function(e,t){return t||D(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},i.prototype.readUInt32BE=function(e,t){return t||D(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},i.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||D(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*t)),r},i.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||D(e,t,this.length);for(var r=t,i=1,a=this[e+--r];r>0&&(i*=256);)a+=this[e+--r]*i;return i*=128,a>=i&&(a-=Math.pow(2,8*t)),a},i.prototype.readInt8=function(e,t){return t||D(e,1,this.length),128&this[e]?(255-this[e]+1)*-1:this[e]},i.prototype.readInt16LE=function(e,t){t||D(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},i.prototype.readInt16BE=function(e,t){t||D(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},i.prototype.readInt32LE=function(e,t){return t||D(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},i.prototype.readInt32BE=function(e,t){return t||D(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},i.prototype.readFloatLE=function(e,t){return t||D(e,4,this.length),G.read(this,e,!0,23,4)},i.prototype.readFloatBE=function(e,t){return t||D(e,4,this.length),G.read(this,e,!1,23,4)},i.prototype.readDoubleLE=function(e,t){return t||D(e,8,this.length),G.read(this,e,!0,52,8)},i.prototype.readDoubleBE=function(e,t){return t||D(e,8,this.length),G.read(this,e,!1,52,8)},i.prototype.writeUIntLE=function(e,t,n,r){e=+e,t|=0,n|=0,r||x(this,e,t,n,Math.pow(2,8*n),0);var i=1,a=0;for(this[t]=255&e;++a<n&&(i*=256);)this[t+a]=e/i&255;return t+n},i.prototype.writeUIntBE=function(e,t,n,r){e=+e,t|=0,n|=0,r||x(this,e,t,n,Math.pow(2,8*n),0);var i=n-1,a=1;for(this[t+i]=255&e;--i>=0&&(a*=256);)this[t+i]=e/a&255;return t+n},i.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||x(this,e,t,1,255,0),i.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=e,t+1},i.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||x(this,e,t,2,65535,0),i.TYPED_ARRAY_SUPPORT?(this[t]=e,this[t+1]=e>>>8):M(this,e,t,!0),t+2},i.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||x(this,e,t,2,65535,0),i.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e):M(this,e,t,!1),t+2},i.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||x(this,e,t,4,4294967295,0),i.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e):R(this,e,t,!0),t+4},i.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||x(this,e,t,4,4294967295,0),i.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e):R(this,e,t,!1),t+4},i.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);x(this,e,t,n,i-1,-i)}var a=0,o=1,s=e<0?1:0;for(this[t]=255&e;++a<n&&(o*=256);)this[t+a]=(e/o>>0)-s&255;return t+n},i.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);x(this,e,t,n,i-1,-i)}var a=n-1,o=1,s=e<0?1:0;for(this[t+a]=255&e;--a>=0&&(o*=256);)this[t+a]=(e/o>>0)-s&255;return t+n},i.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||x(this,e,t,1,127,-128),i.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=e,t+1},i.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||x(this,e,t,2,32767,-32768),i.TYPED_ARRAY_SUPPORT?(this[t]=e,this[t+1]=e>>>8):M(this,e,t,!0),t+2},i.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||x(this,e,t,2,32767,-32768),i.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e):M(this,e,t,!1),t+2},i.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||x(this,e,t,4,2147483647,-2147483648),i.TYPED_ARRAY_SUPPORT?(this[t]=e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):R(this,e,t,!0),t+4},i.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||x(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),i.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e):R(this,e,t,!1),t+4},i.prototype.writeFloatLE=function(e,t,n){return O(this,e,t,!0,n)},i.prototype.writeFloatBE=function(e,t,n){return O(this,e,t,!1,n)},i.prototype.writeDoubleLE=function(e,t,n){return B(this,e,t,!0,n)},i.prototype.writeDoubleBE=function(e,t,n){return B(this,e,t,!1,n)},i.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var a=r-n;if(a<1e3||!i.TYPED_ARRAY_SUPPORT)for(var o=0;o<a;o++)e[o+t]=this[o+n];else e._set(this.subarray(n,n+a),t);return a},i.prototype.fill=function(e,t,n){if(e||(e=0),t||(t=0),n||(n=this.length),n<t)throw new RangeError("end < start");if(n!==t&&0!==this.length){if(t<0||t>=this.length)throw new RangeError("start out of bounds");if(n<0||n>this.length)throw new RangeError("end out of bounds");var r;if("number"==typeof e)for(r=t;r<n;r++)this[r]=e;else{var i=U(e.toString()),a=i.length;for(r=t;r<n;r++)this[r]=i[r%a]}return this}},i.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(i.TYPED_ARRAY_SUPPORT)return new i(this).buffer;for(var e=new Uint8Array(this.length),t=0,n=e.length;t<n;t+=1)e[t]=this[t];return e.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var Z=i.prototype;i._augment=function(e){return e.constructor=i,e._isBuffer=!0,e._set=e.set,e.get=Z.get,e.set=Z.set,e.write=Z.write,e.toString=Z.toString,e.toLocaleString=Z.toString,e.toJSON=Z.toJSON,e.equals=Z.equals,e.compare=Z.compare,e.indexOf=Z.indexOf,e.copy=Z.copy,e.slice=Z.slice,e.readUIntLE=Z.readUIntLE,e.readUIntBE=Z.readUIntBE,e.readUInt8=Z.readUInt8,e.readUInt16LE=Z.readUInt16LE,e.readUInt16BE=Z.readUInt16BE,e.readUInt32LE=Z.readUInt32LE,e.readUInt32BE=Z.readUInt32BE,e.readIntLE=Z.readIntLE,e.readIntBE=Z.readIntBE,e.readInt8=Z.readInt8,e.readInt16LE=Z.readInt16LE,e.readInt16BE=Z.readInt16BE,e.readInt32LE=Z.readInt32LE,e.readInt32BE=Z.readInt32BE,e.readFloatLE=Z.readFloatLE,e.readFloatBE=Z.readFloatBE,e.readDoubleLE=Z.readDoubleLE,e.readDoubleBE=Z.readDoubleBE,e.writeUInt8=Z.writeUInt8,e.writeUIntLE=Z.writeUIntLE,e.writeUIntBE=Z.writeUIntBE,e.writeUInt16LE=Z.writeUInt16LE,e.writeUInt16BE=Z.writeUInt16BE,e.writeUInt32LE=Z.writeUInt32LE,e.writeUInt32BE=Z.writeUInt32BE,e.writeIntLE=Z.writeIntLE,e.writeIntBE=Z.writeIntBE,e.writeInt8=Z.writeInt8,e.writeInt16LE=Z.writeInt16LE,e.writeInt16BE=Z.writeInt16BE,e.writeInt32LE=Z.writeInt32LE,e.writeInt32BE=Z.writeInt32BE,e.writeFloatLE=Z.writeFloatLE,e.writeFloatBE=Z.writeFloatBE,e.writeDoubleLE=Z.writeDoubleLE,e.writeDoubleBE=Z.writeDoubleBE,e.fill=Z.fill,e.inspect=Z.inspect,e.toArrayBuffer=Z.toArrayBuffer,e};var Y=/[^+\/0-9A-z\-]/g},{"base64-js":2,ieee754:3,"is-array":4}],4:[function(e,t){var n=Array.isArray,r=Object.prototype.toString;t.exports=n||function(e){return!!e&&"[object Array]"==r.call(e)}},{}],3:[function(e,t,n){n.read=function(e,t,n,r,i){var a,o,s=8*i-r-1,c=(1<<s)-1,u=c>>1,l=-7,d=n?i-1:0,h=n?-1:1,f=e[t+d];for(d+=h,a=f&(1<<-l)-1,f>>=-l,l+=s;l>0;a=256*a+e[t+d],d+=h,l-=8);for(o=a&(1<<-l)-1,a>>=-l,l+=r;l>0;o=256*o+e[t+d],d+=h,l-=8);if(0===a)a=1-u;else{if(a===c)return o?NaN:(f?-1:1)*(1/0);o+=Math.pow(2,r),a-=u}return(f?-1:1)*o*Math.pow(2,a-r)},n.write=function(e,t,n,r,i,a){var o,s,c,u=8*a-i-1,l=(1<<u)-1,d=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:a-1,p=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=l):(o=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-o))<1&&(o--,c*=2),t+=o+d>=1?h/c:h*Math.pow(2,1-d),t*c>=2&&(o++,c/=2),o+d>=l?(s=0,o=l):o+d>=1?(s=(t*c-1)*Math.pow(2,i),o+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,i),o=0));i>=8;e[n+f]=255&s,f+=p,s/=256,i-=8);for(o=o<<i|s,u+=i;u>0;e[n+f]=255&o,f+=p,o/=256,u-=8);e[n+f-p]|=128*m}},{}],2:[function(e,t,n){var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(e){"use strict";function t(e){var t=e.charCodeAt(0);return t===o||t===d?62:t===s||t===h?63:t<c?-1:t<c+10?t-c+26+26:t<l+26?t-l:t<u+26?t-u+26:void 0}function n(e){function n(e){u[d++]=e}var r,i,o,s,c,u;if(e.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var l=e.length;c="="===e.charAt(l-2)?2:"="===e.charAt(l-1)?1:0,u=new a(3*e.length/4-c),o=c>0?e.length-4:e.length;var d=0;for(r=0,i=0;r<o;r+=4,i+=3)s=t(e.charAt(r))<<18|t(e.charAt(r+1))<<12|t(e.charAt(r+2))<<6|t(e.charAt(r+3)),n((16711680&s)>>16),n((65280&s)>>8),n(255&s);return 2===c?(s=t(e.charAt(r))<<2|t(e.charAt(r+1))>>4,n(255&s)):1===c&&(s=t(e.charAt(r))<<10|t(e.charAt(r+1))<<4|t(e.charAt(r+2))>>2,n(s>>8&255),n(255&s)),u}function i(e){function t(e){return r.charAt(e)}function n(e){return t(e>>18&63)+t(e>>12&63)+t(e>>6&63)+t(63&e)}var i,a,o,s=e.length%3,c="";for(i=0,o=e.length-s;i<o;i+=3)a=(e[i]<<16)+(e[i+1]<<8)+e[i+2],c+=n(a);switch(s){case 1:a=e[e.length-1],c+=t(a>>2),c+=t(a<<4&63),c+="==";break;case 2:a=(e[e.length-2]<<8)+e[e.length-1],c+=t(a>>10),c+=t(a>>4&63),c+=t(a<<2&63),c+="="}return c}var a="undefined"!=typeof Uint8Array?Uint8Array:Array,o="+".charCodeAt(0),s="/".charCodeAt(0),c="0".charCodeAt(0),u="a".charCodeAt(0),l="A".charCodeAt(0),d="-".charCodeAt(0),h="_".charCodeAt(0);e.toByteArray=n,e.fromByteArray=i}("undefined"==typeof n?this.base64js={}:n)},{}]},{},[]),_xamzrequire=function e(t,n,r){function i(o,s){if(!n[o]){if(!t[o]){var c="function"==typeof _xamzrequire&&_xamzrequire;if(!s&&c)return c(o,!0);if(a)return a(o,!0);var u=new Error("Cannot find module '"+o+"'");
throw u.code="MODULE_NOT_FOUND",u}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return i(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var a="function"==typeof _xamzrequire&&_xamzrequire,o=0;o<r.length;o++)i(r[o]);return i}({21:[function(e,t){var n=e("./core");n.apiLoader=function(e,t){return n.apiLoader.services[e][t]},n.apiLoader.services={},n.XML.Parser=e("./xml/browser_parser"),e("./http/xhr"),"undefined"!=typeof window&&(window.AWS=n),"undefined"!=typeof t&&(t.exports=n),"undefined"!=typeof self&&(self.AWS=n)},{"./core":24,"./http/xhr":38,"./xml/browser_parser":85}],85:[function(e,t){function n(){}function r(e,t){switch(t||(t={}),t.type){case"structure":return i(e,t);case"map":return a(e,t);case"list":return o(e,t);case void 0:case null:return c(e);default:return s(e,t)}}function i(e,t){var n={};return null===e?n:(u.each(t.members,function(t,i){if(i.isXmlAttribute){if(e.attributes.hasOwnProperty(i.name)){var a=e.attributes[i.name].value;n[t]=r({textContent:a},i)}}else{var o=i.flattened?e:e.getElementsByTagName(i.name)[0];o?n[t]=r(o,i):i.flattened||"list"!==i.type||(n[t]=i.defaultValue)}}),n)}function a(e,t){for(var n={},i=t.key.name||"key",a=t.value.name||"value",o=t.flattened?t.name:"entry",s=e.firstElementChild;s;){if(s.nodeName===o){var c=s.getElementsByTagName(i)[0].textContent,u=s.getElementsByTagName(a)[0];n[c]=r(u,t.value)}s=s.nextElementSibling}return n}function o(e,t){for(var n=[],i=t.flattened?t.name:t.member.name||"member",a=e.firstElementChild;a;)a.nodeName===i&&n.push(r(a,t.member)),a=a.nextElementSibling;return n}function s(e,t){if(e.getAttribute){var n=e.getAttribute("encoding");"base64"===n&&(t=new l.create({type:n}))}var r=e.textContent;return""===r&&(r=null),"function"==typeof t.toType?t.toType(r):r}function c(e){if(void 0===e||null===e)return"";if(!e.firstElementChild)return null===e.parentNode.parentNode?{}:0===e.childNodes.length?"":e.textContent;for(var t={type:"structure",members:{}},n=e.firstElementChild;n;){var r=n.nodeName;t.members.hasOwnProperty(r)?t.members[r].type="list":t.members[r]={name:r},n=n.nextElementSibling}return i(e,t)}var u=e("../util"),l=e("../model/shape");n.prototype.parse=function(e,t){if(""===e.replace(/^\s+/,""))return{};var n,i;try{if(window.DOMParser){try{var a=new DOMParser;n=a.parseFromString(e,"text/xml")}catch(e){throw u.error(new Error("Parse error in document"),{originalError:e,code:"XMLParserError",retryable:!0})}if(null===n.documentElement)throw u.error(new Error("Cannot parse empty document."),{code:"XMLParserError",retryable:!0});var o=n.getElementsByTagName("parsererror")[0];if(o&&(o.parentNode===n||"body"===o.parentNode.nodeName||o.parentNode.parentNode===n||"body"===o.parentNode.parentNode.nodeName)){var s=o.getElementsByTagName("div")[0]||o;throw u.error(new Error(s.textContent||"Parser error in document"),{code:"XMLParserError",retryable:!0})}}else{if(!window.ActiveXObject)throw new Error("Cannot load XML parser");if(n=new window.ActiveXObject("Microsoft.XMLDOM"),n.async=!1,!n.loadXML(e))throw u.error(new Error("Parse error in document"),{code:"XMLParserError",retryable:!0})}}catch(e){i=e}if(n&&n.documentElement&&!i){var c=r(n.documentElement,t),l=n.getElementsByTagName("ResponseMetadata")[0];return l&&(c.ResponseMetadata=r(l,{})),c}if(i)throw u.error(i||new Error,{code:"XMLParserError",retryable:!0});return{}},t.exports=n},{"../model/shape":46,"../util":84}],38:[function(e){var t=e("../core"),n=e("events").EventEmitter;e("../http"),t.XHRClient=t.util.inherit({handleRequest:function(e,r,i,a){var o=this,s=e.endpoint,c=new n,u=s.protocol+"//"+s.hostname;80!==s.port&&443!==s.port&&(u+=":"+s.port),u+=e.path;var l=new XMLHttpRequest,d=!1;e.stream=l,l.addEventListener("readystatechange",function(){try{if(0===l.status)return}catch(e){return}if(this.readyState>=this.HEADERS_RECEIVED&&!d){try{l.responseType="arraybuffer"}catch(e){}c.statusCode=l.status,c.headers=o.parseHeaders(l.getAllResponseHeaders()),c.emit("headers",c.statusCode,c.headers),d=!0}this.readyState===this.DONE&&o.finishRequest(l,c)},!1),l.upload.addEventListener("progress",function(e){c.emit("sendProgress",e)}),l.addEventListener("progress",function(e){c.emit("receiveProgress",e)},!1),l.addEventListener("timeout",function(){a(t.util.error(new Error("Timeout"),{code:"TimeoutError"}))},!1),l.addEventListener("error",function(){a(t.util.error(new Error("Network Failure"),{code:"NetworkingError"}))},!1),i(c),l.open(e.method,u,r.xhrAsync!==!1),t.util.each(e.headers,function(e,t){"Content-Length"!==e&&"User-Agent"!==e&&"Host"!==e&&l.setRequestHeader(e,t)}),r.timeout&&r.xhrAsync!==!1&&(l.timeout=r.timeout),r.xhrWithCredentials&&(l.withCredentials=!0);try{l.send(e.body)}catch(t){if(!e.body||"object"!=typeof e.body.buffer)throw t;l.send(e.body.buffer)}return c},parseHeaders:function(e){var n={};return t.util.arrayEach(e.split(/\r?\n/),function(e){var t=e.split(":",1)[0],r=e.substring(t.length+2);t.length>0&&(n[t.toLowerCase()]=r)}),n},finishRequest:function(e,n){var r;if("arraybuffer"===e.responseType&&e.response){var i=e.response;r=new t.util.Buffer(i.byteLength);for(var a=new Uint8Array(i),o=0;o<r.length;++o)r[o]=a[o]}try{r||"string"!=typeof e.responseText||(r=new t.util.Buffer(e.responseText))}catch(e){}r&&n.emit("data",r),n.emit("end")}}),t.HttpClient.prototype=t.XHRClient.prototype,t.HttpClient.streamsApiVersion=1},{"../core":24,"../http":37,events:11}],11:[function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function i(e){return"number"==typeof e}function a(e){return"object"==typeof e&&null!==e}function o(e){return void 0===e}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!i(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,i,s,c,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||a(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],o(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(i=arguments.length,s=new Array(i-1),c=1;c<i;c++)s[c-1]=arguments[c];n.apply(this,s)}else if(a(n)){for(i=arguments.length,s=new Array(i-1),c=1;c<i;c++)s[c-1]=arguments[c];for(u=n.slice(),i=u.length,c=0;c<i;c++)u[c].apply(this,s)}return!0},n.prototype.addListener=function(e,t){var i;if(!r(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?a(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,a(this._events[e])&&!this._events[e].warned){var i;i=o(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,i&&i>0&&this._events[e].length>i&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function n(){this.removeListener(e,n),i||(i=!0,t.apply(this,arguments))}if(!r(t))throw TypeError("listener must be a function");var i=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,i,o,s;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],o=n.length,i=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(a(n)){for(s=o;s-- >0;)if(n[s]===t||n[s].listener&&n[s].listener===t){i=s;break}if(i<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],r(n))this.removeListener(e,n);else for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.listenerCount=function(e,t){var n;return n=e._events&&e._events[t]?r(e._events[t])?1:e._events[t].length:0}},{}]},{},[21]),AWS.apiLoader.services.cognitosync={},AWS.CognitoSync=AWS.Service.defineService("cognitosync",["2014-06-30"]),AWS.apiLoader.services.cognitosync["2014-06-30"]={version:"2.0",metadata:{apiVersion:"2014-06-30",endpointPrefix:"cognito-sync",jsonVersion:"1.1",serviceFullName:"Amazon Cognito Sync",signatureVersion:"v4",protocol:"rest-json"},operations:{BulkPublish:{http:{requestUri:"/identitypools/{IdentityPoolId}/bulkpublish",responseCode:200},input:{type:"structure",required:["IdentityPoolId"],members:{IdentityPoolId:{location:"uri",locationName:"IdentityPoolId"}}},output:{type:"structure",members:{IdentityPoolId:{}}}},DeleteDataset:{http:{method:"DELETE",requestUri:"/identitypools/{IdentityPoolId}/identities/{IdentityId}/datasets/{DatasetName}",responseCode:200},input:{type:"structure",required:["IdentityPoolId","IdentityId","DatasetName"],members:{IdentityPoolId:{location:"uri",locationName:"IdentityPoolId"},IdentityId:{location:"uri",locationName:"IdentityId"},DatasetName:{location:"uri",locationName:"DatasetName"}}},output:{type:"structure",members:{Dataset:{shape:"S8"}}}},DescribeDataset:{http:{method:"GET",requestUri:"/identitypools/{IdentityPoolId}/identities/{IdentityId}/datasets/{DatasetName}",responseCode:200},input:{type:"structure",required:["IdentityPoolId","IdentityId","DatasetName"],members:{IdentityPoolId:{location:"uri",locationName:"IdentityPoolId"},IdentityId:{location:"uri",locationName:"IdentityId"},DatasetName:{location:"uri",locationName:"DatasetName"}}},output:{type:"structure",members:{Dataset:{shape:"S8"}}}},DescribeIdentityPoolUsage:{http:{method:"GET",requestUri:"/identitypools/{IdentityPoolId}",responseCode:200},input:{type:"structure",required:["IdentityPoolId"],members:{IdentityPoolId:{location:"uri",locationName:"IdentityPoolId"}}},output:{type:"structure",members:{IdentityPoolUsage:{shape:"Sg"}}}},DescribeIdentityUsage:{http:{method:"GET",requestUri:"/identitypools/{IdentityPoolId}/identities/{IdentityId}",responseCode:200},input:{type:"structure",required:["IdentityPoolId","IdentityId"],members:{IdentityPoolId:{location:"uri",locationName:"IdentityPoolId"},IdentityId:{location:"uri",locationName:"IdentityId"}}},output:{type:"structure",members:{IdentityUsage:{type:"structure",members:{IdentityId:{},IdentityPoolId:{},LastModifiedDate:{type:"timestamp"},DatasetCount:{type:"integer"},DataStorage:{type:"long"}}}}}},GetBulkPublishDetails:{http:{requestUri:"/identitypools/{IdentityPoolId}/getBulkPublishDetails",responseCode:200},input:{type:"structure",required:["IdentityPoolId"],members:{IdentityPoolId:{location:"uri",locationName:"IdentityPoolId"}}},output:{type:"structure",members:{IdentityPoolId:{},BulkPublishStartTime:{type:"timestamp"},BulkPublishCompleteTime:{type:"timestamp"},BulkPublishStatus:{},FailureMessage:{}}}},GetCognitoEvents:{http:{method:"GET",requestUri:"/identitypools/{IdentityPoolId}/events",responseCode:200},input:{type:"structure",required:["IdentityPoolId"],members:{IdentityPoolId:{location:"uri",locationName:"IdentityPoolId"}}},output:{type:"structure",members:{Events:{shape:"Sq"}}}},GetIdentityPoolConfiguration:{http:{method:"GET",requestUri:"/identitypools/{IdentityPoolId}/configuration",responseCode:200},input:{type:"structure",required:["IdentityPoolId"],members:{IdentityPoolId:{location:"uri",locationName:"IdentityPoolId"}}},output:{type:"structure",members:{IdentityPoolId:{},PushSync:{shape:"Sv"},CognitoStreams:{shape:"Sz"}}}},ListDatasets:{http:{method:"GET",requestUri:"/identitypools/{IdentityPoolId}/identities/{IdentityId}/datasets",responseCode:200},input:{type:"structure",required:["IdentityId","IdentityPoolId"],members:{IdentityPoolId:{location:"uri",locationName:"IdentityPoolId"},IdentityId:{location:"uri",locationName:"IdentityId"},NextToken:{location:"querystring",locationName:"nextToken"},MaxResults:{location:"querystring",locationName:"maxResults",type:"integer"}}},output:{type:"structure",members:{Datasets:{type:"list",member:{shape:"S8"}},Count:{type:"integer"},NextToken:{}}}},ListIdentityPoolUsage:{http:{method:"GET",requestUri:"/identitypools",responseCode:200},input:{type:"structure",members:{NextToken:{location:"querystring",locationName:"nextToken"},MaxResults:{location:"querystring",locationName:"maxResults",type:"integer"}}},output:{type:"structure",members:{IdentityPoolUsages:{type:"list",member:{shape:"Sg"}},MaxResults:{type:"integer"},Count:{type:"integer"},NextToken:{}}}},ListRecords:{http:{method:"GET",requestUri:"/identitypools/{IdentityPoolId}/identities/{IdentityId}/datasets/{DatasetName}/records",responseCode:200},input:{type:"structure",required:["IdentityPoolId","IdentityId","DatasetName"],members:{IdentityPoolId:{location:"uri",locationName:"IdentityPoolId"},IdentityId:{location:"uri",locationName:"IdentityId"},DatasetName:{location:"uri",locationName:"DatasetName"},LastSyncCount:{location:"querystring",locationName:"lastSyncCount",type:"long"},NextToken:{location:"querystring",locationName:"nextToken"},MaxResults:{location:"querystring",locationName:"maxResults",type:"integer"},SyncSessionToken:{location:"querystring",locationName:"syncSessionToken"}}},output:{type:"structure",members:{Records:{shape:"S1c"},NextToken:{},Count:{type:"integer"},DatasetSyncCount:{type:"long"},LastModifiedBy:{},MergedDatasetNames:{type:"list",member:{}},DatasetExists:{type:"boolean"},DatasetDeletedAfterRequestedSyncCount:{type:"boolean"},SyncSessionToken:{}}}},RegisterDevice:{http:{requestUri:"/identitypools/{IdentityPoolId}/identity/{IdentityId}/device",responseCode:200},input:{type:"structure",required:["IdentityPoolId","IdentityId","Platform","Token"],members:{IdentityPoolId:{location:"uri",locationName:"IdentityPoolId"},IdentityId:{location:"uri",locationName:"IdentityId"},Platform:{},Token:{}}},output:{type:"structure",members:{DeviceId:{}}}},SetCognitoEvents:{http:{requestUri:"/identitypools/{IdentityPoolId}/events",responseCode:200},input:{type:"structure",required:["IdentityPoolId","Events"],members:{IdentityPoolId:{location:"uri",locationName:"IdentityPoolId"},Events:{shape:"Sq"}}}},SetIdentityPoolConfiguration:{http:{requestUri:"/identitypools/{IdentityPoolId}/configuration",responseCode:200},input:{type:"structure",required:["IdentityPoolId"],members:{IdentityPoolId:{location:"uri",locationName:"IdentityPoolId"},PushSync:{shape:"Sv"},CognitoStreams:{shape:"Sz"}}},output:{type:"structure",members:{IdentityPoolId:{},PushSync:{shape:"Sv"},CognitoStreams:{shape:"Sz"}}}},SubscribeToDataset:{http:{requestUri:"/identitypools/{IdentityPoolId}/identities/{IdentityId}/datasets/{DatasetName}/subscriptions/{DeviceId}",responseCode:200},input:{type:"structure",required:["IdentityPoolId","IdentityId","DatasetName","DeviceId"],members:{IdentityPoolId:{location:"uri",locationName:"IdentityPoolId"},IdentityId:{location:"uri",locationName:"IdentityId"},DatasetName:{location:"uri",locationName:"DatasetName"},DeviceId:{location:"uri",locationName:"DeviceId"}}},output:{type:"structure",members:{}}},UnsubscribeFromDataset:{http:{method:"DELETE",requestUri:"/identitypools/{IdentityPoolId}/identities/{IdentityId}/datasets/{DatasetName}/subscriptions/{DeviceId}",responseCode:200},input:{type:"structure",required:["IdentityPoolId","IdentityId","DatasetName","DeviceId"],members:{IdentityPoolId:{location:"uri",locationName:"IdentityPoolId"},IdentityId:{location:"uri",locationName:"IdentityId"},DatasetName:{location:"uri",locationName:"DatasetName"},DeviceId:{location:"uri",locationName:"DeviceId"}}},output:{type:"structure",members:{}}},UpdateRecords:{http:{requestUri:"/identitypools/{IdentityPoolId}/identities/{IdentityId}/datasets/{DatasetName}",responseCode:200},input:{type:"structure",required:["IdentityPoolId","IdentityId","DatasetName","SyncSessionToken"],members:{IdentityPoolId:{location:"uri",locationName:"IdentityPoolId"},IdentityId:{location:"uri",locationName:"IdentityId"},DatasetName:{location:"uri",locationName:"DatasetName"},DeviceId:{},RecordPatches:{type:"list",member:{type:"structure",required:["Op","Key","SyncCount"],members:{Op:{},Key:{},Value:{},SyncCount:{type:"long"},DeviceLastModifiedDate:{type:"timestamp"}}}},SyncSessionToken:{},ClientContext:{location:"header",locationName:"x-amz-Client-Context"}}},output:{type:"structure",members:{Records:{shape:"S1c"}}}}},shapes:{S8:{type:"structure",members:{IdentityId:{},DatasetName:{},CreationDate:{type:"timestamp"},LastModifiedDate:{type:"timestamp"},LastModifiedBy:{},DataStorage:{type:"long"},NumRecords:{type:"long"}}},Sg:{type:"structure",members:{IdentityPoolId:{},SyncSessionsCount:{type:"long"},DataStorage:{type:"long"},LastModifiedDate:{type:"timestamp"}}},Sq:{type:"map",key:{},value:{}},Sv:{type:"structure",members:{ApplicationArns:{type:"list",member:{}},RoleArn:{}}},Sz:{type:"structure",members:{StreamName:{},RoleArn:{},StreamingStatus:{}}},S1c:{type:"list",member:{type:"structure",members:{Key:{},Value:{},SyncCount:{type:"long"},LastModifiedDate:{type:"timestamp"},LastModifiedBy:{},DeviceLastModifiedDate:{type:"timestamp"}}}}},examples:{}},AWS.apiLoader.services.sts={},AWS.STS=AWS.Service.defineService("sts",["2011-06-15"]),_xamzrequire=function e(t,n,r){function i(o,s){if(!n[o]){if(!t[o]){var c="function"==typeof _xamzrequire&&_xamzrequire;if(!s&&c)return c(o,!0);if(a)return a(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return i(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var a="function"==typeof _xamzrequire&&_xamzrequire,o=0;o<r.length;o++)i(r[o]);return i}({74:[function(e){var t=e("../core");t.util.update(t.STS.prototype,{credentialsFrom:function(e,n){return e?(n||(n=new t.TemporaryCredentials),n.expired=!1,n.accessKeyId=e.Credentials.AccessKeyId,n.secretAccessKey=e.Credentials.SecretAccessKey,n.sessionToken=e.Credentials.SessionToken,n.expireTime=e.Credentials.Expiration,n):null},assumeRoleWithWebIdentity:function(e,t){return this.makeUnauthenticatedRequest("assumeRoleWithWebIdentity",e,t)},assumeRoleWithSAML:function(e,t){return this.makeUnauthenticatedRequest("assumeRoleWithSAML",e,t)}})},{"../core":24}]},{},[74]),AWS.apiLoader.services.sts["2011-06-15"]={version:"2.0",metadata:{apiVersion:"2011-06-15",endpointPrefix:"sts",globalEndpoint:"sts.amazonaws.com",protocol:"query",serviceAbbreviation:"AWS STS",serviceFullName:"AWS Security Token Service",signatureVersion:"v4",xmlNamespace:"https://sts.amazonaws.com/doc/2011-06-15/"},operations:{AssumeRole:{input:{type:"structure",required:["RoleArn","RoleSessionName"],members:{RoleArn:{},RoleSessionName:{},Policy:{},DurationSeconds:{type:"integer"},ExternalId:{},SerialNumber:{},TokenCode:{}}},output:{resultWrapper:"AssumeRoleResult",type:"structure",members:{Credentials:{shape:"Sa"},AssumedRoleUser:{shape:"Sf"},PackedPolicySize:{type:"integer"}}},http:{}},AssumeRoleWithSAML:{input:{type:"structure",required:["RoleArn","PrincipalArn","SAMLAssertion"],members:{RoleArn:{},PrincipalArn:{},SAMLAssertion:{},Policy:{},DurationSeconds:{type:"integer"}}},output:{resultWrapper:"AssumeRoleWithSAMLResult",type:"structure",members:{Credentials:{shape:"Sa"},AssumedRoleUser:{shape:"Sf"},PackedPolicySize:{type:"integer"},Subject:{},SubjectType:{},Issuer:{},Audience:{},NameQualifier:{}}},http:{}},AssumeRoleWithWebIdentity:{input:{type:"structure",required:["RoleArn","RoleSessionName","WebIdentityToken"],members:{RoleArn:{},RoleSessionName:{},WebIdentityToken:{},ProviderId:{},Policy:{},DurationSeconds:{type:"integer"}}},output:{resultWrapper:"AssumeRoleWithWebIdentityResult",type:"structure",members:{Credentials:{shape:"Sa"},SubjectFromWebIdentityToken:{},AssumedRoleUser:{shape:"Sf"},PackedPolicySize:{type:"integer"},Provider:{},Audience:{}}},http:{}},DecodeAuthorizationMessage:{input:{type:"structure",required:["EncodedMessage"],members:{EncodedMessage:{}}},output:{resultWrapper:"DecodeAuthorizationMessageResult",type:"structure",members:{DecodedMessage:{}}},http:{}},GetCallerIdentity:{input:{type:"structure",members:{}},output:{resultWrapper:"GetCallerIdentityResult",type:"structure",members:{UserId:{},Account:{},Arn:{}}},http:{}},GetFederationToken:{input:{type:"structure",required:["Name"],members:{Name:{},Policy:{},DurationSeconds:{type:"integer"}}},output:{resultWrapper:"GetFederationTokenResult",type:"structure",members:{Credentials:{shape:"Sa"},FederatedUser:{type:"structure",required:["FederatedUserId","Arn"],members:{FederatedUserId:{},Arn:{}}},PackedPolicySize:{type:"integer"}}},http:{}},GetSessionToken:{input:{type:"structure",members:{DurationSeconds:{type:"integer"},SerialNumber:{},TokenCode:{}}},output:{resultWrapper:"GetSessionTokenResult",type:"structure",members:{Credentials:{shape:"Sa"}}},http:{}}},shapes:{Sa:{type:"structure",required:["AccessKeyId","SecretAccessKey","SessionToken","Expiration"],members:{AccessKeyId:{},SecretAccessKey:{},SessionToken:{},Expiration:{type:"timestamp"}}},Sf:{type:"structure",required:["AssumedRoleId","Arn"],members:{AssumedRoleId:{},Arn:{}}}}},void 0===AWS)throw new Error("AWS SDK must be loaded before loading the Sync Manager.");AWS.CognitoSyncManager=function(e){e=e||{};var t="CognitoJavaScriptSDK/1";this.provider=AWS.config.credentials,this.identityPoolId=this.provider.params.IdentityPoolId,this.region=AWS.config.region,this.logger=e.log,"function"!=typeof this.logger&&(this.logger=function(){}),this.local=new AWS.CognitoSyncManager.LocalStorage({DataStore:e.DataStore?e.DataStore:AWS.CognitoSyncManager.StoreLocalStorage}),this.remote=new AWS.CognitoSyncManager.RemoteStorage(this.identityPoolId,this.provider),this.remote.setUserAgent(t)},AWS.CognitoSyncManager.prototype.openOrCreateDataset=function(e,t){var n=this,r=new RegExp("^[a-zA-Z0-9_.:-]{1,128}$");r.test(e)?this.local.createDataset(this.getIdentityId(),e,function(e,r){return e?t(e,null):void t(null,new AWS.CognitoSyncManager.Dataset(r,n.provider,n.local,n.remote,n.logger))}):t(new Error("Dataset name must match the pattern "+r.toString()))},AWS.CognitoSyncManager.prototype.listDatasets=function(e){this.local.getDatasets(this.getIdentityId(),e)},AWS.CognitoSyncManager.prototype.refreshDatasetMetadata=function(e){var t=this;this.remote.getDatasets(function(n,r){var i=[],a=function(e){t.local.updateDatasetMetadata(t.getIdentityId(),e,o)},o=function(t,n){i.push(n),r.length>0?a(r.shift()):e(null,i)};r.length>0?a(r.shift(),e):e(null,[])})},AWS.CognitoSyncManager.prototype.wipeData=function(){this.provider.clearCachedId(),this.local.wipeData()},AWS.CognitoSyncManager.prototype.getIdentityId=function(){return this.provider.identityId},/**
 * Copyright 2014 Amazon.com,
 * Inc. or its affiliates. All Rights Reserved.
 *
 * Licensed under the Amazon Software License (the "License").
 * You may not use this file except in compliance with the
 * License. A copy of the License is located at
 *
 *     http://aws.amazon.com/asl/
 *
 * or in the "license" file accompanying this file. This file is
 * distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
 * CONDITIONS OF ANY KIND, express or implied. See the License
 * for the specific language governing permissions and
 * limitations under the License.
 */
AWS=AWS||{},AWS.CognitoSyncManager=AWS.CognitoSyncManager||{},AWS.CognitoSyncManager.Conflict=function(){var e=function(e,t){if(!e||!t)throw new Error("Remote and local records cannot be null.");if(!e.getKey||!t.getKey)throw new Error("Records are not record objects.");if(e.getKey()!==t.getKey())throw new Error("Remote and local keys do not match.");this.key=e.getKey(),this.remoteRecord=e,this.localRecord=t};return e.prototype.getKey=function(){return this.key},e.prototype.getRemoteRecord=function(){return this.remoteRecord},e.prototype.getLocalRecord=function(){return this.localRecord},e.prototype.resolveWithRemoteRecord=function(){return this.remoteRecord.setModified(!1),this.remoteRecord},e.prototype.resolveWithLocalRecord=function(){return this.localRecord.setSyncCount(this.remoteRecord.getSyncCount()),this.localRecord.setModified(!0),this.localRecord},e.prototype.resolveWithValue=function(e){return new AWS.CognitoSyncManager.Record({Key:this.remoteRecord.getKey(),Value:e,SyncCount:this.remoteRecord.getSyncCount(),LastModifiedDate:new Date,LastModifiedBy:this.localRecord.getLastModifiedBy(),DeviceLastModifiedDate:new Date,Modified:!0})},e}(),/**
 * Copyright 2014 Amazon.com,
 * Inc. or its affiliates. All Rights Reserved.
 *
 * Licensed under the Amazon Software License (the "License").
 * You may not use this file except in compliance with the
 * License. A copy of the License is located at
 *
 *     http://aws.amazon.com/asl/
 *
 * or in the "license" file accompanying this file. This file is
 * distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
 * CONDITIONS OF ANY KIND, express or implied. See the License
 * for the specific language governing permissions and
 * limitations under the License.
 */
AWS=AWS||{},AWS.CognitoSyncManager=AWS.CognitoSyncManager||{},AWS.CognitoSyncManager.Dataset=function(){var e=function(e,t,n,r,i){this.MAX_RETRY=3,this.datasetName=e,this.provider=t,this.local=n,this.remote=r,this.logger=i||function(){}};return e.prototype.validateKey=function(e){var t=new RegExp("^[a-zA-Z0-9_.:-]{1,128}$");return t.test(e)},e.prototype.put=function(e,t,n){var r=typeof t;return this.validateKey(e)?"string"!==r?n(new Error("The value type must be a string but was "+r+".")):void this.local.putValue(this.getIdentityId(),this.datasetName,e,t,n):n(new Error("Invalid key."))},e.prototype.remove=function(e,t){return this.validateKey(e)?void this.local.putValue(this.getIdentityId(),this.datasetName,e,null,t):t(new Error("Invalid key."))},e.prototype.get=function(e,t){return this.validateKey(e)?void this.local.getValue(this.getIdentityId(),this.datasetName,e,t):t(new Error("Invalid key."))},e.prototype.getAllRecords=function(e){this.local.getRecords(this.getIdentityId(),this.datasetName,e)},e.prototype.getDataStorage=function(e){this.getDatasetMetadata(function(t,n){return t?e(t):n?e(null,n.getDataStorage()):e(null,0)})},e.prototype.isChanged=function(e,t){return this.validateKey(e)?void this.local.getRecord(this.getIdentityId(),this.datasetName,e,function(e,n){t(null,n&&n.isModified())}):t(new Error("Invalid key."))},e.prototype.getDatasetMetadata=function(e){this.local.getDatasetMetadata(this.getIdentityId(),this.datasetName,e)},e.prototype.resolve=function(e,t){this.local.putRecords(this.getIdentityId(),this.datasetName,e,t)},e.prototype.putAll=function(e,t){var n=!0;for(var r in e)e.hasOwnProperty(r)&&(this.validateKey(r)||(n=!1));return n?void this.local.putAllValues(this.getIdentityId(),this.datasetName,e,t):t(new Error("Object contains invalid keys."))},e.prototype.getAll=function(e){var t,n={};this.local.getRecords(this.getIdentityId(),this.datasetName,function(r,i){if(r)return e(r);for(var a in i)i.hasOwnProperty(a)&&(t=i[a],t.isDeleted()||(n[t.getKey()]=t.getValue()));e(null,n)})},e.prototype.getIdentityId=function(){return this.provider.identityId},e.prototype.getModifiedRecords=function(e){this.local.getModifiedRecords(this.getIdentityId(),this.datasetName,e)},e.prototype.hasChanges=function(e){this.local.isChanged(this.getIdentityId(),this.datasetName,e)},e.prototype.getLocalMergedDatasets=function(e){var t,n=[],r=this.datasetName+".";this.local.getDatasets(this.getIdentityId(),function(i,a){for(var o in a)a.hasOwnProperty(o)&&(t=a[o],0===t.getDatasetName().indexOf(r)&&n.push(t.getDatasetName()));e(null,n)})},e.prototype.synchronize=function(e,t){var n=this;return e=e||{},e.onSuccess=e.onSuccess||function(){},e.onFailure=e.onFailure||function(){},e.onConflict=e.onConflict||function(e,t,n){return n(!1)},e.onDatasetDeleted=e.onDatasetDeleted||function(e,t,n){return n(!1)},e.onDatasetsMerged=e.onDatasetsMerged||function(e,t,n){return n(!1)},void 0===t&&(t=this.MAX_RETRY),n.logger("Starting synchronization... (retries: "+t+")"),t<0?e.onFailure(new Error("Synchronize failed: exceeded maximum retry count.")):void this.getLocalMergedDatasets(function(r,i){return r&&e.onFailure(r),n.logger("Checking for locally merged datasets... found "+i.length+"."),i.length>0?(n.logger("Deferring to .onDatasetsMerged."),e.onDatasetsMerged(n,i,function(r){return r?n.synchronize(e,--t):e.onFailure(new Error("Synchronization cancelled by onDatasetsMerged() callback returning false."))})):void n.local.getLastSyncCount(n.getIdentityId(),n.datasetName,function(r,i){return r?e.onFailure(r):(n.logger("Detecting last sync count... "+i),void(parseInt(i)===-1?n.remote.deleteDataset(n.datasetName,function(t){return t?e.onFailure(t):void n.local.purgeDataset(n.getIdentityId(),n.datasetName,function(t){return t?e.onFailure(t):e.onSuccess(n)})}):n.remote.listUpdates(n.datasetName,i,function(r,a){if(r)return e.onFailure(r);n.logger("Fetching remote updates... found "+a.records.length+".");var o=a.getMergedDatasetNameList();if(n.logger("Checking for remote merged datasets... found "+o.length+"."),o.length>0)return n.logger("Deferring to .onDatasetsMerged."),e.onDatasetsMerged(n,o,function(r){r?n._synchronizeInternal(e,--t):e.onFailure(new Error("Cancelled due to .onDatasetsMerged result."))});if(0!==i&&!a||a.isDeleted())return e.onDatasetDeleted(n,a.getDatasetName(),function(r){return n.logger("Dataset should be deleted. Deferring to .onDatasetDeleted."),r?(n.logger(".onDatasetDeleted returned true, purging dataset locally."),n.local.purgeDataset(n.getIdentityId(),n.datasetName,function(r){return r?e.onFailure(r):n._synchronizeInternal(e,--t)})):(n.logger(".onDatasetDeleted returned false, cancelling sync."),e.onFailure(new Error("Cancelled due to .onDatasetDeleted result.")))});var s=a.getRecords(),c=a.getSyncCount(),u=a.getSyncSessionToken();n.logger("Checking for remote updates since last sync count... found "+s.length+"."),s.length>0?n._synchronizeResolveLocal(s,function(r,a){return r?e.onFailure(r):(n.logger("Checking for conflicts... found "+a.length+"."),void(a.length>0?(n.logger("Conflicts detected. Deferring to .onConflict."),e.onConflict(n,a,function(r){return r?void n._synchronizePushRemote(u,i,function(){return n.synchronize(e,--t)}):(n.logger(".onConflict returned false. Cancelling sync."),e.onFailure(new Error("Sync cancelled. Conflict callback returned false.")))})):(n.logger("No conflicts. Updating local records."),n.local.putRecords(n.getIdentityId(),n.datasetName,s,function(r){return r?e.onFailure(r):void n.local.updateLastSyncCount(n.getIdentityId(),n.datasetName,c,function(r){return r?e.onFailure(r):(n.logger("Finished resolving records. Restarting sync."),n.synchronize(e,--t))})}))))}):(n.logger("Nothing updated remotely. Pushing local changes to remote."),n._synchronizePushRemote(u,c,function(r){return r?(n.logger("Remote push failed. Likely concurrent sync conflict. Retrying..."),n.synchronize(e,--t)):(n.logger("Sync successful."),e.onSuccess(n,s))}))})))})})},e.prototype._synchronizeResolveLocal=function(e,t){var n=this,r=[];return e&&e.length>0?void n.local.getRecords(n.getIdentityId(),n.datasetName,function(i,a){var o,s,c,u={};for(o=0;o<a.length;o++)u[a[o].getKey()]=a[o];for(o=0;o<e.length;o++)s=e[o].getKey(),c=u[s],c&&c.isModified()&&c.getValue()!==e[o].getValue()?r.push(new AWS.CognitoSyncManager.Conflict(e[o],c)):c&&c.isModified()&&(c.setModified(!1),c.setSyncCount(e[o].getSyncCount()),n.local.store.set(n.getIdentityId(),n.datasetName,s,c.toJSON(),function(){}));return t(null,r)}):t(null,r)},e.prototype._synchronizePushRemote=function(e,t,n){var r=this;this.getModifiedRecords(function(t,i){return i.length>0?void r.remote.putRecords(r.datasetName,i,e,function(e,t){e&&n(e),r.local.putRecords(r.getIdentityId(),r.datasetName,t,function(e){if(e)return n(e);var i=0;for(var a in t)t.hasOwnProperty(a)&&(i=i<t[a].getSyncCount()?t[a].getSyncCount():i);r.local.updateLastSyncCount(r.getIdentityId(),r.datasetName,i,function(e){return e?n(e):n(null,!0)})})}):n(null,!0)})},e}(),/**
 * Copyright 2014 Amazon.com,
 * Inc. or its affiliates. All Rights Reserved.
 *
 * Licensed under the Amazon Software License (the "License").
 * You may not use this file except in compliance with the
 * License. A copy of the License is located at
 *
 *     http://aws.amazon.com/asl/
 *
 * or in the "license" file accompanying this file. This file is
 * distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
 * CONDITIONS OF ANY KIND, express or implied. See the License
 * for the specific language governing permissions and
 * limitations under the License.
 */
AWS=AWS||{},AWS.CognitoSyncManager=AWS.CognitoSyncManager||{},AWS.CognitoSyncManager.DatasetMetadata=function(){var e=function(e){if(e=e||{},this.datasetName=e.DatasetName||"",this.creationDate=new Date(e.CreationDate)||new Date,this.lastModifiedDate=new Date(e.LastModifiedDate)||new Date,this.lastModifiedBy=e.LastModifiedBy||"",this.dataStorage=e.DataStorage||0,this.recordCount=e.NumRecords||0,this.lastSyncCount=e.LastSyncCount||0,this.lastSyncDate=e.LastSyncDate?new Date(e.LastSyncDate):new Date,this.dataStorage<0)throw new RangeError("Storage size cannot be negative.");if(this.recordCount<0)throw new RangeError("Record count cannot be negative.")};return e.prototype.getDatasetName=function(){return this.datasetName},e.prototype.setDatasetName=function(e){return this.datasetName=e,this},e.prototype.getCreationDate=function(){return this.creationDate},e.prototype.setCreationDate=function(e){return this.creationDate=new Date(e),this},e.prototype.getLastModifiedDate=function(){return this.lastModifiedDate},e.prototype.setLastModifiedDate=function(e){return this.lastModifiedDate=new Date(e),this},e.prototype.getLastModifiedBy=function(){return this.lastModifiedBy},e.prototype.setLastModifiedBy=function(e){return this.lastModifiedBy=e,this},e.prototype.getDataStorage=function(){return this.dataStorage},e.prototype.setDataStorage=function(e){return this.dataStorage=e,this},e.prototype.getRecordCount=function(){return this.recordCount},e.prototype.setRecordCount=function(e){return this.recordCount=e,this},e.prototype.getLastSyncCount=function(){return this.lastSyncCount},e.prototype.setLastSyncCount=function(e){return this.lastSyncCount=e,this},e.prototype.getLastSyncDate=function(){return this.lastSyncDate},e.prototype.setLastSyncDate=function(e){return this.lastSyncDate=e,this},e.prototype.toString=function(){return JSON.stringify(this.toJSON())},e.prototype.toJSON=function(){return{DatasetName:this.datasetName,CreationDate:this.creationDate,LastModifiedDate:this.lastModifiedDate,LastModifiedBy:this.lastModifiedBy,DataStorage:this.dataStorage,NumRecords:this.recordCount,LastSyncCount:this.lastSyncCount,LastSyncDate:this.lastSyncDate}},e}(),/**
 * Copyright 2014 Amazon.com,
 * Inc. or its affiliates. All Rights Reserved.
 *
 * Licensed under the Amazon Software License (the "License").
 * You may not use this file except in compliance with the
 * License. A copy of the License is located at
 *
 *     http://aws.amazon.com/asl/
 *
 * or in the "license" file accompanying this file. This file is
 * distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
 * CONDITIONS OF ANY KIND, express or implied. See the License
 * for the specific language governing permissions and
 * limitations under the License.
 */
AWS=AWS||{},AWS.CognitoSyncManager=AWS.CognitoSyncManager||{},AWS.CognitoSyncManager.DatasetUpdates=function(){var e=function(e){this.datasetName=e,this.records=[],this.syncCount=0,this.syncSessionToken="",this.exists=!0,this.deleted=!1,this.mergedDatasetNameList=[]};return e.prototype.getDatasetName=function(){return this.datasetName},e.prototype.setDatasetName=function(e){return this.datasetName=e,this},e.prototype.getRecords=function(){return this.records},e.prototype.addRecord=function(e){return this.records.push(e),this},e.prototype.getSyncCount=function(){return this.syncCount},e.prototype.setSyncCount=function(e){return this.syncCount=e,this},e.prototype.getSyncSessionToken=function(){return this.syncSessionToken},e.prototype.setSyncSessionToken=function(e){return this.syncSessionToken=e,this},e.prototype.isExists=function(){return this.exists},e.prototype.setExists=function(e){return this.exists=e,this},e.prototype.isDeleted=function(){return this.deleted},e.prototype.setDeleted=function(e){return this.deleted=e,this},e.prototype.getMergedDatasetNameList=function(){return this.mergedDatasetNameList},e.prototype.setMergedDatasetNameList=function(e){return this.mergedDatasetNameList=e,this},e}(),/**
 * Copyright 2014 Amazon.com,
 * Inc. or its affiliates. All Rights Reserved.
 *
 * Licensed under the Amazon Software License (the "License").
 * You may not use this file except in compliance with the
 * License. A copy of the License is located at
 *
 *     http://aws.amazon.com/asl/
 *
 * or in the "license" file accompanying this file. This file is
 * distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
 * CONDITIONS OF ANY KIND, express or implied. See the License
 * for the specific language governing permissions and
 * limitations under the License.
 */
AWS=AWS||{},AWS.CognitoSyncManager=AWS.CognitoSyncManager||{},AWS.CognitoSyncManager.LocalStorage=function(){var e=function(e){e=e||{},this.store=null,this.meta=null,e.DataStore?this.store=new e.DataStore:this.store=new AWS.CognitoSyncManager.StoreInMemory};return e.prototype.getMetadataKey=function(e,t){return e+"."+t},e.prototype.loadMetadataCache=function(e,t){var n=this;this.store.get("_internal","_metadata",e,function(e,r){return e?t(e,null):(r||(r={}),n.meta=r,void t(null,r))})},e.prototype.saveMetadataCache=function(e,t,n){this.store.set("_internal","_metadata",e,t,function(e){return e?n(e):n(null,t)})},e.prototype.createDataset=function(e,t,n){var r=this;return this.getDatasetMetadata(e,t,function(i,a){var o=(new Date).getTime();a?n(null,t):(a=new AWS.CognitoSyncManager.DatasetMetadata({DatasetName:t,CreationDate:o,LastModifiedDate:o}),r.setDatasetMetadata(e,t,a,function(){}),n(null,t))}),this},e.prototype.getDatasetMetadata=function(e,t,n){var r=this.getMetadataKey(e,t);return null!==this.meta?this.meta[r]?n(null,new AWS.CognitoSyncManager.DatasetMetadata(this.meta[r])):n(null,void 0):this.loadMetadataCache(e,function(e,t){t[r]?n(null,new AWS.CognitoSyncManager.DatasetMetadata(t[r])):n(null,void 0)}),this},e.prototype.setDatasetMetadata=function(e,t,n,r){return this.meta[this.getMetadataKey(e,t)]=n.toJSON(),this.saveMetadataCache(e,this.meta,r),this},e.prototype.getValue=function(e,t,n,r){this.getRecord(e,t,n,function(e,t){return t?r(null,t.getValue()):r(null,void 0)})},e.prototype.putValue=function(e,t,n,r,i){var a=this;this.getRecord(e,t,n,function(o,s){return s&&s.getValue()===r?i(null,s):(s||(s=new AWS.CognitoSyncManager.Record),s.setKey(n).setValue(r).setModified(!0).setSyncCount(s?s.getSyncCount():0).setDeviceLastModifiedDate(new Date),void a.store.set(e,t,n,s.toJSON(),function(n){return n?i(n):void a.updateLastModifiedTimestamp(e,t,function(e){return i(e,s)})}))})},e.prototype.getValueMap=function(e,t,n){var r,i={};this.getRecords(e,t,function(e,t){for(var a in t)t.hasOwnProperty(a)&&(r=t[a],r.isDeleted()||(i[r.getKey()]=r.getValue()));n(null,i)})},e.prototype.putAllValues=function(e,t,n,r){var i=this,a=[];for(var o in n)n.hasOwnProperty(o)&&a.push(o);var s=function(o){var c;return o?r(o):void(a.length>0?(c=a.shift(),a.length%20==0?i.putValue(e,t,c,n[c],function(){setTimeout(s,0)}):i.putValue(e,t,c,n[c],s)):r(null,!0))};s(null,null)},e.prototype.getDatasets=function(e,t){var n=[];if(null!==this.meta){for(var r in this.meta)this.meta.hasOwnProperty(r)&&n.push(new AWS.CognitoSyncManager.DatasetMetadata(this.meta[r]));return t(null,n)}this.loadMetadataCache(e,function(e,r){for(var i in r)r.hasOwnProperty(i)&&n.push(new AWS.CognitoSyncManager.DatasetMetadata(r[i]));return t(null,n)})},e.prototype.updateDatasetMetadata=function(e,t,n){var r=this;this.getDatasetMetadata(e,t.getDatasetName(),function(i,a){i&&n(i),a||(a=new AWS.CognitoSyncManager.DatasetMetadata),a.setDatasetName(t.getDatasetName()).setCreationDate(t.getCreationDate()).setLastModifiedDate(t.getLastModifiedDate()).setLastModifiedBy(t.getLastModifiedBy()).setLastSyncCount(t.getLastSyncCount()).setRecordCount(t.getRecordCount()).setDataStorage(t.getDataStorage()),r.meta[r.getMetadataKey(e,t.getDatasetName())]=a.toJSON(),r.saveMetadataCache(e,r.meta,function(e){return e?n(e):n(null,a)})})},e.prototype.getRecord=function(e,t,n,r){this.store.get(e,t,n,function(e,t){return t?r(null,new AWS.CognitoSyncManager.Record(t)):r(new Error("Key doesn't exist."),null)})},e.prototype.getRecords=function(e,t,n){var r=[];this.store.getAll(e,t,function(e,t){for(var i in t)t.hasOwnProperty(i)&&r.push(new AWS.CognitoSyncManager.Record(t[i]));n(null,r)})},e.prototype.putRecords=function(e,t,n,r){var i=this;n=n||[],n=n.slice();var a=function(){n.length>0&&i.updateAndClearAllRecord(e,t,n,function(e){return e?r(e):r(null,!0)})};a()},e.prototype.deleteDataset=function(e,t,n){var r=this;this.store.removeAll(e,t,function(i){return i?n(i):void r.getDatasetMetadata(e,t,function(t,i){return t?n(t):(i.setLastModifiedDate(new Date),i.setLastSyncCount(-1),void r.updateDatasetMetadata(e,i,function(e){return e?n(e):n(null,!0)}))})})},e.prototype.purgeDataset=function(e,t,n){var r=this;this.deleteDataset(e,t,function(i){i&&n(i),delete r.meta[r.getMetadataKey(e,t)],r.saveMetadataCache(e,r.meta,n)})},e.prototype.getLastSyncCount=function(e,t,n){this.getDatasetMetadata(e,t,function(e,t){return t?n(null,t.getLastSyncCount()):void n(new Error("Dataset doesn't exist."),null)})},e.prototype.getModifiedRecords=function(e,t,n){var r=[];this.getRecords(e,t,function(e,t){for(var i=0;i<t.length;i++)t[i].isModified()&&r.push(t[i]);n(null,r)})},e.prototype.isChanged=function(e,t,n){this.getRecords(e,t,function(e,t){for(var r=0;r<t.length;r++)if(t[r].isModified())return void n(null,!0);n(null,!1)})},e.prototype.updateLastSyncCount=function(e,t,n,r){var i=this;this.getDatasetMetadata(e,t,function(t,a){t&&r(t),a.setLastSyncCount(n).setLastSyncDate(new Date),i.updateDatasetMetadata(e,a,function(e){e&&r(e),r(null,!0)})})},e.prototype.wipeData=function(e){this.store.wipe(e)},e.prototype.updateLastModifiedTimestamp=function(e,t,n){var r=this;this.getDatasetMetadata(e,t,function(t,i){return t?n(t):(i.setLastModifiedDate(new Date),void r.updateDatasetMetadata(e,i,function(e){return e?n(e):n(null,!0)}))})},e.prototype.removeRecord=function(e,t,n,r){this.store.remove(e,t,n,function(e){return e?r(e):r(null,!0)})},e.prototype.updateAndClearRecord=function(e,t,n,r){this.store.set(e,t,n.getKey(),n.toJSON(),function(e){return e?r(e):r(null,!0)})},e.prototype.updateAndClearAllRecord=function(e,t,n,r){this.store.setAllRecords(e,t,n,function(e){return e?r(e):r(null,!0)})},e}(),/**
 * Copyright 2014 Amazon.com,
 * Inc. or its affiliates. All Rights Reserved.
 *
 * Licensed under the Amazon Software License (the "License").
 * You may not use this file except in compliance with the
 * License. A copy of the License is located at
 *
 *     http://aws.amazon.com/asl/
 *
 * or in the "license" file accompanying this file. This file is
 * distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
 * CONDITIONS OF ANY KIND, express or implied. See the License
 * for the specific language governing permissions and
 * limitations under the License.
 */
AWS=AWS||{},AWS.CognitoSyncManager=AWS.CognitoSyncManager||{},AWS.CognitoSyncManager.Record=function(){var e=function(e){e=e||{},this.key=e.Key||"",this.value=e.Value||"",this.syncCount=e.SyncCount||0,this.lastModifiedDate=e.LastModifiedDate?new Date(e.LastModifiedDate):new Date,this.lastModifiedBy=e.LastModifiedBy||"",this.deviceLastModifiedDate=e.DeviceLastModifiedDate?new Date(e.DeviceLastModifiedDate):new Date,this.modified=e.Modified||!1};return e.prototype.getKey=function(){return this.key},e.prototype.setKey=function(e){return this.key=e,this},e.prototype.getValue=function(){return this.value},e.prototype.setValue=function(e){return this.value=e,this},e.prototype.getSyncCount=function(){return this.syncCount},e.prototype.setSyncCount=function(e){return this.syncCount=e,this},e.prototype.getLastModifiedDate=function(){return new Date(this.lastModifiedDate)},e.prototype.setLastModifiedDate=function(e){return this.lastModifiedDate=new Date(e),this},e.prototype.getLastModifiedBy=function(){return this.lastModifiedBy},e.prototype.setLastModifiedBy=function(e){return this.lastModifiedBy=e,this},e.prototype.getDeviceLastModifiedDate=function(){return new Date(this.deviceLastModifiedDate)},e.prototype.setDeviceLastModifiedDate=function(e){return this.deviceLastModifiedDate=new Date(e),this},e.prototype.isModified=function(){return this.modified},e.prototype.setModified=function(e){return this.modified=e,this},e.prototype.isDeleted=function(){return null===this.value},e.prototype.toString=function(){return JSON.stringify(this)},e.prototype.toJSON=function(){return{Key:this.key,Value:this.value,SyncCount:this.syncCount,LastModifiedDate:this.lastModifiedDate,LastModifiedBy:this.lastModifiedBy,DeviceLastModifiedDate:this.deviceLastModifiedDate,Modified:this.modified}},e}(),/**
 * Copyright 2014 Amazon.com,
 * Inc. or its affiliates. All Rights Reserved.
 *
 * Licensed under the Amazon Software License (the "License").
 * You may not use this file except in compliance with the
 * License. A copy of the License is located at
 *
 *     http://aws.amazon.com/asl/
 *
 * or in the "license" file accompanying this file. This file is
 * distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
 * CONDITIONS OF ANY KIND, express or implied. See the License
 * for the specific language governing permissions and
 * limitations under the License.
 */
AWS=AWS||{},AWS.CognitoSyncManager=AWS.CognitoSyncManager||{},AWS.CognitoSyncManager.RemoteStorage=function(){var e=function(e,t){this.identityPoolId=e,this.provider=t,this.client=new AWS.CognitoSync};return e.prototype.userAgent="",e.prototype.getIdentityId=function(){return this.provider.identityId},e.prototype.getDatasets=function(e){var t=this,n=[],r=null,i=function(e,n){t.client.listDatasets({IdentityId:t.getIdentityId(),IdentityPoolId:t.identityPoolId,MaxResults:64,NextToken:e},n)},a=function(t,o){for(var s=o.Datasets||[],c=0;c<s.length;c++)n.push(new AWS.CognitoSyncManager.DatasetMetadata(s[c]));r=o.NextToken,r?i(r,a):e(null,n)};i(r,a)},e.prototype.listUpdates=function(e,t,n){var r=this,i=null,a=new AWS.CognitoSyncManager.DatasetUpdates(e),o=function(n,i){r.client.listRecords({DatasetName:e,IdentityId:r.getIdentityId(),IdentityPoolId:r.identityPoolId,LastSyncCount:t,MaxResults:1024,NextToken:n},i)},s=function(e,t){if(e)return n(e);t=t||{};for(var r,c=t.Records||[],u=0;u<c.length;u++)r=new AWS.CognitoSyncManager.Record(c[u]),r.setModified(!1),a.addRecord(r);a.setSyncSessionToken(t.SyncSessionToken).setSyncCount(t.DatasetSyncCount).setExists(t.DatasetExists).setDeleted(t.DatasetDeletedAfterRequestedSyncCount),t.MergedDatasetNames&&a.setMergedDatasetNameList(t.MergedDatasetNames),i=t.NextToken,i?o(i,s):n(null,a)};o(null,s)},e.prototype.putRecords=function(e,t,n,r){var i,a=this,o=[];for(var s in t)t.hasOwnProperty(s)&&(i=t[s],o.push({Key:i.getKey(),Op:i.getValue()?"replace":"remove",SyncCount:i.getSyncCount(),DeviceLastModifiedDate:i.getDeviceLastModifiedDate(),Value:i.getValue()}));this.client.updateRecords({DatasetName:e,IdentityId:a.getIdentityId(),IdentityPoolId:a.identityPoolId,SyncSessionToken:n,RecordPatches:o},function(t,n){var i="string"==typeof e?e:"(invalid dataset name)";if(t)return r(new Error("Failed to update records in dataset: "+i+" ("+t.message+")"),null);for(var a,o=[],s=0;s<n.Records.length;s++)a=new AWS.CognitoSyncManager.Record(n.Records[s]),a.setModified(!1),o.push(a);return r(null,o)})},e.prototype.deleteDataset=function(e,t){this.client.deleteDataset({DatasetName:e,IdentityId:this.getIdentityId(),IdentityPoolId:this.identityPoolId},function(e,n){return e?t(new Error("Failed to delete dataset."),null):t(null,n)})},e.prototype.getDatasetMetadata=function(e,t){this.client.describeDataset({DatasetName:e,IdentityId:this.getIdentityId(),IdentityPoolId:this.identityPoolId},function(e,n){return e?t(new Error("Failed to get dataset metadata."),null):t(null,new AWS.CognitoSyncManager.DatasetMetadata(n.Dataset))})},e.prototype.setUserAgent=function(e){this.userAgent=e},e}(),/**
 * Copyright 2014 Amazon.com,
 * Inc. or its affiliates. All Rights Reserved.
 *
 * Licensed under the Amazon Software License (the "License").
 * You may not use this file except in compliance with the
 * License. A copy of the License is located at
 *
 *     http://aws.amazon.com/asl/
 *
 * or in the "license" file accompanying this file. This file is
 * distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
 * CONDITIONS OF ANY KIND, express or implied. See the License
 * for the specific language governing permissions and
 * limitations under the License.
 */
AWS=AWS||{},AWS.CognitoSyncManager=AWS.CognitoSyncManager||{},AWS.CognitoSyncManager.StoreInMemory=function(){var e=function(){this.store={}};return e.prototype.makeKey=function(e,t){return e+"."+t},e.prototype.get=function(e,t,n,r){var i=this.makeKey(e,t);return e&&t?this.store[i]&&this.store[i][n]?r(null,this.store[i][n]):r(null,void 0):r(new Error("You must provide an identity id and dataset name."),null)},e.prototype.getAll=function(e,t,n){var r=this.makeKey(e,t);return e&&t?n(null,this.store[r]):n(new Error("You must provide an identity id and dataset name."),null)},e.prototype.set=function(e,t,n,r,i){var a=this.makeKey(e,t),o=this.store[a]||{};return o[n]=r,this.store[a]=o,i(null,o)},e.prototype.setAll=function(e,t,n,r){var i=this.makeKey(e,t);return this.store[i]=n,r(null,n)},e.prototype.remove=function(e,t,n,r){var i=this.makeKey(e,t),a=JSON.parse(this.store[i]);return a||(a={}),delete a[n],this.store[i]=JSON.stringify(a),r(null,!0)},e.prototype.removeAll=function(e,t,n){var r=this.makeKey(e,t);return delete this.store[r],n(null,!0)},e.prototype.wipe=function(e){return this.store={},e(null,!0)},e}(),/**
 * Copyright 2014 Amazon.com,
 * Inc. or its affiliates. All Rights Reserved.
 *
 * Licensed under the Amazon Software License (the "License").
 * You may not use this file except in compliance with the
 * License. A copy of the License is located at
 *
 *     http://aws.amazon.com/asl/
 *
 * or in the "license" file accompanying this file. This file is
 * distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
 * CONDITIONS OF ANY KIND, express or implied. See the License
 * for the specific language governing permissions and
 * limitations under the License.
 */
AWS=AWS||{},AWS.CognitoSyncManager=AWS.CognitoSyncManager||{},AWS.CognitoSyncManager.StoreLocalStorage=function(){var e=function(){this.store=AWS.CognitoSyncManager.localStorage||window.localStorage};return e.prototype.makeKey=function(e,t){return e+"."+t},e.prototype.get=function(e,t,n,r){var i=this.makeKey(e,t);if(!e||!t)return r(new Error("You must provide an identity id and dataset name."),null);var a=JSON.parse(this.store.getItem(i));return a&&a[n]?r(null,a[n]):r(null,void 0)},e.prototype.getAll=function(e,t,n){var r=this.makeKey(e,t);return e&&t?n(null,JSON.parse(this.store.getItem(r))):n(new Error("You must provide an identity id and dataset name."),null)},e.prototype.set=function(e,t,n,r,i){var a=this.makeKey(e,t),o=JSON.parse(this.store.getItem(a));return o||(o={}),o[n]=r,this.store.setItem(a,JSON.stringify(o)),i(null,o),this},e.prototype.setAll=function(e,t,n,r){var i=this.makeKey(e,t);return this.store.setItem(i,JSON.stringify(n)),r(null,n)},e.prototype.setAllRecords=function(e,t,n,r){var i=this.makeKey(e,t),a=JSON.parse(this.store.getItem(i));a||(a={}),n.forEach(function(e){a[e.getKey()]=e.toJSON()}),this.store.setItem(i,JSON.stringify(a)),r(null,a)},e.prototype.remove=function(e,t,n,r){var i=this.makeKey(e,t),a=JSON.parse(this.store.getItem(i));return a||(a={}),delete a[n],this.store.setItem(i,JSON.stringify(a)),r(null,!0)},e.prototype.removeAll=function(e,t,n){var r=this.makeKey(e,t);return this.store.removeItem(r),n(null,!0)},e.prototype.wipe=function(e){for(var t in this.store)this.store.hasOwnProperty(t)&&t.indexOf("aws.cognito.identity")===-1&&this.store.removeItem(t);return e?e(null,!0):this},e}();