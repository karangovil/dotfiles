/**
 * Blur Copyright (c) 2008-2015 by Abine, Inc. All Rights Reserved.
 *
 * This software is the confidential and proprietary information
 * of Abine, Inc. ("Confidential Information"), subject
 * to the Non-Disclosure Agreement and/or License Agreement you entered
 * into with Abine. You shall use such Confidential Information only
 * in accordance with the terms of said Agreement(s). Abine makes
 * no representations or warranties about the suitability of the
 * software. The software is provided with ABSOLUTELY NO WARRANTY
 * and Abine will NOT BE LIABLE for ANY DAMAGES resulting from
 * the use of the software.
 *
 * Contact license@getabine.com with any license-related questions.
 *
 * https://www.abine.com
 * @license
 *
 */
ABINE_DNTME.define("abine/views/panelBase",["documentcloud/underscore","jquery","duckbone/core","abine/timer","models","abine/window","abine/contentMessenger","abine/timer","abine/config","abine/proxies","cryptojs"],function(e,t,a,n,i,r,s,o,l,c,d){var u=300,p={},m=a.View.extend({opacity:"1.0",initialize:function(){e.extend(this.events,{"mousedown #disableLink":"disableLink","mousedown .tracker-count":"showToolbarPanel","mousedown .autoFillWith":"search"}),a.View.prototype.initialize.apply(this,arguments)},adjustHeader:function(){},render:function(){return this.model?(this.renderTemplate(),o.setTimeout(e.bind(function(){this.adjustHeader(),this.trigger("render");var a=t("input, textarea",this.el);a.placeholder&&a.placeholder(),o.setTimeout(e.bind(this.maskPasswords,this),100)},this),0),this):this},autoResize:function(t){o.setTimeout(e.bind(function(){this.trigger("resize",t)},this),0)},triggerRender:function(){o.setTimeout(e.bind(function(){this.trigger("render")},this),0)},disableLink:function(e){e.preventDefault(),e.stopPropagation(),this.options.contentManager.disablePanelOnThisSite(),this.closePanel(e)},autoFillWith:function(e){this.ignoreBlur(!0),e.preventDefault(),e.stopPropagation(),this.options.contentManager.showAutoFillWith(this.options),this.closePanel(e,!0),this.trigger("remove")},search:function(e){this.ignoreBlur(!0),e.preventDefault(),e.stopPropagation(),this.options.contentManager.showSearch(this.options),this.closePanel(e,!0),this.trigger("remove")},ignoreBlur:function(e){return"undefined"==typeof e?!!this._ignoreBlur:void(e===!1?(this._ignoreBlur=!1,this.options.contentManager.ignoreBlur(this.options.strategyId,this.options.fieldId,!1)):(this._ignoreBlur=!0,this.options.contentManager.ignoreBlur(this.options.strategyId,this.options.fieldId,!0)))},focusField:function(){this.options.contentManager.focusField(this.options.strategyId,this.options.fieldId)},plainFocusField:function(){this.options.contentManager.plainFocusField(this.options.strategyId,this.options.fieldId)},focusFieldWithIntent:function(e){this.options.contentManager.focusFieldWithIntent(this.options.strategyId,this.options.fieldId,e)},addFieldBorder:function(e){this.options.contentManager.messenger.sendToCS("CS","addFieldBorder",{strategyId:this.options.strategyId,fieldId:e})},removeFieldBorder:function(e){this.options.contentManager.messenger.sendToCS("CS","removeFieldBorder",{strategyId:this.options.strategyId,fieldId:e})},bindHeaderClose:function(){t(this.el).bind("mousedown",e.bind(function(e){this.ignoreBlur(!0);var a=t(e.target),n=a.data("highlight")||a.parent().data("highlight"),r="settings";if(n&&(["email","phone","card"].indexOf(n)>-1&&(r="masking"),["account","password"].indexOf(n)>-1&&(r="accounts"),["address","real_card"].indexOf(n)>-1&&(r="wallet")),a.hasClass("close-link")||a.parent().hasClass("close-link"))this.dataTypePanel()&&(this.options.contentManager.showFieldIconsOnThisSite(),this.options.contentManager.showFieldIcon(this.options.strategyId,this.options.fieldId,!0)),this.closePanel();else if(a.hasClass("b-link")||a.parent().hasClass("b-link"))"login_helper_panel"==this.options.el.className?c.webapp.openPage("/#/accounts/"+this.options.domain):this.options.contentManager.showToolbarPanel({page:"dashboard",highlight:n}),this.closePanel();else if(a.hasClass("logo-link")||a.parent().hasClass("logo-link"))c.webapp.openDashboard(),this.closePanel();else if(a.hasClass("close-icon")||a.hasClass("close-dd"))this.closePanel();else if(a.hasClass("settings-link")||a.parent().hasClass("settings-link")){var s=a.data("add-setting")||a.parent().data("add-setting");if(s){var o=new i.Preference;o.save({key:s,value:"true"}),this.options.contentManager.messenger.trigger("broadcast:preference:reload")}this.options.contentManager.showToolbarPanel({page:r,highlight:n}),this.closePanel()}},this))},showToolbarPanel:function(e){return e.preventDefault(),this.options.contentManager.showToolbarPanel({page:"trackers"}),this.closePanel(),!1},dataTypePanel:function(){return!this.ignoreExplicitClose},bindKeyEvents:function(){this.options.contentManager.bindKeyEvents(this.options.strategyId,this.options.fieldId,this.doNotCloseOnTyping,e.bind(this.handleKeyEvents,this))},handleKeyEvents:function(e){"enter"==e?(this.selectedField||0===this.selectedField)&&this.trigger("enter"+this.selectedField,{selectedField:this.selectedField,preventDefault:function(){}},this.selectedField):"down"==e?this.highlightOption(this.selectedField||0===this.selectedField?this.selectedField+1:0):"up"==e?this.highlightOption(this.selectedField||0===this.selectedField?this.selectedField-1:-1):"close"==e&&(this.closePanel(),delete this.selectedField)},bindPanelTextInput:function(a){t(a).unbind("focus.dntme").bind("focus.dntme",e.bind(function(){n.clearTimeout(this._blurTimer),this.ignoreBlur(!0),n.setTimeout(e.bind(function(){this.ignoreBlur(!1)},this),500)},this)),t(a).unbind("blur.dntme").bind("blur.dntme",e.bind(function(){this._blurTimer=n.setTimeout(e.bind(function(){this.ignoreBlur()?this.focusField():(this.cleanupPanel(),this.closingOnBlur(),this.closePanel()),n.setTimeout(e.bind(function(){this.ignoreBlur(!1)},this),500)},this),500)},this))},bindBaseEvents:function(){this.bindHeaderClose(),this.bindKeyEvents()},cleanupPanel:function(){},closingOnBlur:function(){},getKeyOptions:function(){return e(t(this.el).find(".mmKeyOption")).filter(function(e){return t(e).hasClass("mmKeyOption")&&"none"!==t(e).css("display")&&t(e).is("a")&&!t(e).hasClass("disabled")})},highlightOption:function(e){var a=this.getKeyOptions();e=(e+a.length)%a.length,(this.selectedField||0===this.selectedField)&&t(a[this.selectedField].children[0]).removeClass("hover"),t(a[e].children[0]).addClass("hover"),this.selectedField=e},applyFadingStyle:function(){return},fadeIn:function(){},fadeOut:function(){try{this.el.style.opacity="1.0",this.el.style.marginTop="0px"}catch(e){}n.setTimeout(e.bind(function(){try{this.el.style.opacity="0.0",this.el.style.marginTop="50px"}catch(e){}},this),100);try{delete this.contentManager._currentPanelField}catch(e){}n.setTimeout(e.bind(function(){this.trigger("remove")},this),100+u)},getContentMessenger:function(){return this.messenger=this.messenger||ABINE_DNTME.contentMessenger||this.options&&this.options.contentManager&&this.options.contentManager.messenger||new s.ContentMessenger,this.messenger},triggerPanelFillEvent:function(e){this.getContentMessenger(),e.field.origin=e.origin;var a={disposableGUID:e.field.disposableGUID,name:e.field.name,origin:e.field.origin,dataType:e.field.dataType,accountId:e.accountId,value:e.field.value};e.field.element.setAttribute("abineOrigin",e.field.origin),t(this.options.formEl).attr("maskMeFilled","yes"),this.options.contentManager.triggerPanelFillEvent(this.options.formEl,a)},isVisible:function(e){try{return t(e).is(":visible")&&"hidden"!=t(e).css("visibility")}catch(e){}return!0},fillFields:function(e,t,a){this.options.contentManager.fillFields(e,this.options.strategyId,this.options.fieldId,t,a)},sendFeedbackEmail:function(e){this.options.contentManager.sendFeedbackEmail(this.options.strategyId,this.options.fieldId,e)},hidePanel:function(){this.trigger("hide")},removePanel:function(){this.trigger("remove")},closePanel:function(t){t&&t.preventDefault(),this.fadeOut(),n.setTimeout(e.bind(function(){this.options.contentManager.removePanels(this.options.contentManager.frameId||ABINE_DNTME.context,this.options.strategyId,this.options.fieldId)},this),0)},clickedInsideOfTarget:function(e,t){for(;t.parentNode&&t.id!=e;)t=t.parentNode;return t.id==e},performActions:function(t){this.getContentMessenger(),e.each(this.panelSectionActionMap[t.currentTarget.id],e.bind(function(e){if(e.target_id&&""!=e.target_id&&this.clickedInsideOfTarget(e.target_id,t.target)||e.target_id&&""==e.target_id||!e.target_id)if("open_registration_page"==e.name)this.getStarted(t,{id:this.options.dynamicPanel.id,action:e.name});else if("open_page"==e.name)c.securityManager.openPage(e.extra);else if("trigger_click"==e.name)this.messenger.send("update:panelActivity:click",{panelId:this.options.dynamicPanel.id});else if("trigger_conversion"==e.name)this.messenger.send("update:panelActivity:conversion",{panelId:this.options.dynamicPanel.id});else if("dismiss_panel"==e.name)this.options.dynamicPanel.field_type.indexOf("new-feature-added")!=-1||this.closePanel();else if("change_show_rate"==e.name)c.panelsModule.changePanelShowRate({panelId:this.options.dynamicPanel.id,extra:e.extra});else if("change_preference"==e.name){var a=new i.Preference;a.save(JSON.parse(e.extra))}else"no_action"==e.name||("open_plans_page"==e.name?this.openPlansPage("panelID"+this.options.dynamicPanel.id,null,{id:this.options.dynamicPanel.id,action:e.name}):"open_activate_cards_page"==e.name?this.openActivateCardsPage(null,{id:this.options.dynamicPanel.id,action:e.name}):"open_snowman_page"==e.name?this.openSnowmanPage(null,{id:this.options.dynamicPanel.id,action:e.name}):"open_new_premium_feature_added_page"==e.name&&this.openNewFeatureAdded(null,{id:this.options.dynamicPanel.id,action:e.name}))},this))},maskPasswords:function(){"Firefox"==ABINE_DNTME.config.browser&&(this.$("input[type=text]").each(function(e,t){t.setAttribute("autocomplete","off")}),this.$("input[type=password]").each(function(e,t){function a(){clearTimeout(i),i=setTimeout(function(){for(var e=n.value,a=0,i=[],r=[],s=t.value,o=t.selectionStart,l=t.selectionEnd,c=0;c<s.length;c++)9679==s.charCodeAt(c)?i.push(e[a++]):i.push(s.charAt(c)),r.push(String.fromCharCode(9679));n.value=i.join(""),t.value=r.join(""),t.selectionStart=o,t.selectionEnd=l},10)}var n=t.ownerDocument.createElement("input");n.type="hidden",n.name=t.name,n.id=t.id,t.id=t.id+"X",t.name=t.name+"X",t.type="text",t.setAttribute("autocomplete","off"),t.parentNode.appendChild(n);var i;t.addEventListener("keypress",a),t.addEventListener("keyup",a),t.addEventListener("paste",a)}))},setupDynamicPanel:function(){this.panelPositions=this.options.dynamicPanel.panel_positions,this.panelSections=[],this.panelSectionActionMap={},e.each(this.panelPositions,e.bind(function(t){var a=t.panel_section;a.has_action=t.panel_actions.length>0,this.panelSectionActionMap[a.id]=[],e.each(t.panel_actions,e.bind(function(e){this.panelSectionActionMap[a.id].push(e)},this)),this.panelSections.push(a)},this))},closeHeader:function(e){e&&e.preventDefault(),this.ignoreExplicitClose||this.options.contentManager.closePanelFromHeader(this.options.strategyId,this.options.fieldId),this.closePanel(e)},getStarted:function(e,t){c.webapp.openHome(t),this.closePanel()},openTour:function(){c.webapp.openTour(),this.closePanel()},openSetupEmailPage:function(){c.webapp.openEmails(),this.closePanel()},openSettings:function(e){return e&&e.preventDefault(),c.webapp.openSettings(),this.closePanel(),!1},openLoginPage:function(e){e&&"string"!=typeof e&&(e.preventDefault&&e.preventDefault(),e=null),c.webapp.openLogin(e),this.closePanel()},openDnt2UpgradePage:function(){c.webapp.openDnt2UpgradePage(),this.closePanel()},openPasswordSetupPage:function(e){c.webapp.openPasswordSetup(e),this.closePanel()},openActivateCardsPage:function(e,t){c.webapp.openCards(t),this.closePanel()},openPlansPage:function(e,t,a){c.webapp.openPremium(e,null,a)},openSnowmanPage:function(e,t){c.webapp.openSnowman(null,t)},openNewFeatureAdded:function(e,t){c.webapp.openNewFeatureAdded(null,t)},replaceWithFavicons:function(e){function t(){a.each(function(e,t){t.style.objectFit="contain",t.setAttribute("align","center"),t.setAttribute("vertical-align","middle"),t.src=i})}var a=this.$(".replace-fav-icon");if(a.length>0){var n=d.SHA1("abine"+e),i="https://s3.amazonaws.com/abine-favicons/"+n+".png";this._imgCache=this._imgCache||{};var r=this._imgCache;if(r[n])return void t(i);var s=new Image;s.onload=function(){r[n]=!0,t(s.src)},s.src=i}},updatePanelActivity:function(e,t,a,n){if(this.options.contentManager&&this.options.contentManager.messenger&&this.options.contentManager.messenger.send("update:panelActivity:"+e,{panelId:t}),n){var i="aggregate:"+t;p[i]=p[i]||{},p[i][a]=p[i][a]||{};var r=p[i][a];if(r[e])return;if("closed"==e&&(r.masked||r.disclosed))return;for(var s in r)"impression"!=s&&(r[s]=0,this.options.contentManager.messenger.send("update:panelActivity:"+s,{panelId:i,revert:!0}));r[e]=1,this.options.contentManager.messenger.send("update:panelActivity:"+e,{panelId:i})}}});return m}),ABINE_DNTME.define("abine/password",[],function(){function e(e,t){return"undefined"==typeof t&&(t=e,e=0),Math.floor(Math.random()*(t-e)+e)}function t(t,a,n){for(var i=1;i<=n;i++){var r=e(0,t.length);t=[t.slice(0,r),a[e(a.length)],t.slice(r)].join("")}return t}var a=12,n=1,i=2,r=4,s=8,o="0123456789",l="`~!@#$%^&*()_-+={}|[]\\:\";'<>?,/",c=".-_",d="ABCDEFGHJKLMNOPQRSTUVWXYZ",u=d.toLowerCase(),p={generateRandomPassword:function(p,m,h){p=p||u,(!m||m<1)&&(m=a);var _="";return h=h||n|i|r,h&n&&(_=t(_,d,e(2,3))),h&r&&(_=t(_,l,e(1,3))),h&s&&(_=t(_,c,1)),h&i&&(_=t(_,o,e(1,3))),_.length<m&&(_=t(_,p,m-_.length)),_},generateSpecialCharsPassword:function(){return this.generateRandomPassword(null,null,n|i|s)},generateNoSpecialCharsPassword:function(){return this.generateRandomPassword(null,null,n|i)},generateNoDigitsPassword:function(){return this.generateRandomPassword(null,null,n)},generateNewOptionsPassword:function(e,t,a){var s=n;return t&&(s|=i),a&&(s|=r),this.generateRandomPassword(null,e,s)}};return p}),ABINE_DNTME.define("abine/proxyContentManager",["documentcloud/underscore","jquery","abine/core","abine/contentMessenger","abine/timer","models","abine/config","abine/intl","abine/proxies","abine/views/unlockPanel","abine/views/notificationPanel","abine/assets","abine/views/dntmePanel","abine/views/emailHelperPanel","abine/views/phoneHelperPanel","abine/views/changePasswordHelperPanel","abine/views/changePasswordLoginHelperPanel","abine/views/loginHelperPanel","abine/views/paymentHelperPanel","abine/views/passwordHelperPanel","abine/views/addressHelperPanel","abine/views/autoFillWithPanel","abine/views/mapFormPanel","abine/views/mapReviewPanel","abine/views/autoFillPanel","abine/views/identityHelperPanel","abine/views/searchPanel"],function(e,t,a,n,i,r,s,o,l,c,d,u,p,m,h,_,f,g,y,b,v,w,k,E,A,N,T){var D=a.BaseClass.extend({initialize:function(t){this.href=t.href,this.host=this.href.replace(/http[s]?:\/\//i,"").replace(/\/.*/i,""),this.domain=t.domain||(this.href?abineUrl.getTLD(this.href):null),this.document=t.document||document,this.frameId=t.frameId||ABINE_DNTME.context,this.messenger=t.contentMessenger||ABINE_DNTME.contentMessenger,l.connect(this.messenger,e.bind(function(e){this.tabId=e},this)),this._locked=t.locked,ABINE_DNTME.contentuser={hasRegEmail:e.bind(function(){return!!this.preferences&&this.preferences.hasPref("regEmail")},this)},this.messenger.on("broadcast:preference:reload",e.bind(function(){this.loadUserPreferences()},this)),this.messenger.on("closePanel",e.bind(function(){this.closeCurrentPanel(),this.removePanels(this.frameId)},this))},reloadPreference:function(){this.loadUserPreferences(),this.messenger.sendToCS("CS","reloadPreference")},isLocked:function(){return this._locked},locked:function(){this._locked=!0,this.trigger("locked")},unlocked:function(){this._locked=!1,this.trigger("unlocked"),this.preferences&&this.preferences.fetchAll()},getValue:function(e,t,a,n){var i=e+":"+Math.random(),r=this;this.messenger.on(i,function e(t){r.messenger.off(i,e),n(t)}),this.messenger.sendToCS("CS","getValue",{name:e,responseKey:i,strategyId:t,fieldId:a,frameId:this.frameId})},show:function(t){this.closeCurrentPanel(),this.loadUserPreferences(e.bind(function(){this.closeCurrentPanel(),"blur"==t.name?this.showToolbarPanel(t.payload):"email"==t.name?this._currentPanelView=this.showEmailPanel(t.payload):"password"==t.name?this._currentPanelView=this.showPasswordPanel(t.payload):"change-password"==t.name?this._currentPanelView=this.showChangePasswordPanel(t.payload):"login"==t.name?this._currentPanelView=this.showLoginPanel(t.payload):"change-password-login"==t.name?this._currentPanelView=this.showChangePasswordLoginPanel(t.payload):"address"==t.name?this._currentPanelView=this.showAddressPanel(t.payload):"payment"==t.name?this._currentPanelView=this.showPaymentPanel(t.payload):"phone"==t.name?this._currentPanelView=this.showPhonePanel(t.payload):"identity"==t.name?this._currentPanelView=this.showIdentityPanel(t.payload):"unlock"==t.name?this._currentPanelView=this.showUnlockPanel(t.payload):"notification"==t.name?(this._notificationPanelShown=!0,this._showNotification(t.payload.notification,t.payload.timeout)):"autoFill"==t.name?this.showAutoFillPanel(t.payload):"search"==t.name?this._currentPanelView=this._showSearch(t.payload):"autoFillWith"==t.name?this._currentPanelView=this._showAutoFillWith(t.payload):"mapForm"==t.name&&this._showMapForm(t.payload)},this))},loadUserPreferences:function(t){function a(){var e=this.preferences.getPref("userTag")||this.preferences.getPref("dynamicTag");e&&ABINE_DNTME.config.updateTag(e);var a=this.preferences.getPref("dnt_language");a?o.setupLocale(a,function(){t.call(this)}):t.call(this)}t=t||function(){},this.preferences=new r.PreferenceCollection({}),this.preferences.bind("sync:success",e.once(e.bind(function(){a.call(this)},this))),this.preferences.bind("sync:error",e.bind(function(){a.call(this)},this)),this.preferences.fetchAll()},disablePanelOnThisPage:function(){this.messenger.sendToCS("CS","disablePanelOnThisPage")},disablePanelOnThisSite:function(){this.messenger.sendToCS("CS","disablePanelOnThisSite")},showFieldIconsOnThisSite:function(){this.messenger.sendToCS("CS","showFieldIconsOnThisSite")},closeToolbarPanel:function(){if(this.lastDNTMePanel){try{this.lastDNTMePanel.remove()}catch(e){}this.lastDNTMePanel=null}},closeCurrentPanel:function(){if(this._currentPanelView){try{this.messenger.sendToCS("CS","cleanUpAfterPanelClosed",{strategyId:this._currentPanelView.options.strategyId,fieldId:this._currentPanelView.options.fieldId}),this._currentPanelView.remove()}catch(e){}this._currentPanelView=null}},closePanelFromHeader:function(e,t){this.messenger.sendToCS("CS","closePanelFromHeader",{strategyId:e,fieldId:t})},showToolbarPanel:function(a){return this._currentPanelView||this._notificationPanelShown?void this.messenger.sendToCS("CS","showToolbarPanel",a):(this.closeToolbarPanel(),void l.panelsModule.getDNTMePanel(a.tabId,e.bind(function(e){var n=this.lastDNTMePanel=new p({messenger:this.messenger,contentManager:this,domain:this.domain,dynamicPanel:e,compact:a.compact,cardAlertPanel:a.cardAlertPanel,showBlurGrowl:a.showBlurGrowl,page:a.page,subPage:a.subPage,highlight:a.highlight,timeout:a.timeout,switchTo:a.switchTo,notNow:this.preferences.getPref("notNowClicked"),intrusiveSplit:this.preferences.getSplitTest("intrusive01"),registered:this.preferences.getPref("hasRegistered"),premium:this.preferences.getPref("entitledToPhone"),footerCampaign:this.preferences.getPref("footerCampaign"),el:t("<div></div>",this.document).get(0)});n.messenger=this.messenger,n.bind("remove",function(){this.lastDNTMePanel=null;try{n.remove()}catch(e){}this.removePanels(this.frameId)},this),n.bind("render resize",function(){this.autoResizePanels("abineDNTMePanel",0,10)},this),n.bind("show-settings",function(e){delete a.compact,a.page="settings",e&&(a.highlight=e.highlight,a.subPage=e.subPage,a.switchTo=e.switchTo),this.showToolbarPanel(a)},this),n.bind("show-trackers",function(){delete a.compact,a.page="trackers",this.showToolbarPanel(a)},this),n.bind("show-dashboard",function(){delete a.compact,a.page="dashboard",this.showToolbarPanel(a)},this),n.bind("show-medals",function(){a.cardAlertPanel||(a.page="medals",this.showToolbarPanel(a))},this),n.bind("show-report",function(){a.cardAlertPanel||(a.page="weekly-report",this.showToolbarPanel(a))},this),n.bind("max-height",function(){this.autoResizePanels("abineDNTMePanel",0,1e3)},this),t("body",this.document).append(n.el),this.messenger.on("closeToolbarPanel",function(){n.remove()})},this)))},hookPanelEvents:function(e){e.bind("remove",function(){try{e.remove()}catch(e){}this.removePanels(this.frameId)},this),e.bind("render resize",function(e){e=e||{className:null,extraWidth:null,extraHeight:null},this.autoResizePanels(e.className,e.extraWidth,e.extraHeight)},this)},showEmailPanel:function(e){var a=new m({fieldId:e.fieldId,strategyId:e.strategyId,category:e.category,fieldType:e.fieldType,formType:e.formType,contentManager:this,hasPassword:e.hasPassword,oldValue:e.oldValue,hasRegistered:this.preferences.isPrefTrue("hasRegistered"),domain:e.domain||this.domain,dynamicPanel:e.dynamicPanel,iconClick:e.iconClick,el:t("<div></div>",this.document).get(0)});return this.hookPanelEvents(a),t("body",this.document).append(a.el),a},showPasswordPanel:function(e){var a=new b({fieldId:e.fieldId,strategyId:e.strategyId,category:e.category,fieldType:e.fieldType,formType:e.formType,contentManager:this,hasRegistered:this.preferences.isPrefTrue("hasRegistered"),domain:e.domain||this.domain,dynamicPanel:e.dynamicPanel,dynamicPanelsJSON:e.dynamicPanelsJSON,iconClick:e.iconClick,el:t("<div></div>",this.document).get(0)});return this.hookPanelEvents(a),t("body",this.document).append(a.el),a},showChangePasswordPanel:function(e){var a=new _({fieldId:e.fieldId,strategyId:e.strategyId,fieldType:e.fieldType,formType:e.formType,category:e.category,contentManager:this,hasRegistered:this.preferences.isPrefTrue("hasRegistered"),domain:e.domain||this.domain,iconClick:e.iconClick,el:t("<div></div>",this.document).get(0)});return this.hookPanelEvents(a),t("body",this.document).append(a.el),a},showLoginPanel:function(e){var a=new g({fieldId:e.fieldId,strategyId:e.strategyId,fieldType:e.fieldType,formType:e.formType,category:e.category,contentManager:this,hasRegistered:this.preferences.isPrefTrue("hasRegistered"),domain:e.domain||this.domain,dynamicPanel:e.dynamicPanel,iconClick:e.iconClick,fillAccount:e.fillAccount,el:t("<div></div>",this.document).get(0)});return this.hookPanelEvents(a),t("body",this.document).append(a.el),a},showChangePasswordLoginPanel:function(e){var a=new f({fieldId:e.fieldId,strategyId:e.strategyId,fieldType:e.fieldType,formType:e.formType,category:e.category,contentManager:this,domain:e.domain||this.domain,iconClick:e.iconClick,el:t("<div></div>",this.document).get(0)});return this.hookPanelEvents(a),t("body",this.document).append(a.el),a},showAddressPanel:function(e){var a=new v({fieldId:e.fieldId,strategyId:e.strategyId,fieldType:e.fieldType,formType:e.formType,category:e.category,dynamicPanel:e.dynamicPanel,dynamicPanelsJSON:e.json,contentManager:this,hasRegistered:this.preferences.isPrefTrue("hasRegistered"),iconClick:e.iconClick,domain:e.domain||this.domain,el:t("<div></div>",this.document).get(0)});return this.hookPanelEvents(a),t("body",this.document).append(a.el),a},showIdentityPanel:function(e){var a=new N({fieldId:e.fieldId,strategyId:e.strategyId,fieldType:e.fieldType,formType:e.formType,category:e.category,dynamicPanel:e.dynamicPanel,dynamicPanelsJSON:e.json,contentManager:this,hasRegistered:this.preferences.isPrefTrue("hasRegistered"),iconClick:e.iconClick,allDataTypes:e.allDataTypes,domain:e.domain||this.domain,el:t("<div></div>",this.document).get(0)});return this.hookPanelEvents(a),t("body",this.document).append(a.el),a},showPhonePanel:function(e){var a=new h({fieldId:e.fieldId,strategyId:e.strategyId,fieldType:e.fieldType,formType:e.formType,category:e.category,dynamicPanel:e.dynamicPanel,contentManager:this,entitledToPhone:this.preferences.isPrefTrue("entitledToPhone"),hasRegistered:this.preferences.isPrefTrue("hasRegistered"),iconClick:e.iconClick,domain:e.domain||this.domain,el:t("<div></div>",this.document).get(0)});return this.hookPanelEvents(a),t("body",this.document).append(a.el),a},showPaymentPanel:function(e){var a=this.preferences,n=new y({fieldId:e.fieldId,strategyId:e.strategyId,fieldType:e.fieldType,formType:e.formType,category:e.category,contentManager:this,authToken:!this.isLocked(),amount:e.amount,beginnerMode:a.getPref("beginnerMode"),hasRegistered:a.isPrefTrue("hasRegistered"),entitledToPayments:a.isPrefTrue("entitledToPayments"),hasEnabledPayments:a.isPrefTrue("hasEnabledPayments"),hasAuthorizedCoinbase:a.isPrefTrue("hasAuthorizedCoinbase"),entitledToPhone:a.isPrefTrue("entitledToPhone"),cardDisabled:e.maskedCardsDisabled,realCardDisabled:e.autoFillCardsDisabled,dynamicPanel:e.dynamicPanel,fromContextMenu:e.fromContextMenu,domain:e.domain||this.domain,params:e.params,el:t("<div></div>",this.document).get(0),paymentsr2:e.paymentsr2,iconClick:e.iconClick});return this.hookPanelEvents(n),t("body",this.document).append(n.el),n},showUnlockPanel:function(e){var a=new c({fieldId:e.fieldId,strategyId:e.strategyId,fieldType:e.fieldType,formType:e.formType,category:e.category,contentManager:this,preferences:this.preferences,el:t("<div></div>",this.document).get(0)});return this.hookPanelEvents(a),t("body",this.document).append(a.el),a},showNotification:function(e){this.messenger.send("background:show:notification:forward",e)},_showNotification:function(a,n){var i=d.NotificationPanelView,r={notification:a,contentManager:this,amount:a.amount,domain:this.domain,messenger:this.messenger,el:t("<div></div>",this.document).get(0),timeout:n};if("card"==a.type){var s=1;this.preferences.hasPref("countCardNotifications")&&(s=parseInt(this.preferences.getPref("countCardNotifications"))+1),this.preferences.setPref("countCardNotifications",s),i=d.CardNotificationPanelView,s<=5&&(a.detailed=!0)}else if("checkout_growl"==a.type)i=d.CheckoutGrowlNotificationPanelView;else if("real_card"==a.type)i=d.RealCardNotificationPanelView;else if("save_card"==a.type)i=d.SaveCardNotificationPanelView;else if("email"==a.type||"post-register"==a.type){var o=1;this.preferences.hasPref("countEmailNotifications")&&(o=parseInt(this.preferences.getPref("countEmailNotifications"))+1),this.preferences.setPref("countEmailNotifications",o),o<=1&&(i=d.DetailedEmailNotificationPanelView,a.neverFade=!0)}else"login"==a.type?i=d.SaveLoginNotificationPanelView:"failed_login"==a.type?i=d.FailedLoginNotificationPanelView:"password_with_no_login"==a.type?i=d.PasswordWithNoLoginNotificationPanelView:"change_password"==a.type?i=d.ChangePasswordNotificationPanelView:"growl"==a.type?i=d.GrowlNotificationPanelView:"expire_warning"==a.type?i=d.ExpireWarningNotificationPanelView:"expire_notify"==a.type&&(i=d.ExpireNotifyNotificationPanelView);var l=new i(r),c=e.bind(function(){this.messenger.off("background:saveForm:notification:close",c);try{l.remove()}catch(e){}this.removePanels(this.frameId)},this);this.messenger.on("background:saveForm:notification:close",c),l.bind("remove",function(){this.messenger.off("background:saveForm:notification:close",c),l.remove(),this.messenger.sendToCS("CS","closeNotification",this.frameId)},this),l.bind("render resize",function(e){e=e||{extraWidth:null,extraHeight:null},this.autoResizePanels("abineNotificationPanel",e.extraWidth,e.extraHeight)},this),t("body",this.document).append(l.el)},fillFields:function(e,t,a,n,i){var r={type:e,strategyId:t,fieldId:a,values:n,origin:i};this.messenger.sendToCS("CS","fillFields",r)},sendFeedbackEmail:function(e,t,a){this.messenger.sendToCS("CS","sendFeedbackEmail",{strategyId:e,fieldId:t,data:a})},autoResizePanels:function(e,a,n){var i=this.document.body.offsetHeight;"Safari"==ABINE_DNTME.config.browser&&(i=t(this.document.body.firstChild).height()+4),this.messenger.sendToCS("CS","autoResizePanels",{className:e,extraWidth:a,extraHeight:n,documentHeight:i})},removePanels:function(t,a,n){this.messenger&&(n&&this.messenger.off("keyEvent-"+n),this.messenger.sendToCS("CS","removePanels",{id:t,strategyId:a,fieldId:n}),t.indexOf("doNotRemove")==-1&&i.setTimeout(e.bind(this.destroy,this),0))},bindKeyEvents:function(e,t,a,n){this.messenger.sendToCS("CS","bindKeyEvents",{frameId:this.frameId,strategyId:e,fieldId:t,doNotCloseOnTyping:a}),this.messenger.off("keyEvent-"+t),this.messenger.on("keyEvent-"+t,n)},ignoreBlur:function(e,t,a){this.messenger&&this.messenger.sendToCS("CS","ignoreBlur",{strategyId:e,fieldId:t,value:a})},showFieldIcon:function(e,t,a){this.messenger&&this.messenger.sendToCS("CS","showFieldIcon",{strategyId:e,fieldId:t,value:a})},focusField:function(e,t){this.messenger&&this.messenger.sendToCS("CS","focusField",{strategyId:e,fieldId:t})},plainFocusField:function(e,t){this.messenger&&this.messenger.sendToCS("CS","plainFocusField",{strategyId:e,fieldId:t})},focusFieldWithIntent:function(e,t,a){this.messenger&&this.messenger.sendToCS("CS","focusFieldWithIntent",{strategyId:e,fieldId:t,params:a,frameId:this.frameId})},showAutoFillWith:function(e){this.messenger&&this.messenger.sendToCS("CS","showAutoFillWith",{fieldId:e.fieldId,strategyId:e.strategyId,fieldType:e.fieldType,category:e.category})},showSearch:function(e){this.messenger&&this.messenger.sendToCS("CS","showSearch",{fieldId:e.fieldId,strategyId:e.strategyId,fieldType:e.fieldType,category:e.category})},_showAutoFillWith:function(e){var a=new w({fieldId:e.fieldId,strategyId:e.strategyId,category:e.category,fieldType:e.fieldType,formType:e.formType,panelDisabledHere:e.panelDisabledHere,contentManager:this,authToken:!this.isLocked(),domain:this.domain,el:t("<div></div>",this.document).get(0)});return a.bind("remove",function(){try{a.remove()}catch(e){}this.removePanels(this.frameId)},this),a.bind("render resize",function(e){e=e||{className:null,extraWidth:null,extraHeight:null},this.autoResizePanels(e.className,e.extraWidth,e.extraHeight)},this),t("body",this.document).append(a.el),a},_showSearch:function(e){var a=new T({fieldId:e.fieldId,strategyId:e.strategyId,category:e.category,fieldType:e.fieldType,formType:e.formType,panelDisabledHere:e.panelDisabledHere,contentManager:this,authToken:!this.isLocked(),domain:this.domain,el:t("<div></div>",this.document).get(0)});return a.bind("remove",function(){try{a.remove()}catch(e){}this.removePanels(this.frameId)},this),a.bind("render resize",function(e){e=e||{className:null,extraWidth:null,extraHeight:null},this.autoResizePanels(e.className,e.extraWidth,e.extraHeight)},this),t("body",this.document).append(a.el),this.messenger.on("closeToolbarPanel",function(){a.remove()}),a},showMapForm:function(e){this.messenger.sendToCS("CS","showMapForm",{fieldId:e.fieldId,strategyId:e.strategyId,fieldType:e.fieldType,mapFirstForm:e.mapFirstForm,forms:e.forms,formId:e.formId})},_showMapForm:function(e){var a=new(e.reviewMode?E:k)({fieldId:e.fieldId,strategyId:e.strategyId,category:e.category,fieldType:e.fieldType,formType:e.formType,fields:e.fields,forms:e.forms,formId:e.formId,mappings:e.mappings,formSignature:e.formSignature,reviewMode:e.reviewMode,contentManager:this,authToken:!this.isLocked(),domain:this.domain,el:t("<div></div>",this.document).get(0)});a.bind("remove",function(){try{a.remove()}catch(e){}this.removePanels(this.frameId)},this),a.bind("render resize",function(e){e=e||{className:null,extraWidth:null,extraHeight:null},this.autoResizePanels(e.className,e.extraWidth,e.extraHeight)},this),t("body",this.document).append(a.el),this.messenger.on("closeToolbarPanel",function(){a.remove()})},showAutoFillPanel:function(e){var a=new A({fieldId:e.fieldId,strategyId:e.strategyId,category:e.category,fieldType:e.fieldType,formType:e.formType,fields:e.fields,mappings:e.mappings,formSignature:e.formSignature,reviewMode:e.reviewMode,contentManager:this,authToken:!this.isLocked(),domain:this.domain,href:this.href,el:t("<div></div>",this.document).get(0)});a.bind("remove",function(){try{a.remove()}catch(e){}this.removePanels(this.frameId)},this),a.bind("render resize",function(e){e=e||{className:null,extraWidth:null,extraHeight:null},this.autoResizePanels(e.className,e.extraWidth,e.extraHeight)},this),t("body",this.document).append(a.el)},destroy:function(){try{l.disconnect()}catch(e){}this.messenger&&(this.messenger.off(),this.messenger.destroy(),delete this.messenger);try{safari.extension.dispatchMessage("RemoveFrame",{sender:ABINE_DNTME.context})}catch(e){}}});return{ContentManager:D}}),/* ===========================================================
 * bootstrap-tooltip.js v2.3.2
 * http://getbootstrap.com/2.3.2/javascript.html#tooltips
 * Inspired by the original jQuery.tipsy by Jason Frame
 * ===========================================================
 * Copyright 2013 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================== */
!function(e){"use strict";var t=function(e,t){this.init("tooltip",e,t)};t.prototype={constructor:t,init:function(t,a,n){var i,r,s,o,l;for(this.type=t,this.$element=e(a),this.options=this.getOptions(n),this.enabled=!0,s=this.options.trigger.split(" "),l=s.length;l--;)o=s[l],"click"==o?this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this)):"manual"!=o&&(i="hover"==o?"mouseenter":"focus",r="hover"==o?"mouseleave":"blur",this.$element.on(i+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(r+"."+this.type,this.options.selector,e.proxy(this.leave,this)));this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(t){return t=e.extend({},e.fn[this.type].defaults,this.$element.data(),t),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},enter:function(t){var a,n=e.fn[this.type].defaults,i={};return this._options&&e.each(this._options,function(e,t){n[e]!=t&&(i[e]=t)},this),a=e(t.currentTarget)[this.type](i).data(this.type),a.options.delay&&a.options.delay.show?(clearTimeout(this.timeout),a.hoverState="in",void(this.timeout=setTimeout(function(){"in"==a.hoverState&&a.show()},a.options.delay.show))):a.show()},leave:function(t){var a=e(t.currentTarget)[this.type](this._options).data(this.type);return this.timeout&&clearTimeout(this.timeout),a.options.delay&&a.options.delay.hide?(a.hoverState="out",void(this.timeout=setTimeout(function(){"out"==a.hoverState&&a.hide()},a.options.delay.hide))):a.hide()},show:function(){var t,a,n,i,r,s,o=e.Event("show");if(this.hasContent()&&this.enabled){if(this.$element.trigger(o),o.isDefaultPrevented())return;switch(t=this.tip(),this.setContent(),this.options.animation&&t.addClass("fade"),r="function"==typeof this.options.placement?this.options.placement.call(this,t[0],this.$element[0]):this.options.placement,t.detach().css({top:0,left:0,display:"block"}),this.options.container?t.appendTo(this.options.container):t.insertAfter(this.$element),a=this.getPosition(),n=t[0].offsetWidth,i=t[0].offsetHeight,r){case"bottom":s={top:a.top+a.height,left:a.left+a.width/2-n/2};break;case"top":s={top:a.top-i,left:a.left+a.width/2-n/2};break;case"left":s={top:a.top+a.height/2-i/2,left:a.left-n};break;case"right":s={top:a.top+a.height/2-i/2,left:a.left+a.width}}this.applyPlacement(s,r),this.$element.trigger("shown")}},applyPlacement:function(e,t){var a,n,i,r,s=this.tip(),o=s[0].offsetWidth,l=s[0].offsetHeight;s.offset(e).addClass(t).addClass("in"),a=s[0].offsetWidth,n=s[0].offsetHeight,"top"==t&&n!=l&&(e.top=e.top+l-n,r=!0),"bottom"==t||"top"==t?(i=0,e.left<0&&(i=e.left*-2,e.left=0,s.offset(e),a=s[0].offsetWidth,n=s[0].offsetHeight),this.replaceArrow(i-o+a,a,"left")):this.replaceArrow(n-l,n,"top"),r&&s.offset(e)},replaceArrow:function(e,t,a){this.arrow().css(a,e?50*(1-e/t)+"%":"")},setContent:function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},hide:function(){function t(){var t=setTimeout(function(){a.off(e.support.transition.end).detach()},500);a.one(e.support.transition.end,function(){clearTimeout(t),a.detach()})}var a=this.tip(),n=e.Event("hide");if(this.$element.trigger(n),!n.isDefaultPrevented())return a.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?t():a.detach(),this.$element.trigger("hidden"),this},fixTitle:function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},hasContent:function(){return this.getTitle()},getPosition:function(){var t=this.$element[0];return e.extend({},"function"==typeof t.getBoundingClientRect?t.getBoundingClientRect():{width:t.offsetWidth,height:t.offsetHeight},this.$element.offset())},getTitle:function(){var e,t=this.$element,a=this.options;return e=t.attr("data-original-title")||("function"==typeof a.title?a.title.call(t[0]):a.title)},tip:function(){return this.$tip=this.$tip||e(this.options.template,this.$element)},arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(t){var a=t?e(t.currentTarget)[this.type](this._options).data(this.type):this;a.tip().hasClass("in")?a.hide():a.show()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var a=e.fn.tooltip;e.fn.tooltip=function(a){return this.each(function(){var n=e(this),i=n.data("tooltip"),r="object"==typeof a&&a;i||n.data("tooltip",i=new t(this,r)),"string"==typeof a&&i[a]()})},e.fn.tooltip.Constructor=t,e.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},e.fn.tooltip.noConflict=function(){return e.fn.tooltip=a,this}}(window.jQuery),ABINE_DNTME.CompiledTemplates=ABINE_DNTME.CompiledTemplates||{},ABINE_DNTME.require(["wycats/handlebars"],function(e){e.registerPartial("common.auto_fill_with",e.template(function(e,t,a,n,i){function r(e,t){var n,i,r="";return r+='\n<a href="#" class="mmKeyOption autoFillWith">\n  <div class="element">\n    <span class="auto-fill-with" style="position:relative;text-align:left;font-size: 9pt;color:#3497db;"> &nbsp;&nbsp;\n      ',m=a.mapper,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"mapper"),i=a["if"],h=_.program(2,s,t),h.hash={},h.fn=h,h.inverse=_.program(4,o,t),n=i.call(e,n,h),(n||0===n)&&(r+=n),r+="\n    </span>\n  </div>\n</a>\n"}function s(e){var t,n,i="";return i+="\n        ",t="mm_auto_fill_with_map_form",m=a.intl,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===f?n.call(e,t,{hash:{}}):n===y?g.call(e,"intl",t,{hash:{}}):n,i+=b(t)+"\n      "}function o(e,t){var n,i,r="";return r+="\n        ",n="mm_dntme_correct_something",m=a.intl,i=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===f?i.call(e,n,{hash:{}}):i===y?g.call(e,"intl",n,{hash:{}}):i,r+=b(n)+"\n        ",m=a.tabData,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"tabData"),i=a["if"],h=_.program(5,l,t),h.hash={},h.fn=h,h.inverse=_.noop,n=i.call(e,n,h),(n||0===n)&&(r+=n),r+="\n      "}function l(e,t){var n,i,r="";return r+="\n            ",m=a.tabData,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"tabData"),n=null===n||void 0===n||n===!1?n:ABINE_DNTME.Duckbone.Handlebars.getAttr(n,"hasOneTracker"),i=a["if"],h=_.program(6,c,t),h.hash={},h.fn=h,h.inverse=_.noop,n=i.call(e,n,h),(n||0===n)&&(r+=n),r+="\n            ",m=a.tabData,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"tabData"),n=null===n||void 0===n||n===!1?n:ABINE_DNTME.Duckbone.Handlebars.getAttr(n,"hasTwoOrMoreTrackers"),i=a["if"],h=_.program(8,d,t),h.hash={},h.fn=h,h.inverse=_.noop,n=i.call(e,n,h),(n||0===n)&&(r+=n),r+="\n        "}function c(e){var t,n,i="";return i+='\n              <span class="tracker-count">&#x2714; ',t="mm_email_helper_one_tracker_blocked",m=a.intl,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===f?n.call(e,t,{hash:{}}):n===y?g.call(e,"intl",t,{hash:{}}):n,i+=b(t)+"</span>\n            "}function d(e){var t,n,i,r="";return r+='\n              <span class="tracker-count">&#x2714; ',m=a.tabData,t=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"tabData"),t=null===t||void 0===t||t===!1?t:ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"trackers"),t=null===t||void 0===t||t===!1?t:ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"length"),n="mm_email_helper_trackers_blocked",m=a.intl,i=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===f?i.call(e,n,t,{hash:{}}):i===y?g.call(e,"intl",n,t,{hash:{}}):i,r+=b(t)+"</span>\n            "}a=a||e.helpers;var u,p,m,h,_=this,f="function",g=a.helperMissing,y=void 0,b=this.escapeExpression;return m=a.showMapper,u=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"showMapper"),p=a["if"],h=_.program(1,r,i),h.hash={},h.fn=h,h.inverse=_.noop,u=p.call(t,u,h),u||0===u?u:""}))}),ABINE_DNTME.require(["wycats/handlebars"],function(e){e.registerPartial("common.biometric_auth",e.template(function(e,t,a,n,i){function r(e){var t,n,i="";return i+='\n          <img src="',t="/pages/images/faceid.png",f=a.assetUrl,n=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===v?n.call(e,t,{hash:{}}):n===k?w.call(e,"assetUrl",t,{hash:{}}):n,i+=E(t)+'" class="loading" style="width: 55px;"/><br/>Face ID\n      '}function s(e,t){var n,i,r="";return r+="\n          ",f=a.touch_id,n=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"touch_id"),i=a["if"],g=b.program(4,o,t),g.hash={},g.fn=g,g.inverse=b.program(6,l,t),n=i.call(e,n,g),(n||0===n)&&(r+=n),r+="\n      "}function o(e){var t,n,i="";return i+='\n              <img src="',t="/pages/images/fingerprint.png",f=a.assetUrl,n=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===v?n.call(e,t,{hash:{}}):n===k?w.call(e,"assetUrl",t,{hash:{}}):n,i+=E(t)+'" class="loading" style="width: 55px;"/><br/>Touch ID\n          '}function l(e){var t,n,i="";return i+='\n              <img src="',t="/pages/images/phoneid.png",f=a.assetUrl,n=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===v?n.call(e,t,{hash:{}}):n===k?w.call(e,"assetUrl",t,{hash:{}}):n,i+=E(t)+'" class="loading" style="width: 55px;"/><br/>\n          '}function c(e){var t,n,i="";return i+="\n          ",t="mm_payment_helper_request_faceid_auth",f=a.intl,n=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===v?n.call(e,t,{hash:{}}):n===k?w.call(e,"intl",t,{hash:{}}):n,i+=E(t)+"\n      "}function d(e,t){var n,i,r="";return r+="\n          ",f=a.touch_id,n=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"touch_id"),i=a["if"],g=b.program(11,u,t),g.hash={},g.fn=g,g.inverse=b.program(13,p,t),n=i.call(e,n,g),(n||0===n)&&(r+=n),r+="\n      "}function u(e){var t,n,i="";return i+="\n              ",t="mm_payment_helper_request_biometric_auth",f=a.intl,n=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===v?n.call(e,t,{hash:{}}):n===k?w.call(e,"intl",t,{hash:{}}):n,i+=E(t)+"\n          "}function p(e){var t,n,i="";return i+="\n              ",t="mm_payment_helper_request_phoneid_auth",f=a.intl,n=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===v?n.call(e,t,{hash:{}}):n===k?w.call(e,"intl",t,{hash:{}}):n,i+=E(t)+"\n          "}function m(e){var t,n,i="";return i+='\n    <div class="control-group" style="margin-left:50px;">\n      <span >',t="mm_payment_helper_master_pass_auth_message",f=a.intl,n=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===v?n.call(e,t,{hash:{}}):n===k?w.call(e,"intl",t,{hash:{}}):n,i+=E(t)+'</span><br/>\n      <div id="masterPassErr" style="display:none;color:red;text-transform:none;"></div>\n      <span class="fields">\n        <div id="login-section">\n          <input id="password" type="password" style="width:140px;height:28px;margin:10px 5px;margin-left:0px;" placeholder="',t="mm_dntme_enter_password_simple",f=a.intl,n=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===v?n.call(e,t,{hash:{}}):n===k?w.call(e,"intl",t,{hash:{}}):n,i+=E(t)+'"/>\n        </div>\n         <input type="submit" id="unlockButton" class="btn btn-success unlock-msg" value=\'',t="mm_payment_helper_master_pass_auth_verify",f=a.intl,n=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===v?n.call(e,t,{hash:{}}):n===k?w.call(e,"intl",t,{hash:{}}):n,i+=E(t)+'\' style="padding:5px 35px;background:none;background-color:#4c90da;"/>\n      </span>\n    </div>\n  '}a=a||e.helpers;var h,_,f,g,y="",b=this,v="function",w=a.helperMissing,k=void 0,E=this.escapeExpression,A=a.blockHelperMissing;return y+='<!-- Step 3.1 Biometric auth -->\n<div class="clearfix" id="biometricAuth" style="display:none;">\n  <div style="float:left;width:80px;margin:10px;text-align:center;font-size: 8pt;padding-top: 10px;border-right: 1px solid #eee;">\n      ',f=a.face_id,h=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"face_id"),_=a["if"],g=b.program(1,r,i),g.hash={},g.fn=g,g.inverse=b.program(3,s,i),h=_.call(t,h,g),(h||0===h)&&(y+=h),y+='\n  </div>\n  <div style="float:left;margin: 10px;width:230px;text-align: center;">\n    <span id="biometricInfo" class="loading-dots" style="font-size: 12pt;display: inline-block;margin: 5px;">\n      ',f=a.face_id,h=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"face_id"),_=a["if"],g=b.program(8,c,i),g.hash={},g.fn=g,g.inverse=b.program(10,d,i),h=_.call(t,h,g),(h||0===h)&&(y+=h),y+='\n    </span>\n    <span id="biometricError" style="display:none;color:red;"></span>\n    <br/>\n    <input type="button" class="btn btn-success" id="retryBiometricAuth" style="margin: 5px;" value="',h="mm_payment_helper_retry_biometric_auth",f=a.intl,_=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),h=typeof _===v?_.call(t,h,{hash:{}}):_===k?w.call(t,"intl",h,{hash:{}}):_,y+=E(h)+'"/><br/>\n    <a id="masterPassAuth" href="#">',h="mm_payment_helper_master_pass_auth",f=a.intl,_=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),h=typeof _===v?_.call(t,h,{hash:{}}):_===k?w.call(t,"intl",h,{hash:{}}):_,y+=E(h)+'</a>\n  </div>\n</div>\n<!-- End Step 3.1 Biometric auth -->\n\n<!-- Step 3.2 Master password auth -->\n<div class="clearfix" id="masterPassStep" style="display:none;padding-top:15px;">\n  <div style="float:left;">\n    <img style="margin-top:30px;margin-left:6px;" height="40px" width="40px" src="',h="/pages/images/NewIcon.png",f=a.assetUrl,_=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),h=typeof _===v?_.call(t,h,{hash:{}}):_===k?w.call(t,"assetUrl",h,{hash:{}}):_,y+=E(h)+'"/>\n  </div>\n  ',h="unlock",f=a.form,_=f||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"form"),g=b.program(15,m,i),g.hash={},g.fn=g,g.inverse=b.noop,h=f&&typeof _===v?_.call(t,h,g):A.call(t,_,h,g),(h||0===h)&&(y+=h),y+="\n</div>\n<!-- End Step 3.2 Master password auth -->\n"}))}),ABINE_DNTME.require(["wycats/handlebars"],function(e){e.registerPartial("common.disable_link",e.template(function(e,t,a){a=a||e.helpers;var n,i,r,s="",o="function",l=a.helperMissing,c=void 0,d=this.escapeExpression;return s+='<a href="#" id="disableLink" style="text-transform: none;margin-left: 10px;font-size: 9pt;text-decoration: underline;">',n="mm_dntme_disable_panel",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,s+=d(n)+"</a>"}))}),ABINE_DNTME.require(["wycats/handlebars"],function(e){e.registerPartial("common.field_types",e.template(function(e,t,a){a=a||e.helpers;return'<select class="fieldTypes" style="vertical-align:middle;">\n  <option value="">-- Please select --</option>\n  <option class="start" value="/unknown">Ignore</option>\n  <optgroup class="person-grp" label="Person">\n    <option value="/contact/email">Email</option>\n    <option value="/nameperson/friendly">Username or User ID</option>\n    <option value="/nameperson/full">Full Name</option>\n    <option value="/nameperson/prefix">Title (Mr/Mrs/Ms)</option>\n    <option value="/nameperson/first">First Name</option>\n    <option value="/nameperson/middle">Middle Name</option>\n    <option value="/nameperson/last">Last Name</option>\n    <option value="/nameperson/suffix">Suffix (Jr./Sr./II)</option>\n    <option value="/person/gender">Gender</option>\n  </optgroup>\n  <optgroup class="security-grp" label="Security">\n    <option value="/password">Password</option>\n    <option value="/password/differentSpecialChars">Limited Special Chars (.-_)</option>\n    <option value="/password/noSpecialChars">No Special Characters</option>\n    <option value="/password/noNumbers">No Numbers</option>\n    <option value="/passwordold">Old Password</option>\n  </optgroup>\n  <optgroup class="combined-grp" label="Combined Login/Register Form">\n    <option value="/contact/email/login">Username or Email</option>\n    <option value="/password/login">Password</option>\n  </optgroup>\n  <optgroup class="phone-grp" label="Phone Fields">\n    <option value="/contact/phone">Phone xxx-yyy-zzzz</option>\n    <option value="/contact/phone/areacode">Phone areacode (xxx)</option>\n    <option value="/contact/phone/exchange">Phone exchange yyy</option>\n    <option value="/contact/phone/local">Phone local zzzz</option>\n    <option value="/contact/phone/number">Phone last 7 yyy-zzzz</option>\n    <option value="/contact/phone/extension">Phone extension</option>\n    <option value="/contact/phone/countrycode">Phone country code</option>\n  </optgroup>\n  <optgroup class="phone-grp" label="Home Phone">\n    <option value="/contact/phone/home">Home Phone xxx-yyy-zzzz</option>\n    <option value="/contact/phone/areacode/home">Home Phone areacode (xxx)</option>\n    <option value="/contact/phone/exchange/home">Home Phone exchange yyy</option>\n    <option value="/contact/phone/local/home">Home Phone local zzzz</option>\n    <option value="/contact/phone/number/home">Home Phone last 7 yyy-zzzz</option>\n    <option value="/contact/phone/extension/home">Home Phone extension</option>\n    <option value="/contact/phone/countrycode/home">Home Phone country code</option>\n  </optgroup>\n  <optgroup class="phone-grp" label="Work Phone">\n    <option value="/contact/phone/work">Work Phone xxx-yyy-zzzz</option>\n    <option value="/contact/phone/areacode/work">Work Phone areacode (xxx)</option>\n    <option value="/contact/phone/exchange/work">Work Phone exchange yyy</option>\n    <option value="/contact/phone/local/work">Work Phone local zzzz</option>\n    <option value="/contact/phone/number/work">Work Phone last 7 yyy-zzzz</option>\n    <option value="/contact/phone/extension/work">Work Phone extension</option>\n    <option value="/contact/phone/countrycode/work">Work Phone country code</option>\n  </optgroup>\n  <optgroup class="phone-grp" label="Mobile Phone">\n    <option value="/contact/phone/mobile">Mobile Phone xxx-yyy-zzzz</option>\n    <option value="/contact/phone/areacode/mobile">Mobile Phone areacode (xxx)</option>\n    <option value="/contact/phone/exchange/mobile">Mobile Phone exchange yyy</option>\n    <option value="/contact/phone/local/mobile">Mobile Phone local zzzz</option>\n    <option value="/contact/phone/number/mobile">Mobile Phone last 7 yyy-zzzz</option>\n    <option value="/contact/phone/extension/mobile">Mobile Phone extension</option>\n    <option value="/contact/phone/countrycode/mobile">Mobile Phone country code</option>\n  </optgroup>\n  <optgroup class="phone-grp" label="Fax Phone">\n    <option value="/contact/phone/fax">Fax Phone xxx-yyy-zzzz</option>\n    <option value="/contact/phone/areacode/fax">Fax Phone areacode (xxx)</option>\n    <option value="/contact/phone/exchange/fax">Fax Phone exchange yyy</option>\n    <option value="/contact/phone/local/fax">Fax Phone local zzzz</option>\n    <option value="/contact/phone/number/fax">Fax Phone last 7 yyy-zzzz</option>\n    <option value="/contact/phone/extension/fax">Fax Phone extension</option>\n    <option value="/contact/phone/countrycode/fax">Fax Phone country code</option>\n  </optgroup>\n  <optgroup class="card-grp" label="Credit Card Fields">\n    <option value="/financial/creditcard/number">Full Card Number</option>\n    <option value="/financial/creditcard/type">Card Type</option>\n    <option value="/financial/creditcard/issuedto">Issued To Full</option>\n    <option value="/financial/creditcard/verification">CVV/CVC/CVV2</option>\n    <option value="/financial/creditcard/expiry">Expiration Date (mm/yyyy)</option>\n    <option value="/financial/creditcard/expiry2">Expiration Date (mm/yy)</option>\n    <option value="/financial/creditcard/expirymonth">Expiration Month</option>\n    <option value="/financial/creditcard/expiryyear">Expiration Year (4 digits)</option>\n    <option value="/financial/creditcard/expiryyear2">Expiration Year (2 digits)</option>\n    <option value="/financial/creditcard/number/part1">Card Number First 4</option>\n    <option value="/financial/creditcard/number/part2">Card Number Second 4</option>\n    <option value="/financial/creditcard/number/part3">Card Number Third 4</option>\n    <option value="/financial/creditcard/number/part4">Card Number Last 4</option>\n    <option value="/financial/creditcard/number/amex/part1">AmEx Number First 4</option>\n    <option value="/financial/creditcard/number/amex/part2">AmEx Number Second 6</option>\n    <option value="/financial/creditcard/number/amex/part3">AmEx Number Third 5</option>\n    <option value="/financial/creditcard/issuedto/first">Issued To First</option>\n    <option value="/financial/creditcard/issuedto/last">Issued To Last</option>\n  </optgroup>\n  <optgroup class="address-grp" label="Address">\n    <option value="/contact/postaladdress">Address Line 1</option>\n    <option value="/contact/postaladdressAdditional">Address Line 2</option>\n    <option value="/contact/postaladdress3">Address Line 3</option>\n    <option value="/contact/city">City</option>\n    <option value="/contact/state">State</option>\n    <option value="/contact/state/code">State Code</option>\n    <option value="/contact/postalcode">Zip/Postal Code</option>\n    <option value="/contact/country">Country</option>\n  </optgroup>\n  <optgroup class="address-grp" label="Billing Address">\n    <option value="/contact/postaladdress/billing">Billing Address Line 1</option>\n    <option value="/contact/postaladdressAdditional/billing">Billing Address Line 2</option>\n    <option value="/contact/postaladdress3/billing">Billing Address Line 3</option>\n    <option value="/contact/city/billing">Billing City</option>\n    <option value="/contact/state/billing">Billing State</option>\n    <option value="/contact/state/code/billing">Billing State Code</option>\n    <option value="/contact/postalcode/billing">Billing Zip/Postal Code</option>\n    <option value="/contact/country/billing">Billing Country</option>\n  </optgroup>\n  <optgroup class="address-grp" label="Shipping Address">\n    <option value="/contact/postaladdress/shipping">Shipping Address Line 1</option>\n    <option value="/contact/postaladdressAdditional/shipping">Shipping Address Line 2</option>\n    <option value="/contact/postaladdress3/shipping">Shipping Address Line 3</option>\n    <option value="/contact/city/shipping">Shipping City</option>\n    <option value="/contact/state/shipping">Shipping State</option>\n    <option value="/contact/state/code/shipping">Shipping State Code</option>\n    <option value="/contact/postalcode/shipping">Shipping Zip/Postal Code</option>\n    <option value="/contact/country/shipping">Shipping Country</option>\n  </optgroup>\n  <optgroup class="address-grp" label="Business Address">\n    <option value="/contact/postaladdress/business">Business Address Line 1</option>\n    <option value="/contact/postaladdressAdditional/business">Business Address Line 2</option>\n    <option value="/contact/postaladdress3/business">Business Address Line 3</option>\n    <option value="/contact/city/business">Business City</option>\n    <option value="/contact/state/business">Business State</option>\n    <option value="/contact/state/code/business">Business State Code</option>\n    <option value="/contact/postalcode/business">Business Zip/Postal Code</option>\n    <option value="/contact/country/business">Business Country</option>\n  </optgroup>\n  <optgroup class="address-grp" label="Home Address">\n    <option value="/contact/postaladdress/home">Home Address Line 1</option>\n    <option value="/contact/postaladdressAdditional/home">Home Address Line 2</option>\n    <option value="/contact/postaladdress3/home">Home Address Line 3</option>\n    <option value="/contact/city/home">Home City</option>\n    <option value="/contact/state/home">Home State</option>\n    <option value="/contact/state/code/home">Home State Code</option>\n    <option value="/contact/postalcode/home">Home Zip/Postal Code</option>\n    <option value="/contact/country/home">Home Country</option>\n  </optgroup>\n  <optgroup class="date-grp" label="Birth Date">\n    <option value="/birthdate/age">Age</option>\n    <option value="/birthdate/birthmonth">Birth Date (month)</option>\n    <option value="/birthdate/birthday">Birth Date (day)</option>\n    <option value="/birthdate/birthyear">Birth Date (year)</option>\n    <option value="/birthdate/MM-DD-YYYY">Birth Date (MM-DD-YYYY)</option>\n    <option value="/birthdate/MM/DD/YYYY">Birth Date (MM/DD/YYYY)</option>\n    <option value="/birthdate/DD-MM-YYYY">Birth Date (DD-MM-YYYY)</option>\n    <option value="/birthdate/DD/MM/YYYY">Birth Date (DD/MM/YYYY)</option>\n  </optgroup>\n  <option value="/captcha">Captcha</option>\n  <option value="/auth/otp">One Time Password</option>\n  <option value="/auth/hint">Password Hint</option>\n  <option value="/auth/question">Security Question</option>\n  <option value="/auth/answer">Security Answer</option>\n  <option value="/website">Website Url</option>\n  <option value="/company/name">Company Name</option>\n  <option value="/company/position">Company Position</option>\n  <option value="/socialSecurityNumber">SSN #</option>\n  <option value="/driverLicense">Driver License #</option>\n  <option value="/loyalty/flier">Frequent Flier #</option>\n  <option value="/loyalty/card">Loyalty Card #</option>\n  <option value="/rememberLogin">Remember Me</option>\n  <option value="/agreeTOS">Agree to TOS</option>\n  <option value="/comment">Comment</option>\n  <option value="/message">message</option>\n</select>'}))}),ABINE_DNTME.require(["wycats/handlebars"],function(e){e.registerPartial("common.form_types",e.template(function(e,t,a){a=a||e.helpers;return'<select id="formType">\n  <option value="">-- Please Select --</option>\n  <option value="loginForm">Login Form</option>\n  <option value="registrationForm">Registration Form</option>\n  <option value="checkoutForm">Checkout Form</option>\n  <option value="changePasswordForm">Change Password Form</option>\n  <option value="otherForm">Other Form</option>\n  <option value="ignoreForm">Ignore Form</option>\n</select>'}))}),ABINE_DNTME.require(["wycats/handlebars"],function(e){e.registerPartial("common.header",e.template(function(e,t,a,n,i){function r(e){var t,n="";return n+='data-highlight="',l=a.panelType,t=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"panelType"),typeof t===p?t=t.call(e,{hash:{}}):t===h&&(t=m.call(e,"panelType",{hash:{}})),n+=_(t)+'"'}a=a||e.helpers;var s,o,l,c,d="",u=this,p="function",m=a.helperMissing,h=void 0,_=this.escapeExpression;return d+='<div class="newheader">\n  <div class="newlinks close-link">\n    <img class="" src="',s="/pages/images/2015panels/panel_xclose.png",l=a.assetUrl,o=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),s=typeof o===p?o.call(t,s,{hash:{}}):o===h?m.call(t,"assetUrl",s,{hash:{}}):o,d+=_(s)+'"/>\n  </div>\n  <div class="newlinks b-link" ',l=a.panelType,s=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"panelType"),o=a["if"],c=u.program(1,r,i),c.hash={},c.fn=c,c.inverse=u.noop,s=o.call(t,s,c),(s||0===s)&&(d+=s),d+='>\n    <img class="" src="',l=a.panelLogoSmall,s=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"panelLogoSmall"),typeof s===p?s=s.call(t,{hash:{}}):s===h&&(s=m.call(t,"panelLogoSmall",{hash:{}})),d+=_(s)+'"/>\n  </div>\n</div>'}))}),ABINE_DNTME.define("abine/views/commonhelpers",["wycats/handlebars","abine/config","abine/intl","abine/assets","abine/cobranding"],function(e,t,a,n,i){e.registerHelper("if_all",function(){for(var e=[].slice.apply(arguments),t=e.pop(),a=t.fn,n=0;n<e.length;++n)if(!e[n]){a=t.inverse;break}return a(this)}),e.registerHelper("configVar",function(a){return e.Utils.escapeExpression(t[a])}),e.registerHelper("ifContentUser",function(e,t){return"function"==typeof ABINE_DNTME.contentuser[e]&&ABINE_DNTME.contentuser[e]()?t.fn(this):t.inverse(this)}),e.registerHelper("ifBrowser",function(e,a){return t.browser==e?a.fn(this):a.inverse(this)}),e.registerHelper("unlessBrowser",function(e,a){return t.browser!=e?a.fn(this):a.inverse(this)}),e.registerHelper("intl",function(e,t){return arguments.length>1&&(t=Array.prototype.slice.call(arguments,1)),a.getText(e,t)}),e.registerHelper("nl2br",function(t){return e.Utils.escapeExpression(t).replace(/\n/g,"<br/>")}),e.registerHelper("plural",function(e,t){arguments.length>1&&(t=Array.prototype.slice.call(arguments,1));var n=a.getText(e,t);return 1!=t[t.length-2]?n.length>2&&n.substr(n.length-3).match(/y$/)?n.substr(0,n.length-1)+"ies":n+"s":n}),e.registerHelper("date",function(e){return new Date(e).toLocaleDateString()}),e.registerHelper("panelLogoSmall",function(){return n.assetUrl(i.get("panel.logo.small"))}),e.registerHelper("panelLogoBig",function(){return n.assetUrl(i.get("panel.logo.big"))}),e.registerHelper("settingsIcon",function(e,t){var n='<div class="links '+t+'" data-highlight="'+e+'" data-add-setting="'+e+'-settings-seen">';return n+=a.getText("mm_dntme_settings"),n+="</div>"})}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.loading_display_loading_display=e.template(function(e,t,a){a=a||e.helpers;var n,i,r,s="",o="function",l=a.helperMissing,c=void 0,d=this.escapeExpression;return s+='<div class="loading-display">\n  <div class="progress progress-striped active">\n    <div class="bar bar-info" style="width: 100%;"></div>\n  </div>\n  <div class="loading-message">\n    ',n="mm_loading_display_Loading",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,s+=d(n)+'\n  </div>\n</div>\n<div class="refreshing-display" style="display:none;">\n    <img src="',n="/pages/images/ajax_loader.gif",r=a.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"assetUrl",n,{hash:{}}):i,s+=d(n)+'" />\n</div>'}),ABINE_DNTME.CompiledTemplates.loading_display_loading_display}),ABINE_DNTME.define("abine/views/loading_display",["documentcloud/underscore","jquery","duckbone/core","abine/timer","abine/intl"],function(e,t,a,n,i){var r=a.View.extend({templateName:"loading_display_loading_display",afterInitialize:function(){this.options.customMessages||(this.options.customMessages=["mm_loading_display_LotOfAccounts","mm_loading_display_StillWorking","mm_loading_display_HangOn","mm_loading_display_Sorry"]);var a=0;this.changeMessage=n.setInterval(e.bind(function(){a>=this.options.customMessages.length?n.clearInterval(this.changeMessage):(t(this.el).find(".loading-message").html(i.getText(this.options.customMessages[a],["loading_"+this.options.pageName])),a++)},this),this.options.interval||5e3)},reset:function(){n.clearInterval(this.changeMessage),t(this.el).find(".loading-message").html(""),this.afterInitialize()},hide:function(){n.clearInterval(this.changeMessage),t(this.el).find(".loading-display").hide(),t(this.el).find(".refreshing-display").hide()},startRefreshing:function(){t(this.el).find(".refreshing-display").show()}});return r}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.unlock_panel=e.template(function(e,t,a,n,i){function r(e){var t,n,i="";return i+='\n    <div class="control-group" style="margin-left:50px;">\n      <span class="login-msg">',t="mm_unlock_panel_login_message",l=a.intl,n=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===p?n.call(e,t,{hash:{}}):n===h?m.call(e,"intl",t,{hash:{}}):n,i+=_(t)+'</span><span class="unlock-msg">',t="mm_unlock_panel_unlock_message",l=a.intl,n=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===p?n.call(e,t,{hash:{}}):n===h?m.call(e,"intl",t,{hash:{}}):n,i+=_(t)+'</span><br/>\n      <div id="error" style="display:none;color:black;text-transform:none;"></div>\n      <span class="fields">\n        <div id="login-section">\n          <div style="clear:both;display:block;width:0px;max-width:0px;height:0px;max-height:0px;overflow:hidden;opacity:0;"\n               class="autofill-grabber"><input type="text" autocomplete="off" id="login_email" tabindex="-1"><input type="password" autocomplete="off" id="login_password" tabindex="-1">\n          </div>\n          <input id="email" type="text" value="',l=a.email,t=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"email"),typeof t===p?t=t.call(e,{hash:{}}):t===h&&(t=m.call(e,"email",{hash:{}})),i+=_(t)+'" style="width:140px;height:28px;margin:10px 5px;margin-left:0px;" placeholder="',t="mm_dntme_enter_email_simple",
l=a.intl,n=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===p?n.call(e,t,{hash:{}}):n===h?m.call(e,"intl",t,{hash:{}}):n,i+=_(t)+'"/>\n          <input id="password" type="password" style="width:140px;height:28px;margin:10px 5px;margin-left:0px;" placeholder="',t="mm_dntme_enter_password_simple",l=a.intl,n=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===p?n.call(e,t,{hash:{}}):n===h?m.call(e,"intl",t,{hash:{}}):n,i+=_(t)+'"/>\n        </div>\n        <div id="mfa-section" style="display:none;">\n          <input type="text" id="mfa-code-field" style="width:140px;height:28px;margin:10px 5px" name="mfa_code" placeholder="Authentication Code" />\n        </div>\n         <input type="submit" id="unlockButton" class="btn btn-success login-msg" value=\'',t="mm_dntme_sign_in",l=a.intl,n=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===p?n.call(e,t,{hash:{}}):n===h?m.call(e,"intl",t,{hash:{}}):n,i+=_(t)+'\' style="padding:5px 35px;background:none;background-color:#4c90da;"/>\n         <input type="submit" id="unlockButton" class="btn btn-success unlock-msg" value=\'',t="mm_unlock_panel_unlock",l=a.intl,n=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===p?n.call(e,t,{hash:{}}):n===h?m.call(e,"intl",t,{hash:{}}):n,i+=_(t)+'\' style="padding:5px 35px;background:none;background-color:#4c90da;"/>\n         <a id="login-different-user" class="unlock-msg" style="cursor:pointer;margin-left:20px;">',t="mm_unlock_panel_different_user",l=a.intl,n=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===p?n.call(e,t,{hash:{}}):n===h?m.call(e,"intl",t,{hash:{}}):n,i+=_(t)+'</a>\n        <span class="retry" style="display: none;"><br/><a href="" id="forgotPassword">',t="mm_dntme_forgot_my_password",l=a.intl,n=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===p?n.call(e,t,{hash:{}}):n===h?m.call(e,"intl",t,{hash:{}}):n,i+=_(t)+'</a></span><br/>\n      </span>\n      <div id="progress-section" style="display:none;margin-top:10px;">\n        <div class="progress progress-striped active">\n          <div class="bar bar-info" style="width: 100%;"></div>\n        </div>\n        <div class="loading-message" style="text-transform:none;text-align: center">',t="mm_loading_display_login",l=a.intl,n=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===p?n.call(e,t,{hash:{}}):n===h?m.call(e,"intl",t,{hash:{}}):n,i+=_(t)+'</div>\n      </div>\n    </div>\n    <div style="height:8px;">&nbsp;</div>\n  '}a=a||e.helpers;var s,o,l,c,d="",u=this,p="function",m=a.helperMissing,h=void 0,_=this.escapeExpression,f=a.blockHelperMissing;return d+='<div class="panel">\n   <div style="float:left;">\n    <img style="margin-top:30px;margin-left:6px;" height="40px" width="40px" src="',l=a.panelLogoSmall,s=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"panelLogoSmall"),typeof s===p?s=s.call(t,{hash:{}}):s===h&&(s=m.call(t,"panelLogoSmall",{hash:{}})),d+=_(s)+'"/>\n   </div>\n  ',s="unlock",l=a.form,o=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"form"),c=u.program(1,r,i),c.hash={},c.fn=c,c.inverse=u.noop,s=l&&typeof o===p?o.call(t,s,c):f.call(t,o,s,c),(s||0===s)&&(d+=s),d+='\n\n  <div class="header">\n    <div class="logo-link" style="display:none;">\n      <img class="logo" height="24px" width="24px" src="',s="/pages/images/Icon-48.png",l=a.assetUrl,o=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),s=typeof o===p?o.call(t,s,{hash:{}}):o===h?m.call(t,"assetUrl",s,{hash:{}}):o,d+=_(s)+'"/>\n      <span class="boldFont">Blur</span>\n    </div>\n    <div class="links-wrapper">\n      <div class="links close-link">\n        ',s="mm_dntme_hide_panel",l=a.intl,o=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),s=typeof o===p?o.call(t,s,{hash:{}}):o===h?m.call(t,"intl",s,{hash:{}}):o,d+=_(s)+'\n      </div>\n      <div id="faqLink" class="links help-link">\n        ',s="mm_dntme_help",l=a.intl,o=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),s=typeof o===p?o.call(t,s,{hash:{}}):o===h?m.call(t,"intl",s,{hash:{}}):o,d+=_(s)+"\n      </div>\n    </div>\n  </div>\n\n</div>"}),ABINE_DNTME.CompiledTemplates.unlock_panel}),ABINE_DNTME.define("abine/views/unlockPanel",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/proxies","abine/timer","abine/intl","abine/responseCodes"],function(e,t,a,n,i,r,s,o,l){var c=i.extend({templateName:"unlock_panel",events:{"submit .unlock":"verifyPassword","click .help-link":"openFaq","click .settings-link":"openSettings","click #forgotPassword":"forgotPassword","click #login-different-user":"loginDifferentUser"},afterInitialize:function(){this.contentManager=this.options.contentManager,this.messenger=this.options.contentManager.messenger,this.applyFadingStyle(),this.fadeIn();var e=this.contentManager.preferences.getPref("oldEmail");this.model={panelType:"unlock",email:e||"",password:""},this.panelId=6000011,this.contentManager.messenger.send("update:panelActivity:impression",{panelId:this.panelId}),this.render(),e?(t(".login-msg",this.el).hide(),t(".unlock-msg",this.el).show(),t("#email",this.el).hide()):t(".unlock-msg",this.el).hide(),this.bindBlurClose()},loginDifferentUser:function(e){e.preventDefault(),this.contentManager.preferences.removePref("oldEmail"),this.contentManager.preferences.setPref("loginNotLock","true"),t("#email",this.el).val(""),t(".unlock-msg",this.el).hide(),t("#email",this.el).show(),t(".login-msg",this.el).show()},forgotPassword:function(e){e.preventDefault(),r.webapp.openForgotPassword(),this.trigger("close")},openFaq:function(){r.webapp.openHelp("/faq/faq-loginHelp"),this.closePanel()},openSettings:function(){this.options.contentManager.showToolbarPanel({page:"settings"}),this.closePanel()},bindBlurClose:function(){0==this.model.email.length?this.bindPanelTextInput(t(t("#password",this.el)).add(t("#email",this.el))):this.bindPanelTextInput(t(t("#email",this.el)).add(t("#password",this.el))),t(this.el).bind("mousedown",e.bind(function(t){var a=t.target.className.split(" ");e.contains(a,"close-link")&&(r.memoryStore.set("login-panel-ignored",0),r.memoryStore.set("login-panel-closed",null),this.contentManager.messenger.send("update:panelActivity:closed",{panelId:this.panelId}),this.closeHeader()),this.ignoreBlur(!0)},this))},verifyPassword:function(a){this.ignoreBlur(!0),a.preventDefault(),t(this.el).find(".unlockButton").attr("disabled","disabled");var n=t("#email",this.el).val(),i=t("#password",this.el).val(),s=t("#mfa-code-field",this.el).val();this.$("#progress-section").show(),this.$(".fields").hide(),this.$(".retry").show(),this.autoResize();var o={email:n,password:i,mfa_code:s};r.licenseModule.login(o,e.bind(function(t){this.$("#progress-section").hide(),this.$(".fields").show(),this.processLogin(t,o,e.bind(this.unlocked,this))},this))},processLogin:function(t,a,n){if(t){this.contentManager.messenger.send("update:panelActivity:disclosed",{panelId:this.panelId});var i=o.getText("mm_dntme_register_error"),s=t.responseJSON&&t.responseJSON.data?t.responseJSON.data.errors:null;"invalid email address"==t.responseJSON.error_code?i=o.getText("mm_dntme_invalid_email_server_error"):"wrong password"==t.responseJSON.error_code?i=o.getText("mm_dntme_wrong_password"):"mfa code required"==t.responseJSON.error_code?(i="You have enabled 2-factor authentication.  Please enter authentication code below:",this.$("#login-section").hide(),this.$("#mfa-section").show(),this.$("#error, #progress-section").hide(),this.$("#complete-setup-div, #form-div").show(),this.trigger("render")):"no account found for email"==t.responseJSON.error_code?i=o.getText("mm_dntme_wrong_email"):"version not allowed"==t.responseJSON.error_code?i=o.getText("mm_dntme_version_not_allowed"):"account has been locked"==t.responseJSON.error_code?i=o.getText("mm_dntme_account_locked"):t.responseJSON.error_code==l.SCHEDULED_DOWNTIME?i=o.getText("mm_dntme_server_maintenance"):s&&s.email&&"was used for MaskMe Heavy"==s.email[0]&&(i=o.getText("mm_dntme_version_not_allowed")),this.$("#error").html(i).show(),t.responseJSON&&t.responseJSON.data&&1==t.responseJSON.data.generated_password&&this.$("#error #loginButton").click(e.bind(function(e){return r.webapp.openPasswordSetupPage(a.email),this.closePanel(),e.preventDefault(),!1},this)),this.$("#error #retryEmail, #error #loginButton").click(e.bind(function(e){return this.$(".fields, #error").toggle(),this.autoResize(),e.preventDefault(),!1},this)),this.$("#error #dnt2upgrade").click(e.bind(function(){r.webapp.openDnt2UpgradePage(),this.closePanel()},this)),this.autoResize(),n(i)}else this.contentManager.messenger.send("update:panelActivity:masked",{panelId:this.panelId}),this.contentManager.preferences.fetchAll({success:function(){r.webapp.openDashboard(!0),n()}})},closingOnBlur:function(){r.memoryStore.get("login-panel-ignored",function(e){e?e++:e=1,e>=3?(r.memoryStore.set("login-panel-ignored",0),r.memoryStore.set("login-panel-closed",Date.now())):(r.memoryStore.set("login-panel-ignored",0),r.memoryStore.set("login-panel-closed",null))})},unlocked:function(t){t||(this.closePanel(),s.setTimeout(e.bind(this.focusField,this),100))}});return c}),ABINE_DNTME.require(["wycats/handlebars"],function(e){e.registerPartial("email_helper.accounts",e.template(function(e,t,a,n,i){function r(e,t){var n,i,r="";return r+='\n    <!-- Login Emails -->\n    <a href="#" class="mmKeyOption account" data-account="',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof n===m?n=n.call(e,{hash:{}}):n===_&&(n=h.call(e,"this.id",{hash:{}})),r+=f(n)+'"><div class="element otherblue" >\n        <span class="panelLeft" title="',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getAddress"),typeof n===m?n=n.call(e,{hash:{}}):n===_&&(n=h.call(e,"this.getAddress",{hash:{}})),r+=f(n)+'">\n          ',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"isCompanyAccount"),i=a["if"],u=p.program(2,s,t),u.hash={},u.fn=u,u.inverse=p.program(4,o,t),n=i.call(e,n,u),(n||0===n)&&(r+=n),r+="\n            ",n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getAddress"),typeof n===m?n=n.call(e,{hash:{}}):n===_&&(n=h.call(e,"this.getAddress",{hash:{}})),r+=f(n)+'\n        </span>\n        <span class="panelRight">\n            <span class="overflowText">(',n="createdAt",d=a.live_timestamp,i=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"live_timestamp"),n=typeof i===m?i.call(e,n,{hash:{}}):i===_?h.call(e,"live_timestamp",n,{hash:{}}):i,r+=f(n)+")</span>\n        </span>\n    </div></a>\n"}function s(e){var t,n,i="";return i+='\n              <img class="replace-fav-icon" src="',t="/pages/images/2015panels/login_red.png",d=a.assetUrl,n=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===m?n.call(e,t,{hash:{}}):n===_?h.call(e,"assetUrl",t,{hash:{}}):n,i+=f(t)+'" style="width:40px;height:21px;"/>\n          '}function o(e){var t,n,i="";return i+='\n              <img class="replace-fav-icon" src="',t="/pages/images/2015panels/login_blue.png",d=a.assetUrl,n=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===m?n.call(e,t,{hash:{}}):n===_?h.call(e,"assetUrl",t,{hash:{}}):n,i+=f(t)+'" style="width:40px;height:21px;"/>\n          '}a=a||e.helpers;var l,c,d,u,p=this,m="function",h=a.helperMissing,_=void 0,f=this.escapeExpression;return d=a.accounts,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"accounts"),c=a.each,u=p.program(1,r,i),u.hash={},u.fn=u,u.inverse=p.noop,l=c.call(t,l,u),l||0===l?l:""}))}),ABINE_DNTME.require(["wycats/handlebars"],function(e){e.registerPartial("email_helper.custom",e.template(function(e,t,a,n,i){function r(e,t){var n,i,r="";return r+='\n    <a href="#" class="customEmail"><div class="element" id="mask" style="height:25px;width:370px;">\n            <span class="panelLeft full">\n                <img class="iconPos" src="',n="/pages/images/2015panels/email_green.png",c=a.assetUrl,i=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),n=typeof i===p?i.call(e,n,{hash:{}}):i===h?m.call(e,"assetUrl",n,{hash:{}}):i,r+=_(n)+'" style="width:44px;height:21px;"/>\n                <span class="input"><input type="text" autocomplete="off" placeholder="',n="mm_email_helper_your_custom_email",c=a.intl,i=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===p?i.call(e,n,{hash:{}}):i===h?m.call(e,"intl",n,{hash:{}}):i,r+=_(n)+'"\n                                           data-value="',c=a.primaryEmail,n=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"primaryEmail"),n=null===n||void 0===n||n===!1?n:ABINE_DNTME.Duckbone.Handlebars.getAttr(n,"getCustomName"),typeof n===p?n=n.call(e,{hash:{}}):n===h&&(n=m.call(e,"primaryEmail.getCustomName",{hash:{}})),r+=_(n)+"-",c=a.domain,n=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof n===p?n=n.call(e,{hash:{}}):n===h&&(n=m.call(e,"domain",{hash:{}})),r+=_(n)+'"\n                                           class="customName no-border" id="customName"/>\n                    <select id="domain" class="customDomain no-border">\n                        ',c=a.domains,n=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domains"),i=a.each,d=u.program(2,s,t),d.hash={},d.fn=d,d.inverse=u.noop,n=i.call(e,n,d),(n||0===n)&&(r+=n),r+='\n                    </select>\n                    <button class="customSubmit" style="display: none">',n="mm_email_helper_fill",c=a.intl,i=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===p?i.call(e,n,{hash:{}}):i===h?m.call(e,"intl",n,{hash:{}}):i,r+=_(n)+'</button>\n                    <img class="customLoading" style="display:none;" src="',n="/pages/images/ajax_loader.gif",c=a.assetUrl,i=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),n=typeof i===p?i.call(e,n,{hash:{}}):i===h?m.call(e,"assetUrl",n,{hash:{}}):i,r+=_(n)+'"/>\n                </span>\n            </span>\n    </div></a>\n    <div class="customError" style="display:none"></div>\n'}function s(e){var t,a="";return a+='\n                            <option value="',t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof t===p?t=t.call(e,{hash:{}}):t===h&&(t=m.call(e,"this.domain",{hash:{}})),a+=_(t)+'">@ ',t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof t===p?t=t.call(e,{hash:{}}):t===h&&(t=m.call(e,"this.domain",{hash:{}})),a+=_(t)+"</option>\n                        "}a=a||e.helpers;var o,l,c,d,u=this,p="function",m=a.helperMissing,h=void 0,_=this.escapeExpression;return c=a.domains,o=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"domains"),l=a["if"],d=u.program(1,r,i),d.hash={},d.fn=d,d.inverse=u.noop,o=l.call(t,o,d),o||0===o?o:""}))}),ABINE_DNTME.require(["wycats/handlebars"],function(e){e.registerPartial("email_helper.disclose",e.template(function(e,t,a,n,i){function r(e){var t,n,i="";return i+='\n    <a href="#" class="mmKeyOption primaryEmail"><div class="element" id="disclose">\n                <span class="panelLeft">\n                    <img class="iconPos" src="',t="/pages/images/2015panels/email_red.png",d=a.assetUrl,n=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===h?n.call(e,t,{hash:{}}):n===f?_.call(e,"assetUrl",t,{hash:{}}):n,i+=g(t)+'" style="width:44px;height:21px;"/>\n                    ',t="mm_email_helper_discloseEmail",d=a.intl,n=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===h?n.call(e,t,{hash:{}}):n===f?_.call(e,"intl",t,{hash:{}}):n,i+=g(t)+"\n                </span>\n    </div></a>\n"}function s(e,t){var n,i,r="";return r+='\n    <a href="#" class="mmKeyOption primaryEmail"><div class="element" id="disclose">\n                <span class="panelLeft">\n                    <img class="iconPos" src="',n="/pages/images/2015panels/email_red.png",d=a.assetUrl,i=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),n=typeof i===h?i.call(e,n,{hash:{}}):i===f?_.call(e,"assetUrl",n,{hash:{}}):i,r+=g(n)+'" style="width:44px;height:21px;"/>\n                    ',d=a.primaryEmail,n=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"primaryEmail"),n=null===n||void 0===n||n===!1?n:ABINE_DNTME.Duckbone.Handlebars.getAttr(n,"email"),typeof n===h?n=n.call(e,{hash:{}}):n===f&&(n=_.call(e,"primaryEmail.email",{hash:{}})),r+=g(n)+"\n                </span>\n    </div></a>\n    ",d=a.primaryEmail,n=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"primaryEmail"),n=null===n||void 0===n||n===!1?n:ABINE_DNTME.Duckbone.Handlebars.getAttr(n,"altEmails"),i=a.each,u=m.program(4,o,t),u.hash={},u.fn=u,u.inverse=m.noop,n=i.call(e,n,u),(n||0===n)&&(r+=n),r+="\n"}function o(e){var t,n,i="";return i+='\n        <a href="#" class="mmKeyOption altEmail" data-value="',t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"email"),typeof t===h?t=t.call(e,{hash:{}}):t===f&&(t=_.call(e,"this.email",{hash:{}})),i+=g(t)+'"><div class="element" id="disclose">\n                <span class="panelLeft">\n                    <img class="iconPos" src="',t="/pages/images/2015panels/email_red.png",d=a.assetUrl,n=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===h?n.call(e,t,{hash:{}}):n===f?_.call(e,"assetUrl",t,{hash:{}}):n,i+=g(t)+'" style="width:44px;height:21px;"/>\n                    ',t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"email"),typeof t===h?t=t.call(e,{hash:{}}):t===f&&(t=_.call(e,"this.email",{hash:{}})),i+=g(t)+"\n                </span>\n        </div></a>\n    "}a=a||e.helpers;var l,c,d,u,p="",m=this,h="function",_=a.helperMissing,f=void 0,g=this.escapeExpression,y=a.blockHelperMissing;return p+="<!--Disclose My Email-->\n",l="hasRegEmail",d=a.ifContentUser,c=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"ifContentUser"),u=m.program(1,r,i),u.hash={},u.fn=u,u.inverse=m.program(3,s,i),l=d&&typeof c===h?c.call(t,l,u):y.call(t,c,l,u),(l||0===l)&&(p+=l),p}))}),ABINE_DNTME.require(["wycats/handlebars"],function(e){e.registerPartial("email_helper.disposables",e.template(function(e,t,a,n,i){function r(e){var t,n,i="";return i+='\n    <a href="#" data-aliasaddress="',t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getAddress"),typeof t===p?t=t.call(e,{hash:{}}):t===h&&(t=m.call(e,"this.getAddress",{hash:{}})),i+=_(t)+'" class="mmKeyOption usedEmail"><div class="element otherblue">\n                <span class="panelLeft disposable">\n                    <img class="iconPos" src="',t="/pages/images/2015panels/email_blue.png",l=a.assetUrl,n=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===p?n.call(e,t,{hash:{}}):n===h?m.call(e,"assetUrl",t,{hash:{}}):n,i+=_(t)+'" style="width:44px;height:21px;"/>\n                    ',t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getAddress"),typeof t===p?t=t.call(e,{hash:{}}):t===h&&(t=m.call(e,"this.getAddress",{hash:{}})),i+=_(t)+'\n                </span>\n        <span class="panelRight disposable">\n                    <span class="overflowText">(',t="createdAt",l=a.live_timestamp,n=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"live_timestamp"),t=typeof n===p?n.call(e,t,{hash:{}}):n===h?m.call(e,"live_timestamp",t,{hash:{}}):n,i+=_(t)+")</span>\n                </span>\n    </div></a>\n"}a=a||e.helpers;var s,o,l,c,d="",u=this,p="function",m=a.helperMissing,h=void 0,_=this.escapeExpression;return d+="<!-- If Masked Emails already exist for this domain -->\n",l=a.disposableEmails,s=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"disposableEmails"),o=a.each,c=u.program(1,r,i),c.hash={},c.fn=c,c.inverse=u.noop,s=o.call(t,s,c),(s||0===s)&&(d+=s),d}))}),ABINE_DNTME.require(["wycats/handlebars"],function(e){e.registerPartial("email_helper.feedback",e.template(function(e,t,a){a=a||e.helpers;var n,i,r,s,o="",l="function",c=a.helperMissing,d=void 0,u=this.escapeExpression;return o+='<a href="#" class="feedback"><div class="element" style="height:60px;width:350px;text-align: center">\n        <div class="panelLeft full feedback-input">\n            ',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"domain"),i="mm_email_helper_feedback",s=a.intl,r=s||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof r===l?r.call(t,i,n,{hash:{}}):r===d?c.call(t,"intl",i,n,{hash:{}}):r,(n||0===n)&&(o+=n),o+='\n            <div style="margin-top: 10px;">\n                <button class="btn btn-danger failed">',n="mm_email_helper_feedback_yes",s=a.intl,i=s||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===l?i.call(t,n,{hash:{}}):i===d?c.call(t,"intl",n,{hash:{}}):i,o+=u(n)+'</button>\n                <button class="btn btn-success success">',n="mm_email_helper_feedback_no",s=a.intl,i=s||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===l?i.call(t,n,{hash:{}}):i===d?c.call(t,"intl",n,{hash:{}}):i,o+=u(n)+'</button>\n            </div>\n        </div>\n        <div class="panelLeft full feedback-thanks-failed" style="display: none">\n            ',n="mm_email_helper_feedback_thanks_failed",s=a.intl,i=s||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===l?i.call(t,n,{hash:{}}):i===d?c.call(t,"intl",n,{hash:{}}):i,o+=u(n)+'\n        </div>\n        <div class="panelLeft full feedback-thanks-ok" style="display: none">\n            ',n="mm_email_helper_feedback_thanks_ok",s=a.intl,i=s||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===l?i.call(t,n,{hash:{}}):i===d?c.call(t,"intl",n,{hash:{}}):i,o+=u(n)+"\n        </div>\n</div></a>"}))}),ABINE_DNTME.require(["wycats/handlebars"],function(e){e.registerPartial("email_helper.mask",e.template(function(e,t,a,n,i){function r(e){var t,n,i,r="";return r+="\n                  <span class=\"whatIsThisLink recommended largeOverflowText\"><span class='num-trackers'>",l=a.tabData,t=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"tabData"),t=null===t||void 0===t||t===!1?t:ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"trackers"),t=null===t||void 0===t||t===!1?t:ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"length"),n="mm_email_helper_recommended",l=a.intl,i=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===p?i.call(e,n,t,{hash:{}}):i===h?m.call(e,"intl",n,t,{hash:{}}):i,r+=_(t)+"</span>.</span>\n              "}a=a||e.helpers;var s,o,l,c,d="",u=this,p="function",m=a.helperMissing,h=void 0,_=this.escapeExpression;return d+='<!--Mask My Email-->\n<a href="#" class="mmKeyOption disposableEmail"><div class="element" id="mask">\n            <span class="panelLeft">\n                <img class="iconPos" src="',s="/pages/images/2015panels/email_green.png",l=a.assetUrl,o=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),s=typeof o===p?o.call(t,s,{hash:{}}):o===h?m.call(t,"assetUrl",s,{hash:{}}):o,d+=_(s)+'" style="width:44px;height:21px;"/>\n                ',s="mm_email_helper_maskMyEmail",l=a.intl,o=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),s=typeof o===p?o.call(t,s,{hash:{}}):o===h?m.call(t,"intl",s,{hash:{}}):o,d+=_(s)+'\n            </span>\n    <span class="panelRight">\n              ',l=a.tabData,s=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"tabData"),s=null===s||void 0===s||s===!1?s:ABINE_DNTME.Duckbone.Handlebars.getAttr(s,"hasFiveOrMoreTrackers"),o=a["if"],c=u.program(1,r,i),c.hash={},c.fn=c,c.inverse=u.noop,s=o.call(t,s,c),(s||0===s)&&(d+=s),d+='\n        <img class="loading" style="display:none;" src="',s="/pages/images/ajax_loader.gif",l=a.assetUrl,o=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),s=typeof o===p?o.call(t,s,{hash:{}}):o===h?m.call(t,"assetUrl",s,{hash:{}}):o,d+=_(s)+'"/>\n            </span>\n</div></a>'}))}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.email_helper_panel=e.template(function(e,t,a,n,i){function r(e,t){var n,i,r="";return r+='\n        <!--Server Down Error Handling-->\n        <span class="errorBtn disabled errorReportLink" style="display:none;cursor:pointer;"><div class="element">\n            <span class="panelLeft">\n                <a>',n="mm_email_helper_serverIsDown",u=a.intl,i=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===_?i.call(e,n,{hash:{}}):i===g?f.call(e,"intl",n,{hash:{}}):i,r+=y(n)+'</a>\n            </span>\n            <span class="panelRight">\n                <a>',n="mm_email_helper_tryAgainLater",u=a.intl,i=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===_?i.call(e,n,{hash:{}}):i===g?f.call(e,"intl",n,{hash:{}}):i,r+=y(n)+'</a>\n            </span>\n        </div></span>\n\n        <!--Account disabled Error Handling-->\n        <div class="accountDisabledBtn element" style="display:none">\n            <span class="message">',n="mm_email_helper_accountDisabled",u=a.intl,i=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===_?i.call(e,n,{hash:{}}):i===g?f.call(e,"intl",n,{hash:{}}):i,r+=y(n)+'</span>\n            <a href=# class="enableAccount">',n="mm_email_helper_accountEnableLink",u=a.intl,i=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===_?i.call(e,n,{hash:{}}):i===g?f.call(e,"intl",n,{hash:{}}):i,r+=y(n)+"</a>\n        </div>\n\n        ",u=a.showFeedback,n=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"showFeedback"),i=a["if"],p=h.program(2,s,t),p.hash={},p.fn=p,p.inverse=h.program(4,o,t),n=i.call(e,n,p),(n||0===n)&&(r+=n),r+="\n\n    "}function s(e){var t,i="";return i+="\n            ",t=e,t=h.invokePartial(n["email_helper.feedback"],"email_helper.feedback",t,a,n),(t||0===t)&&(i+=t),i+="\n            ",t=e,t=h.invokePartial(n["email_helper.custom"],"email_helper.custom",t,a,n),(t||0===t)&&(i+=t),i+="\n            ",t=e,t=h.invokePartial(n["email_helper.accounts"],"email_helper.accounts",t,a,n),(t||0===t)&&(i+=t),i+="\n            ",t=e,t=h.invokePartial(n["email_helper.disposables"],"email_helper.disposables",t,a,n),(t||0===t)&&(i+=t),i+="\n            ",t=e,t=h.invokePartial(n["email_helper.mask"],"email_helper.mask",t,a,n),(t||0===t)&&(i+=t),i+="\n            ",t=e,t=h.invokePartial(n["email_helper.disclose"],"email_helper.disclose",t,a,n),(t||0===t)&&(i+=t),i+="\n        "}function o(e){var t,i="";return i+="\n            ",t=e,t=h.invokePartial(n["email_helper.accounts"],"email_helper.accounts",t,a,n),(t||0===t)&&(i+=t),i+="\n            ",t=e,t=h.invokePartial(n["email_helper.disposables"],"email_helper.disposables",t,a,n),(t||0===t)&&(i+=t),i+="\n            ",t=e,t=h.invokePartial(n["email_helper.mask"],"email_helper.mask",t,a,n),(t||0===t)&&(i+=t),i+="\n            ",t=e,t=h.invokePartial(n["email_helper.disclose"],"email_helper.disclose",t,a,n),(t||0===t)&&(i+=t),i+="\n            ",t=e,t=h.invokePartial(n["email_helper.custom"],"email_helper.custom",t,a,n),(t||0===t)&&(i+=t),i+="\n        "}function l(e){var t,n,i="";return i+='\n        <!-- new email register flow -->\n        <div class="progress-section" style="display:none">\n            <div class="progress progress-striped active">\n                <div class="bar bar-info" style="width: 100%;"></div>\n            </div>\n            <div class="loading-message"></div>\n        </div>\n\n        <div class="info" style="font-weight: bold;">',t="mm_dntme_enter_email",u=a.intl,n=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===_?n.call(e,t,{hash:{}}):n===g?f.call(e,"intl",t,{hash:{}}):n,i+=y(t)+'</div>\n        <a href="#" class="mmKeyOption registerEmail"><div class="element" id="mask">\n          <span class="panelLeft">\n              <img class="iconPos" src="',t="/pages/images/2015panels/email_green.png",u=a.assetUrl,n=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===_?n.call(e,t,{hash:{}}):n===g?f.call(e,"assetUrl",t,{hash:{}}):n,i+=y(t)+'" style="width:44px;height:21px;"/>\n            ',t="mm_email_helper_maskMyEmail",u=a.intl,n=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===_?n.call(e,t,{hash:{}}):n===g?f.call(e,"intl",t,{hash:{}}):n,i+=y(t)+'\n          </span>\n          <span class="panelRight whatIsThisLink">\n            ',t="mm_email_helper_whatIsThis",u=a.intl,n=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===_?n.call(e,t,{hash:{}}):n===g?f.call(e,"intl",t,{hash:{}}):n,i+=y(t)+'\n          </span>\n        </div></a>\n        <a href="#" class="mmKeyOption noPrimaryEmail"><div class="element" id="disclose">\n            <span class="panelLeft">\n                <img class="iconPos" src="',t="/pages/images/2015panels/email_red.png",u=a.assetUrl,n=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===_?n.call(e,t,{hash:{}}):n===g?f.call(e,"assetUrl",t,{hash:{}}):n,i+=y(t)+'" style="width:44px;height:21px;"/>\n              ',t="mm_email_helper_discloseEmail",u=a.intl,n=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===_?n.call(e,t,{hash:{}}):n===g?f.call(e,"intl",t,{hash:{}}):n,i+=y(t)+"\n            </span>\n        </div></a>\n    "}a=a||e.helpers,n=n||e.partials;var c,d,u,p,m="",h=this,_="function",f=a.helperMissing,g=void 0,y=this.escapeExpression;return m+='<div class="newpanel">\n    <div class="left-panel">\n    <div id="error" style="display:none;"></div>\n    ',u=a.hasRegistered,c=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"hasRegistered"),d=a["if"],p=h.program(1,r,i),p.hash={},p.fn=p,p.inverse=h.program(6,l,i),c=d.call(t,c,p),(c||0===c)&&(m+=c),m+="\n    ",c=t,c=h.invokePartial(n["common.auto_fill_with"],"common.auto_fill_with",c,a,n),(c||0===c)&&(m+=c),m+="\n    </div>\n    ",c=t,c=h.invokePartial(n["common.header"],"common.header",c,a,n),(c||0===c)&&(m+=c),m+="\n\n</div>"}),ABINE_DNTME.CompiledTemplates.email_helper_panel}),ABINE_DNTME.define("abine/views/emailHelperPanel",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/contentMessenger","abine/proxies","abine/intl","abine/responseCodes","abine/url"],function(e,t,a,n,i,r,s,o,l,c,d){function u(e,t){t=t||"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ!-$#%^@";for(var a="",n=0;n<e;n++)a+=t.charAt(Math.floor(Math.random()*t.length));return a}var p=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/i,m=18e5,h=i.extend({templateName:"email_helper_panel",events:{"click .recommended span":"showDNTMe","click a.registerEmail":"setupUser","click a.noPrimaryEmail":"noPrimaryEmail","click a.primaryEmail":"fillWithPrimaryEmail","click a.altEmail":"fillWithAlternateEmail","click a.disposableEmail":"fillWithDisposableEmail","click a.usedEmail":"fillWithUsedEmail","click a.account":"fillWithAccount","click a.disabled":"closePanel","click .customSubmit":"fillWithCustomEmail","click .customName":"removePlaceholder","focus .customName":"removePlaceholder","focus .customDomain":"removePlaceholder","click a.enableAccount":"enableAccount","click .errorReportLink":"makeErrorReport","click .help-link":"openHelp","click .logo-link":"openHelp","click .turn-off":"turnOffEmailPanels","click .turn-on":"turnOnEmailPanels","click .close-link":"logClose","click .success":"logSuccess","click .failed":"logFailure"},removePlaceholder:function(){var e=this.$(".customName"),t=e.attr("data-value");t&&(e.val(t),e.removeAttr("data-value"),this.$(".customSubmit").show()),this.$(".no-border").removeClass("no-border")},logClose:function(){this.updatePanelActivity("closed",this.panelId,this.fieldId,!0)},logSuccess:function(){this.logDomainFeedback("ok")},logFailure:function(){this.logDomainFeedback("failed")},logDomainFeedback:function(t){o.memoryStore.set(this.contentManager.domain+":feedback",this.model.feedbackDoneDomains+":"+this.model.recentEmailDomain),o.emailsModule.sendDomainFeedback({site_domain:this.contentManager.domain,email_domain:this.model.recentEmailDomain,status:t}),this.$(".feedback-input").hide(),this.$(".feedback-thanks-"+t).show(),this.$(".feedback .element").height("ok"==t?30:45),this.autoResize(),this.ignoreBlur(!0),r.setTimeout(e.bind(function(){this.plainFocusField(),this.ignoreBlur(!1)},this),100)},turnOffEmailPanels:function(e){e.preventDefault(),this.contentManager.preferences.setPref("suggestProtectedEmail","false"),this.closeHeader()},turnOnEmailPanels:function(e){e.preventDefault(),this.contentManager.preferences.setPref("suggestProtectedEmail","true"),this.closePanel()},openMaskedEmailsIn30:function(e){return e.preventDefault(),!t(e.target).hasClass("num-trackers")&&(o.webapp.openMaskedEmailsIn30(),this.closePanel(),!1)},openPremium:function(e){return e.preventDefault(),o.webapp.openPremium(null,"custom_email"),this.closePanel(),!1},openHelp:function(e){return!t(e.target).hasClass("num-trackers")&&"disableLink"!=e.target.id&&(o.webapp.openHelp("/email"),void this.closePanel())},showDNTMe:function(e){e.preventDefault(),this.contentManager.showToolbarPanel({page:"trackers"}),this.closePanel()},makeErrorReport:function(){o.webapp.openHelp(""),this.closePanel()},afterInitialize:function(){this.fieldId=this.options.fieldId,this.strategyId=this.options.strategyId,this.numMenuOptions=3,this.applyFadingStyle(),this.fadeIn(),
this.contentManager=this.options.contentManager,this.messenger=this.options.contentManager.messenger,this.model={panelType:"email",domain:d.getSiteName(this.options.domain).toLowerCase(),primaryEmail:!1,panelsDisabled:!this.contentManager.preferences.getPref("suggestProtectedEmail"),iconClick:!!this.options.iconClick,hasRegistered:this.options.hasRegistered,disposableEmails:new n.DisposableEmailCollection,domains:new n.EmailDomainCollection,showFeedback:!1,mapper:!!this.contentManager.preferences.getPref("mapping:mapper"),showMapper:this.contentManager.preferences.isMapper(),show_settings:!this.contentManager.preferences.getPref("email-settings-seen")},this.model.tabData=new n.TabData({messenger:this.options.messenger}),this.model.tabData.fetchTrackers({success:e.bind(function(){this.model.tabData.hasFiveOrMoreTrackers()&&(this.model.show_settings=!1),this.model.shieldedEmails=new n.ShieldedEmailCollection,o.memoryStore.get(this.contentManager.domain+":feedback",e.bind(function(t){this.model.feedbackDoneDomains=t||"",this.model.domains.fetchAll({success:e.bind(function(){this.model.shieldedEmails.fetchAll({success:e.bind(function(){this.model.shieldedEmails.length>0&&(this.model.primaryEmail=this.model.shieldedEmails.at(0)),this.model.primaryEmail?(this.panelId=1000001,this.updatePanelActivity("impression",this.panelId,this.fieldId,!0),this.loadAccounts(this.options.hasPassword,e.bind(function(){this.model.disposableEmails=new n.DisposableEmailCollection,this.model.disposableEmails.fetchAllByDomain(this.options.domain,e.bind(function(){for(this.numMenuOptions=0;this.numMenuOptions<this.model.accounts.length;)this.bind("enter"+this.numMenuOptions++,function(e,t){this.fillWithAccount(e,t)});for(var t=this.model.disposableEmails.length,a=0;a<t;a++)this.bind("enter"+this.numMenuOptions++,function(e,t){this.fillWithUsedEmail(e,t)});this.bind("enter"+this.numMenuOptions++,function(e){this.fillWithDisposableEmail(e)}),this.bind("enter"+this.numMenuOptions++,function(e){this.fillWithPrimaryEmail(e)}),this.bind("enter"+this.numMenuOptions++,function(e){this.fillWithCustomEmail(e)});for(var n=Date.now(),i=0;!this.model.showFeedback&&i<t;i++){var s=this.model.disposableEmails.models[i],o=s.get("createdAt");o&&s.get("mails")<=0&&(o=new Date(o),n-o.getTime()<m&&(this.model.recentEmailDomain=s.get("domain"),this.model.showFeedback=this.model.feedbackDoneDomains.indexOf(this.model.recentEmailDomain)==-1))}this.render(),r.setTimeout(e.bind(function(){this.replaceWithFavicons(this.contentManager.domain)},this),100)},this))},this))):(this.model.hasRegistered=!1,this.model.dynamicPanel?(this.panelId=this.model.dynamicPanel.id,this.updatePanelActivity("impression",this.panelId,this.fieldId,!0)):(this.doNotCloseOnTyping=!0,this.panelId=5000001,this.updatePanelActivity("impression",this.panelId,this.fieldId,!0),this.bind("enter0",this.setupUser,this),this.bind("enter1",this.noPrimaryEmail,this)),this.render()),this.bindBaseEvents()},this)})},this)})},this))},this)})},loadAccounts:function(t,a){this.model.accounts=new n.AccountCollection,t||a(),this.model.accounts.fetchLoginsByDomain(this.options.domain,e.bind(function(){a()},this))},noPrimaryEmail:function(e){e&&e.preventDefault(),this.setupUser(e,!0)},retryEmail:function(e){e&&e.preventDefault(),this.$("#error, .progress-section").hide(),this.$(".info, .registerEmail, .noPrimaryEmail").show(),this.$(".mmKeyOption .hover").removeClass("hover"),this.triggerRender(),delete this.selectedField},setupUser:function(a,n){return a&&(a.preventDefault(),this.$(a.target).hasClass("whatIsThisLink"))?void window.open("https://dnt.abine.com/#help/faq/masking-whataremaskedemails2","_blank"):(n=n||!1,void this.contentManager.getValue("current.field.value",this.strategyId,this.fieldId,e.bind(function(i){function s(e,a){try{h.get(0).ownerDocument&&(n?t(".loading-message",h).text(l.getText("mm_loading_display_register_use"+Math.floor(e/5))):t(".loading-message",h).text(l.getText("mm_loading_display_register"+Math.floor(e/5))),e<a&&(_=r.setTimeout(function(){s(e+1,a)},500)))}catch(e){}}this.$(".info").hide();var c=this.$("#error");if(c.hide(),!i.match(p))return c.text(l.getText("mm_dntme_invalid_email")).show(),void this.autoResize();var d=u(6),m={email:i,password:d,password_hint:l.getText("mm_pwhint_default"),generated_password:!0,register_type:"dnt_email_panel"},h=this.$(".progress-section"),_=null;s(0,20),h.show(),this.$(".registerEmail, .noPrimaryEmail").hide(),o.licenseModule.register(m,e.bind(function(t,i){this.processRegistration(t,i,m,e.bind(function(e){e?(r.clearTimeout(_),h.hide()):n?this.fillWithPrimaryEmail(a,!0):this.fillWithDisposableEmail(a,!0)},this))},this)),this.autoResize()},this)))},processRegistration:function(t,a,n,i){if(t){var r=l.getText("mm_dntme_register_error"),s=t.responseJSON&&t.responseJSON.data?t.responseJSON.data.errors:null;"invalid email address"==t.responseJSON.error_code?r=l.getText("mm_dntme_invalid_email_server_error"):t.responseJSON.error_code==c.SCHEDULED_DOWNTIME?r=l.getText("mm_dntme_server_maintenance"):s&&s.email&&("has already been taken"==s.email[0]?r=l.getText("mm_dntme_duplicate_email",[n.email]):"was used for MaskMe Heavy"==s.email[0]&&(r=l.getText("mm_dntme_version_not_allowed"))),this.$("#error").html(r).show(),t.responseJSON&&t.responseJSON.data&&1==t.responseJSON.data.generated_password?this.$("#error #loginButton").click(e.bind(function(e){return this.openPasswordSetupPage(n.email),e.preventDefault(),!1},this)):this.$("#error #loginButton").click(e.bind(this.openLoginPage,this)),this.$("#error #retryEmail").click(e.bind(this.retryEmail,this)),this.$("#error #dnt2upgrade").click(e.bind(this.openDnt2UpgradePage,this)),this.autoResize(),i(r)}else this.contentManager.preferences.fetchAll(),this.model.shieldedEmails.fetchAll({success:e.bind(function(){this.model.shieldedEmails.length>0&&(this.model.primaryEmail=this.model.shieldedEmails.at(0)),i()},this)})},fillWithPrimaryEmail:function(e,t){if(e&&e.preventDefault(),t=t||!1,this.updatePanelActivity("disclosed",this.panelId,this.fieldId,!0),t){this.fieldId&&this.fillFields("email",this.model.primaryEmail.getAddress(),"primary");var a={msg:l.getText("mm_email_helper_nextDisclose"),targetUrl:ABINE_DNTME.config.protocol+ABINE_DNTME.config.webAppHost+"/#/emailsin30"};a.neverFade=!0,this.options.contentManager.showNotification(a)}else if(this.fieldId&&this.model.primaryEmail&&!ABINE_DNTME.contentuser.hasRegEmail())""==this.model.primaryEmail.get("email")?this.openLoginPage("primaryemail"):this.fillFields("email",this.model.primaryEmail.getAddress(),"primary");else if(ABINE_DNTME.contentuser.hasRegEmail())return void this.openSetupEmailPage();this.closePanel()},fillWithDisposableEmail:function(t,a){if(t&&t.preventDefault(),this.updatePanelActivity("masked",this.panelId,this.fieldId,!0),this.field&&this.model.primaryEmail&&""==this.model.primaryEmail.get("email"))return void this.openLoginPage("maskedemail");if(!this.generatingDisposable){var n=this.options.oldValue;n.match(p)&&this.model.primaryEmail.get("email")!=n?n.indexOf("@"+ABINE_DNTME.config.disposableDomain)!=-1&&(n=null):n=null,n&&(this.ignoreBlur(!0),this.doNotCloseOnTyping=!0),this.generatingDisposable=!0,this.$(".loading").show(),this.$(".recommended").hide();var i=this.model.primaryEmail.generateDisposable(this.options.domain,a?"dnt-autoreg-panel":"dnt-panel");i.save({},{success:e.bind(function(){this.fillFields("email",i.getAddress(),{origin:"disposable",disposableGUID:i.get("guid")}),n?(this.$("#error").html(l.getText("mm_dntme_change_email_message",[this.model.primaryEmail.get("email"),n])).show(),this.$("#error #changeSetting").click(e.bind(this.openSettings,this)),this.$(".mmKeyOption, .sep, .errorBtn").hide(),this.focusField(),delete this.doNotCloseOnTyping,this.autoResize()):this.closePanel(),this.generatingDisposable=!1},this),error:e.bind(function(){this.$(".disposableEmail").hide(),this.$(".errorBtn").show()},this)})}},fillWithAccount:function(a,n){a&&a.preventDefault();var i;if(n||0==n){var r=this.getKeyOptions();i=t(r[n]).data("account")}else i=t(a.target).closest("a").data("account");var s=e.find(this.model.accounts.models,function(e){return e.get("id")==i}),o=s.get("login_url");(!o||0==o.length||o!=this.contentManager.href&&this.contentManager.href.indexOf(o)==-1)&&s.set("login_url",this.contentManager.href);var l=s.get("times_used")||0;if(s.set("times_used",l+1),s.set("pushed",0),s.save(),this.contentManager.messenger.send("update:panelActivity:masked",{panelId:7000004}),s.get("mfa"))return this.contentManager.closeCurrentPanel(),this.options.fillAccount=s,this.ignoreBlur(!0),void this.contentManager.showLoginPanel(this.options);var c=s.get("email"),d=s.get("username"),u=s.get("password");d&&0!=d.length||(d=c),c&&0!=c.length||(c=d),this.fillFields("login-no-submit",{email:c,username:d,password:u},"login"),this.closePanel()},enableAccount:function(e){this.getContentMessenger(),this.messenger.send("window:createTab",{localUrl:"pages/index.html#emailDisabled"}),this.closePanel(e)},fillWithUsedEmail:function(e,a){e&&e.preventDefault(),this.updatePanelActivity("masked",this.panelId,this.fieldId,!0);var n;if(a||0==a){var i=this.getKeyOptions();n=t(i[a]).data("aliasaddress")}else n=t(e.target).closest("a").data("aliasaddress");this.fillFields("email",n,"disposable"),this.closePanel()},fillWithCustomEmail:function(t){if(t&&t.preventDefault(),this.updatePanelActivity("masked",this.panelId,this.fieldId,!0),this.field&&this.model.primaryEmail&&""==this.model.primaryEmail.get("email"))return void this.openLoginPage("maskedemail");if(!this.generatingDisposable){this.generatingDisposable=!0,this.$(".customLoading").show(),this.$(".customSubmit").hide();var a=this.model.primaryEmail.generateDisposable(this.options.domain,"dnt-custom-panel",this.$(".customName").val(),this.$(".customDomain").val());a.save({},{success:e.bind(function(){this.fillFields("email",a.getAddress(),{origin:"disposable",disposableGUID:a.get("guid")}),this.closePanel(),this.generatingDisposable=!1},this),error:e.bind(function(t,a){this.$(".customLoading").hide(),this.$(".customSubmit, .customError").show(),this.$(".customError").unbind("click").css("cursor","default");var n=a.message.errorCode;"custom name already taken"==n?n=l.getText("mm_email_error_already_taken"):"invalid custom name"==n?n=l.getText("mm_email_error_invalid_custom_name"):"too many custom emails created"==n?(n=l.getText("mm_email_error_too_many_custom_emails"),this.$(".customError").click(e.bind(this.openPremium,this)).css("cursor","pointer"),this.$(".disposableEmail").addClass("bold")):n=l.getText("mm_email_helper_serverIsDown"),this.$(".customError").html(n),this.generatingDisposable=!1,this.autoResize()},this)})}},fillWithAlternateEmail:function(e,a){e&&e.preventDefault(),this.updatePanelActivity("disclosed",this.panelId,this.fieldId,!0);var n;if(a||0==a){var i=this.getKeyOptions();n=t(i[a]).data("value")}else n=t(e.target).closest("a").data("value");this.fillFields("email",n,"primary"),this.closePanel()}});return h}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.login_helper_panel=e.template(function(e,t,a,n,i){function r(e){var t,n,i="";return i+='\n                <div class="element otherblue noAccounts" style="cursor: pointer">\n                <span class="panelLeft full" >\n                    <img class="replace-fav-icon" src="',t="/pages/images/2015panels/login_blue.png",T=a.assetUrl,n=T||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===x?n.call(e,t,{hash:{}}):n===S?C.call(e,"assetUrl",t,{hash:{}}):n,i+=B(t)+'"\n                         style="width:40px;height:21px;"/>\n                No accounts saved here.  Click to Add.\n                </span>\n                </div>\n            '}function s(e,t){var n,i,r="";return r+="\n            ",T=a.loggingAccount,n=T||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"loggingAccount"),i=a["if"],D=I.program(4,o,t),D.hash={},D.fn=D,D.inverse=I.program(9,d,t),n=i.call(e,n,D),(n||0===n)&&(r+=n),r+="\n            ",T=a.hasBiometricAuth,n=T||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"hasBiometricAuth"),i=a["if"],D=I.program(15,h,t),D.hash={},D.fn=D,D.inverse=I.noop,n=i.call(e,n,D),(n||0===n)&&(r+=n),r+="\n            "}function o(e,t){var n,i,r="";return r+='\n                <div class="element otherblue">\n            <span class="panelLeft" title="',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getAddress"),typeof n===x?n=n.call(e,{hash:{}}):n===S&&(n=C.call(e,"this.getAddress",{hash:{}})),r+=B(n)+'">\n                ',T=a.loggingAccount,n=T||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"loggingAccount"),n=null===n||void 0===n||n===!1?n:ABINE_DNTME.Duckbone.Handlebars.getAttr(n,"isCompanyAccount"),i=a["if"],D=I.program(5,l,t),D.hash={},D.fn=D,D.inverse=I.program(7,c,t),n=i.call(e,n,D),(n||0===n)&&(r+=n),r+="\n                Logging in as ",T=a.loggingAccount,n=T||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"loggingAccount"),n=null===n||void 0===n||n===!1?n:ABINE_DNTME.Duckbone.Handlebars.getAttr(n,"getAddress"),typeof n===x?n=n.call(e,{hash:{}}):n===S&&(n=C.call(e,"loggingAccount.getAddress",{hash:{}})),r+=B(n)+"...\n            </span>\n                </div>\n            "}function l(e){var t,n,i="";return i+='\n                    <img class="replace-fav-icon" src="',t="/pages/images/2015panels/login_red.png",T=a.assetUrl,n=T||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===x?n.call(e,t,{hash:{}}):n===S?C.call(e,"assetUrl",t,{hash:{}}):n,i+=B(t)+'"\n                         style="width:40px;height:21px;"/>\n                '}function c(e){var t,n,i="";return i+='\n                    <img class="replace-fav-icon" src="',t="/pages/images/2015panels/login_blue.png",T=a.assetUrl,n=T||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===x?n.call(e,t,{hash:{}}):n===S?C.call(e,"assetUrl",t,{hash:{}}):n,i+=B(t)+'"\n                         style="width:40px;height:21px;"/>\n                '}function d(e,t){var n,i,r="";return r+="\n                ",T=a.accounts,n=T||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"accounts"),i=a.each,D=I.program(10,u,t),D.hash={},D.fn=D,D.inverse=I.noop,n=i.call(e,n,D),(n||0===n)&&(r+=n),r+="\n            "}function u(e,t){var n,i,r="";return r+='\n                    <!-- Login Emails -->\n                    <a href="#" class="mmKeyOption account" data-account="',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof n===x?n=n.call(e,{hash:{}}):n===S&&(n=C.call(e,"this.id",{hash:{}})),r+=B(n)+'">\n                        <div class="element otherblue">\n                        <span class="panelLeft" title="',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getAddress"),typeof n===x?n=n.call(e,{hash:{}}):n===S&&(n=C.call(e,"this.getAddress",{hash:{}})),r+=B(n)+'">\n                          ',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"isCompanyAccount"),i=a["if"],D=I.program(11,p,t),D.hash={},D.fn=D,D.inverse=I.program(13,m,t),n=i.call(e,n,D),(n||0===n)&&(r+=n),r+="\n                          ",n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getAddress"),typeof n===x?n=n.call(e,{hash:{}}):n===S&&(n=C.call(e,"this.getAddress",{hash:{}})),r+=B(n)+'\n                        </span>\n                            <span class="panelRight">\n                            <span class="edit" style="cursor: pointer;text-decoration: underline;"\n                                  title="Click to edit account">(',n="createdAt",T=a.live_timestamp,i=T||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"live_timestamp"),n=typeof i===x?i.call(e,n,{hash:{}}):i===S?C.call(e,"live_timestamp",n,{hash:{}}):i,r+=B(n)+")\n                            </span>\n                        </span>\n                        </div>\n                    </a>\n                "}function p(e){var t,n,i="";return i+='\n                              <img class="replace-fav-icon" src="',t="/pages/images/2015panels/login_red.png",T=a.assetUrl,n=T||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===x?n.call(e,t,{hash:{}}):n===S?C.call(e,"assetUrl",t,{hash:{}}):n,i+=B(t)+'"\n                                   style="width:40px;height:21px;"/>\n                          '}function m(e){var t,n,i="";return i+='\n                              <img class="replace-fav-icon" src="',t="/pages/images/2015panels/login_blue.png",T=a.assetUrl,n=T||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===x?n.call(e,t,{hash:{}}):n===S?C.call(e,"assetUrl",t,{hash:{}}):n,i+=B(t)+'"\n                                   style="width:40px;height:21px;"/>\n                          '}function h(e,t){var n,i,r="";return r+='\n                <div style="margin: 10px; margin-bottom: 0;text-align: center;" class="clearfix">\n                    <div style="margin-left: 20px;display: inline-block;">\n                        ',T=a.face_id,n=T||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"face_id"),i=a["if"],D=I.program(16,_,t),D.hash={},D.fn=D,D.inverse=I.program(18,f,t),n=i.call(e,n,D),(n||0===n)&&(r+=n),r+="\n                    </div>\n                </div>\n            "}function _(e){var t,n,i="";return i+='\n                            <img src="',t="/pages/images/faceid.png",T=a.assetUrl,n=T||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===x?n.call(e,t,{hash:{}}):n===S?C.call(e,"assetUrl",t,{hash:{}}):n,i+=B(t)+'" style="height: 77px;"/><br/>Face ID\n                        '}function f(e,t){var n,i,r="";return r+="\n                            ",T=a.touch_id,n=T||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"touch_id"),i=a["if"],D=I.program(19,g,t),D.hash={},D.fn=D,D.inverse=I.program(21,y,t),n=i.call(e,n,D),(n||0===n)&&(r+=n),r+="\n                        "}function g(e){var t,n,i="";return i+='\n                                <img src="',t="/pages/images/fingerprint.png",T=a.assetUrl,n=T||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===x?n.call(e,t,{hash:{}}):n===S?C.call(e,"assetUrl",t,{hash:{}}):n,i+=B(t)+'" style="height: 77px;"/><br/>Touch ID\n                            '}function y(e){var t,n,i="";return i+='\n                                <img src="',t="/pages/images/phoneid.png",T=a.assetUrl,n=T||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===x?n.call(e,t,{hash:{}}):n===S?C.call(e,"assetUrl",t,{hash:{}}):n,i+=B(t)+'" style="height: 77px;"/><br/>\n                            '}function b(e,t){var i,r,s="";return s+="\n            ",i=e,i=I.invokePartial(n["common.biometric_auth"],"common.biometric_auth",i,a,n),(i||0===i)&&(s+=i),s+='\n            <div class="clearfix" id="biometricSuccess" style="display:none;margin-left: auto;margin-right: auto;width: 350px">\n                <div style="float:left;width:100px;margin:10px;text-align:center;font-size: 10pt;padding: 30px 20px;border-right: 1px solid #eee;">\n                    ',T=a.face_id,i=T||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"face_id"),r=a["if"],D=I.program(24,v,t),D.hash={},D.fn=D,D.inverse=I.program(26,w,t),i=r.call(e,i,D),(i||0===i)&&(s+=i),s+='\n                </div>\n                <div style="float:left;margin: 10px;width:150px;text-align: center;">\n                    <img src="',i="/pages/images/tick.png",T=a.assetUrl,r=T||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),i=typeof r===x?r.call(e,i,{hash:{}}):r===S?C.call(e,"assetUrl",i,{hash:{}}):r,s+=B(i)+'" style="width: 24px;display: inline-block;"/>\n                    <div style="font-size: 10pt; ">',i=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"biometric_type"),typeof i===x?i=i.call(e,{hash:{}}):i===S&&(i=C.call(e,"this.biometric_type",{hash:{}})),s+=B(i)+' approved</div>\n                    <div style="font-size: 10pt;padding-top: 10px;">Logging into</div>\n                    <img class="favicon" style="display:none;max-width: 160px;max-height: 50px;"/>\n                    <div class="no-favicon" style="font-weight: bold;">',i=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof i===x?i=i.call(e,{hash:{}}):i===S&&(i=C.call(e,"this.domain",{hash:{}})),s+=B(i)+'</div>\n                    <div class="loading-dots" style="font-size: 24pt;display: inline-block;margin-top: 20px;">\n                        <span>&bull;</span><span>&bull;</span><span>&bull;</span>\n                    </div>\n                </div>\n            </div>\n        '}function v(e){var t,n,i="";return i+='\n                        <img src="',t="/pages/images/faceid.png",T=a.assetUrl,n=T||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===x?n.call(e,t,{hash:{}}):n===S?C.call(e,"assetUrl",t,{hash:{}}):n,i+=B(t)+'" style="width: 75px;"/><br/>Face ID\n                    '}function w(e,t){var n,i,r="";return r+="\n                        ",T=a.touch_id,n=T||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"touch_id"),i=a["if"],D=I.program(27,k,t),D.hash={},D.fn=D,D.inverse=I.program(29,E,t),n=i.call(e,n,D),(n||0===n)&&(r+=n),r+="\n                    "}function k(e){var t,n,i="";return i+='\n                            <img src="',t="/pages/images/fingerprint.png",T=a.assetUrl,n=T||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===x?n.call(e,t,{hash:{}}):n===S?C.call(e,"assetUrl",t,{hash:{}}):n,i+=B(t)+'" style="width: 75px;"/><br/>Touch ID\n                        '}function E(e){var t,n,i="";return i+='\n                            <img src="',t="/pages/images/phoneid.png",T=a.assetUrl,n=T||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===x?n.call(e,t,{hash:{}}):n===S?C.call(e,"assetUrl",t,{hash:{}}):n,i+=B(t)+'" style="width: 75px;"/><br/>\n                        '}a=a||e.helpers,n=n||e.partials;var A,N,T,D,M="",I=this,x="function",C=a.helperMissing,S=void 0,B=this.escapeExpression;return M+='<div class="newpanel">\n    <div class="left-panel">\n        <div id="accountList">\n            ',T=a.noAccounts,A=T||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"noAccounts"),N=a["if"],D=I.program(1,r,i),D.hash={},D.fn=D,D.inverse=I.program(3,s,i),A=N.call(t,A,D),(A||0===A)&&(M+=A),M+="\n            ",A=t,A=I.invokePartial(n["common.auto_fill_with"],"common.auto_fill_with",A,a,n),(A||0===A)&&(M+=A),M+="\n        </div>\n        ",T=a.hasBiometricAuth,A=T||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"hasBiometricAuth"),N=a["if"],D=I.program(23,b,i),D.hash={},D.fn=D,D.inverse=I.noop,A=N.call(t,A,D),(A||0===A)&&(M+=A),M+="\n    </div>\n\n    ",A=t,A=I.invokePartial(n["common.header"],"common.header",A,a,n),(A||0===A)&&(M+=A),M+="\n</div>"}),ABINE_DNTME.CompiledTemplates.login_helper_panel}),ABINE_DNTME.define("abine/views/loginHelperPanel",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/proxies","abine/timer","abine/intl","cryptojs"],function(e,t,a,n,i,r,s,o,l){var c=i.extend({templateName:"login_helper_panel",events:{"click a.account":"fillWithAccount","click .help-link":"openHelp","click .edit":"openEdit","click .noAccounts":"showSearch","click #masterPassAuth":"masterPassAuth","click #retryBiometricAuth":"retryBiometricAuth","submit form.unlock":"verifyMasterPass"},showSearch:function(){this.options.category="add",this.options.contentManager.showSearch(this.options),this.closePanel()},openHelp:function(){r.webapp.openHelp("/faq/guides-blurPasswordManager"),this.closePanel()},showFavIcon:function(){var e=this,t="https://s3.amazonaws.com/abine-favicons/"+e.model.hash+".png",a=new Image;a.onload=function(){e.$(".favicon").attr("src",t).show(),e.$(".no-favicon").hide()},a.onerror=function(){e.$(".favicon").hide(),e.$(".no-favicon").show()},a.src=t},afterInitialize:function(){var t=this;this.fieldId=this.options.fieldId,this.strategyId=this.options.strategyId,this.bindBaseEvents(),this.applyFadingStyle(),this.fadeIn(),this.contentManager=this.options.contentManager,this.messenger=this.options.contentManager.messenger;var a=this.contentManager.preferences.getPref("masked_card_auth"),i=this.contentManager.preferences.getPref("biometric_type"),r=null;"biometric"==a&&("apns.face_id"==i?r="Face ID":"apns.touch_id"==i?r="Touch ID":"apns.pin_id"==i&&(r="Mobile")),this.model={panelType:"account",domain:this.contentManager.domain,accounts:new n.AccountCollection,mapper:!!this.contentManager.preferences.getPref("mapping:mapper"),face_id:"apns.face_id"==i,touch_id:"apns.touch_id"==i,biometric_type:r,hash:l.SHA1("abine"+this.contentManager.domain),showMapper:this.contentManager.preferences.isMapper(),show_settings:!this.contentManager.preferences.getPref("account-settings-seen")},this.ignoreExplicitClose=!1,this.model.tabData=new n.TabData({messenger:this.options.messenger}),this.model.tabData.fetchTrackers({success:e.bind(function(){this.model.accounts.fetchLoginsByDomain(this.options.domain,e.bind(function(a){if(a||0==this.model.accounts.length)this.model.noAccounts=!0,this.render(),this.replaceWithFavicons(this.contentManager.domain);else{this.numMenuOptions=this.model.accounts.length,this.model.hasBiometricAuth=!1;for(var n=0;n<this.numMenuOptions;n++)this.model.accounts.models[n].get("mfa")&&r&&(this.model.hasBiometricAuth=!0,s.setTimeout(function(){t.showFavIcon()},500)),this.bind("enter"+n,function(e,t){this.fillWithAccount(e,t)},this);this.render(),s.setTimeout(e.bind(function(){this.replaceWithFavicons(this.contentManager.domain)},this),100),this.options.fillAccount&&this.fillWithAccount(null,null,this.options.fillAccount)}},this))},this)})},openEdit:function(e){e&&e.preventDefault();var a=t(e.target).closest("a").data("account");return r.webapp.openPage("/#/client/accounts/edit/"+a),this.closePanel(),!1},retryBiometricAuth:function(e,t){var a=this;s.clearTimeout(this.noResponseTimer),r.licenseModule.getGenericBiometricKey(null,function(n){n.success&&(a.biometricKey=n.key,a.sendBiometricAuthRequest(e,t))})},sendBiometricAuthRequest:function(){this.ignoreExplicitClose=!0;var e=this.biometricKey.split(":");if(e.length>2)return this.biometricKey=e[0]+":"+e[1],this.biometricToken=e[2],this.$("#biometricAuth").hide(),void this._fillAccount();this.$("#biometricAuth").show();var t=this.options.contentManager.messenger,a=this;a.$("#biometricInfo, #biometricAuth").show(),this.model.face_id?a.$("#biometricInfo").html(o.getText("mm_payment_helper_request_faceid_auth",[a.model.biometric_type])):this.model.touch_id?a.$("#biometricInfo").html(o.getText("mm_payment_helper_request_biometric_auth",[a.model.biometric_type])):a.$("#biometricInfo").html(o.getText("mm_payment_helper_request_phoneid_auth",[a.model.biometric_type])),a.$("#biometricError").hide(),a.autoResize(),this.biometricResponseId&&t.off(this.biometricResponseId);var n="biometric:auth:response:"+Math.random();s.clearTimeout(this.noResponseTimer),this.noResponseTimer=s.setTimeout(function(){a.$("#biometricInfo").text(o.getText("mm_payment_helper_biometric_no_response")),a.autoResize()},2e4),t.on(n,function(e){if(s.clearTimeout(a.noResponseTimer),!e.ack||!a.$("#masterPassStep").is(":visible")){if(a.$("#accountList, #masterPassStep").hide(),a.$("#biometricAuth").show(),e.ack)return a.$("#biometricInfo").show(),a.$("#biometricError").hide(),a.model.face_id?a.$("#biometricInfo").html(o.getText("mm_payment_helper_request_faceid_auth_ack",[a.model.biometric_type])):a.model.touch_id?a.$("#biometricInfo").html(o.getText("mm_payment_helper_request_biometric_auth_ack",[a.model.biometric_type])):a.$("#biometricInfo").html(o.getText("mm_payment_helper_request_phoneid_auth_ack",[a.model.biometric_type])),void a.autoResize();e.success?(a.biometricToken=e.token,a.$("#biometricAuth").hide(),a._fillAccount(),t.off(n),a.biometricResponseId=null):(a.$("#biometricInfo").hide(),a.$("#biometricError").text(e.error).show()),a.autoResize()}});var i={type:"login",responseId:n,key:this.biometricKey,domain:this.options.domain,account:this._account.get("label")||this._account.get("username")||this._account.get("email")};t.send("biometric:auth",i),this.biometricResponseId=n,this.autoResize()},masterPassAuth:function(e){e&&e.preventDefault(),s.clearTimeout(this.noResponseTimer),this.$("#biometricAuth").hide(),this.$("#masterPassStep").show(),this.autoResize()},verifyMasterPass:function(e){e&&e.preventDefault();var t=this;this.$("#masterPassErr").hide();var a=this.$("#password").val();if(0==a.length)return this.$("#masterPassErr").text(o.getText("mm_payment_helper_master_pass_invalid")).show(),void this.autoResize();var n="password:auth:response:"+Math.random(),i=this.options.contentManager.messenger;return i.on(n,function(e){t.$("#accountList, #biometricAuth").hide(),t.$("#masterPassStep").show(),e.success?(t.biometricToken=e.token,t.$("#masterPassStep").hide(),t._fillAccount(!0),i.off(n)):t.$("#masterPassErr").text(o.getText("mm_payment_helper_master_pass_invalid")).show(),i.off(n),t.autoResize()}),r.licenseModule.getGenericBiometricKey(null,function(e){e.success?(t.biometricKey=e.key,i.send("password:auth",{responseId:n,key:t.biometricKey,password:a,domain:t.options.domain})):t.$("#masterPassErr").text(o.getText("mm_payment_helper_master_pass_retry")).show(),t.autoResize()}),this.autoResize(),!1},fillWithAccount:function(a,n,i){a&&a.preventDefault();var s,l=this;if(!i){if(n||0==n){var c=this.getKeyOptions();s=t(c[n]).data("account")}else s=t(a.target).closest("a").data("account");i=e.find(this.model.accounts.models,function(e){return e.get("id")==s})}return this._account=i,i.get("mfa")&&"biometric"==this.contentManager.preferences.getPref("masked_card_auth")?void r.licenseModule.getGenericBiometricKey(null,function(e){this.$("#accountList").hide(),e.success?(l.biometricKey=e.key,l.sendBiometricAuthRequest(a)):(l.$("#biometricAuth").show(),l.$("#biometricInfo").hide(),l.$("#biometricError").text(o.getText("mm_payment_helper_biometric_auth_disabled",[l.model.biometric_type])).show()),l.autoResize()}):void this._fillAccount(!0)},_fillAccount:function(e){var t=this,a=this._account,n=a.get("login_url");(!n||0==n.length||n!=this.contentManager.href&&this.contentManager.href.indexOf(n)==-1)&&a.set("login_url",this.contentManager.href),a.get("page_host")||a.set("page_host",this.contentManager.host);var i=a.get("times_used")||0;a.set("times_used",i+1),a.set("pushed",0),a.save(),this.contentManager.messenger.send("update:panelActivity:masked",{panelId:7000004});var r=a.get("email"),o=a.get("username"),l=a.get("password");o&&0!=o.length||(o=r),r&&0!=r.length||(r=o),e?(this.options.fieldType&&this.options.fieldType.indexOf("password")!=-1?this.fillFields("login",{password:l},"login"):this.fillFields("login",{email:r,username:o,password:l},"login"),this.closePanel()):(this.ignoreExplicitClose=!1,this.$("#biometricAuth").hide(),this.$("#biometricSuccess").show(),s.setTimeout(function(){t.closePanel()},8e3),t.autoResize(),this.fillFields("login",{email:r,username:o,password:l,delay:!0},"login"))}});return c}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.address_helper_panel=e.template(function(e,t,a,n,i){function r(e,t){var n,i,r="";return r+='\n    <a href="#" class="mmKeyOption address" data-address="',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof n===_?n=n.call(e,{hash:{}}):n===g&&(n=f.call(e,"this.id",{hash:{}})),r+=y(n)+'"><div class="element" id="mask">\n        <span class="panelLeft full" title="',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"label"),typeof n===_?n=n.call(e,{hash:{}}):n===g&&(n=f.call(e,"this.label",{hash:{}})),r+=y(n)+'">\n            <img class="iconPos" src="',n="/pages/images/2015panels/address_green.png",u=a.assetUrl,i=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),n=typeof i===_?i.call(e,n,{hash:{}}):i===g?f.call(e,"assetUrl",n,{hash:{}}):i,r+=y(n)+'" style="width:42px;height:21px;"/>\n            ',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"fullLabel"),i=a["if"],p=h.program(2,s,t),p.hash={},p.fn=p,p.inverse=h.program(4,o,t),n=i.call(e,n,p),(n||0===n)&&(r+=n),r+="\n        </span>\n    </div></a>\n    "}function s(e){var t;return t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"fullLabel"),typeof t===_?t=t.call(e,{hash:{}}):t===g&&(t=f.call(e,"this.fullLabel",{hash:{}})),y(t)}function o(e){var t,n,i;return t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"label"),n="mm_address_helper_use",u=a.intl,i=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===_?i.call(e,n,t,{hash:{}}):i===g?f.call(e,"intl",n,t,{hash:{}}):i,y(t)}function l(e){var t,n,i="";return i+='\n      <a href="#" class="mmKeyOption addNew"><div class="element" id="mask">\n        <span class="panelLeft full">\n            <img class="iconPos" src="',t="/pages/images/2015panels/address_red.png",u=a.assetUrl,n=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),
t=typeof n===_?n.call(e,t,{hash:{}}):n===g?f.call(e,"assetUrl",t,{hash:{}}):n,i+=y(t)+'" style="width:42px;height:21px;"/>\n            ',t="mm_address_helper_add_new",u=a.intl,n=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===_?n.call(e,t,{hash:{}}):n===g?f.call(e,"intl",t,{hash:{}}):n,i+=y(t)+"\n        </span>\n      </div></a>\n    "}a=a||e.helpers,n=n||e.partials;var c,d,u,p,m="",h=this,_="function",f=a.helperMissing,g=void 0,y=this.escapeExpression;return m+='<div class="newpanel">\n    <div class="left-panel">\n    ',u=a.addresses,c=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"addresses"),d=a.each,p=h.program(1,r,i),p.hash={},p.fn=p,p.inverse=h.noop,c=d.call(t,c,p),(c||0===c)&&(m+=c),m+="\n    ",u=a.showAddNew,c=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"showAddNew"),d=a["if"],p=h.program(6,l,i),p.hash={},p.fn=p,p.inverse=h.noop,c=d.call(t,c,p),(c||0===c)&&(m+=c),m+="\n    ",c=t,c=h.invokePartial(n["common.auto_fill_with"],"common.auto_fill_with",c,a,n),(c||0===c)&&(m+=c),m+="\n    </div>\n    ",c=t,c=h.invokePartial(n["common.header"],"common.header",c,a,n),(c||0===c)&&(m+=c),m+="\n</div>"}),ABINE_DNTME.CompiledTemplates.address_helper_panel}),ABINE_DNTME.define("abine/views/addressHelperPanel",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/intl","abine/proxies"],function(e,t,a,n,i,r,s){var o=i.extend({templateName:"address_helper_panel",events:{"click a.address":"fillWithAddress","click .help-link":"openHelp","click a.addNew":"addNewAddress"},openHelp:function(){s.webapp.openHelp("/faq/guides-autofillAddresses"),this.closePanel()},addNewAddress:function(){this.updatePanelActivity("closed",this.panelId,this.fieldId,!1),s.webapp.openPage("/#/client/address/add"),this.closePanel()},afterInitialize:function(){this.fieldId=this.options.fieldId,this.panelId=7000056,this.updatePanelActivity("impression",this.panelId,this.fieldId,!1),this.bindBaseEvents(),this.applyFadingStyle(),this.fadeIn(),this.contentManager=this.options.contentManager,this.messenger=this.options.contentManager.messenger,this.model={panelType:"address",addresses:new n.AddressCollection,mapper:!!this.contentManager.preferences.getPref("mapping:mapper"),showMapper:this.contentManager.preferences.isMapper(),show_settings:!this.contentManager.preferences.getPref("address-settings-seen")},this.model.tabData=new n.TabData({messenger:this.options.messenger}),this.model.tabData.fetchTrackers({success:e.bind(function(){this.model.addresses.fetchAll({success:e.bind(function(){if(0==this.model.addresses.length)this.closePanel();else{this.model.showAddNew=this.model.addresses.length<=1,this.numMenuOptions=this.model.addresses.length;for(var e=0;e<this.numMenuOptions;e++)"Masked Card"==this.model.addresses.models[e].get("label")&&(this.model.addresses.models[e].attributes.fullLabel=r.getText("mm_address_helper_abine_address")),this.bind("enter"+e,function(e,t){this.fillWithAddress(e,t)},this);this.render()}},this)})},this)})},fillWithAddress:function(a,n){a&&a.preventDefault();var i;if(n||0==n){var r=this.getKeyOptions();i=t(r[n]).data("address")}else i=t(a.target).closest("a").data("address");var s=e.find(this.model.addresses.models,function(e){return e.get("id")==i});this.fillFields("address",s.toJSON(),"address"),"Masked Card"==s.get("label")?this.updatePanelActivity("masked",this.panelId,this.fieldId,!1):this.updatePanelActivity("discloses",this.panelId,this.fieldId,!1),this.closePanel()}});return o}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.autofillwith_helper_panel=e.template(function(e,t,a,n,i){function r(e){var t;return m=a.title,t=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"title"),typeof t===g?t=t.call(e,{hash:{}}):t===b&&(t=y.call(e,"title",{hash:{}})),t||0===t?t:""}function s(e){var t,n;return t="mm_auto_fill_with_header",m=a.intl,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===g?n.call(e,t,{hash:{}}):n===b?y.call(e,"intl",t,{hash:{}}):n,v(t)}function o(e,t){var n,i,r="";return r+='\n      <a href="#" class="mapField" data-idx="',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"idx"),typeof n===g?n=n.call(e,{hash:{}}):n===b&&(n=y.call(e,"this.idx",{hash:{}})),r+=v(n)+'">\n        <div class="element clearfix" id="mask">\n          <span class="panelLeft" style="',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"bolder"),i=a["if"],h=f.program(6,l,t),h.hash={},h.fn=h,h.inverse=f.noop,n=i.call(e,n,h),(n||0===n)&&(r+=n),r+='">\n            ',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"label"),typeof n===g?n=n.call(e,{hash:{}}):n===b&&(n=y.call(e,"this.label",{hash:{}})),(n||0===n)&&(r+=n),r+="\n          </span>\n          ",n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"hasChildren"),i=a["if"],h=f.program(8,c,t),h.hash={},h.fn=h,h.inverse=f.noop,n=i.call(e,n,h),(n||0===n)&&(r+=n),r+="\n        </div>\n      </a>\n    "}function l(){return"font-weight: bold;"}function c(){return'\n          <span class="panelRight" style="font-weight: bold;font-size:11pt;">&gt;</span>\n          '}function d(){return"display:none;"}a=a||e.helpers,n=n||e.partials;var u,p,m,h,_="",f=this,g="function",y=a.helperMissing,b=void 0,v=this.escapeExpression;return _+='<div class="panel">\n\n  <div class="step1">\n    <div class="info panelTitle" style="font-weight: bold;">\n      ',m=a.title,u=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"title"),p=a["if"],h=f.program(1,r,i),h.hash={},h.fn=h,h.inverse=f.program(3,s,i),u=p.call(t,u,h),(u||0===u)&&(_+=u),_+="\n    </div>\n    ",m=a.menu,u=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"menu"),p=a.each,h=f.program(5,o,i),h.hash={},h.fn=h,h.inverse=f.noop,u=p.call(t,u,h),(u||0===u)&&(_+=u),_+='\n  </div>\n  <div class="loading" style="text-align: center;padding:10px;',m=a.loading,u=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"loading"),p=a.unless,h=f.program(10,d,i),h.hash={},h.fn=h,h.inverse=f.noop,u=p.call(t,u,h),(u||0===u)&&(_+=u),_+='"><img src="',u="/pages/images/ajax_loader.gif",m=a.assetUrl,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),u=typeof p===g?p.call(t,u,{hash:{}}):p===b?y.call(t,"assetUrl",u,{hash:{}}):p,_+=v(u)+'"/></div>\n  <a href="#" class="mapFieldFooter">\n    <div class="element">\n      <span class="panelLeft advanced">\n        ',u="mm_auto_fill_with_advanced",m=a.intl,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),u=typeof p===g?p.call(t,u,{hash:{}}):p===b?y.call(t,"intl",u,{hash:{}}):p,_+=v(u)+' &rarr;\n      </span>\n      <span class="panelRight back" style="font-size: 10pt;">\n        &larr; ',u="mm_auto_fill_with_go_back",m=a.intl,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),u=typeof p===g?p.call(t,u,{hash:{}}):p===b?y.call(t,"intl",u,{hash:{}}):p,_+=v(u)+'\n      </span>\n    </div>\n  </a>\n  <div class="show-here" style="display: none;padding: 40px 5px;text-align: center">\n    Done!<br/>\n    You will see panels here.<br/><br/>\n    If you would like to turn on all auto-fill panels here,<br/>\n    <a href=# class="change-all">click here</a>\n  </div>\n  <div class="dont-show-here" style="display: none;padding: 40px 5px;text-align: center">\n    Done!<br/>\n    You won\'t see this panel here again.<br/><br/>\n    If you would like to turn off all auto-fill panels here,<br/>\n    <a href=# class="change-all">click here</a>\n  </div>\n  <div class="confirm" style="display: none;padding: 30px 5px;text-align: center">\n    Thanks!<br/>\n    <a href="#" class="done">Click here</a> to see your changes.<br/>\n    (if not, email blur-support@getabine.com)<br/><br/>\n    You have also helped improve Blur for the community.<br/>\n    <a href=# class="disable-feedback">Turn off this auto-fill feedback?</a>\n  </div>\n\n  <div class="report" style="display: none;text-align: center;padding-top:20px;">\n    <div class="report-form">\n    <div style="padding: 10px 0;">',u="mm_auto_fill_report_problem",m=a.intl,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),u=typeof p===g?p.call(t,u,{hash:{}}):p===b?y.call(t,"intl",u,{hash:{}}):p,_+=v(u)+'</div>\n    <form id="reportProblem">\n      <input id="name" type="text" placeholder="',u="mm_auto_fill_report_name",m=a.intl,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),u=typeof p===g?p.call(t,u,{hash:{}}):p===b?y.call(t,"intl",u,{hash:{}}):p,_+=v(u)+'" style="width: 90%;" required/>\n      <input id="email" type="text" placeholder="',u="mm_auto_fill_report_email",m=a.intl,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),u=typeof p===g?p.call(t,u,{hash:{}}):p===b?y.call(t,"intl",u,{hash:{}}):p,_+=v(u)+'" style="width: 90%;"/>\n      <textarea id="message" placeholder="',u="mm_auto_fill_report_message",m=a.intl,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),u=typeof p===g?p.call(t,u,{hash:{}}):p===b?y.call(t,"intl",u,{hash:{}}):p,_+=v(u)+'" style="width: 90%;height:100px;" required></textarea>\n      <input id="report" type="submit" value="',u="mm_auto_fill_report_submit",m=a.intl,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),u=typeof p===g?p.call(t,u,{hash:{}}):p===b?y.call(t,"intl",u,{hash:{}}):p,_+=v(u)+'"/>\n    </form>\n    </div>\n    <div class="report-success" style="display: none;padding: 30px 5px;text-align: center">\n      Thanks!<br/><br/>\n      You have also helped improve Blur for the community.<br/><br/><br/>\n    </div>\n  </div>\n\n  ',u=t,u=f.invokePartial(n["common.header"],"common.header",u,a,n),(u||0===u)&&(_+=u),_+="\n\n</div>"}),ABINE_DNTME.CompiledTemplates.autofillwith_helper_panel}),ABINE_DNTME.define("abine/views/autoFillWithPanel",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/contentMessenger","abine/proxies","abine/intl","abine/responseCodes","abine/password"],function(e,t,a,n,i,r,s,o,l,c,d){var u=i.extend({templateName:"autofillwith_helper_panel",events:{"click .map":"map","click .mapField":"mapField","click .advanced":"advanced","click .panelTitle .formType":"changeFormType","click .back":"back","click .help-link":"openHelp","click .logo-link":"openHelp","click .change-all":"changeAll","click .done":"done","submit #reportProblem":"reportProblem","click .disable-feedback":"disableFeedback","click .close-link":"logClose"},logClose:function(){this.updatePanelActivity("closed",this.panelId,this.fieldId,!0)},openHelp:function(e){return!t(e.target).hasClass("num-trackers")&&(o.webapp.openHelp("/email"),void this.closePanel())},dataTypePanel:function(){return!1},disableFeedback:function(e){this.contentManager.preferences.setPref("disableMapFeedback","true"),this.done(e)},changeFormType:function(t){if(t.preventDefault(),this.showingFormTypes)return void this.back(t);this.showingFormTypes=!0;var a=this.options.formType;this.model.menu=new n.MappingMenuCollection;var i=[{label:"Change to Login Form",formType:"loginForm"},{label:"Change to Registraton Form",formType:"registrationForm"},{label:"Change to Checkout Form",formType:"checkoutForm"},{label:"Change to Address Form",formType:"addressForm"},{label:"Change to Other Form",formType:"otherForm"}],r=0;e.each(i,e.bind(function(e){a!=e.formType&&this.model.menu.add(new n.MappingMenu({label:e.label,action:"change_form_type",formType:e.formType,idx:r++}))},this)),this.render()},done:function(e){e.preventDefault();var t=this;r.setTimeout(function(){t.focusField(),t.closePanel()},500)},changeAll:function(e){e.preventDefault(),this.contentManager.showToolbarPanel({page:"accounts"}),this.closePanel()},reportProblem:function(e){e.preventDefault();var t={name:this.$("#name").val(),email:this.$("#email").val(),message:"Reported using mapping panel:\n\n"+this.$("#message").val(),addLookupMetaData:!0};this.$(".report-form, .report-success").toggle(),this.sendFeedbackEmail(t),this.autoResize();var a=this;r.setTimeout(function(){a.closePanel()},8e3)},map:function(e){e.preventDefault();for(var a=e.target;!t(a).data("type");)a=a.parentNode;var n=t(a).data("type");t(".step1",this.el).hide(),t(".step2",this.el).show(),t(".step2 ."+n+"Details",this.el).show(),this.trigger("resize")},back:function(e){if(e.preventDefault(),this.showingFormTypes)return delete this.showingFormTypes,this.setupModel(),void this.render();if("root"!=this.currentRoot){if(this.currentRoot.match(/.*\.[0-9]+$/)){var a=this.currentRoot.lastIndexOf("."),n=this.currentRoot.substring(a+1);this.currentRoot=this.currentRoot.substring(0,a),a=this.currentRoot.lastIndexOf("."),a!=-1&&(this.currentRoot=this.currentRoot.substring(0,a)+"."+n),this.currentRoot.match(/^root\.[0-9]+$/)&&(this.currentRoot="root")}else this.currentRoot=this.currentRoot.substring(0,this.currentRoot.lastIndexOf("."));return this.setupModel(),void this.render()}this.$(".step1").is(":visible")?(this.ignoreBlur(!1),this.focusField(),this.closePanel()):(t(".step2 .details",this.el).hide(),t(".step2",this.el).hide(),t(".step1",this.el).show(),this.trigger("resize"))},advanced:function(e){this.ignoreBlur(!0),e.preventDefault(),e.stopPropagation(),this.ignoreBlur(!1),this.options.contentManager.showMapForm(this.options),this.closePanel(e,!0),this.trigger("remove")},blacklist:function(t){var a=this,i=new n.Blacklist({domain:this.contentManager.domain});i.fetchByDomain(!0,e.bind(function(){i.set(this.options.category,t),i.set("changed",this.options.category),i.save({},{success:function(){"card"==a.options.category&&(i.set("real_card",t),i.set("changed","real_card"),i.save()),a.contentManager.reloadPreference()}})},this))},mapField:function(e){e.preventDefault();for(var a=e.target;!t(a).hasClass("mapField");)a=a.parentNode;var n=t(a),i=n.data("idx"),r=this.model.menu.models[i];if(r.get("hasChildren"))return this.currentRoot=r.get("path"),this.setupModel(),void this.render();var s=r.get("action"),l=r.get("type"),c=r.get("formType"),d=!this.contentManager.preferences.getPref("disableMapFeedback"),u=null;if(this.$(".step1, .mapFieldFooter").hide(),"show_here"==s)return this.$(".show-here").show(),this.autoResize(),this.blacklist(!1),this.ignoreBlur(!0),void this.focusField();if("dont_show_here"==s)return this.$(".dont-show-here").show(),this.autoResize(),this.blacklist(!0),this.ignoreBlur(!0),void this.focusField();if("mask_email"==s)return this.fillFields("mapField",{dataType:"/contact/email",formType:null,noFocus:!0,right_click:!0}),void this.maskEmail();if("real_email"==s)this.fillFields("mapField",{dataType:"/contact/email",formType:null,noFocus:!0,right_click:!0}),u=this.allData.email;else if("strong_password"==s)this.fillFields("mapField",{dataType:l,formType:null,noFocus:!0,right_click:!0}),u=this.createPassword(l);else if("fill"==s)this.fillFields("mapField",{dataType:l,formType:c,noFocus:!0,right_click:!0}),u=r.get("value");else if("mask_card"==s);else if("show_list_accounts"==s)o.webapp.openPage("/#/accounts"),d=!1;else if("show_list_cards"==s)o.webapp.openPage("/#/real_cards"),d=!1;else if("show_list_addresses"==s)o.webapp.openPage("/#/address"),d=!1;else if("show_list_identities"==s)o.webapp.openPage("/#/identities"),d=!1;else{if("report_problem"==s)return void this.showReportProblem();if("change_form_type"==s)return delete this.showingFormTypes,this.ignoreBlur(!0),this.options.formType=c,this.fillFields("mapField",{dataType:this.options.fieldType,formType:c,noFocus:d,right_click:!0}),this.setupModel(),void this.render();"form_type"==s?this.fillFields("mapField",{dataType:this.options.fieldType,formType:c,noFocus:d,right_click:!0}):this.fillFields("mapField",{dataType:l,formType:this.options.formType,noFocus:d,right_click:!0})}return u?(this.fillFields("current",u),void this.closePanel()):void(d?(this.$(".confirm").show(),this.ignoreBlur(!0),this.focusField(),this.autoResize()):this.closePanel())},setupModel:function(){var e=this.options.fieldType,t=this.options.formType,a=new n.MappingMenuCollection,i=this.previousTitle||null;try{a.loadMenu(this.currentRoot,e,t,this.options.panelDisabledHere,this.allData),a.length>0&&null!=a.models[0].get("panelTitle")&&(this.previousTitle=i=a.models[0].get("panelTitle"))}catch(e){}this.model={iconClick:!!this.options.iconClick,menu:a,title:i}},maskEmail:function(){if(t(".step1").hide(),t(".loading").show(),this.primaryEmail){var a=this.primaryEmail.generateDisposable(this.options.domain,"dnt-panel");a.save({},{success:e.bind(function(){this.fillFields("current",a.getAddress(),{origin:"disposable",disposableGUID:a.get("guid")}),this.closePanel()},this),error:e.bind(function(){this.closePanel()},this)})}},showReportProblem:function(){t(".step1").hide(),t(".report").show(),this.autoResize()},createPassword:function(e){var t,a={"/password":"generateNoSpecialCharsPassword","/password/differentSpecialChars":"generateSpecialCharsPassword","/password/noSpecialChars":"generateNoSpecialCharsPassword","/password/noNumbers":"generateNoDigitsPassword"};return t=e in a?d[a[e]]():d.generateNoSpecialCharsPassword()},afterInitialize:function(){this.contentManager=this.options.contentManager,this.messenger=this.options.contentManager.messenger,this.numMenuOptions=3,this.currentRoot="root",this.bindBaseEvents(),this.applyFadingStyle(),this.fadeIn(),this.allData={account:new n.AccountCollection,address:new n.AddressCollection,card:new n.RealCardCollection,identity:new n.IdentityCollection,phone:new n.DisposablePhoneCollection,email:null};var t=new n.ShieldedPhoneCollection,a=this;r.setTimeout(function(){var i=new n.ShieldedEmailCollection;i.fetchAll({success:function(){i.length>0&&(a.allData.email=i.at(0).get("email"),a.primaryEmail=i.at(0)),a.allData.account.fetchLoginsByDomain(a.options.domain,function(){a.allData.address.fetchAll({success:function(){a.allData.address.remove(a.allData.address.at(a.allData.address.length-1)),a.allData.card.fetchAll({success:function(){a.allData.identity.fetchAll({success:function(){t.fetchAll({success:function(){a.allData.phone.fetchAll({success:function(){if(t.length>0&&t.models[0].get("country_code")){var i=t.models[0];i.set("type","real"),a.allData.phone.add(new n.DisposablePhone(i.toJSON()))}e.each(a.allData.identity.models,function(e){if(e.get("phone")&&e.get("phone").match(/^[0-9\+\s]+$/)){var t=e.get("phone").split(" ");a.allData.phone.add(new n.DisposablePhone({country_code:t[0].replace(/[^0-9]+/g,""),number:t[1].replace(/[^0-9]+/g,""),type:"real"}))}}),a.setupModel(),a.render()}})}})}})}})}})})}})},10),this.model={iconClick:!!this.options.iconClick,loading:!0,menu:[]},this.panelId=8000011,this.updatePanelActivity("impression",this.panelId),this.render()}});return u}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.autofill_helper_panel=e.template(function(e,t,a,n,i){function r(e,t){var n,i,r="";return r+='\n    <div style="padding-left: 10px;">\n      <b>',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"label"),typeof n===g?n=n.call(e,{hash:{}}):n===b&&(n=y.call(e,"this.label",{hash:{}})),r+=v(n)+"</b> ",n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"hasVisible"),i=a.unless,h=f.program(2,s,t),h.hash={},h.fn=h,h.inverse=f.noop,n=i.call(e,n,h),(n||0===n)&&(r+=n),r+='\n      <div style="padding-left: 10px;">',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"text"),m=a.nl2br,i=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"nl2br"),n=typeof i===g?i.call(e,n,{hash:{}}):i===b?y.call(e,"nl2br",n,{hash:{}}):i,(n||0===n)&&(r+=n),r+="</div>\n    </div>\n  "}function s(){return'<span style="color:orange;">(ensure these fields are visible)</span>'}function o(e,t){var n,i,r="";return r+='\n        <tr class="field ',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"canFill"),i=a["if"],h=f.program(5,l,t),h.hash={},h.fn=h,h.inverse=f.noop,n=i.call(e,n,h),(n||0===n)&&(r+=n),r+='" data-signature="',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"signature"),typeof n===g?n=n.call(e,{hash:{}}):n===b&&(n=y.call(e,"this.signature",{hash:{}})),r+=v(n)+'" data-type="',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"dataType"),typeof n===g?n=n.call(e,{hash:{}}):n===b&&(n=y.call(e,"this.dataType",{hash:{}})),r+=v(n)+'" ',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"canFill"),i=a.unless,h=f.program(7,c,t),h.hash={},h.fn=h,h.inverse=f.noop,n=i.call(e,n,h),(n||0===n)&&(r+=n),r+='>\n          <td>\n              <span class="lbl"></span><br/>\n              <span class="sign" title="',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"label"),typeof n===g?n=n.call(e,{hash:{}}):n===b&&(n=y.call(e,"this.label",{hash:{}})),r+=v(n)+'" style="font-size:8pt;color:Grey;">',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"shortLabel"),typeof n===g?n=n.call(e,{hash:{}}):n===b&&(n=y.call(e,"this.shortLabel",{hash:{}})),r+=v(n)+'</span>\n          </td>\n          <td><select class="fill-status">\n            <option value="">-- Please Select --</option>\n            <option value="ok">Filled Correctly</option>\n            <option value="empty" ',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"canFill"),i=a.unless,h=f.program(9,d,t),h.hash={},h.fn=h,h.inverse=f.noop,n=i.call(e,n,h),(n||0===n)&&(r+=n),r+='>Not Filled</option>\n            <option value="bad">Wrong Value</option>\n            <!--option value="isvisible">Field Invisible</option-->\n            <!--option value="mapping">Incorrect Mapping</option-->\n          </select></td>\n        </tr>\n      '}function l(){return"canFill"}function c(){return'style="display:none;"'}function d(){return"selected"}a=a||e.helpers,n=n||e.partials;var u,p,m,h,_="",f=this,g="function",y=a.helperMissing,b=void 0,v=this.escapeExpression;return _+='<div class="clearfix panel">\n\n  <div class="info" style="font-weight: bold;">Auto Fill Form</div>\n  <div style="display: none;">\n    ',u=t,u=f.invokePartial(n["common.form_types"],"common.form_types",u,a,n),(u||0===u)&&(_+=u),_+="\n    ",u=t,u=f.invokePartial(n["common.field_types"],"common.field_types",u,a,n),(u||0===u)&&(_+=u),_+='\n  </div>\n\n  <div class="fieldSet" style="margin-top: 5px;">',u="mm_map_form_type",m=a.intl,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),u=typeof p===g?p.call(t,u,{hash:{}}):p===b?y.call(t,"intl",u,{hash:{}}):p,_+=v(u)+': <span class="form-type"></span></div>\n\n  <div class="step1" style="">\n    <div style="text-decoration: underline">Sample data to fill:</div>\n  ',m=a.dummyData,u=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"dummyData"),p=a.each,h=f.program(1,r,i),h.hash={},h.fn=h,h.inverse=f.noop,u=p.call(t,u,h),(u||0===u)&&(_+=u),_+='\n  </table>\n  </div>\n  <div class="step2" style="display: none;border-top: 1px solid black;">\n    <div style="margin: 5px 0;font-weight: bold;">Please review all fields and give your feedback: <span class="allOk" style="font-weight: normal;color:blue;cursor:pointer;">[All OK]</span></div>\n    <div class="clearfix" style="max-height: 200px;overflow: scroll;padding-left: 10px;margin-right: 5px;border: 1px solid #fafafa">\n      <table>\n      ',m=a.fields,u=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"fields"),p=a.each,h=f.program(4,o,i),h.hash={},h.fn=h,h.inverse=f.noop,u=p.call(t,u,h),(u||0===u)&&(_+=u),_+='\n      </table>\n    </div>\n  </div>\n  <div class="fieldSet clearfix error" style="margin: 5px;text-align: center;color: red;display: none;"></div>\n  <div class="fieldSet clearfix progress-msg" style="margin: 5px;text-align: center;color: green;display: none;">\n    <img class="loading" src="',u="/pages/images/ajax_loader.gif",m=a.assetUrl,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),u=typeof p===g?p.call(t,u,{hash:{}}):p===b?y.call(t,"assetUrl",u,{hash:{}}):p,_+=v(u)+'"/>\n    Please wait...  Filling form with sample data.\n  </div>\n  <div class="fieldSet clearfix" style="margin: 5px;text-align: right;">\n    <div class="btn btn-primary fillBtn" style="margin-right:5px;">',u="mm_auto_fill_fill",m=a.intl,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),u=typeof p===g?p.call(t,u,{hash:{}}):p===b?y.call(t,"intl",u,{hash:{}}):p,_+=v(u)+'</div>\n    <div class="btn btn-info allFieldsBtn" style="margin-right:5px;display: none;">Show All Fields</div>\n    <div class="btn btn-primary saveBtn" style="margin-right:5px;display: none;">',u="mm_auto_fill_save",m=a.intl,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),u=typeof p===g?p.call(t,u,{hash:{}}):p===b?y.call(t,"intl",u,{hash:{}}):p,_+=v(u)+'</div>\n    <div class="btn cancel">',u="mm_map_form_cancel",m=a.intl,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),u=typeof p===g?p.call(t,u,{hash:{}}):p===b?y.call(t,"intl",u,{hash:{}}):p,_+=v(u)+'</div>\n  </div>\n\n  <div class="header" style="clear:both;">\n    <div class="logo-link">\n      <img class="logo" height="16px" width="17px" src="',u="/pages/images/dnt-ui-header-logo.png",m=a.assetUrl,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),u=typeof p===g?p.call(t,u,{hash:{}}):p===b?y.call(t,"assetUrl",u,{hash:{}}):p,_+=v(u)+'"/>\n      <span class="boldFont">Blur</span>\n    </div>\n    <div class="links-wrapper">\n      <div class="links close-link">\n        <img id="close" class="header-icon" src="',u="/pages/images/dnt-ui-header-close.png",m=a.assetUrl,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),u=typeof p===g?p.call(t,u,{hash:{}}):p===b?y.call(t,"assetUrl",u,{hash:{}}):p,_+=v(u)+'">\n      </div>\n      <div class="links help-link">\n        <img class="header-icon" src="',u="/pages/images/dnt-ui-header-help.png",m=a.assetUrl,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),u=typeof p===g?p.call(t,u,{hash:{}}):p===b?y.call(t,"assetUrl",u,{hash:{}}):p,_+=v(u)+'">\n      </div>\n    </div>\n  </div>\n\n</div>'}),ABINE_DNTME.CompiledTemplates.autofill_helper_panel}),ABINE_DNTME.define("abine/views/autoFillPanel",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/contentMessenger","abine/proxies"],function(e,t,a,n,i,r,s,o){function l(e,t){var a="",n="";return e.match(/postal|city|state|country/)?(a="Address",n="address"):e.match(/financial/)?(a="Credit Card",n="payment"):e.match(/phone/)?(a="Phone",n="phone"):e.match(/email|username|password/)&&"loginForm"==t?(a="Login",n="login-no-submit"):e.match(/email/)?(a="Email",n="email"):e.match(/password/)&&(a="Password",n="password"),e.match(/home/)&&(a="Home "+a),e.match(/shipping/)&&(a="Shipping "+a),e.match(/billing/)&&(a="Billing "+a),e.match(/business/)&&(a="Business "+a),c[a]?"string"!=typeof c[a]&&e in c[a]?{group:a,value:c[a][e],type:n}:{group:a,value:c[a],type:n}:null}var c={Email:"email-reg@abine.com",Password:{"/password/login":"#password123#","/password":"#password123#","/password/differentSpecialChars":"password-123","/password/noSpecialChars":"password123","/password/noNumbers":"passwordNoNumber","/passwordold":"loginPassword"},Login:new n.Account({username:"JohnDoe11",email:"email-login@abine.com",password:"loginPassword"}),Phone:new n.DisposablePhone({country_code:"1",number:"6162223333"}),"Home Phone":new n.DisposablePhone({country_code:"1",number:"7173334444"}),"Work Phone":new n.DisposablePhone({country_code:"1",number:"5154445555"}),"Mobile Phone":new n.DisposablePhone({country_code:"1",number:"4145556666"}),"Fax Phone":new n.DisposablePhone({country_code:"1",number:"3136667777"}),"Credit Card":new n.RealCard({number:"4539443037367905",cvc:"432",expiry_month:"10",expiry_year:"2019",first_name:"Tom",last_name:"Jerry",type:"visa"}),Address:new n.Address({address1:"280 summer st",address2:"#123",city:"boston",state:"MA",zip:"02210",country:"US"}),"Billing Address":new n.Address({address1:"933 E. 56th St.",address2:"#234",city:"Chicago",state:"IL",zip:"60637",country:"US"}),"Shipping Address":new n.Address({address1:"174 W. 18th Ave.",address2:"#345",city:"Columbus",state:"OH",zip:"43210",country:"US"}),"Business Address":new n.Address({address1:"373 W. Geneva St.",address2:"#456",city:"Wms. Bay",state:"WI",zip:"53191",country:"US"}),"Home Address":new n.Address({address1:"JILA CB 440",address2:"#567",city:"Boulder",state:"CO",zip:"80309",country:"US"})},d=i.extend({templateName:"autofill_helper_panel",events:{"click .help-link":"openHelp","click .logo-link":"openHelp","click .close-link":"logClose","click .saveBtn":"save","click .allFieldsBtn":"showAllFields","click .allOk":"allOk","click .fillBtn":"fill","click .cancel":"cancel"},logClose:function(){this.closePanel()},cancel:function(){this.closePanel()},openHelp:function(e){return!t(e.target).hasClass("num-trackers")&&(o.webapp.openHelp("/email"),void this.closePanel())},showAllFields:function(){this.$(".field").show(),this.$(".allFieldsBtn").hide()},allOk:function(){this.$(".canFill .fill-status").val("ok")},fill:function(){var t=this;this.$(".progress-msg").show(),this.$(".fillBtn").hide(),t.autoResize(),e.async.forEachSeries(this.model.dummyData,function(a,n){var i=e.find(a.fields,function(e){return"select"!=e.type});t.options.contentManager.focusField(t.options.strategyId,i.signature),t.options.contentManager.fillFields(a.type,t.options.strategyId,i.signature,a.value),setTimeout(n,2e3)},function(){t.$(".progress-msg").hide(),t.$(".step2, .saveBtn, .allFieldsBtn").show(),t.autoResize()})},save:function(a){a.preventDefault(),this.$(".error").hide();var i={},r=!1;if(e.each(this.options.fields,function(e){i[e.signature]={signature:e.signature,label:e.label,data_type:e.dataType,can_fill:e.canFill,group:e.group}}),this.$(".field").each(e.bind(function(e,a){if(!r){var n=t(a).data("signature"),s=t("select",a).val();return""==s&&(s=null),s?void(i[n].status=s):(this.$(".error").text("Please set status for all fields.").show(),r=!0,this.$("select",a)[0].scrollIntoView(),void this.trigger("resize"))}},this)),!r){this.$(".saveBtn").hide(),this.$(".error").text("Please wait. Sending your feedback...").show(),this.autoResize();var s=this.contentManager;s.getValue("autofill.data",this.strategyId,this.fieldId,e.bind(function(t){var a=[],r={signature:this.model.signature,form_type:this.model.formType,domain:s.domain,url:s.href,mapper:s.preferences.getPref("autofill:mapper"),batch:s.preferences.getPref("autofill:batch"),external_id:s.preferences.getPref("autofill:form:id"),fields:a,status:"ok"};e.each(i,e.bind(function(e){t[e.signature]&&(e.value=t[e.signature].value,e.fill_type=t[e.signature].fillType),"ok"!=e.status&&e.can_fill&&(r.status="review"),a.push(e)},this));var o=new n.AutofillFeedback;o.save(r,{success:e.bind(function(){this.closePanel()},this)})},this))}},setupModel:function(){this.model={iconClick:!!this.options.iconClick,formType:this.options.formType,signature:this.options.formSignature,fields:this.options.fields}},afterInitialize:function(){var a=this;this.fieldId=this.options.fieldId,this.strategyId=this.options.strategyId,this.contentManager=this.options.contentManager,this.messenger=this.options.contentManager.messenger,this.applyFadingStyle(),this.fadeIn(),this.setupModel();var n=(this.contentManager.preferences.getPref("autofill:mapper"),this.options.fields),i={},r=[];this.model.dummyData=r,e.each(n,function(e){if(!e.dataType)return void(e.canFill=!1);var t=l(e.dataType,a.model.formType);if(!t)return void(e.canFill=!1);if(e.canFill=!0,e.group=t.group,t.group in i)i[t.group].fields.push(e),e.visible&&(i[t.group].hasVisible=!0);else{var n={label:t.group,type:t.type,text:"string"==typeof t.value?t.value:t.value.getFormattedText(),value:"string"==typeof t.value?t.value:t.value.attributes,fields:[e],hasVisible:e.visible};r.push(n),i[t.group]=n}}),this.on("render",e.bind(function(){var e=this.model.formType;this.$("#formType").val(e);var a=this;this.$(".field").hover(function(){var e=t(this).data("signature");a.addFieldBorder(e)},function(){var e=t(this).data("signature");a.removeFieldBorder(e)});var n={};this.$("select.fieldTypes option").each(function(e,t){n[t.value]=t.text}),this.$("#formType option").each(function(a,n){n.value==e&&t(".form-type").text(n.text)}),this.$(".field").each(function(e,a){var i=t(a).data("type");t("td span.lbl",a).text(n[i])})},this)),this.render()}});return d}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.mapform_helper_panel=e.template(function(e,t,a,n,i){function r(e){var t,i="";return i+='\n      <div class="field" style="margin-bottom: 5px;" data-signature="',t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"signature"),typeof t===h?t=t.call(e,{hash:{}}):t===f&&(t=_.call(e,"this.signature",{hash:{}})),i+=g(t)+'"\n           data-type="',t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"dataType"),typeof t===h?t=t.call(e,{hash:{}}):t===f&&(t=_.call(e,"this.dataType",{hash:{}})),i+=g(t)+'">\n        <span title="',t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"label"),typeof t===h?t=t.call(e,{hash:{}}):t===f&&(t=_.call(e,"this.label",{hash:{}})),i+=g(t)+'">',
t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"shortLabel"),typeof t===h?t=t.call(e,{hash:{}}):t===f&&(t=_.call(e,"this.shortLabel",{hash:{}})),i+=g(t)+"</span>\n        <br/>\n        ",t=e,t=m.invokePartial(n["common.field_types"],"common.field_types",t,a,n),(t||0===t)&&(i+=t),i+="\n      </div>\n    "}function s(){return'<a href="#" id="prev" title="Previous form"><<</a> &nbsp;&nbsp;&nbsp;'}function o(){return'<a href="#" id="next" title="Next form">>></a>'}a=a||e.helpers,n=n||e.partials;var l,c,d,u,p="",m=this,h="function",_=a.helperMissing,f=void 0,g=this.escapeExpression;return p+='<div class="clearfix panel">\n\n  <div class="info" style="font-weight: bold;">\n    ',l="mm_map_form_title",d=a.intl,c=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),l=typeof c===h?c.call(t,l,{hash:{}}):c===f?_.call(t,"intl",l,{hash:{}}):c,p+=g(l)+'\n    <a href="https://dnt.abine.com/#/help/mapform" target="newtab">',l="mm_map_form_title_more_info",d=a.intl,c=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),l=typeof c===h?c.call(t,l,{hash:{}}):c===f?_.call(t,"intl",l,{hash:{}}):c,p+=g(l)+'</a>\n  </div>\n\n  <div class="fieldSet" style="margin-top: 5px;">',l="mm_map_form_type",d=a.intl,c=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),l=typeof c===h?c.call(t,l,{hash:{}}):c===f?_.call(t,"intl",l,{hash:{}}):c,p+=g(l)+"<br/>\n    ",l=t,l=m.invokePartial(n["common.form_types"],"common.form_types",l,a,n),(l||0===l)&&(p+=l),p+='\n  </div>\n\n  <div style="margin: 5px 0;font-weight: bold;">',l="mm_map_form_fields",d=a.intl,c=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),l=typeof c===h?c.call(t,l,{hash:{}}):c===f?_.call(t,"intl",l,{hash:{}}):c,p+=g(l)+"</div>\n  <div>",l="mm_map_field_instructions",d=a.intl,c=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),l=typeof c===h?c.call(t,l,{hash:{}}):c===f?_.call(t,"intl",l,{hash:{}}):c,p+=g(l)+'</div>\n  <div class="clearfix" style="max-height: 300px;overflow: scroll;padding-left: 10px;margin-right: 5px;border: 1px solid #fafafa">\n    ',d=a.fields,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"fields"),c=a.each,u=m.program(1,r,i),u.hash={},u.fn=u,u.inverse=m.noop,l=c.call(t,l,u),(l||0===l)&&(p+=l),p+='\n    <br/><br/><br/><br/><br/><br/><br/>\n  </div>\n  <div class="fieldSet clearfix error" style="margin: 5px;text-align: center;color: red;display: none;"></div>\n  <div class="fieldSet clearfix" style="margin: 5px;">\n    <div style="float:left">\n      ',d=a.prev,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"prev"),c=a["if"],u=m.program(3,s,i),u.hash={},u.fn=u,u.inverse=m.noop,l=c.call(t,l,u),(l||0===l)&&(p+=l),p+="\n      ",d=a.next,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"next"),c=a["if"],u=m.program(5,o,i),u.hash={},u.fn=u,u.inverse=m.noop,l=c.call(t,l,u),(l||0===l)&&(p+=l),p+='\n    </div>\n    <div style="float:right;">\n      <div class="btn btn-primary save" style="margin-right:5px;">',l="mm_map_form_save",d=a.intl,c=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),l=typeof c===h?c.call(t,l,{hash:{}}):c===f?_.call(t,"intl",l,{hash:{}}):c,p+=g(l)+'</div>\n      <div class="btn cancel">',l="mm_map_form_cancel",d=a.intl,c=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),l=typeof c===h?c.call(t,l,{hash:{}}):c===f?_.call(t,"intl",l,{hash:{}}):c,p+=g(l)+'</div>\n    </div>\n  </div>\n\n\n  <div class="header" style="clear:both;">\n    <div class="logo-link">\n      <img class="logo" height="16px" width="17px" src="',l="/pages/images/dnt-ui-header-logo.png",d=a.assetUrl,c=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),l=typeof c===h?c.call(t,l,{hash:{}}):c===f?_.call(t,"assetUrl",l,{hash:{}}):c,p+=g(l)+'"/>\n      <span class="boldFont">Blur</span>\n    </div>\n    <div class="links-wrapper">\n      <div class="links close-link">\n        <img id="close" class="header-icon" src="',l="/pages/images/dnt-ui-header-close.png",d=a.assetUrl,c=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),l=typeof c===h?c.call(t,l,{hash:{}}):c===f?_.call(t,"assetUrl",l,{hash:{}}):c,p+=g(l)+'">\n      </div>\n      <div class="links help-link">\n        <img class="header-icon" src="',l="/pages/images/dnt-ui-header-help.png",d=a.assetUrl,c=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),l=typeof c===h?c.call(t,l,{hash:{}}):c===f?_.call(t,"assetUrl",l,{hash:{}}):c,p+=g(l)+'">\n      </div>\n    </div>\n  </div>\n\n</div>'}),ABINE_DNTME.CompiledTemplates.mapform_helper_panel}),ABINE_DNTME.define("abine/views/mapFormPanel",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/contentMessenger","abine/proxies"],function(e,t,a,n,i,r,s,o){var l=i.extend({templateName:"mapform_helper_panel",events:{"click .help-link":"openHelp","click .logo-link":"openHelp","click .close-link":"logClose","change #formType":"formTypeChanged","click #prev":"previousForm","click #next":"nextForm","click .save":"save","click .cancel":"cancel"},formTypeChanged:function(){var a=this.$("#formType").val(),n={loginForm:["person-grp","security-grp","combined-grp","phone-grp","card-grp","address-grp","date-grp"],registrationForm:["person-grp","security-grp","combined-grp","date-grp","phone-grp","address-grp","card-grp"],checkoutForm:["card-grp","address-grp","phone-grp","person-grp","security-grp","combined-grp","date-grp"],changePasswordForm:["security-grp","person-grp","combined-grp","date-grp","phone-grp","address-grp","card-grp"],"default":["person-grp","security-grp","combined-grp","phone-grp","card-grp","address-grp","date-grp"]},i=this.$(".fieldTypes");e.each(i,function(i){var r=t(i).val(),s=t(".start",i),o=n["default"];a in n&&(o=n[a]),e.each(o,function(a){var n=t("."+a,i);e.each(n,function(e){t(e).insertAfter(s),s=e})}),t(i).val(r)}),this.$("select.fieldTypes").chosen("destroy").chosen()},logClose:function(){this.updatePanelActivity("closed",this.panelId),this.closePanel()},cancel:function(){this.updatePanelActivity("closed",this.panelId),this.closePanel()},openHelp:function(e){return!t(e.target).hasClass("num-trackers")&&(o.webapp.openHelp("/email"),void this.closePanel())},save:function(a){a.preventDefault(),this.$(".error").hide();var n=this.$("#formType").val();if(""==n)return this.$("#formType")[0].scrollIntoView(),void this.$(".error").show();var i={},r=!1,s=0,o=0;if(this.$(".field").each(e.bind(function(e,a){if(!r){var l=t(a).data("signature"),c=t("select",a).val();if(""==c&&(c=null),!c&&"ignoreForm"!=n)return this.$(".error").text("Please set type for all fields.").show(),r=!0,this.$("select",a)[0].scrollIntoView(),void this.trigger("resize");c.match(/financial/)&&o++,c.match(/postal|city|state|country/i)&&s++,i[l]=c}},this)),!r){if("checkoutForm"==n&&s<3&&o<3)return this.$(".error").text("Checkout forms should have address and/or credit card fields.").show(),void this.trigger("resize");this.fillFields("mapForm",{formType:n,fieldTypes:i,mappingChanged:!0}),this.updatePanelActivity("masked",this.panelId),this.closePanel()}},setupModel:function(){var e=this.options.forms||[];this.forms=e,this.curIdx=e.indexOf(this.options.formId),this.model={iconClick:!!this.options.iconClick,formType:this.options.formType,fields:this.options.fields,prev:this.curIdx>0,next:this.curIdx+1<e.length}},previousForm:function(e){e.preventDefault(),this.options.contentManager.showMapForm({formId:this.forms[this.curIdx-1],forms:this.forms}),this.closePanel()},nextForm:function(e){e.preventDefault(),this.options.contentManager.showMapForm({formId:this.forms[this.curIdx+1],forms:this.forms}),this.closePanel()},afterInitialize:function(){this.fieldId=this.options.fieldId,this.strategyId=this.options.strategyId,this.contentManager=this.options.contentManager,this.messenger=this.options.contentManager.messenger,this.numMenuOptions=3,this.applyFadingStyle(),this.fadeIn(),this.panelId=9000011,this.updatePanelActivity("impression",this.panelId),this.setupModel();var a=this.contentManager.preferences.getPref("mapping:mapper");this.options.fields;this.on("render",e.bind(function(){var i=new n.MappedFormCollection({messenger:this.contentManager.messenger});i.fetchLocalAllByDomain(this.options.domain,e.bind(function(){var n=this.model.formType,r=this.options.formSignature;if(a){var s=e.find(i.models,function(e){return e.get("signature")==r});s||(this.$(".field").each(function(e,a){t(a).data("type","")}),n="")}this.$("#formType").val(n);var o=this;this.$(".field").hover(function(){var e=t(this).data("signature");o.addFieldBorder(e)},function(){var e=t(this).data("signature");o.removeFieldBorder(e)}),this.$(".field").each(function(e,a){var n=t(a).data("type");t("select",a).val(n)}),this.formTypeChanged()},this))},this)),this.render()}});return l}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.mapreview_helper_panel=e.template(function(e,t,a,n,i){function r(e,t){var n,i,r="";return r+="\n        <option ",h=a.verified,n=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"verified"),i=a["if"],_=g.program(2,s,t),_.hash={},_.fn=_,_.inverse=g.noop,n=i.call(e,n,_),(n||0===n)&&(r+=n),r+=' value="',h=a.mapping_signature,n=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"mapping_signature"),typeof n===y?n=n.call(e,{hash:{}}):n===v&&(n=b.call(e,"mapping_signature",{hash:{}})),r+=w(n)+'">\n          ',h=a.created_at,n=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"created_at"),typeof n===y?n=n.call(e,{hash:{}}):n===v&&(n=b.call(e,"created_at",{hash:{}})),r+=w(n)+" - ",h=a.num_mappers,n=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"num_mappers"),typeof n===y?n=n.call(e,{hash:{}}):n===v&&(n=b.call(e,"num_mappers",{hash:{}})),r+=w(n)+" mapper(s) ",h=a.verified,n=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"verified"),i=a["if"],_=g.program(4,o,t),_.hash={},_.fn=_,_.inverse=g.noop,n=i.call(e,n,_),(n||0===n)&&(r+=n),r+="\n          ",h=a.self,n=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"self"),i=a["if"],_=g.program(6,l,t),_.hash={},_.fn=_,_.inverse=g.noop,n=i.call(e,n,_),(n||0===n)&&(r+=n),r+="\n        </option>\n      "}function s(){return'style="color:green !important;font-weight: bold !important;"'}function o(){return" - approved"}function l(){return" - (you) "}function c(e){var t,i="";return i+='\n      <div class="field" style="margin-bottom: 5px;" data-signature="',t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"signature"),typeof t===y?t=t.call(e,{hash:{}}):t===v&&(t=b.call(e,"this.signature",{hash:{}})),i+=w(t)+'"\n           data-type="',t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"dataType"),typeof t===y?t=t.call(e,{hash:{}}):t===v&&(t=b.call(e,"this.dataType",{hash:{}})),i+=w(t)+'">\n        <span title="',t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"label"),typeof t===y?t=t.call(e,{hash:{}}):t===v&&(t=b.call(e,"this.label",{hash:{}})),i+=w(t)+'">',t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"shortLabel"),typeof t===y?t=t.call(e,{hash:{}}):t===v&&(t=b.call(e,"this.shortLabel",{hash:{}})),i+=w(t)+"</span>\n        <br/>\n        ",t=e,t=g.invokePartial(n["common.field_types"],"common.field_types",t,a,n),(t||0===t)&&(i+=t),i+="\n      </div>\n    "}function d(){return'<a href="#" id="prev" title="Previous form"><<</a> &nbsp;&nbsp;&nbsp;'}function u(){return'<a href="#" id="next" title="Next form">>></a>'}a=a||e.helpers,n=n||e.partials;var p,m,h,_,f="",g=this,y="function",b=a.helperMissing,v=void 0,w=this.escapeExpression;return f+='<div class="clearfix panel">\n\n  <div class="info" style="font-weight: bold;">Review Form Mapping</div>\n\n  <div class="fieldSet" style="margin-top: 5px;">Select Mapping:<br/>\n    <select id="mapping">\n      <option value="">- create new -</option>\n      ',h=a.mappings,p=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"mappings"),m=a.each,_=g.program(1,r,i),_.hash={},_.fn=_,_.inverse=g.noop,p=m.call(t,p,_),(p||0===p)&&(f+=p),f+='\n    </select></div>\n\n  <div class="fieldSet" style="margin-top: 5px;">',p="mm_map_form_type",h=a.intl,m=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),p=typeof m===y?m.call(t,p,{hash:{}}):m===v?b.call(t,"intl",p,{hash:{}}):m,f+=w(p)+"<br/>\n    ",p=t,p=g.invokePartial(n["common.form_types"],"common.form_types",p,a,n),(p||0===p)&&(f+=p),f+='\n  </div>\n\n  <div style="margin: 5px 0;font-weight: bold;">',p="mm_map_form_fields",h=a.intl,m=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),p=typeof m===y?m.call(t,p,{hash:{}}):m===v?b.call(t,"intl",p,{hash:{}}):m,f+=w(p)+'</div>\n  <div class="clearfix" style="max-height: 300px;overflow: scroll;padding-left: 10px;">\n    ',h=a.fields,p=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"fields"),m=a.each,_=g.program(8,c,i),_.hash={},_.fn=_,_.inverse=g.noop,p=m.call(t,p,_),(p||0===p)&&(f+=p),f+='\n    <br/><br/><br/><br/><br/><br/><br/>\n  </div>\n  <div class="fieldSet clearfix" style="margin: 5px;">\n    <div style="float:left">\n      ',h=a.prev,p=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"prev"),m=a["if"],_=g.program(10,d,i),_.hash={},_.fn=_,_.inverse=g.noop,p=m.call(t,p,_),(p||0===p)&&(f+=p),f+="\n      ",h=a.next,p=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"next"),m=a["if"],_=g.program(12,u,i),_.hash={},_.fn=_,_.inverse=g.noop,p=m.call(t,p,_),(p||0===p)&&(f+=p),f+='\n    </div>\n    <div style="float:right;">\n      <div class="btn btn-primary save" style="margin-right:5px;">Save and Approve</div>\n      <div class="btn cancel">',p="mm_map_form_cancel",h=a.intl,m=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),p=typeof m===y?m.call(t,p,{hash:{}}):m===v?b.call(t,"intl",p,{hash:{}}):m,f+=w(p)+'</div>\n    </div>\n  </div>\n\n  <div class="header" style="clear:both;">\n    <div class="logo-link">\n      <img class="logo" height="16px" width="17px" src="',p="/pages/images/dnt-ui-header-logo.png",h=a.assetUrl,m=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),p=typeof m===y?m.call(t,p,{hash:{}}):m===v?b.call(t,"assetUrl",p,{hash:{}}):m,f+=w(p)+'"/>\n      <span class="boldFont">Blur</span>\n    </div>\n    <div class="links-wrapper">\n      <div class="links close-link">\n        <img id="close" class="header-icon" src="',p="/pages/images/dnt-ui-header-close.png",h=a.assetUrl,m=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),p=typeof m===y?m.call(t,p,{hash:{}}):m===v?b.call(t,"assetUrl",p,{hash:{}}):m,f+=w(p)+'">\n      </div>\n      <div class="links help-link">\n        <img class="header-icon" src="',p="/pages/images/dnt-ui-header-help.png",h=a.assetUrl,m=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),p=typeof m===y?m.call(t,p,{hash:{}}):m===v?b.call(t,"assetUrl",p,{hash:{}}):m,f+=w(p)+'">\n      </div>\n    </div>\n  </div>\n\n</div>'}),ABINE_DNTME.CompiledTemplates.mapreview_helper_panel}),ABINE_DNTME.define("abine/views/mapReviewPanel",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/contentMessenger","abine/proxies","abine/views/mapFormPanel"],function(e,t,a,n,i,r,s,o,l){var c=i.extend({templateName:"mapreview_helper_panel",events:{"click .help-link":"openHelp","click .logo-link":"openHelp","click .close-link":"logClose","click .save":"save","click #prev":"previousForm","click #next":"nextForm","click .cancel":"cancel","change #formType":"formTypeChanged","change #mapping":"mappingChanged"},logClose:function(){this.updatePanelActivity("closed",this.panelId),this.closePanel()},cancel:function(){this.updatePanelActivity("closed",this.panelId),this.closePanel()},openHelp:function(e){return!t(e.target).hasClass("num-trackers")&&(o.webapp.openHelp("/email"),void this.closePanel())},save:function(a){a.preventDefault();var n=(this.options.contentManager,this.fields,this.$("#formType").val()),i={};this.$(".field").each(e.bind(function(e,a){var n=t(a).data("signature"),r=t("select",a).val();""==r&&(r=null),i[n]=r},this)),this.fillFields("mapForm",{formType:n,fieldTypes:i,mappingChanged:!0,verified:!0}),this.updatePanelActivity("masked",this.panelId),this.closePanel()},setupModel:function(){var e=this.options.forms||[];this.forms=e,this.curIdx=e.indexOf(this.options.formId),this.model={iconClick:!!this.options.iconClick,formType:this.options.formType,fields:this.options.fields,prev:this.curIdx>0,next:this.curIdx+1<e.length,mappings:this.mappings}},previousForm:function(e){e.preventDefault(),this.options.contentManager.showMapForm({formId:this.forms[this.curIdx-1],forms:this.forms}),this.closePanel()},nextForm:function(e){e.preventDefault(),this.options.contentManager.showMapForm({formId:this.forms[this.curIdx+1],forms:this.forms}),this.closePanel()},mappingChanged:function(){var a=this.$("#mapping")[0].selectedIndex;if(a--,a>=0){var n=this.model.mappings[a];this.$("#formType").val(n.formType),this.$(".field").each(function(a,i){var r=t(i).data("signature"),s=e.find(n.fields,function(e){return e.signature==r});t("select",i)[0].selectedIndex=0,s&&t("select",i).val(s.dataType)})}else{this.fields;this.$("#formType").val(this.model.formType),this.$(".field").each(function(e,a){var n=t(a).data("type");t("select",a).val(n)})}this.formTypeChanged()},afterInitialize:function(){this.fieldId=this.options.fieldId,this.strategyId=this.options.strategyId,this.mappings=this.options.mappings,this.contentManager=this.options.contentManager,this.messenger=this.options.contentManager.messenger,this.numMenuOptions=3,this.applyFadingStyle(),this.fadeIn(),this.setupModel(),this.panelId=9000011,this.updatePanelActivity("impression",this.panelId);var a=this;this.on("render",e.bind(function(){this.$(".field").hover(function(){var e=t(this).data("signature");a.addFieldBorder(e)},function(){var e=t(this).data("signature");a.removeFieldBorder(e)}),this.model.mappings.length>0&&(this.$("#mapping")[0].selectedIndex=1),this.mappingChanged()},this)),this.render()}});return c.prototype.formTypeChanged=l.prototype.formTypeChanged,c}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.identity_helper_panel=e.template(function(e,t,a,n,i){function r(e){var t,n,i,r="";return r+='\n      <a href="#" class="mmKeyOption identity" data-id="',t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof t===g?t=t.call(e,{hash:{}}):t===b&&(t=y.call(e,"this.id",{hash:{}})),r+=v(t)+'">\n        <div class="element" id="mask">\n        <span class="panelLeft" title="',t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"label"),typeof t===g?t=t.call(e,{hash:{}}):t===b&&(t=y.call(e,"this.label",{hash:{}})),r+=v(t)+'">\n            <img class="iconPos" src="',t="/pages/images/2015panels/identity_green.png",m=a.assetUrl,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===g?n.call(e,t,{hash:{}}):n===b?y.call(e,"assetUrl",t,{hash:{}}):n,r+=v(t)+'"\n                 style="width:42px;height:21px;"/>\n          ',t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"label"),n="mm_identity_helper_use",m=a.intl,i=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===g?i.call(e,n,t,{hash:{}}):i===b?y.call(e,"intl",n,t,{hash:{}}):i,r+=v(t)+'\n        </span>\n        <span class="panelRight">\n          <img class="loading" style="display:none;" src="',t="/pages/images/ajax_loader.gif",m=a.assetUrl,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===g?n.call(e,t,{hash:{}}):n===b?y.call(e,"assetUrl",t,{hash:{}}):n,r+=v(t)+'"/>\n        </span>\n        </div>\n      </a>\n    '}function s(e){var t,n,i="";return i+="\n          ",t="mm_identity_helper_customize",m=a.intl,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===g?n.call(e,t,{hash:{}}):n===b?y.call(e,"intl",t,{hash:{}}):n,i+=v(t)+"\n        "}function o(e){var t,n,i="";return i+="\n          <b>",t="mm_identity_helper_customize_pre_setup_1",m=a.intl,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===g?n.call(e,t,{hash:{}}):n===b?y.call(e,"intl",t,{hash:{}}):n,i+=v(t)+"</b> ",t="mm_identity_helper_customize_pre_setup_2",m=a.intl,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===g?n.call(e,t,{hash:{}}):n===b?y.call(e,"intl",t,{hash:{}}):n,i+=v(t)+"\n        "}function l(e,t){var n,i,r="";return r+="\n              ",m=a.masked,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"masked"),i=a.unless,h=f.program(8,c,t),h.hash={},h.fn=h,h.inverse=f.noop,n=i.call(e,n,h),(n||0===n)&&(r+=n),r+="\n            "}function c(e){var t,n="";return n+='\n              <option value="',m=a.id,t=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof t===g?t=t.call(e,{hash:{}}):t===b&&(t=y.call(e,"id",{hash:{}})),n+=v(t)+'">',m=a.label,t=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"label"),typeof t===g?t=t.call(e,{hash:{}}):t===b&&(t=y.call(e,"label",{hash:{}})),n+=v(t)+"</option>\n              "}function d(e){var t,n="";return n+='\n              <option value="',m=a.email,t=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"email"),typeof t===g?t=t.call(e,{hash:{}}):t===b&&(t=y.call(e,"email",{hash:{}})),n+=v(t)+'">',m=a.email,t=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"email"),typeof t===g?t=t.call(e,{hash:{}}):t===b&&(t=y.call(e,"email",{hash:{}})),n+=v(t)+"</option>\n            "}a=a||e.helpers,n=n||e.partials;var u,p,m,h,_="",f=this,g="function",y=a.helperMissing,b=void 0,v=this.escapeExpression;return _+='<div class="newpanel">\n  <div class="left-panel">\n      <span class="errorBtn disabled errorReportLink" style="display:none;cursor:pointer;"><div class="element">\n          <span class="panelLeft">\n              <a>',u="mm_email_helper_serverIsDown",m=a.intl,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),u=typeof p===g?p.call(t,u,{hash:{}}):p===b?y.call(t,"intl",u,{hash:{}}):p,_+=v(u)+'</a>\n          </span>\n          <span class="panelRight">\n              <a>',u="mm_email_helper_tryAgainLater",m=a.intl,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),u=typeof p===g?p.call(t,u,{hash:{}}):p===b?y.call(t,"intl",u,{hash:{}}):p,_+=v(u)+"</a>\n          </span>\n      </div></span>\n    ",m=a.identities,u=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"identities"),p=a.each,h=f.program(1,r,i),h.hash={},h.fn=h,h.inverse=f.noop,u=p.call(t,u,h),(u||0===u)&&(_+=u),_+='\n    <a href="#" class="mmKeyOption customize">\n      <div class="element" id="mask">\n      <span class="panelLeft">\n          <img class="iconPos" src="',u="/pages/images/2015panels/identity_green.png",m=a.assetUrl,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),u=typeof p===g?p.call(t,u,{hash:{}}):p===b?y.call(t,"assetUrl",u,{hash:{}}):p,_+=v(u)+'"\n               style="width:42px;height:21px;"/>\n        ',m=a.hasIdentities,u=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"hasIdentities"),p=a["if"],h=f.program(3,s,i),h.hash={},h.fn=h,h.inverse=f.program(5,o,i),u=p.call(t,u,h),(u||0===u)&&(_+=u),_+='\n      </span>\n      </div>\n    </a>\n\n    <div class="customizeDiv" style="display: none;">\n      <div class="identity-header">',u="mm_identity_helper_customize_title",m=a.intl,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),u=typeof p===g?p.call(t,u,{hash:{}}):p===b?y.call(t,"intl",u,{hash:{}}):p,_+=v(u)+'</div>\n      <div style="display:inline-block;vertical-align:top;padding-left: 15px;">\n        <div class="fieldset">\n          <label class="small"><input type="checkbox" id="has_address" value="1" checked/> <span>',u="mm_identity_helper_address",m=a.intl,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),u=typeof p===g?p.call(t,u,{hash:{}}):p===b?y.call(t,"intl",u,{hash:{}}):p,_+=v(u)+'</span></label>\n          <select id="address_id">\n            ',m=a.addresses,u=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"addresses"),p=a.each,h=f.program(7,l,i),h.hash={},h.fn=h,h.inverse=f.noop,u=p.call(t,u,h),(u||0===u)&&(_+=u),_+='\n          </select>\n        </div>\n        <div class="fieldset">\n          <label class="small"><input type="checkbox" id="has_email" value="1" checked/> <span>',u="mm_identity_helper_email",m=a.intl,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),u=typeof p===g?p.call(t,u,{hash:{}}):p===b?y.call(t,"intl",u,{hash:{}}):p,_+=v(u)+'</span></label>\n          <select id="email">\n            <option value="mask">',u="mm_identity_helper_email_mask",m=a.intl,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),u=typeof p===g?p.call(t,u,{hash:{}}):p===b?y.call(t,"intl",u,{hash:{}}):p,_+=v(u)+"</option>\n            ",m=a.email,u=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"email"),p=a["if"],h=f.program(10,d,i),h.hash={},h.fn=h,h.inverse=f.noop,u=p.call(t,u,h),(u||0===u)&&(_+=u),_+='\n          </select>\n        </div>\n        <div class="fieldset">\n          <label class="small"><input type="checkbox" id="has_phone" value="1" checked/> <span>',u="mm_identity_helper_phone",m=a.intl,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),u=typeof p===g?p.call(t,u,{hash:{}}):p===b?y.call(t,"intl",u,{hash:{}}):p,_+=v(u)+'</span></label>\n          <select id="phone">\n            <option value="mask">',u="mm_identity_helper_phone_mask",m=a.intl,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),u=typeof p===g?p.call(t,u,{hash:{}}):p===b?y.call(t,"intl",u,{hash:{}}):p,_+=v(u)+'</option>\n            <option value="real">',u="mm_identity_helper_phone_real",m=a.intl,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),u=typeof p===g?p.call(t,u,{hash:{}}):p===b?y.call(t,"intl",u,{hash:{}}):p,_+=v(u)+'</option>\n          </select>\n        </div>\n        <div class="fieldset">\n          <label class="full"><input type="checkbox" id="password" value="1" checked/> ',u="mm_identity_helper_password",m=a.intl,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),u=typeof p===g?p.call(t,u,{hash:{}}):p===b?y.call(t,"intl",u,{hash:{}}):p,_+=v(u)+'</label>\n        </div>\n        <div class="fieldset">\n          <label class="full"><input type="checkbox" id="card" value="1" checked/> ',u="mm_identity_helper_card",m=a.intl,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),u=typeof p===g?p.call(t,u,{hash:{}}):p===b?y.call(t,"intl",u,{hash:{}}):p,_+=v(u)+'</label>\n        </div>\n        <div class="fieldset">\n          <label class="small"><input type="checkbox" id="save" value="1" checked /> ',u="mm_identity_helper_save_identity",m=a.intl,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),u=typeof p===g?p.call(t,u,{hash:{}}):p===b?y.call(t,"intl",u,{hash:{}}):p,_+=v(u)+'</label>\n          <input type="text" id="idName" value="',m=a.uniqueName,u=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"uniqueName"),typeof u===g?u=u.call(t,{hash:{}}):u===b&&(u=y.call(t,"uniqueName",{hash:{}})),_+=v(u)+'" placeholder="',m=a.uniqueName,u=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"uniqueName"),typeof u===g?u=u.call(t,{hash:{}}):u===b&&(u=y.call(t,"uniqueName",{hash:{}})),_+=v(u)+'"/>\n        </div>\n      </div>\n      <div class="alert-error" style="display: none">',u="mm_identity_helper_save_identity_error",m=a.intl,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),u=typeof p===g?p.call(t,u,{hash:{}}):p===b?y.call(t,"intl",u,{hash:{}}):p,_+=v(u)+'</div>\n      <br/>\n      <input type="button" class="btn btn-primary fillCustomize" value="',u="mm_identity_helper_autofill_form",m=a.intl,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),u=typeof p===g?p.call(t,u,{hash:{}}):p===b?y.call(t,"intl",u,{hash:{}}):p,_+=v(u)+'"/>\n      <img class="loading" style="display:none;" src="',u="/pages/images/ajax_loader.gif",m=a.assetUrl,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),u=typeof p===g?p.call(t,u,{hash:{}}):p===b?y.call(t,"assetUrl",u,{hash:{}}):p,_+=v(u)+'"/>\n      <a href="#" id="more">',u="mm_identity_helper_more_options",m=a.intl,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),u=typeof p===g?p.call(t,u,{hash:{}}):p===b?y.call(t,"intl",u,{hash:{}}):p,_+=v(u)+"</a>\n    </div>\n    ",u=t,u=f.invokePartial(n["common.auto_fill_with"],"common.auto_fill_with",u,a,n),(u||0===u)&&(_+=u),_+="\n  </div>\n  ",u=t,u=f.invokePartial(n["common.header"],"common.header",u,a,n),(u||0===u)&&(_+=u),_+="\n</div>"}),ABINE_DNTME.CompiledTemplates.identity_helper_panel}),ABINE_DNTME.define("abine/views/identityHelperPanel",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/intl","abine/proxies","abine/password"],function(e,t,a,n,i,r,s,o){function l(){for(var e=[],t="0123456789ABCDEF",a=0;a<32;a++)e[a]=t.substr(Math.floor(16*Math.random()),1);e[12]="4",e[16]=t.substr(3&e[16]|8,1);var n=e.join("");return n}var c=i.extend({templateName:"identity_helper_panel",events:{"click a.identity":"fillWithIdentity","click .help-link":"openHelp","click a.customize":"customize","change select":"valueChanged","click .errorReportLink":"makeErrorReport","change #idName":"valueChanged","click #more":"moreOptions","click .fillCustomize":"fillCustomize"},makeErrorReport:function(){s.webapp.openHelp(""),this.closePanel()},openHelp:function(){s.webapp.openHelp("/faq/guides-autofillIdentities"),this.closePanel()},moreOptions:function(){s.webapp.openPage("#/client/identities/add"),this.closePanel()},valueChanged:function(e){t("input[type=checkbox]",t(e.target).parent()).prop("checked",!0)},afterInitialize:function(){this.fieldId=this.options.fieldId,this.panelId=7000061,this.updatePanelActivity("impression",this.panelId,this.fieldId,!1),this.bindBaseEvents(),this.applyFadingStyle(),this.fadeIn(),this.contentManager=this.options.contentManager,this.messenger=this.options.contentManager.messenger,this.model={panelType:"identity",identities:new n.IdentityCollection,addresses:new n.AddressCollection,emails:[],phones:[],mapper:!!this.contentManager.preferences.getPref("mapping:mapper"),showMapper:this.contentManager.preferences.isMapper(),show_settings:!this.contentManager.preferences.getPref("identity-settings-seen")},this.model.tabData=new n.TabData({messenger:this.options.messenger}),this.model.tabData.fetchTrackers({success:e.bind(function(){var t=new n.ShieldedEmailCollection;t.fetchAll({success:e.bind(function(){t.length>0&&(this.primaryEmail=t.at(0),this.model.email=this.primaryEmail.get("email")),this.model.addresses.fetchAll({success:e.bind(function(){this.model.addresses.each(function(e){"Masked Card"==e.get("label")&&e.set("masked",!0)}),this.model.identities.fetchAll({success:e.bind(function(){this.numMenuOptions=this.model.identities.length,this.model.hasIdentities=this.numMenuOptions>0;for(var t=0;t<this.numMenuOptions;t++)this.bind("enter"+t,function(e,t){this.fillWithIdentity(e,t)},this);for(var a=r.getText("mm_identity_helper_save_identity_placeholder")+" ",n=1;;){var i=e.find(this.model.identities.models,function(e){return e.get("label").toLowerCase()==(a+n).toLowerCase()});if(!i)break;n++}this.model.uniqueName=a+n,this.render()},this)})},this)})},this)})},this)})},customize:function(){this.ignoreExplicitClose=!0,this.ignoreBlur(!0),this.$(".customizeDiv").show(),this.$(".mmKeyOption").hide(),this.autoResize()},fillCustomize:function(){function t(){var e=this.$("a.customize");e.data("id",a.id),i.fillWithIdentity({target:e[0]},null,a)}var a={};this.$("#has_address")[0].checked&&(a.address_id=this.$("#address_id").val(),a.address=e.find(this.model.addresses.models,function(e){return e.id==a.address_id}).toJSON()),this.$("#has_email")[0].checked?a.email=this.$("#email").val():a.email="none",this.$("#has_phone")[0].checked?a.phone=this.$("#phone").val():a.phone="none",this.$("#password")[0].checked&&(a.password="strong"),this.$("#card")[0].checked&&(a.card="mask"),a=new n.Identity(a);var i=this;if(this.$(".alert-error").hide(),this.$("#save")[0].checked){if(""==this.$("#idName").val())return this.$(".alert-error").show(),void this.autoResize();this.$(".customizeDiv .loading").show(),a.set("label",this.$("#idName").val()),a.save({},{success:t})}else a.id=l(),t()},fillWithIdentity:function(a,i,r){a&&a.preventDefault&&a.preventDefault();var s;if(i||0==i){var l=this.getKeyOptions();s=t(l[i]).data("id")}else s=t(a.target).closest("a").data("id");r=r||e.find(this.model.identities.models,function(e){return e.get("id")==s}),t("a.mmKeyOption",this.el).each(function(e,a){t(a).data("id")==r.id&&t("img.loading",a).show()}),r=r.toJSON();var c=this;e.async.series([function(t){if("mask"==r.email){var a=e.find(c.options.allDataTypes,function(e){return e.match(/email/i)});if(a&&c.primaryEmail){delete r.email;var n=c.primaryEmail.generateDisposable(c.options.domain,"identity-panel");return void n.save({},{success:function(){r.masked_email=n.getAddress(),t()},error:function(){c.$(".errorBtn").show(),c.$(".loading").hide(),c.autoResize()}})}delete r.email}else r.email&&"none"!=r.email||delete r.email;t()},function(e){if("mask"==r.phone){var t=new n.ShieldedPhoneCollection;return void t.fetchAll({success:function(){if(t.length>0&&t.at(0).get("country_code")){var a=t.at(0),n=a.generateDisposable();
n.save({filling:!0},{success:function(){r.phone=n.toJSON(),e()},error:function(){e()}})}else delete r.phone,e()}})}if("real"==r.phone){var t=new n.ShieldedPhoneCollection;return void t.fetchAll({success:function(){t.length>0&&t.at(0).get("country_code")?r.phone=t.at(0).toJSON():delete r.phone,e()}})}if(r.phone&&"none"!=r.phone){var a=r.phone.split(" ");r.phone={country_code:a[0].substr(1),number:a[1]}}else delete r.phone;e()},function(e){"strong"==r.password?r.password=o.generateNoSpecialCharsPassword():delete r.password,e()}],function(){r.address?r.address&&(r.first_name||r.last_name||(r.address.first_name&&(r.first_name=r.address.first_name),r.address.last_name&&(r.last_name=r.address.last_name)),delete r.address.first_name,delete r.address.last_name):delete r.address,r.card&&"none"!=r.card||delete r.card,c.fillFields("identity",r,"identity"),c.updatePanelActivity("masked",c.panelId,c.fieldId,!1),c.closePanel()})}});return c}),ABINE_DNTME.require(["wycats/handlebars"],function(e){e.registerPartial("notification_helper.card",e.template(function(e,t,a){a=a||e.helpers;var n,i,r,s,o,l="",c="function",d=a.helperMissing,u=void 0,p=this.escapeExpression;return l+='<div class="body-notification outerCard opaque" data-id="',o=a.id,n=o||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"id"),typeof n===c?n=n.call(t,{hash:{}}):n===u&&(n=d.call(t,"id",{hash:{}})),l+=p(n)+'" data-pos="',o=a.card_position,n=o||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"card_position"),typeof n===c?n=n.call(t,{hash:{}}):n===u&&(n=d.call(t,"card_position",{hash:{}})),l+=p(n)+'">\n  <div class="creditcardfont" style="color:rgb(80,80,80);width:336px;margin:auto;">\n    <div class="innerCard set-brand ',o=a.brand,n=o||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"brand"),typeof n===c?n=n.call(t,{hash:{}}):n===u&&(n=d.call(t,"brand",{hash:{}})),l+=p(n)+'"\n         style="background-image: url(',n=".png",o=a.brand,i=o||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"brand"),r="pages/images/credit_cards/",o=a.assetUrl,s=o||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),n=typeof s===c?s.call(t,r,i,n,{hash:{}}):s===u?d.call(t,"assetUrl",r,i,n,{hash:{}}):s,l+=p(n)+');">\n\n      <div class="cardNumber">',o=a.getSeparatedCardNumber,n=o||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getSeparatedCardNumber"),typeof n===c?n=n.call(t,{hash:{}}):n===u&&(n=d.call(t,"getSeparatedCardNumber",{hash:{}})),l+=p(n)+'</div>\n      <div class="cardExpiration">',n="mm_payment_helper_expDate",o=a.intl,i=o||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===c?i.call(t,n,{hash:{}}):i===u?d.call(t,"intl",n,{hash:{}}):i,l+=p(n)+' <span class="expiration">',o=a.getExpiry,n=o||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getExpiry"),typeof n===c?n=n.call(t,{hash:{}}):n===u&&(n=d.call(t,"getExpiry",{hash:{}})),l+=p(n)+'</span></div>\n      <div class="cardCVC">',n="mm_payment_helper_cvc",o=a.intl,i=o||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===c?i.call(t,n,{hash:{}}):i===u?d.call(t,"intl",n,{hash:{}}):i,l+=p(n)+' <span class="cvc">',o=a.getCVC,n=o||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getCVC"),typeof n===c?n=n.call(t,{hash:{}}):n===u&&(n=d.call(t,"getCVC",{hash:{}})),l+=p(n)+'</span></div>\n      <div class="cardName">',o=a.first_name,n=o||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"first_name"),typeof n===c?n=n.call(t,{hash:{}}):n===u&&(n=d.call(t,"first_name",{hash:{}})),l+=p(n)+" ",o=a.last_name,n=o||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"last_name"),typeof n===c?n=n.call(t,{hash:{}}):n===u&&(n=d.call(t,"last_name",{hash:{}})),l+=p(n)+"</div>\n    </div>\n  </div>\n</div>"}))}),ABINE_DNTME.require(["wycats/handlebars"],function(e){e.registerPartial("notification_helper.card_actions",e.template(function(e,t,a,n,i){function r(){return"\n       <p>This Masked Card was created using your bank account, so it may take up to 7 business days before\n                you receive a refund after closing this Masked Card.</p>\n     "}function s(e){var t,n="";return n+=", Refund by ",c=a.refundDate,t=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"refundDate"),typeof t===m?t=t.call(e,{hash:{}}):t===_&&(t=h.call(e,"refundDate",{hash:{}})),n+=f(t)}a=a||e.helpers;var o,l,c,d,u="",p=this,m="function",h=a.helperMissing,_=void 0,f=this.escapeExpression;return u+='<div style="height:60px;font-size:12px;" class="actions-short">\n  <div style="float:left;">\n    <div style="text-align:center;">Made a mistake?</div>\n    <div style="text-align:center;padding-bottom:5px;">\n      <input type="button" id="getRefund" class="btn btn-primary" style="text-align:center;font-size:12px"\n             value="Close Card and Get Refund"/>\n    </div>\n  </div>\n  <div style="float:right;">\n    <div style="text-align:center;">Need some help?</div>\n    <div style="text-align:center;padding-bottom:5px;">\n      <input type="button" id="chatNow" class="btn btn-primary" style="text-align:center;font-size:12px"\n             value="Contact Blur Support Team"/>\n    </div>\n  </div>\n</div>\n<div style="font-size:12px;display: none;" class="actions-tall">\n  <div style="clear:both;text-align: left;padding:5px;" class="close-step-1">\n     <p style="font-size:15px;font-weight: bold;">Close Masked Card:</p>\n     <p>This will close your card. You\'ll still be able to view all its history, but the card will no longer be accepted for any transactions.</p>\n     ',c=a.isAch,o=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"isAch"),l=a["if"],d=p.program(1,r,i),d.hash={},d.fn=d,d.inverse=p.noop,o=l.call(t,o,d),(o||0===o)&&(u+=o),u+='\n     <p>Alternatively, you can simply use this Masked Card with a different online merchant (E.g. Amazon, iTunes, Google Play, Uber).</p>\n     <div class="clearfix">\n     <div style="float:left;">\n          <div style="text-align:center;padding-bottom:5px;">\n              <input type="button" id="dontClose" class="btn btn-primary" style="text-align:center;font-size:12px"\n                     value="Nevermind, don\'t close"/>\n          </div>\n      </div>\n      <div style="float:right;">\n          <div style="text-align:center;padding-bottom:5px;">\n              <input type="button" id="confirmCloseCard" class="btn btn-danger" style="text-align:center;font-size:12px"\n                     value="Close Card',c=a.isAch,o=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"isAch"),l=a["if"],d=p.program(3,s,i),d.hash={},d.fn=d,d.inverse=p.noop,o=l.call(t,o,d),(o||0===o)&&(u+=o),u+='"/>\n          </div>\n      </div>\n      </div>\n  </div>\n  <div class="close-step-2" style="display: none">\n      <div style="clear:both;text-align: center;margin-top:10px;">\n        <div style="text-align:center;" class="refund-status"><img class="loading" src="',o="/pages/images/ajax_loader.gif",c=a.assetUrl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),o=typeof l===m?l.call(t,o,{hash:{}}):l===_?h.call(t,"assetUrl",o,{hash:{}}):l,u+=f(o)+'"/>\n            Closing card.  Please wait...</div>\n      </div>\n      <div style="clear:both;margin-top:20px;">\n        <div style="text-align:center;">Need some help?</div>\n        <div style="text-align:center;padding-bottom:5px;">\n          <input type="button" id="chatNow" class="btn btn-primary" style="text-align:center;font-size:12px"\n                 value="Contact Blur Support Team"/>\n        </div>\n      </div>\n  </div>\n</div>'}))}),ABINE_DNTME.require(["wycats/handlebars"],function(e){e.registerPartial("notification_helper.card_address",e.template(function(e,t,a){a=a||e.helpers;var n,i,r,s="",o="function",l=a.helperMissing,c=void 0,d=this.escapeExpression;return s+='<div style="margin: 10px 25px;text-align:center;">\n  <div style="margin:10px 0px 5px 0px;font-size:15;color:#921111;">\n    ',n="mm_payment_helper_help_1_1",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,s+=d(n)+" <b>",n="mm_payment_helper_help_1_2",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,s+=d(n)+'</b>:\n  </div>\n</div>\n<div id="addressAndArrows" style="height:90px;">\n  <div style="float:left;margin-left:20px;margin-top:20px;">\n    <img src="',n="/pages/images/2015panels/arrow_pointing_right.png",r=a.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"assetUrl",n,{hash:{}}):i,s+=d(n)+'"/>\n  </div>\n  <div style="float:left;text-align:center;font-weight:bold;font-size:13pt;line-height:130%;width:250px;">\n    <span style="font-size:12pt;">(',n="mm_notification_helper_anyName",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,s+=d(n)+')</span><br/>\n    280 SUMMER STREET<br/>\n    BOSTON MA 02210\n  </div>\n  <div style="float:left;margin-top:20px;">\n    <img src="',n="/pages/images/2015panels/arrow_pointing_left.png",r=a.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"assetUrl",n,{hash:{}}):i,s+=d(n)+'"/>\n  </div>\n</div>'}))}),ABINE_DNTME.require(["wycats/handlebars"],function(e){e.registerPartial("notification_helper.login_register_form",e.template(function(e,t,a){a=a||e.helpers;var n,i,r,s="",o="function",l=a.helperMissing,c=void 0,d=this.escapeExpression;return s+='<span id="register-dialog" style="display:none;">\n <div class="body-notification"><img src="',n="/images/Icon.png",r=a.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"assetUrl",n,{hash:{}}):i,s+=d(n)+'"/>\n   <span class="signin-content" style="display:none;">',n="mm_notification_helper_login_to_blur",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,s+=d(n)+'</span>\n   <span class="register-content" style="display:none;">',n="mm_notification_helper_finish_blur_setup",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,s+=d(n)+'</span>\n </div>\n  <div class="login_form">\n    <div id="welcome-message" style="margin:0px 35px;">\n      <span class="signin-content"  style="display:none;">',r=a.login_content,n=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"login_content"),r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,s+=d(n)+'</span>\n      <span class="register-content" style="display:none;">',r=a.register_content,n=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"register_content"),r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,s+=d(n)+'</span>\n    </div>\n\n    <div id="error" style="display:none;color:red;text-transform:none;"></div>\n    <div id="progress-section" style="display:none;margin-top:10px;">\n      <div class="progress progress-striped active">\n        <div class="bar bar-info" style="width: 100%;"></div>\n      </div>\n      <div class="loading-message" style="text-transform:none;"></div>\n    </div>\n\n    <div id="form-div">\n      <div id="register-form" style="display:none;">\n        <div style="clear:both;display:block;width:0px;max-width:0px;height:0px;max-height:0px;overflow:hidden;opacity:0;"\n             class="autofill-grabber"><input type="text" autocomplete="off" id="login_email" tabindex="-1"><input type="password" autocomplete="off" id="login_password" tabindex="-1">\n        </div>\n        <input id="register-protect-email" type="text" value="',r=a.email,n=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"email"),typeof n===o?n=n.call(t,{hash:{}}):n===c&&(n=l.call(t,"email",{hash:{}})),s+=d(n)+'" style="width:230px;height:25;margin:10px 10px 5px 10px;" placeholder="',n="mm_dntme_enter_email_simple",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,s+=d(n)+'"/><br/>\n        <input id="register-password-field" type="password" style="width:230px;height:25;margin:5px 10px 10px 10px;" placeholder="',n="mm_dntme_enter_password_simple",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,s+=d(n)+'"/>\n        <input id="register-confirm-password-field" type="password" style="width:230px;height:25;margin:5px 10px 10px 10px;" placeholder="Confirm password"/>\n        <div style="margin:10px 0px;">\n          <input type="button" id="register" class="btn btn-primary" value=\'',n="mm_dntme_create_account",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,s+=d(n)+'\' style="margin-right: 10px;"/>or<a href="" id="signin-link" style="margin-left: 10px;">',n="mm_dntme_sign_in",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,s+=d(n)+'</a>\n        </div>\n      </div>\n\n      <div id="signin-form" style="display:none;">\n        <div id="login-section">\n          <div style="clear:both;display:block;width:0px;max-width:0px;height:0px;max-height:0px;overflow:hidden;opacity:0;"\n               class="autofill-grabber"><input type="text" autocomplete="off" id="login_email" tabindex="-1"><input type="password" autocomplete="off" id="login_password" tabindex="-1">\n          </div>\n          <input id="signin-protect-email" type="text" value="',r=a.oldEmail,n=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"oldEmail"),typeof n===o?n=n.call(t,{hash:{}}):n===c&&(n=l.call(t,"oldEmail",{hash:{}})),s+=d(n)+'" style="width:230px;height:25;margin:10px 10px 5px 10px;" placeholder="',n="mm_dntme_enter_email_simple",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,s+=d(n)+'"/><br/>\n          <input id="signin-password-field" type="password" style="width:230px;height:25;margin:5px 10px 10px 10px;" placeholder="',n="mm_dntme_enter_password_simple",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,s+=d(n)+'"/>\n        </div>\n        <div id="mfa-section" style="display:none;">\n          <input type="text" id="mfa-code-field" style="width:140px;height:28px;margin:10px 5px" name="mfa_code" placeholder="Authentication Code" />\n        </div>\n        <div style="margin-top:5px;">\n          <input type="button" id="login" class="btn btn-success" value=\'',n="mm_dntme_sign_in",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,s+=d(n)+'\' style="margin-right: 10px;"/>or<a href="" id="register-link" style="margin-left: 10px;">',n="mm_dntme_create_an_account",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,s+=d(n)+'</a>\n        </div>\n        <div style="margin:10px 0px;">\n          <a href="" id="forgotPassword">',n="mm_dntme_forgot_my_password",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,s+=d(n)+"</a><br/>\n        </div>\n      </div>\n\n    </div>\n\n  </div>\n</span>"}))}),ABINE_DNTME.require(["wycats/handlebars"],function(e){e.registerPartial("notification_helper.masked_card",e.template(function(e,t,a){a=a||e.helpers;var n,i,r,s="",o="function",l=a.helperMissing,c=void 0,d=this.escapeExpression;return s+='<div class="body-notification outerCard" style="margin-top: 0px;">\n  <div id="maskedCard" class="creditcardfont">\n    <div style="background-repeat:no-repeat;background-size:100%;height:181px;background-image:url(\'',n="/pages/images/2015panels/masked_card_blank.png",r=a.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"assetUrl",n,{hash:{}}):i,s+=d(n)+'\');">\n      <br style="clear:both;"/>\n      <div style="text-align:right;margin-right:20px;color:white;">\n        <span style="font-family:\'Open Sans\', \'Helvetica Neue\', Arial, sans-serif !important;font-weight:bold;font-size:24pt;" id="originalValue">',r=a.getOriginalValue,n=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getOriginalValue"),typeof n===o?n=n.call(t,{hash:{}}):n===c&&(n=l.call(t,"getOriginalValue",{hash:{}})),s+=d(n)+"</span>\n        <br/>\n        <span style=\"font-family:'Open Sans', 'Helvetica Neue', Arial, sans-serif !important;font-size:11pt;\">",n="mm_notification_helper_at",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,s+=d(n)+"&nbsp;</span><span id=\"domain\" style=\"font-family:'Open Sans', 'Helvetica Neue', Arial, sans-serif !important;font-weight:bold;font-size:11pt;\">",r=a.getDomain,n=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getDomain"),typeof n===o?n=n.call(t,{hash:{}}):n===c&&(n=l.call(t,"getDomain",{hash:{}})),s+=d(n)+'</span>\n      </div>\n      <div style="text-align:center;margin-top:5px;color:white;">\n        <h3 id="cardNumber" style="font-family:\'Open Sans\', \'Helvetica Neue\', Arial, sans-serif !important;font-weight:lighter;">',r=a.getSeparatedCardNumber,n=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getSeparatedCardNumber"),typeof n===o?n=n.call(t,{hash:{}}):n===c&&(n=l.call(t,"getSeparatedCardNumber",{hash:{}})),s+=d(n)+"</h3>\n      </div>\n      <div style=\"font-size:15px;color:white;margin-left:25px;font-family:'Open Sans', 'Helvetica Neue', Arial, sans-serif !important;font-weight:bold;\">\n        <span style=\"float:left;\">",n="mm_payment_helper_expDate",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,s+=d(n)+' <span id="expiration">',r=a.getExpiry,n=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getExpiry"),typeof n===o?n=n.call(t,{hash:{}}):n===c&&(n=l.call(t,"getExpiry",{hash:{}})),s+=d(n)+'</span></span> <span style="float:right;margin-right:115px;"> ',n="mm_payment_helper_cvc",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,s+=d(n)+' <span id="cvc">',r=a.getCVC,n=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getCVC"),typeof n===o?n=n.call(t,{hash:{}}):n===c&&(n=l.call(t,"getCVC",{hash:{}})),s+=d(n)+"</span></span>\n      </div>\n    </div>\n  </div>\n</div>"}))}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.notification_helper_card_declined_notification=e.template(function(e,t,a,n,i){function r(e){var t,n="";return n+="\n          ",c=a.declined,t=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"declined"),t=null===t||void 0===t||t===!1?t:ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"description"),typeof t===m?t=t.call(e,{hash:{}}):t===_&&(t=h.call(e,"declined.description",{hash:{}})),n+=f(t)+"\n        "}function s(){return"\n          Looks like this merchant can't or won't process this card.\n          <ul>\n            <li>Make sure you used \"Abine address\".</li>\n            <li>Make sure the expiry dates and CVV was filled correctly.</li>\n            <li>Masked cards work only with US merchants.</li>\n          </ul>\n          If that does not help, close it, and use an alternative. Sorry!\n        "}a=a||e.helpers,n=n||e.partials;var o,l,c,d,u="",p=this,m="function",h=a.helperMissing,_=void 0,f=this.escapeExpression;return u+='<div class="panel">\n  <!-- Default header (actually footer) for the panels -->\n  <div class="header" id="default-header" style="border-top: 0px solid;">\n    <div class="logo-link">\n      <img style="width:63px;height:16px;" src="',o="/pages/images/blur_logo_ext_window.png",c=a.assetUrl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),o=typeof l===m?l.call(t,o,{hash:{}}):l===_?h.call(t,"assetUrl",o,{hash:{}}):l,u+=f(o)+'"/>\n    </div>\n    <div class="links-wrapper">\n      <div class="newlinks close-link">\n        <img id="close" class="close-notification" src="',o="/pages/images/2015panels/panel_xclose.png",c=a.assetUrl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),o=typeof l===m?l.call(t,o,{hash:{}}):l===_?h.call(t,"assetUrl",o,{hash:{}}):l,u+=f(o)+'"/>\n      </div>\n    </div>\n  </div>\n\n  <div class="card-main">\n      <div style="margin:10px -5px 10px -10px;padding:5px 20px;" class="alert-error">\n        <div style="font-size: 14pt;font-weight: bold;margin-bottom:5px;">',c=a.declined,o=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"declined"),o=null===o||void 0===o||o===!1?o:ABINE_DNTME.Duckbone.Handlebars.getAttr(o,"title"),typeof o===m?o=o.call(t,{hash:{}}):o===_&&(o=h.call(t,"declined.title",{hash:{}})),u+=f(o)+"</div>\n        ",c=a.declined,o=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"declined"),o=null===o||void 0===o||o===!1?o:ABINE_DNTME.Duckbone.Handlebars.getAttr(o,"description"),l=a["if"],d=p.program(1,r,i),d.hash={},d.fn=d,d.inverse=p.program(3,s,i),o=l.call(t,o,d),(o||0===o)&&(u+=o),u+="\n      </div>\n\n      ",o=t,o=p.invokePartial(n["notification_helper.masked_card"],"notification_helper.masked_card",o,a,n),(o||0===o)&&(u+=o),u+="\n      ",o=t,o=p.invokePartial(n["notification_helper.card_address"],"notification_helper.card_address",o,a,n),(o||0===o)&&(u+=o),u+="\n  </div>\n  ",o=t,o=p.invokePartial(n["notification_helper.card_actions"],"notification_helper.card_actions",o,a,n),(o||0===o)&&(u+=o),u+="\n\n</div>"}),ABINE_DNTME.CompiledTemplates.notification_helper_card_declined_notification}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.notification_helper_change_password=e.template(function(e,t,a){a=a||e.helpers;var n,i,r,s="",o="function",l=a.helperMissing,c=void 0,d=this.escapeExpression;return s+='<div class="panel">\n  <div class="close-notification">\n      <span class="notf-close-icon" id="paneHover"><img class="close-image" src="',n="/pages/images/manage/dd_close_icon.png",r=a.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"assetUrl",n,{hash:{}}):i,s+=d(n)+'"/></span>\n  </div>\n  <div class="body-notification"><img src="',n="/images/Icon.png",r=a.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"assetUrl",n,{hash:{}}):i,s+=d(n)+'"/>',n="mm_notification_helper_change_password_msg",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,s+=d(n)+'</div>\n  <input type="button" class="btn done" id="ignore" style="width:40%;text-align:center;" value="',n="mm_notification_helper_ignore",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,s+=d(n)+'" />\n  <input type="button" class="btn btn-success done" id="save" style="width:35%;text-align:center;" value="',n="mm_notification_helper_save_login",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,s+=d(n)+'" />\n  <div class="links settings-link" data-highlight="rememberaccounts" title="',n="mm_notification_helper_settings",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,s+=d(n)+'">\n      <img class="header-icon" src="',n="/pages/images/dnt-ui-header-settings.png",r=a.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"assetUrl",n,{hash:{}}):i,s+=d(n)+'">\n  </div>\n</div>'}),ABINE_DNTME.CompiledTemplates.notification_helper_change_password}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.notification_helper_checkout_growl_notification=e.template(function(e,t,a,n,i){function r(e,t){var n,i,r="";return r+="\n      ",m=a.isOfferCard,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"isOfferCard"),i=a["if"],h=f.program(2,s,t),h.hash={},h.fn=h,h.inverse=f.noop,n=i.call(e,n,h),(n||0===n)&&(r+=n),r+="\n\n      ",m=a.isRealCard,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"isRealCard"),i=a["if"],h=f.program(4,o,t),h.hash={},h.fn=h,h.inverse=f.noop,n=i.call(e,n,h),(n||0===n)&&(r+=n),r+="\n\n      ",m=a.isOldMaskedCard,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"isOldMaskedCard"),i=a["if"],h=f.program(6,l,t),h.hash={},h.fn=h,h.inverse=f.noop,n=i.call(e,n,h),(n||0===n)&&(r+=n),r+="\n\n      ",m=a.isNewMaskedCard,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"isNewMaskedCard"),i=a["if"],h=f.program(8,c,t),h.hash={},h.fn=h,h.inverse=f.noop,n=i.call(e,n,h),(n||0===n)&&(r+=n),r+="\n\n      ",m=a.isNewRealCard,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"isNewRealCard"),i=a["if"],h=f.program(10,d,t),h.hash={},h.fn=h,h.inverse=f.noop,n=i.call(e,n,h),(n||0===n)&&(r+=n),r+="\n\n    "}function s(e){var t,n="";return n+='\n        <div class="body-notification outerCard opaque" data-id="',m=a.id,t=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof t===g?t=t.call(e,{hash:{}}):t===b&&(t=y.call(e,"id",{hash:{}})),n+=v(t)+'" data-pos="',m=a.card_position,t=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"card_position"),typeof t===g?t=t.call(e,{hash:{}}):t===b&&(t=y.call(e,"card_position",{hash:{}})),n+=v(t)+'">\n          <div class="creditcardfont" style="color:rgb(80,80,80);width:336px;margin:auto;">\n            <div class="innerCard ',m=a.brand,t=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"brand"),typeof t===g?t=t.call(e,{hash:{}}):t===b&&(t=y.call(e,"brand",{hash:{}})),n+=v(t)+'_offer"\n                 style="background-image: url(pages/images/credit_cards/',m=a.brand,t=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"brand"),typeof t===g?t=t.call(e,{hash:{}}):t===b&&(t=y.call(e,"brand",{hash:{}})),n+=v(t)+'_offer.png);">\n            </div>\n          </div>\n        </div>\n      '}function o(e){var t,n,i="";return i+='\n        <div class="body-notification outerCard opaque" data-id="',m=a.id,t=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof t===g?t=t.call(e,{hash:{}}):t===b&&(t=y.call(e,"id",{hash:{}})),i+=v(t)+'" data-pos="',m=a.card_position,t=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"card_position"),typeof t===g?t=t.call(e,{hash:{}}):t===b&&(t=y.call(e,"card_position",{hash:{}})),i+=v(t)+'">\n          <div class="creditcardfont" style="color:rgb(80,80,80);width:336px;margin:auto;">\n            <div class="innerCard set-brand ',m=a.brand,t=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"brand"),typeof t===g?t=t.call(e,{hash:{}}):t===b&&(t=y.call(e,"brand",{hash:{}})),i+=v(t)+'"\n                 style="background-image: url(pages/images/credit_cards/',m=a.brand,t=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"brand"),typeof t===g?t=t.call(e,{hash:{}}):t===b&&(t=y.call(e,"brand",{hash:{}})),i+=v(t)+'.png);">\n\n              <div class="cardNumber">',m=a.getSeparatedMaskedCardNumber,t=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getSeparatedMaskedCardNumber"),typeof t===g?t=t.call(e,{hash:{}}):t===b&&(t=y.call(e,"getSeparatedMaskedCardNumber",{hash:{}})),i+=v(t)+'</div>\n              <div class="cardExpiration">',t="mm_payment_helper_expDate",m=a.intl,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===g?n.call(e,t,{hash:{}}):n===b?y.call(e,"intl",t,{hash:{}}):n,i+=v(t)+' <span class="expiration">',m=a.getMaskedExpiry,t=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getMaskedExpiry"),typeof t===g?t=t.call(e,{hash:{}}):t===b&&(t=y.call(e,"getMaskedExpiry",{hash:{}})),i+=v(t)+'</span>\n              </div>\n              <div class="cardCVC">',t="mm_payment_helper_cvc",m=a.intl,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===g?n.call(e,t,{hash:{}}):n===b?y.call(e,"intl",t,{hash:{}}):n,i+=v(t)+' <span class="cvc">',m=a.getMaskedVerification,t=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getMaskedVerification"),typeof t===g?t=t.call(e,{hash:{}}):t===b&&(t=y.call(e,"getMaskedVerification",{hash:{}})),i+=v(t)+'</span></div>\n              <div class="cardName">',m=a.first_name,t=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"first_name"),typeof t===g?t=t.call(e,{hash:{}}):t===b&&(t=y.call(e,"first_name",{hash:{}})),i+=v(t)+" ",m=a.last_name,t=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"last_name"),typeof t===g?t=t.call(e,{hash:{}}):t===b&&(t=y.call(e,"last_name",{hash:{}})),i+=v(t)+"</div>\n            </div>\n          </div>\n        </div>\n      "}function l(e){var t,n="";return n+='\n          <div class="body-notification outerCard opaque" data-id="',m=a.id,t=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof t===g?t=t.call(e,{hash:{}}):t===b&&(t=y.call(e,"id",{hash:{}})),n+=v(t)+'" data-pos="',m=a.card_position,t=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"card_position"),typeof t===g?t=t.call(e,{hash:{}}):t===b&&(t=y.call(e,"card_position",{hash:{}})),n+=v(t)+'">\n              <div class="creditcardfont" style="color:rgb(80,80,80);width:336px;margin:auto;">\n                  <div class="innerCard set-brand ',m=a.brand,t=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"brand"),typeof t===g?t=t.call(e,{hash:{}}):t===b&&(t=y.call(e,"brand",{hash:{}})),n+=v(t)+'"\n                       style="background-image: url(pages/images/masked_card_existing_blank.png);">\n                      <div class="dateCreatedText" style="color:white;font-family:\'Open-sans\',sans-serif;font-size:14px;left:172px;position:relative;top:60px;">Date Created:</div>\n                      <div class="dateCreated" style="top:70px;position:relative;color:white;font-family:\'Open-Sans\',sans-serif;font-size:15px;font-weight:600;left:172px;">',m=a.getCreatedDate,t=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getCreatedDate"),typeof t===g?t=t.call(e,{hash:{}}):t===b&&(t=y.call(e,"getCreatedDate",{hash:{}})),n+=v(t)+'</div>\n                      <div class="amountRemainingText" style="top:80px;position:relative;color:white;font-family:\'Open-Sans\',sans-serif;font-size:14px;left:172px;">Amount Remaining:</div>\n                      <div class="amountRemaining" style="top:90px;position:relative;color:white;font-family:\'Open-Sans\',sans-serif;font-size:15px;font-weight:600;left:172px;">',m=a.getOriginalValue,t=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getOriginalValue"),typeof t===g?t=t.call(e,{hash:{}}):t===b&&(t=y.call(e,"getOriginalValue",{hash:{}})),n+=v(t)+"</div>\n                  </div>\n              </div>\n          </div>\n      "}function c(e){var t,n="";return n+='\n        <div class="body-notification outerCard opaque" data-id="',m=a.id,t=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof t===g?t=t.call(e,{hash:{}}):t===b&&(t=y.call(e,"id",{hash:{}})),n+=v(t)+'" data-pos="',m=a.card_position,t=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"card_position"),typeof t===g?t=t.call(e,{hash:{}}):t===b&&(t=y.call(e,"card_position",{hash:{}})),n+=v(t)+'">\n          <div class="creditcardfont" style="color:rgb(80,80,80);width:336px;margin:auto;">\n            <div class="innerCard ',m=a.brand,t=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"brand"),typeof t===g?t=t.call(e,{hash:{}}):t===b&&(t=y.call(e,"brand",{hash:{}})),n+=v(t)+'"\n                 style="background-image: url(pages/images/credit_cards/masked_card.png);">\n            </div>\n          </div>\n        </div>\n      '}function d(e){var t,n="";return n+='\n        <div class="body-notification outerCard opaque" data-id="',m=a.id,t=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof t===g?t=t.call(e,{hash:{}}):t===b&&(t=y.call(e,"id",{hash:{}})),n+=v(t)+'" data-pos="',m=a.card_position,t=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"card_position"),typeof t===g?t=t.call(e,{hash:{}}):t===b&&(t=y.call(e,"card_position",{hash:{}})),n+=v(t)+'">\n          <div class="creditcardfont" style="color:rgb(80,80,80);width:336px;margin:auto;">\n            <div class="innerCard ',m=a.brand,t=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"brand"),typeof t===g?t=t.call(e,{hash:{}}):t===b&&(t=y.call(e,"brand",{hash:{}
})),n+=v(t)+'"\n                 style="background-image: url(pages/images/credit_cards/add_card.png);">\n            </div>\n          </div>\n        </div>\n      '}a=a||e.helpers;var u,p,m,h,_="",f=this,g="function",y=a.helperMissing,b=void 0,v=this.escapeExpression;return _+='<div class="wallet">\n  <div class="newlinks settings-link">\n    <img id="settings" class="settings-notification" src="',u="/pages/images/settings_gear_stroke.png",m=a.assetUrl,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),u=typeof p===g?p.call(t,u,{hash:{}}):p===b?y.call(t,"assetUrl",u,{hash:{}}):p,_+=v(u)+'">\n  </div>\n  <div class="newlinks close-link">\n    <img id="close" class="close-notification" src="',u="/pages/images/x_close_stroke.png",m=a.assetUrl,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),u=typeof p===g?p.call(t,u,{hash:{}}):p===b?y.call(t,"assetUrl",u,{hash:{}}):p,_+=v(u)+'">\n  </div>\n  <div id="card-container" style="min-height:230px;position:relative;">\n    ',m=a.allCards,u=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"allCards"),p=a.each,h=f.program(1,r,i),h.hash={},h.fn=h,h.inverse=f.noop,u=p.call(t,u,h),(u||0===u)&&(_+=u),_+="\n\n  </div>\n</div>"}),ABINE_DNTME.CompiledTemplates.notification_helper_checkout_growl_notification}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.notification_helper_detailed_email=e.template(function(e,t,a){a=a||e.helpers;var n,i,r,s="",o="function",l=a.helperMissing,c=void 0,d=this.escapeExpression;return s+='<div class="panel">\n    <div class="close-notification">\n        <span class="notf-close-icon"><img class="close-image" src="',n="/pages/images/manage/dd_close_icon.png",r=a.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"assetUrl",n,{hash:{}}):i,s+=d(n)+'"/></span>\n    </div>\n    <div class="body-notification"><img src="',n="/images/Icon.png",r=a.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"assetUrl",n,{hash:{}}):i,s+=d(n)+'"/>\n        <span class="boldFont">Blur</span>\n    </div>\n    <div class="title">\n        ',n="mm_notification_helper_what_happened_to_email_1",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,s+=d(n)+"<br/>",n="mm_notification_helper_what_happened_to_email_2",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,s+=d(n)+"\n    </div>\n    <ol>\n        <li>\n            <b>",r=a.domain,n=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"domain"),typeof n===o?n=n.call(t,{hash:{}}):n===c&&(n=l.call(t,"domain",{hash:{}})),s+=d(n)+"</b> ",n="mm_notification_helper_will_email_to",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,s+=d(n)+" <b>",r=a.disposable,n=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"disposable"),typeof n===o?n=n.call(t,{hash:{}}):n===c&&(n=l.call(t,"disposable",{hash:{}})),s+=d(n)+'</b>.\n            <a href="#" class="learn-more">',n="mm_notification_helper_learn_more",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,s+=d(n)+"</a>.\n        </li>\n        <li>\n            ",n="mm_notification_helper_email_forward_to",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,s+=d(n)+" <b>",r=a.real,n=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"real"),typeof n===o?n=n.call(t,{hash:{}}):n===c&&(n=l.call(t,"real",{hash:{}})),s+=d(n)+"</b>.\n        </li>\n        <li>\n            ",n="mm_notification_helper_block_them_1",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,s+=d(n)+" <b>",r=a.domain,n=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"domain"),typeof n===o?n=n.call(t,{hash:{}}):n===c&&(n=l.call(t,"domain",{hash:{}})),s+=d(n)+"</b> ",n="mm_notification_helper_block_them_2",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,s+=d(n)+" <span id='here'>",n="mm_notification_helper_block_them_3",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,s+=d(n)+'</span>.\n        </li>\n    </ol>\n        <input type="button" class="btn btn-success done" style="width:25%;text-align:center;" value="',n="mm_notification_helper_got_it",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,s+=d(n)+'" />\n        <a href="#" class="learn-more" style="width:25%;text-align:center;">',n="mm_notification_helper_learn_more",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,s+=d(n)+"</a>.\n    </div>\n</div>"}),ABINE_DNTME.CompiledTemplates.notification_helper_detailed_email}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.notification_helper_expire_notify=e.template(function(e,t,a){a=a||e.helpers;var n,i,r,s="",o="function",l=a.helperMissing,c=void 0,d=this.escapeExpression;return s+='<div class="panel">\n    <div style="border-bottom:2px solid #3d7dcb;">\n        <div class="close-notification">\n            <span class="notf-close-icon"><img class="close-image" src="',n="/pages/images/manage/dd_close_icon.png",r=a.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"assetUrl",n,{hash:{}}):i,s+=d(n)+'"/></span>\n        </div>\n        <div class="body-notification"><img src="',n="/images/Icon.png",r=a.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"assetUrl",n,{hash:{}}):i,s+=d(n)+'"/>\n            <div class="boldFont" style="margin-left:55px;">',n="mm_notification_helper_expire_notify_title_1",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,s+=d(n)+"<br/>",n="mm_notification_helper_expire_notify_title_2",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,s+=d(n)+'</div>\n        </div>\n    </div>\n    <div>\n        <p style="text-align:left;margin:10px;"><strong>',n="mm_notification_helper_expire_notify_body_1",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,s+=d(n)+"<br/><br/>",n="mm_notification_helper_expire_notify_body_2",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,s+=d(n)+'</strong></p>\n    </div>\n    <div>\n        <input type="button" id="learn" class="btn btn-success done" style="width:75%;text-align:center;background:green;" value="',n="mm_notification_helper_learn_more_premium",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,s+=d(n)+'" />\n    </div>\n</div>'}),ABINE_DNTME.CompiledTemplates.notification_helper_expire_notify}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.notification_helper_expire_warning=e.template(function(e,t,a){a=a||e.helpers;var n,i,r,s="",o="function",l=a.helperMissing,c=void 0,d=this.escapeExpression;return s+='<div class="panel">\n    <div style="border-bottom:2px solid #3d7dcb;">\n        <div class="close-notification">\n            <span class="notf-close-icon"><img class="close-image" src="',n="/pages/images/manage/dd_close_icon.png",r=a.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"assetUrl",n,{hash:{}}):i,s+=d(n)+'"/></span>\n        </div>\n        <div class="body-notification"><img src="',n="/images/Icon.png",r=a.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"assetUrl",n,{hash:{}}):i,s+=d(n)+'"/>\n            <div class="boldFont" style="margin-left:55px;">',n="mm_notification_helper_expire_warning_title_1",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,s+=d(n)+"<br/>",n="mm_notification_helper_expire_warning_title_2",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,s+=d(n)+'</div>\n        </div>\n    </div>\n    <div>\n        <p style="text-align:left;margin:10px;"><strong>',n="mm_notification_helper_expire_warning_body",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,s+=d(n)+'</strong></p>\n    </div>\n    <div>\n        <input type="button" id="learn" class="btn btn-success done" style="width:75%;text-align:center;background:green;" value="',n="mm_notification_helper_learn_more_premium",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,s+=d(n)+'" />\n    </div>\n</div>'}),ABINE_DNTME.CompiledTemplates.notification_helper_expire_warning}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.notification_helper_failed_login=e.template(function(e,t,a,n){a=a||e.helpers,n=n||e.partials;var i,r,s,o="",l=this,c="function",d=a.helperMissing,u=void 0,p=this.escapeExpression;return o+='<div class="panel">\n    <div class="body-notification">\n    <span id="save-password-dialog">\n      <div style="cursor:default;">\n          <div style="font-weight:bold;">',i="mm_notification_helper_failed_login_unsuccessful",s=a.intl,r=s||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),i=typeof r===c?r.call(t,i,{hash:{}}):r===u?d.call(t,"intl",i,{hash:{}}):r,o+=p(i)+'</div>\n          <div style="font-weight:normal;">',i="mm_notification_helper_possible_saved",s=a.intl,r=s||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),i=typeof r===c?r.call(t,i,{hash:{}}):r===u?d.call(t,"intl",i,{hash:{}}):r,o+=p(i)+'</div>\n          <div style="cursor:pointer;"><a id="update-account">',i="mm_notification_helper_failed_update_here",s=a.intl,r=s||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),i=typeof r===c?r.call(t,i,{hash:{}}):r===u?d.call(t,"intl",i,{hash:{}}):r,o+=p(i)+'</a></div>\n      </div>\n    </span>\n    </div>\n\n    <!-- Default header (actually footer) for the panels -->\n    <div style="position:absolute;right:0;bottom:5px;top:0;">\n        ',i=t,i=l.invokePartial(n["common.header"],"common.header",i,a,n),(i||0===i)&&(o+=i),o+="\n    </div>\n</div>"}),ABINE_DNTME.CompiledTemplates.notification_helper_failed_login}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.notification_helper_growl=e.template(function(e,t,a,n,i){function r(e,t){var n,i,r="";return r+='\n            <div id="',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof n===_?n=n.call(e,{hash:{}}):n===g&&(n=f.call(e,"this.id",{hash:{}})),r+=y(n)+'" style="',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"height"),i=a["if"],p=h.program(2,s,t),p.hash={},p.fn=p,p.inverse=h.noop,n=i.call(e,n,p),(n||0===n)&&(r+=n),n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"has_action"),i=a["if"],p=h.program(4,o,t),p.hash={},p.fn=p,p.inverse=h.program(6,l,t),n=i.call(e,n,p),(n||0===n)&&(r+=n),r+='" class="panelSection ',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"class_name"),typeof n===_?n=n.call(e,{hash:{}}):n===g&&(n=f.call(e,"this.class_name",{hash:{}})),r+=y(n)+'">\n              ',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"body"),typeof n===_?n=n.call(e,{hash:{}}):n===g&&(n=f.call(e,"this.body",{hash:{}})),(n||0===n)&&(r+=n),r+="\n            </div>\n        "}function s(e){var t,a="";return a+="height:",t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"height"),typeof t===_?t=t.call(e,{hash:{}}):t===g&&(t=f.call(e,"this.height",{hash:{}})),a+=y(t)+";"}function o(){return"cursor:pointer;"}function l(){return"cursor: default;"}a=a||e.helpers;var c,d,u,p,m="",h=this,_="function",f=a.helperMissing,g=void 0,y=this.escapeExpression;return m+='<div class="panel">\n    <div class="settings">\n      ',c="mm_dntme_settings",u=a.intl,d=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),c=typeof d===_?d.call(t,c,{hash:{}}):d===g?f.call(t,"intl",c,{hash:{}}):d,m+=y(c)+'\n    </div>\n    <div class="close-notification">\n        <span class="notf-close-icon"><img class="close-image" src="',c="/pages/images/manage/dd_close_icon.png",u=a.assetUrl,d=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),c=typeof d===_?d.call(t,c,{hash:{}}):d===g?f.call(t,"assetUrl",c,{hash:{}}):d,m+=y(c)+'"/></span>\n    </div>\n    <div class="body-notification"><img src="',c="/images/Icon.png",u=a.assetUrl,d=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),c=typeof d===_?d.call(t,c,{hash:{}}):d===g?f.call(t,"assetUrl",c,{hash:{}}):d,m+=y(c)+'"/>\n      ',c="mm_notification_helper_growl",u=a.intl,d=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),c=typeof d===_?d.call(t,c,{hash:{}}):d===g?f.call(t,"intl",c,{hash:{}}):d,m+=y(c)+'\n    </div>\n    <div style="text-align:left;padding-bottom:5px;">\n      <div class="dynamicPanels">\n        ',u=a.panelSections,c=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"panelSections"),d=a.each,p=h.program(1,r,i),p.hash={},p.fn=p,p.inverse=h.noop,c=d.call(t,c,p),(c||0===c)&&(m+=c),m+="\n      </div>\n    </div>\n</div>"}),ABINE_DNTME.CompiledTemplates.notification_helper_growl}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.notification_helper_panel=e.template(function(e,t,a){a=a||e.helpers;var n,i,r,s="",o="function",l=a.helperMissing,c=void 0,d=this.escapeExpression;return s+='<div class="panel">\n  <div class="close-notification">\n      <span class="notf-close-icon" id="paneHover"><img class="close-image" src="',n="/pages/images/manage/dd_close_icon.png",r=a.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"assetUrl",n,{hash:{}}):i,s+=d(n)+'"/></span>\n  </div>\n  <div class="body-notification"><img src="',n="/images/Icon.png",r=a.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"assetUrl",n,{hash:{}}):i,s+=d(n)+'"/>',r=a.msg,n=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"msg"),typeof n===o?n=n.call(t,{hash:{}}):n===c&&(n=l.call(t,"msg",{hash:{}})),(n||0===n)&&(s+=n),s+="</div>\n</div>"}),ABINE_DNTME.CompiledTemplates.notification_helper_panel}),ABINE_DNTME.define("abine/views/notificationPanel",["documentcloud/underscore","jquery","duckbone/core","abine/views/panelBase","abine/timer","abine/contentMessenger","abine/assets","abine/responseCodes","abine/intl","abine/proxies","models"],function(e,t,a,n,i,r,s,o,l,c,d){var u=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/i,p=n.extend({templateName:"notification_helper_panel",events:{mouseover:"onHover",mouseout:"onHoverEnd",click:"clicked"},afterInitialize:function(){this.messenger=this.options.contentManager.messenger,this.targetId=this.options.notification.targetId?this.options.notification.targetId:"",this.targetUrl=this.options.notification.targetUrl,this.applyFadingStyle(),this.fadeIn(),this.model={get:e.bind(function(e){return this.options.notification[e]},this)},this.render(),this.startFadeOut()},openSettings:function(e){var a=t(e.target).data("highlight")||t(e.target).parent().data("highlight");this.options.contentManager.showToolbarPanel({page:"settings",highlight:a}),this.closePanel()},closeNotification:function(e){e&&e.preventDefault(),this.panelId&&this.options.messenger.send("update:panelActivity:closed",{panelId:this.panelId}),this.trigger("remove")},clicked:function(e){return"close-notification"==e.target.className||"notf-close-icon"==e.target.className||"close-image"==e.target.className?(this.stopFadeOut(),void this.closePanel()):(this.getContentMessenger(),this.messenger.send("window:createTab",{url:this.targetUrl}),this.stopFadeOut(),void this.closePanel())},onHoverEnd:function(){this.startFadeOut()},onHover:function(){t(this.el).find("div.close-notification").show(),this.stopFadeOut()},openDashboard:function(){return c.webapp.openDashboard(),!1},applyCardStyles:function(){var e=this.model.get("styles");if(e&&e.base){var a=this.$("."+this.model.get("brand"));a.css(e.base),e.number&&t(".cardNumber",a).css(e.number),e.name&&t(".cardName",a).css(e.name),e.expiry&&t(".cardExpiration",a).css(e.expiry),e.cvc&&t(".cardCVC",a).css(e.cvc)}},startFadeOut:function(){this.options.notification.neverFade||(this.stopFadeOut(),this.fadeOutTimer=i.setTimeout(e.bind(function(){this.fadeOutTimer&&this.fadeOut()},this),this.options.timeout))},stopFadeOut:function(){this.fadeOutTimer&&(i.clearTimeout(this.fadeOutTimer),this.fadeOutTimer=null)},forgotPassword:function(e){e.preventDefault(),c.webapp.openForgotPassword(),this.trigger("close")},toggleSigninOrRegister:function(e){e.preventDefault(),this.$("#signin-form").is(":visible")?(this.$("#signin-form, .signin-content").hide(),this.$("#register-form, .register-content").show()):(this.$("#register-form, .register-content").hide(),this.$("#signin-form, .signin-content").show()),this.trigger("resize")},login:function(a){function n(e,a){try{p.get(0).ownerDocument&&(t(".loading-message",p).text(l.getText("mm_loading_display_login")),e<a&&(m=i.setTimeout(function(){n(e+1,a)},500)))}catch(e){}}a&&a.preventDefault();var r=this.$("#signin-protect-email").val(),s=this.$("#signin-password-field").val(),o=this.$("#error");if(o.hide(),!r.match(u))return this.$("#welcome-message").hide(),o.text(l.getText("mm_dntme_invalid_email")).show(),void this.trigger("resize");if(0==s.length)return this.$("#welcome-message").hide(),o.text(l.getText("mm_dntme_invalid_password")).show(),void this.trigger("resize");var d={email:r,password:s,mfa_code:this.$("#mfa-code-field").val()},p=this.$("#progress-section");p.height(this.$("#form-div").height()-10);var m=null;n(0,20),p.show(),this.$("#form-div").hide(),c.licenseModule.login(d,e.bind(function(t,a){this.processRegistration(t,a,d,e.bind(function(e){i.clearTimeout(m),p.hide(),e||(this.loginSuccess(),this.closePanel())},this))},this)),this.trigger("resize")},register:function(a){function n(e,a){try{m.get(0).ownerDocument&&(t(".loading-message",m).text(l.getText("mm_loading_display_register_use"+Math.floor(e/10))),e<a&&(h=i.setTimeout(function(){n(e+1,a)},500)))}catch(e){}}a&&a.preventDefault(),this.$("#welcome-message").show();var r=this.$("#register-protect-email").val(),s=this.$("#register-password-field").val(),o=this.$("#register-confirm-password-field").val(),d=this.$("#error");if(d.hide(),!r.match(u))return this.$("#welcome-message").hide(),d.text(l.getText("mm_dntme_invalid_email")).show(),void this.trigger("resize");if(0==s.length)return this.$("#welcome-message").hide(),d.text(l.getText("mm_dntme_invalid_password")).show(),void this.trigger("resize");if(o!=s)return this.$("#welcome-message").hide(),d.text(l.getText("mm_dntme_invalid_password_confirmation")).show(),void this.trigger("resize");var p={email:r,password:s,password_hint:l.getText("mm_pwhint_default"),register_type:"dnt_password_panel",send_password_email:!1},m=this.$("#progress-section");m.height(this.$("#form-div").height()-10);var h=null;n(0,40),m.show(),this.$("#form-div").hide(),c.licenseModule.register(p,e.bind(function(t,a){this.processRegistration(t,a,p,e.bind(function(e){i.clearTimeout(h),m.hide(),e||(this.$("#register-dialog").hide(),this.registerSuccess(),this.$("#post-signin-dialog").show())},this))},this)),this.trigger("resize")},postRegisterOk:function(e){e&&e.preventDefault(),this.trigger("remove")},processRegistration:function(t,a,n,i){if(t){var r=l.getText("mm_dntme_register_error"),s=t.responseJSON&&t.responseJSON.data?t.responseJSON.data.errors:null;"invalid email address"==t.responseJSON.error_code?r=l.getText("mm_dntme_invalid_email_server_error"):"wrong password"==t.responseJSON.error_code?r=l.getText("mm_dntme_wrong_password"):"no account found for email"==t.responseJSON.error_code?r=l.getText("mm_dntme_wrong_email"):"version not allowed"==t.responseJSON.error_code?r=l.getText("mm_dntme_version_not_allowed"):"account has been locked"==t.responseJSON.error_code?r=l.getText("mm_dntme_account_locked"):t.responseJSON.error_code==o.SCHEDULED_DOWNTIME?r=l.getText("mm_dntme_server_maintenance"):t.responseJSON.error_code==o.MFA_CODE_REQUIRED?(r="You have enabled 2-factor authentication.  Please enter authentication code below:",this.$("#login-section, #progress-section").hide(),this.$("#form-div, #mfa-section").show()):s&&s.email&&("has already been taken"==s.email[0]?r=l.getText("mm_dntme_duplicate_email",[n.email]):"was used for MaskMe Heavy"==s.email[0]&&(r=l.getText("mm_dntme_version_not_allowed"))),this.$("#error").html(r).show(),t.responseJSON&&t.responseJSON.data&&1==t.responseJSON.data.generated_password&&this.$("#error #loginButton").click(e.bind(function(e){return c.webapp.openPasswordSetupPage(n.email),e.preventDefault(),!1},this)),this.$("#error #retryEmail, #error #loginButton").click(e.bind(this.retryEmail,this)),this.$("#error #dnt2upgrade").click(c.webapp.openDnt2UpgradePage),this.trigger("resize"),i(r)}else this.trigger("refresh-preferences"),i()},retryEmail:function(e){e&&e.preventDefault(),this.$("#error, #progress-section").hide(),this.$("#register-dialog, #form-div").show(),this.trigger("render")}}),m=p.extend({templateName:"notification_helper_paymentsr2_card_notification",afterInitialize:function(){this.applyFadingStyle(),this.fadeIn();var e=this.options.notification;this.model=new d.DisposableCard(e.model.maskedCard),this.model.bitcoinFunded="bitcoin"==this.model.get("payment_source"),this.model.detailed=e.detailed,this.panelId=4000004,e.model.declined&&(this.templateName="notification_helper_card_declined_notification",this.model.declined=e.model.declined,this.panelId=4000009),this.options.messenger.send("update:panelActivity:impression",{panelId:this.panelId}),this.render()},clicked:function(t){return t&&t.preventDefault(),"faq"==t.target.id?(this.options.messenger.send("update:panelActivity:disclosed",{panelId:this.panelId}),c.webapp.openFAQ("card")):"chatNow"==t.target.id?(this.options.messenger.send("update:panelActivity:masked",{panelId:this.panelId}),c.securityManager.openWindow("https://a3.websitealive.com/623/rRouter.asp?infocapture_ids=259,260&groupid=623&wsa_custom0=notification&wsa_custom1=&websiteid=0&departmentid=3140&dl=blur",400,400)):"close-notification"==t.target.className||"notf-close-icon"==t.target.className||"close-image"==t.target.className?(this.options.messenger.send("update:panelActivity:closed",{panelId:this.panelId}),this.trigger("remove")):"cardDashboard"==t.target.id?c.webapp.openPage("/#/client/card/"+this.model.get("guid")):"getRefund"==t.target.id?(this.$(".card-main").hide(),this.$(".actions-short").hide(),this.$(".actions-tall").show(),this.autoResize()):"dontClose"==t.target.id?(this.$(".card-main").show(),this.$(".actions-short").show(),this.$(".actions-tall").hide(),this.autoResize()):"confirmCloseCard"==t.target.id?(this.$(".close-step-1").hide(),this.$(".close-step-2").show(),this.model.save({purpose:"deactivate"},{success:e.bind(function(){"success"==this.model.get("status")?this.$(".refund-status").text("This Masked Card has been closed. Open transactions on this card are being reviewed to determine your refund amount."):this.$(".refund-status").text("There was an error closing this Masked Card.  Please contact support."),this.autoResize()},this)}),this.autoResize()):"logo-link"!=t.target.className&&"logo-link"!=t.target.parentNode.className||c.webapp.openDashboard(),!1}}),h=p.extend({templateName:"notification_helper_real_card_notification",afterInitialize:function(){this.applyFadingStyle(),this.fadeIn(),this.model=new d.RealCard(this.options.notification.model.maskedCard),this.model.detailed=this.options.notification.detailed,this.panelId=4000007,this.options.messenger.send("update:panelActivity:impression",{panelId:this.panelId}),this.render(),this.applyCardStyles()},clicked:function(e){return e&&e.preventDefault(),"faq"==e.target.id?(this.options.messenger.send("update:panelActivity:disclosed",{panelId:this.panelId}),c.webapp.openFAQ("card")):"chatNow"==e.target.id?(this.options.messenger.send("update:panelActivity:masked",{panelId:this.panelId}),c.securityManager.openWindow("https://a3.websitealive.com/623/rRouter.asp?infocapture_ids=259,260&groupid=623&wsa_custom0=notification&wsa_custom1=&websiteid=0&departmentid=3140&dl=blur",400,400)):"close-notification"==e.target.className||"notf-close-icon"==e.target.className||"close-image"==e.target.className?(this.options.messenger.send("update:panelActivity:closed",{panelId:this.panelId}),this.trigger("remove")):"cardDashboard"==e.target.id?c.webapp.openPage("/#/client/cards"):"getRefund"==e.target.id?c.webapp.openPage("/#/client/cards"):"logo-link"!=e.target.className&&"logo-link"!=e.target.parentNode.className||c.webapp.openDashboard(),!1}}),_=p.extend({templateName:"notification_helper_checkout_growl_notification",events:{"click .outerCard":"cardClicked","click .settings-notification":"openSettings","click .close-link":"closeNotification"},resetCards:function(t){var a=t.collection,n=t.maskedCards,i=1,r=[];a.forEach(e.bind(function(e){e.card_position=i,r.push(new d.RealCard(e)),i++},this)),n&&n.forEach(e.bind(function(e){e.card_position=i,e.brand="old_masked_card",e.cardType="old_masked_card",r.push(new d.DisposableCard(e)),i++},this)),this.model.offerOnly||(r.push(new d.RealCard({id:"new_real_card",cardType:"new_real_card",brand:"new_real_card",card_position:i})),r.push(new d.RealCard({id:"new_masked_card",cardType:"new_masked_card",brand:"new_masked_card",card_position:i+1}))),this.collection.reset(r)},setBrandStyles:function(){e.each(this.collection.models,e.bind(function(e){var a=e.get("styles");if(a&&a.base){var n=this.$("."+e.get("brand"));n.css(a.base),a.number&&t(".cardNumber",n).css(a.number),a.name&&t(".cardName",n).css(a.name),a.expiry&&t(".cardExpiration",n).css(a.expiry),a.cvc&&t(".cardCVC",n).css(a.cvc)}},this))},afterInitialize:function(){this.applyFadingStyle(),this.fadeIn(),this.contentManager=this.options.contentManager;var a=this.options.notification.payload;this.options.strategyId=a.strategyId,this.options.fieldId=a.fieldId,this.options.fieldType=a.fieldType,this.model=new d.RealCard(this.options.notification.model.maskedCard),this.model.detailed=this.options.notification.detailed,this.collection=new d.RealCardCollection,this.model.attributes.allCards=this.collection,this.model.offerOnly=this.options.notification.offerOnly,this.resetCards(this.options.notification),this.panelId=4000008,this.options.messenger.send("update:panelActivity:impression",{panelId:this.panelId}),this.model.offersOnly||(c.licenseModule.logCheckout({method:"growl",merchant:this.contentManager.domain,shown:1,amount:this.options.amount}),this.options.messenger.on("entity:changed:RealCard",e.debounce(e.bind(function(){var a=new d.RealCardCollection;a.fetchAllForDomain(this.options.notification.domain,e.bind(function(){this.options.notification.collection.length!=a.length&&(this.options.notification.collection=a,this.resetCards(a),this.render(),this.setBrandStyles(),this.$(".outerCard").each(e.bind(function(e,a){t(a).addClass("pos-"+(e+1))},this)))},this))},this),1e3)));var n=!!e.find(this.collection.models,function(e){return"offer"==e.get("cardType")});n&&c.licenseModule.logCheckout({method:"offer",merchant:this.contentManager.domain,shown:1,amount:this.options.amount}),this.render();var r=0;i.setTimeout(e.bind(function(){this.setBrandStyles(),this.$(".outerCard").each(e.bind(function(a,n){i.setTimeout(e.bind(function(){t(n).addClass("pos-"+(a+1))},this),r),r+=300},this));var a=t(this.el),n=this.collection.length;a.height(a.height()+15*n),a.width(a.width()+15*(n>=3?n-3:0)),this.autoResize({extraWidth:15*(n>=3?n-3:0)})},this),0),i.setTimeout(e.bind(function(){this.$(".outerCard").removeClass("opaque")},this),5e3),this.contentManager.messenger.on("panel:closed",e.bind(function(){t(".outerCard").removeClass("biometric")},this))},cardClicked:function(a){for(var n=t(a.target);!n.hasClass("outerCard");)n=t(n[0].parentNode);if(n.hasClass("pos-1"))return void this.fillRealCard(n.data("id"),n);for(var r=this.collection.length,s=parseInt(n.data("pos")),o=1;o<s;o++)i.setTimeout(e.bind(function(){t(".outerCard").each(function(e,a){var n=parseInt(t(a).data("pos"));t(a).removeClass("pos-"+n).removeClass("biometric"),n>1?n-=1:n=r,t(a).addClass("pos-"+n).data("pos",n)})},this),50*o)},fillRealCard:function(e,t){var a=null;this.model.attributes.allCards.each(function(t){t.get("id")==e&&(a=t)}),"new_real_card"==a.get("cardType")?c.webapp.openPage("/#/client/real_cards/add"):"new_masked_card"==a.get("cardType")?(c.licenseModule.logCheckout({method:"growl",merchant:this.contentManager.domain,clicked:1,amount:this.options.amount}),this.focusFieldWithIntent({step:"new_card"})):"offer"==a.get("cardType")?(c.licenseModule.logCheckout({method:"offer",merchant:this.contentManager.domain,clicked:1,amount:this.options.amount}),c.webapp.openPage(a.get("url"))):("biometric"==this.contentManager.preferences.getPref("masked_card_auth")&&t.addClass("biometric"),c.licenseModule.logCheckout({method:"growl",merchant:this.contentManager.domain,clicked:1,amount:this.options.amount}),this.focusFieldWithIntent({step:"fill_card",id:a.get("id")}))}}),f=p.extend({templateName:"notification_helper_expire_notify",afterInitialize:function(){this.applyFadingStyle(),this.fadeIn(),this.model={get:e.bind(function(e){return this.options.notification[e]},this)},this.panelId=5000008,this.options.messenger.send("update:panelActivity:impression",{panelId:this.panelId}),this.render()},clicked:function(e){e.preventDefault(),"learn"==e.target.id?(this.options.messenger.send("update:panelActivity:masked",{panelId:this.panelId}),c.securityManager.openPage("#premium"),this.trigger("remove")):e.target.className.match(/close-notification|notf-close-icon|close-image|done/i)&&(this.options.messenger.send("update:panelActivity:closed",{panelId:this.panelId}),this.trigger("remove"))}}),g=p.extend({templateName:"notification_helper_expire_warning",afterInitialize:function(){this.applyFadingStyle(),this.fadeIn(),this.model={get:e.bind(function(e){return this.options.notification[e]},this)},this.panelId=5000009,this.options.messenger.send("update:panelActivity:impression",{panelId:this.panelId}),this.render()},clicked:function(e){e.preventDefault(),"learn"==e.target.id?(this.options.messenger.send("update:panelActivity:masked",{panelId:this.panelId}),c.securityManager.openPage("#premium"),this.trigger("remove")):e.target.className.match(/close-notification|notf-close-icon|close-image|done/i)&&(this.options.messenger.send("update:panelActivity:closed",{panelId:this.panelId}),this.trigger("remove"))}}),y=p.extend({templateName:"notification_helper_detailed_email",afterInitialize:function(){this.applyFadingStyle(),this.fadeIn(),this.model={get:e.bind(function(e){return this.options.notification[e]},this)},this.panelId="email"==this.options.notification.type?1000002:5000002,this.options.messenger.send("update:panelActivity:impression",{panelId:this.panelId}),this.render()},clicked:function(e){e.preventDefault(),"here"==e.target.id?(this.options.messenger.send("update:panelActivity:disclosed",{panelId:this.panelId}),c.securityManager.openPage("#emails/guide"),this.trigger("remove")):e.target.className.match(/close-notification|notf-close-icon|close-image|done/i)?(this.options.messenger.send("update:panelActivity:closed",{
panelId:this.panelId}),this.trigger("remove")):e.target.className.match(/learn-more/)&&(this.options.messenger.send("update:panelActivity:masked",{panelId:this.panelId}),c.securityManager.openPage("#dashboard/guide"),this.trigger("remove"))}}),b=p.extend({templateName:"notification_helper_growl",events:{mouseover:"onHover",mouseout:"onHoverEnd","click .panelSection":"performActions","click .close-notification":"logClose","click .settings":"showSettings"},afterInitialize:function(){this.applyFadingStyle(),this.fadeIn(),this.contentManager=this.options.contentManager,this.options.dynamicPanel=this.options.notification.dynamicPanel,this.model={dynamicPanel:this.options.dynamicPanel},this.setupDynamicPanel(),this.model.panelSections=this.panelSections,this.render()},logClose:function(){this.contentManager.messenger.send("update:panelActivity:closed",{panelId:this.options.dynamicPanel.id}),this.trigger("remove")},showSettings:function(){this.contentManager.showToolbarPanel({page:"settings"})}}),v=p.extend({templateName:"notification_helper_save_login",events:{mouseover:"onHover",mouseout:"onHoverEnd","click .close-notification":"logClose","click .close-link":"logClose","click .settings-link":"openWebappSettings","click .dashboard":"openDashboard","click .b-link":"openDashboard","click .help-link":"openFaq","click #save, #save-unregistered":"save","click #always-save-accounts-checkbox":"alwaysSave","click #register":"register","click #login":"login","click #forgotPassword":"forgotPassword","click #register-link, #signin-link":"toggleSigninOrRegister","click #never, #never-unregistered":"never","click #ok-post-register":"postRegisterOk"},openDashboard:function(){c.webapp.openPage("/#dashboard"),this.trigger("remove")},openWebappSettings:function(){c.webapp.openPage("/#settings"),this.trigger("remove")},openFaq:function(){c.webapp.openPage("/#help/faq/faq-passwordManager"),this.trigger("remove")},afterInitialize:function(){i.setTimeout(e.bind(function(){this.contentManager.messenger.send("background:notification:clear")},this),5e3),this.contentManager=this.options.contentManager,this.model=this.options.notification.account,this.model.oldEmail=this.contentManager.preferences.getPref("oldEmail"),this.model.loginNotLock=this.contentManager.preferences.getPref("loginNotLock"),this.model.locked=this.contentManager.isLocked(),this.model.unregistered=(!this.model.oldEmail||this.model.loginNotLock)&&this.model.locked,this.model.login_content="mm_notification_helper_securely_save_login",this.model.register_content="mm_notification_helper_securely_save_create",this.panelId=this.model.locked?9000002:6000002,this.model.unregistered?this.contentManager.preferences.isPrefTrue("isBlurUpgrade")||(this.contentManager.messenger.send("update:panelActivity:impression",{panelId:this.panelId}),this.render()):(this.contentManager.messenger.send("update:panelActivity:impression",{panelId:this.panelId}),this.render())},logClose:function(){this.contentManager.messenger.send("background:notification:clear"),this.contentManager.messenger.send("update:panelActivity:closed",{panelId:this.panelId}),this.trigger("remove")},alwaysSave:function(){this.model.alwaysSaveAccounts=!0,this.save()},save:function(){this.contentManager.messenger.send("background:notification:clear"),this.contentManager.messenger.send("update:panelActivity:masked",{panelId:this.panelId}),this.contentManager.isLocked()?(this.on("refresh-preferences",e.bind(function(){this.contentManager.preferences.fetchAll()},this)),this.$("#save-password-dialog, #save-password-dialog-unregistered").hide(),this.$("#register-dialog").show(),this.model.oldEmail?(this.$("#signin-form").show(),this.$(".signin-content").show()):(this.$("#register-form").show(),this.$(".register-content").show()),this.contentManager.messenger.send("update:panelActivity:impression",{panelId:7000011}),this.trigger("resize")):(this.contentManager.messenger.send("background:save:account",this.model),this.trigger("remove"))},loginSuccess:function(){this.contentManager.messenger.send("update:panelActivity:masked",{panelId:7000011}),this.contentManager.messenger.send("background:save:or:update:account",this.model)},registerSuccess:function(){this.contentManager.messenger.send("update:panelActivity:disclosed",{panelId:7000011}),this.contentManager.messenger.send("background:save:account",this.model)},never:function(){this.contentManager.messenger.send("background:notification:clear"),this.contentManager.messenger.send("update:panelActivity:disclosed",{panelId:this.panelId});var e=new d.Blacklist;e.save({domain:this.model.domain,changed:"save_account",save_account:!0}),this.trigger("remove")}}),w=p.extend({templateName:"notification_helper_save_card",events:{mouseover:"onHover",mouseout:"onHoverEnd","click .close-notification":"logClose","click .close-link":"logClose","click .close-image":"logClose","click .settings-link":"openWebappSettings","click .dashboard":"openDashboard","click .b-link":"openDashboard","click .help-link":"openFaq","click .editAndSave":"editAndSave","click #save, #save-unregistered":"save","click #always-save-cards-checkbox":"alwaysSave","click #register":"register","click #login":"login","click #forgotPassword":"forgotPassword","click #register-link, #signin-link":"toggleSigninOrRegister","click #never, #never-unregistered":"never","click #ok-post-register":"postRegisterOk"},openDashboard:function(){c.webapp.openPage("/#dashboard"),this.trigger("remove")},openWebappSettings:function(){c.webapp.openPage("/#settings"),this.trigger("remove")},openFaq:function(){c.webapp.openPage("/#help/faq/faq-passwordManager"),this.trigger("remove")},afterInitialize:function(){i.setTimeout(e.bind(function(){this.contentManager.messenger.send("background:notification:clear")},this),5e3),this.contentManager=this.options.contentManager,this.card=this.options.notification.card,this.model=new d.RealCard(this.options.notification.card),this.model.domain=this.contentManager.domain,this.model.oldEmail=this.contentManager.preferences.getPref("oldEmail"),this.model.loginNotLock=this.contentManager.preferences.getPref("loginNotLock"),this.model.locked=this.contentManager.isLocked(),this.model.unregistered=(!this.model.oldEmail||this.model.loginNotLock)&&this.model.locked,this.model.login_content="mm_notification_helper_securely_save_cards_login",this.model.register_content="mm_notification_helper_securely_save_cards_register",this.model.set("type",this.card.card_type);var t=this.card.issuedto;if(t){var a=t.split(" ");this.model.set("first_name",a[0]),a.length>0&&this.model.set("last_name",a[1])}this.panelId=this.model.locked?9000012:6000012,this.model.unregistered?this.contentManager.preferences.isPrefTrue("isBlurUpgrade")||(this.contentManager.messenger.send("update:panelActivity:impression",{panelId:this.panelId}),this.render()):(this.contentManager.messenger.send("update:panelActivity:impression",{panelId:this.panelId}),this.render()),this.applyCardStyles()},logClose:function(){this.contentManager.messenger.send("background:notification:clear"),this.contentManager.messenger.send("update:panelActivity:closed",{panelId:this.panelId}),this.trigger("remove")},alwaysSave:function(){this.card.alwaysSaveCards=!0,this.save()},editAndSave:function(e){e.preventDefault();var t=btoa(JSON.stringify({first_name:this.model.get("first_name"),last_name:this.model.get("last_name"),number:this.model.get("number"),expiry_month:this.model.get("expiry_month"),expiry_year:this.model.get("expiry_year"),cvc:this.model.get("cvc"),type:this.model.get("type"),brand:this.model.get("brand")}));c.webapp.openPage("/#/real_cards/edit_save/"+t),this.contentManager.messenger.send("update:panelActivity:impression",{panelId:9000013}),this.trigger("remove")},save:function(){this.contentManager.messenger.send("background:notification:clear"),this.contentManager.messenger.send("update:panelActivity:masked",{panelId:this.panelId}),this.$("#reg-info, #save, #never, #always-save-cards-checkbox").hide(),this.contentManager.isLocked()?(this.on("refresh-preferences",e.bind(function(){this.contentManager.preferences.fetchAll()},this)),this.$("#save-password-dialog, #save-password-dialog-unregistered").hide(),this.$("#register-dialog").show(),this.model.oldEmail?(this.$("#signin-form").show(),this.$(".signin-content").show()):(this.$("#register-form").show(),this.$(".register-content").show()),this.contentManager.messenger.send("update:panelActivity:impression",{panelId:7000011}),this.trigger("resize")):this.saveCard()},saveCard:function(){this.contentManager.messenger.send("background:save:card",this.card),this.$("#save-card-dialog-unregistered, #save-card-dialog").hide(),this.$("#post-save-dialog").show(),this.trigger("resize"),i.setTimeout(e.bind(function(){this.trigger("remove")},this),5e3)},loginSuccess:function(){this.contentManager.messenger.send("update:panelActivity:masked",{panelId:7000011}),this.contentManager.messenger.send("background:save:or:update:card",this.card)},registerSuccess:function(){this.contentManager.messenger.send("update:panelActivity:disclosed",{panelId:7000011}),this.contentManager.messenger.send("background:save:card",this.card)},never:function(){this.contentManager.messenger.send("background:notification:clear"),this.contentManager.messenger.send("update:panelActivity:disclosed",{panelId:this.panelId});var e=new d.Blacklist;e.save({domain:this.model.domain,changed:"save_card",save_card:!0}),this.trigger("remove")}}),k=p.extend({templateName:"notification_helper_failed_login",events:{mouseover:"onHover",mouseout:"onHoverEnd","click .close-link":"logClose","click .b-link":"openDashboard","click #update-account":"openWebappAccounts"},afterInitialize:function(){i.setTimeout(e.bind(function(){this.contentManager.messenger.send("background:notification:clear")},this),3e3),this.panelId=6000005,this.contentManager=this.options.contentManager,this.model=this.options.notification.account,this.contentManager.messenger.send("update:panelActivity:impression",{panelId:this.panelId}),this.render()},logClose:function(){this.contentManager.messenger.send("background:notification:clear"),this.contentManager.messenger.send("update:panelActivity:closed",{panelId:this.panelId}),this.trigger("remove")},openWebappAccounts:function(){this.contentManager.messenger.send("update:panelActivity:masked",{panelId:this.panelId}),c.webapp.openAccounts(this.model.domain),this.trigger("remove")},ignore:function(){this.contentManager.messenger.send("background:notification:clear"),this.contentManager.messenger.send("update:panelActivity:disclosed",{panelId:this.panelId}),this.trigger("remove")}}),E=p.extend({templateName:"notification_helper_password_with_no_login",afterInitialize:function(){i.setTimeout(e.bind(function(){this.contentManager.messenger.send("background:notification:clear")},this),3e3),this.panelId=6000004,this.contentManager=this.options.contentManager,this.model=this.options.notification.account,this.model.loginAccounts=new d.AccountCollection,this.model.loginAccounts.fetchAllByDomain(this.model.domain,e.bind(function(e){e||0==this.model.loginAccounts.length?this.closePanel():(this.model.userOrEmailOnlyAccounts=this.model.loginAccounts.filter(function(e){return e.get("username")||e.get("email")}),this.contentManager.messenger.send("update:panelActivity:impression",{panelId:this.panelId}),this.render())},this))},clicked:function(t){if(t&&t.preventDefault(),"saveLoginWithPassword"==t.target.id){this.options.messenger.send("update:panelActivity:masked",{panelId:this.panelId});var a,n="";this.$("#input-custom-login").is(":visible")?n=this.$("#custom-username").val():(n=this.$("#select-login option:selected").text(),a=this.$("#select-login option:selected").attr("accountId"));var i;try{if(a){i=this.model.loginAccounts.filter(function(e){return e.get("id")==a})[0];var r=this.model.loginAccounts.filter(e.bind(function(e){return e.get("password")==this.model.password},this))[0];i.set("password",this.model.password),this.contentManager.messenger.send("background:save:account",i.toJSON()),r.set("pushed",0),r.destroy()}else i=this.model.loginAccounts.filter(e.bind(function(e){return e.get("password")==this.model.password},this))[0],i.set("username",n),this.contentManager.messenger.send("background:save:account",i.toJSON())}catch(e){}this.contentManager.messenger.send("background:notification:clear"),this.trigger("remove")}else"close-notification"==t.target.className||"notf-close-icon"==t.target.className||"close-image"==t.target.className||"dismiss"==t.target.id?(this.options.messenger.send("update:panelActivity:closed",{panelId:this.panelId}),this.trigger("remove")):"icon-edit"==t.target.className&&("show-dropdown-edit"==t.target.id?(this.$("#input-custom-login").hide(),this.$("#select-login").show()):(this.$("#input-custom-login").show(),this.$("#select-login").hide()));return!1}}),A=p.extend({templateName:"notification_helper_change_password",events:{mouseover:"onHover",mouseout:"onHoverEnd","click .close-notification":"logClose","click .settings-link":"openSettings","click #save":"save","click #ignore":"ignore"},afterInitialize:function(){this.applyFadingStyle(),this.fadeIn(),i.setTimeout(e.bind(function(){this.contentManager.messenger.send("background:notification:clear")},this),3e3),this.panelId=6000003,this.contentManager=this.options.contentManager,this.model=this.options.notification.account,this.contentManager.messenger.send("update:panelActivity:impression",{panelId:this.panelId}),this.render()},logClose:function(){this.contentManager.messenger.send("background:notification:clear"),this.contentManager.messenger.send("update:panelActivity:closed",{panelId:this.panelId}),this.trigger("remove")},save:function(){this.contentManager.messenger.send("update:panelActivity:masked",{panelId:this.panelId}),this.contentManager.messenger.send("background:save:account",this.model),this.contentManager.messenger.send("background:notification:clear"),this.trigger("remove")},ignore:function(){this.contentManager.messenger.send("background:notification:clear"),this.contentManager.messenger.send("update:panelActivity:disclosed",{panelId:this.panelId}),this.trigger("remove")}});return{NotificationPanelView:p,CardNotificationPanelView:m,RealCardNotificationPanelView:h,SaveCardNotificationPanelView:w,CheckoutGrowlNotificationPanelView:_,DetailedEmailNotificationPanelView:y,ExpireWarningNotificationPanelView:g,ExpireNotifyNotificationPanelView:f,GrowlNotificationPanelView:b,SaveLoginNotificationPanelView:v,FailedLoginNotificationPanelView:k,PasswordWithNoLoginNotificationPanelView:E,ChangePasswordNotificationPanelView:A}}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.notification_helper_password_with_no_login=e.template(function(e,t,a,n,i){function r(e,t){var n,i,r="";return r+='\n            <div id="select-login" style="margin-bottom:1em">\n                <span style="display:block;margin-bottom:.5em;color:#848484;font-weight:bold;font-size:1.2em;">',n="mm_notification_helper_email_address_username",m=a.intl,i=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===g?i.call(e,n,{hash:{}}):i===b?y.call(e,"intl",n,{hash:{}}):i,r+=v(n)+'</span>\n                    <select style="width:90%;">\n                      ',m=a.userOrEmailOnlyAccounts,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"userOrEmailOnlyAccounts"),i=a.each,h=f.program(2,s,t),h.hash={},h.fn=h,h.inverse=f.noop,n=i.call(e,n,h),(n||0===n)&&(r+=n),r+='\n                    </select>\n                    <i class="icon-edit" id="show-custom-edit" style="cursor:pointer;"></i>\n            </div>\n            '}function s(e,t){var n,i,r="";return r+='\n                          <option accountId="',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof n===g?n=n.call(e,{hash:{}}):n===b&&(n=y.call(e,"this.id",{hash:{}})),r+=v(n)+'">',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"username"),i=a["if"],h=f.program(3,o,t),h.hash={},h.fn=h,h.inverse=f.program(5,l,t),n=i.call(e,n,h),(n||0===n)&&(r+=n),r+="</option>\n                      "}function o(e){var t;return t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"username"),typeof t===g?t=t.call(e,{hash:{}}):t===b&&(t=y.call(e,"this.username",{hash:{}})),v(t)}function l(e){var t;return t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"email"),typeof t===g?t=t.call(e,{hash:{}}):t===b&&(t=y.call(e,"this.email",{hash:{}})),v(t)}function c(){return'"display:none;"'}function d(){return'<i class="icon-edit" id="show-dropdown-edit" style="cursor:pointer;"></i>'}a=a||e.helpers;var u,p,m,h,_="",f=this,g="function",y=a.helperMissing,b=void 0,v=this.escapeExpression;return _+='<div class="panel">\n    <div class="close-notification">\n        <span class="notf-close-icon" id="paneHover">\n            <img class="close-image" src="',u="/pages/images/manage/dd_close_icon.png",m=a.assetUrl,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),u=typeof p===g?p.call(t,u,{hash:{}}):p===b?y.call(t,"assetUrl",u,{hash:{}}):p,_+=v(u)+'"/>\n        </span>\n    </div>\n\n    <div class="body-notification" style="color:#1e91da;">\n        <img src="',u="/images/Icon.png",m=a.assetUrl,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),u=typeof p===g?p.call(t,u,{hash:{}}):p===b?y.call(t,"assetUrl",u,{hash:{}}):p,_+=v(u)+'" style="height: 4.5em;margin-top: .3em;"/>\n        <div style="position: relative;bottom: 3.7em;left: 5.5em;">\n            <span style="font-size:1.6em">',u="mm_notification_helper_new_password_created",m=a.intl,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),u=typeof p===g?p.call(t,u,{hash:{}}):p===b?y.call(t,"intl",u,{hash:{}}):p,_+=v(u)+'</span>\n            </br>\n            <span style="font-size:1.2em">',u="mm_dntme_at",m=a.intl,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),u=typeof p===g?p.call(t,u,{hash:{}}):p===b?y.call(t,"intl",u,{hash:{}}):p,_+=v(u)+" ",m=a.domain,u=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"domain"),typeof u===g?u=u.call(t,{hash:{}}):u===b&&(u=y.call(t,"domain",{hash:{}})),_+=v(u)+'</span>\n        </div>\n    </div>\n\n    <hr style="position:relative;top:-4em;border-top: 2px solid #1e91da;width:104.5%;margin-left:-1em;"/>\n    \n    <div class="dropdown-section" style="text-align: left;margin-left: 2em;">\n        <div style="margin-top: -5em;margin-bottom:1em">\n           <span style="display:block;margin-bottom:.5em;color:#848484;font-weight:bold;font-size:1.2em;">',u="mm_notification_helper_password",m=a.intl,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),u=typeof p===g?p.call(t,u,{hash:{}}):p===b?y.call(t,"intl",u,{hash:{}}):p,_+=v(u)+'</span>\n           <span style="font-weight:bold;font-size:1.6em;">',m=a.password,u=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"password"),typeof u===g?u=u.call(t,{hash:{}}):u===b&&(u=y.call(t,"password",{hash:{}})),_+=v(u)+"</span>\n        </div>\n        <div>\n            ",m=a.loginAccounts,u=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"loginAccounts"),p=a["if"],h=f.program(1,r,i),h.hash={},h.fn=h,h.inverse=f.noop,u=p.call(t,u,h),(u||0===u)&&(_+=u),_+='\n        </div>\n        <div id="input-custom-login" style=',m=a.loginAccounts,u=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"loginAccounts"),p=a["if"],h=f.program(7,c,i),h.hash={},h.fn=h,h.inverse=f.noop,u=p.call(t,u,h),(u||0===u)&&(_+=u),_+='>\n            <span style="display:block;margin-bottom:.5em;color:#848484;font-weight:bold;font-size:1.2em;">',u="mm_notification_helper_email_address_username",m=a.intl,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),u=typeof p===g?p.call(t,u,{hash:{}}):p===b?y.call(t,"intl",u,{hash:{}}):p,_+=v(u)+'</span>\n            <input style="width:90%;" type="text" id="custom-username"/>\n                ',m=a.loginAccounts,u=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"loginAccounts"),p=a["if"],h=f.program(9,d,i),h.hash={},h.fn=h,h.inverse=f.noop,u=p.call(t,u,h),(u||0===u)&&(_+=u),_+='\n        </div>\n    </div>\n    <div class="button-section">\n        <input type="button" id="saveLoginWithPassword" class="btn btn-primary" style="text-align:center;width:95%;background:green;font-size:1.5em;line-height: 1.5em;" value="Save Login & Password" />\n        </br>\n        <input type="button" id="dismiss" class="btn btn-primary" style="text-align:center;margin:1em;width:25%;background:gray;font-size:1.5em;line-height: 1.5em;" value="Cancel" />\n    </div>\n</div>'}),ABINE_DNTME.CompiledTemplates.notification_helper_password_with_no_login}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.notification_helper_paymentsr2_card_notification=e.template(function(e,t,a,n,i){function r(e){var t,n,i,r="";return r+="\n          ",m=a.getOriginalValue,t=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getOriginalValue"),n="mm_payment_helper_help_bitcoin",m=a.intl,i=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===g?i.call(e,n,t,{hash:{}}):i===b?y.call(e,"intl",n,t,{hash:{}}):i,r+=v(t)+"\n        "}function s(e,t){var n,i,r="";return r+="\n          ",m=a.company,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"company"),i=a["if"],h=f.program(4,o,t),h.hash={},h.fn=h,h.inverse=f.program(6,l,t),n=i.call(e,n,h),(n||0===n)&&(r+=n),r+="\n        "}function o(e){var t,n,i,r="";return r+="\n            ",m=a.getOriginalValue,t=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getOriginalValue"),n="mm_payment_helper_help_company",m=a.intl,i=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===g?i.call(e,n,t,{hash:{}}):i===b?y.call(e,"intl",n,t,{hash:{}}):i,r+=v(t)+"\n          "}function l(e,t){var n,i,r="";return r+="\n            ",m=a.isAch,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"isAch"),i=a["if"],h=f.program(7,c,t),h.hash={},h.fn=h,h.inverse=f.program(9,d,t),n=i.call(e,n,h),(n||0===n)&&(r+=n),r+="\n          "}function c(e){var t,n,i,r="";return r+="\n              ",t="mm_payment_helper_help_2_1",m=a.intl,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===g?n.call(e,t,{hash:{}}):n===b?y.call(e,"intl",t,{hash:{}}):n,r+=v(t)+"\n              <b>",m=a.getTotalCharge,t=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getTotalCharge"),n="mm_payment_helper_help_2_2",m=a.intl,i=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===g?i.call(e,n,t,{hash:{}}):i===b?y.call(e,"intl",n,t,{hash:{}}):i,r+=v(t)+"</b> ",t="mm_payment_helper_help_2_3_ach",m=a.intl,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===g?n.call(e,t,{hash:{}}):n===b?y.call(e,"intl",t,{hash:{}}):n,r+=v(t)+"\n            "}function d(e){var t,n,i,r="";return r+="\n              ",t="mm_payment_helper_help_2_1",m=a.intl,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===g?n.call(e,t,{hash:{}}):n===b?y.call(e,"intl",t,{hash:{}}):n,r+=v(t)+"\n              <b>",m=a.getTotalCharge,t=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getTotalCharge"),n="mm_payment_helper_help_2_2",m=a.intl,i=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===g?i.call(e,n,t,{hash:{}}):i===b?y.call(e,"intl",n,t,{hash:{}}):i,r+=v(t)+"</b> ",t="mm_payment_helper_help_2_3",m=a.intl,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===g?n.call(e,t,{hash:{}}):n===b?y.call(e,"intl",t,{hash:{}}):n,r+=v(t)+"\n            "}a=a||e.helpers,n=n||e.partials;var u,p,m,h,_="",f=this,g="function",y=a.helperMissing,b=void 0,v=this.escapeExpression;return _+='<div class="panel">\n  <!-- Default header (actually footer) for the panels -->\n  <div class="header" id="default-header" style="border-top: 0px solid;">\n    <div class="logo-link">\n      <img style="width:63px;height:16px;" src="',u="/pages/images/blur_logo_ext_window.png",m=a.assetUrl,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),u=typeof p===g?p.call(t,u,{hash:{}}):p===b?y.call(t,"assetUrl",u,{hash:{}}):p,_+=v(u)+'"/>\n    </div>\n    <div class="links-wrapper">\n      <div class="newlinks close-link">\n        <img id="close" class="close-notification" src="',u="/pages/images/2015panels/panel_xclose.png",m=a.assetUrl,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),u=typeof p===g?p.call(t,u,{hash:{}}):p===b?y.call(t,"assetUrl",u,{hash:{}}):p,_+=v(u)+'"/>\n      </div>\n    </div>\n  </div>\n\n  <div class="card-main">\n      <div style="background-color:#3497db;color:white;padding-left:10px;margin-left:-10px;margin-right:-10px;padding-right:10px;">\n        <h3>New Masked Card Created</h3>\n      </div>\n      <div style="margin: 10px 15px;text-align:center;">\n        ',m=a.bitcoinFunded,u=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"bitcoinFunded"),p=a["if"],h=f.program(1,r,i),h.hash={},h.fn=h,h.inverse=f.program(3,s,i),u=p.call(t,u,h),(u||0===u)&&(_+=u),_+="\n      </div>\n\n  ",u=t,u=f.invokePartial(n["notification_helper.masked_card"],"notification_helper.masked_card",u,a,n),(u||0===u)&&(_+=u),_+="\n  ",u=t,u=f.invokePartial(n["notification_helper.card_address"],"notification_helper.card_address",u,a,n),(u||0===u)&&(_+=u),_+="\n  </div>\n  ",u=t,u=f.invokePartial(n["notification_helper.card_actions"],"notification_helper.card_actions",u,a,n),(u||0===u)&&(_+=u),_+="\n\n</div>"}),ABINE_DNTME.CompiledTemplates.notification_helper_paymentsr2_card_notification}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.notification_helper_real_card_notification=e.template(function(e,t,a,n,i){function r(e,t){var n,i,r="";return r+='\n    <div class="card-address" style="text-align:center;">\n      <div style="color:#4594E1">\n        <span style="font-size:12pt;">Billing Address</span>\n      </div>\n      <div style="color:#353535">\n        <span style="font-size:11pt;">',c=a.getAddress1,n=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getAddress1"),typeof n===m?n=n.call(e,{hash:{}}):n===_&&(n=h.call(e,"getAddress1",{hash:{}})),r+=f(n)+"</span>\n        <br/>\n          ",c=a.getAddress2,n=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getAddress2"),i=a["if"],d=p.program(2,s,t),d.hash={},d.fn=d,d.inverse=p.noop,n=i.call(e,n,d),(n||0===n)&&(r+=n),r+='\n        <span style="font-size:11pt;">',c=a.getCityState,n=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getCityState"),typeof n===m?n=n.call(e,{hash:{}}):n===_&&(n=h.call(e,"getCityState",{hash:{}})),r+=f(n)+'</span>\n        <br/>\n        <span style="font-size:11pt;">',c=a.getPostal,n=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getPostal"),typeof n===m?n=n.call(e,{hash:{}}):n===_&&(n=h.call(e,"getPostal",{hash:{}})),r+=f(n)+"</span>\n        <br/>\n      </div>\n    </div>\n"}function s(e){var t,n="";return n+='\n            <span style="font-size:11pt;">',c=a.getAddress2,t=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getAddress2"),typeof t===m?t=t.call(e,{hash:{}}):t===_&&(t=h.call(e,"getAddress2",{hash:{}})),n+=f(t)+"</span>\n            <br/>\n          "}a=a||e.helpers,n=n||e.partials;var o,l,c,d,u="",p=this,m="function",h=a.helperMissing,_=void 0,f=this.escapeExpression;return u+='<div class="panel">\n  <div>\n    <span style="float:left; color:#4594E1;font-size:17px;margin-top:3px;margin-left:3px;">Auto-Fill Credit Card</span>\n    <div class="newheader" style="float:right;">\n      <div class="newlinks close-link">\n        <img id="close" class="close-notification" src="',o="/pages/images/2015panels/panel_xclose.png",c=a.assetUrl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),o=typeof l===m?l.call(t,o,{hash:{}}):l===_?h.call(t,"assetUrl",o,{hash:{}}):l,u+=f(o)+'">\n      </div>\n    </div>\n    <p style="height:20px;"></p>\n  </div>\n  ',o=t,o=p.invokePartial(n["notification_helper.card"],"notification_helper.card",o,a,n),(o||0===o)&&(u+=o),u+="\n  <p></p>\n",c=a.getAddress,o=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getAddress"),l=a["if"],d=p.program(1,r,i),d.hash={},d.fn=d,d.inverse=p.noop,o=l.call(t,o,d),(o||0===o)&&(u+=o),u+="\n  <!-- Default header (actually footer) for the panels -->\n</div>"}),ABINE_DNTME.CompiledTemplates.notification_helper_real_card_notification}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.notification_helper_save_card=e.template(function(e,t,a,n,i){function r(e){var t,i,r="";return r+='\n    <span id="save-card-dialog-unregistered">\n      <div style="margin-right:10px;">\n        ',t=e,t=p.invokePartial(n["notification_helper.card"],"notification_helper.card",t,a,n),(t||0===t)&&(r+=t),r+='\n        <div class="body-notification" style="font-size:12px;text-align:center;">',t="mm_notification_helper_save_card_blur_is_the_best",c=a.intl,i=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===m?i.call(e,t,{hash:{}}):i===_?h.call(e,"intl",t,{hash:{}}):i,r+=f(t)+'</div>\n        <div style="margin:10px 30px;font-size:12px;" id="reg-info">\n          ',t="mm_notification_helper_save_card_would_you_like",c=a.intl,i=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===m?i.call(e,t,{hash:{}}):i===_?h.call(e,"intl",t,{hash:{}}):i,r+=f(t)+'\n          <div style="margin-top:10px;">\n            <input type="button" class="btn done" id="never-unregistered" style="text-align:center;" value="',t="mm_notification_helper_never",c=a.intl,i=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===m?i.call(e,t,{hash:{}}):i===_?h.call(e,"intl",t,{hash:{}}):i,r+=f(t)+'" />\n            <input type="button" class="btn btn-success done" id="save-unregistered" style="text-align:center;" value="',t="mm_notification_helper_save_this_card",c=a.intl,i=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===m?i.call(e,t,{hash:{}}):i===_?h.call(e,"intl",t,{hash:{}}):i,r+=f(t)+'" />\n          </div>\n        </div>\n      </div>\n    </span>\n  '}function s(e){var t,i,r="";return r+='\n    <span id="save-card-dialog">\n      <div>\n        ',t=e,t=p.invokePartial(n["notification_helper.card"],"notification_helper.card",t,a,n),(t||0===t)&&(r+=t),r+='\n        <a class="editAndSave clearfix" href="#">',t="mm_notification_helper_save_card_edit_and_save",c=a.intl,i=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===m?i.call(e,t,{hash:{}}):i===_?h.call(e,"intl",t,{hash:{}}):i,r+=f(t)+'</a>\n          <div class="btn btn-primary done" id="save" style="padding:10px;font-size:25px;text-align:center;margin:5px;margin-top:10px;width: 80%;"><img src="',t="/pages/images/2015panels/save_account_check.png",c=a.assetUrl,i=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof i===m?i.call(e,t,{hash:{}}):i===_?h.call(e,"assetUrl",t,{hash:{}}):i,r+=f(t)+'">',t="mm_notification_helper_save_this_card",c=a.intl,i=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===m?i.call(e,t,{hash:{}}):i===_?h.call(e,"intl",t,{hash:{}}):i,r+=f(t)+'</div><br>\n          <a class="done" id="never" style="text-decoration:underline;text-align:center;margin:5px;color:darkgrey;">',t="mm_notification_helper_never_for_this_site",c=a.intl,i=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===m?i.call(e,t,{hash:{}}):i===_?h.call(e,"intl",t,{hash:{}}):i,r+=f(t)+'</a>\n          <strong><a class="done" id="always-save-cards-checkbox" style="text-decoration:underline;text-align:center;margin:5px;color:#3398db;">',t="mm_notification_helper_always_save_cards",c=a.intl,i=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===m?i.call(e,t,{hash:{}}):i===_?h.call(e,"intl",t,{hash:{}}):i,r+=f(t)+"</a></strong>\n      </div>\n    </span>\n  "}a=a||e.helpers,n=n||e.partials;var o,l,c,d,u="",p=this,m="function",h=a.helperMissing,_=void 0,f=this.escapeExpression;return u+='<div class="panel">\n  <div class="body-notification" style="cursor: default;">\n    <img src="',o="/images/Icon.png",c=a.assetUrl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),o=typeof l===m?l.call(t,o,{hash:{}}):l===_?h.call(t,"assetUrl",o,{hash:{}}):l,u+=f(o)+'"/>\n    <span class="boldFont">',o="mm_notification_helper_save_card_title",c=a.intl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof l===m?l.call(t,o,{hash:{}}):l===_?h.call(t,"intl",o,{hash:{}}):l,u+=f(o)+'</span>\n    <img class="close-image" src="',o="/pages/images/manage/dd_close_icon.png",c=a.assetUrl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),o=typeof l===m?l.call(t,o,{hash:{}}):l===_?h.call(t,"assetUrl",o,{hash:{}}):l,u+=f(o)+'"/>\n  </div>\n\n  ',c=a.unregistered,o=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"unregistered"),l=a["if"],d=p.program(1,r,i),d.hash={},d.fn=d,
d.inverse=p.program(3,s,i),o=l.call(t,o,d),(o||0===o)&&(u+=o),u+="\n\n  ",o=t,o=p.invokePartial(n["notification_helper.login_register_form"],"notification_helper.login_register_form",o,a,n),(o||0===o)&&(u+=o),u+='\n\n  <span id="post-signin-dialog" style="display:none;">\n    <div class="body-notification"><img src="',o="/images/Icon.png",c=a.assetUrl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),o=typeof l===m?l.call(t,o,{hash:{}}):l===_?h.call(t,"assetUrl",o,{hash:{}}):l,u+=f(o)+'"/>',o="mm_notification_helper_card_saved",c=a.intl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof l===m?l.call(t,o,{hash:{}}):l===_?h.call(t,"intl",o,{hash:{}}):l,u+=f(o)+"</div>\n    <div>\n      ",o="mm_notification_helper_save_card_protect_now",c=a.intl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof l===m?l.call(t,o,{hash:{}}):l===_?h.call(t,"intl",o,{hash:{}}):l,u+=f(o)+'\n    </div>\n    <div style="margin:10px 0px;">\n      <input type="button" id="ok-post-register" class="btn btn-success" style="margin-right:5px" value=\'',o="mm_dntme_ok",c=a.intl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof l===m?l.call(t,o,{hash:{}}):l===_?h.call(t,"intl",o,{hash:{}}):l,u+=f(o)+'\'/>\n      <a href=\'https://link.abine.com/learnmore-cards\' target="_blank" id="learn-more-post-register" class="btn btn-primary">',o="mm_dntme_learn_more",c=a.intl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof l===m?l.call(t,o,{hash:{}}):l===_?h.call(t,"intl",o,{hash:{}}):l,u+=f(o)+'</a>\n    </div>\n\n  </span>\n  <span id="post-save-dialog" style="display:none;">\n    <div class="body-notification"><img src="',o="/images/Icon.png",c=a.assetUrl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),o=typeof l===m?l.call(t,o,{hash:{}}):l===_?h.call(t,"assetUrl",o,{hash:{}}):l,u+=f(o)+'"/>',o="mm_notification_helper_card_saved",c=a.intl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof l===m?l.call(t,o,{hash:{}}):l===_?h.call(t,"intl",o,{hash:{}}):l,u+=f(o)+"</div>\n    <div>\n      ",o="mm_notification_helper_save_card_protect_now",c=a.intl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof l===m?l.call(t,o,{hash:{}}):l===_?h.call(t,"intl",o,{hash:{}}):l,u+=f(o)+"\n    </div>\n  </span>\n</div>"}),ABINE_DNTME.CompiledTemplates.notification_helper_save_card}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.notification_helper_save_login=e.template(function(e,t,a,n,i){function r(e){var t,n,i="";return i+='\n    <span id="save-password-dialog-unregistered">\n      <div style="float:left;margin-top:20px;margin-right:5px;">\n        <img src="',t="pages/images/dnt_blur_growl_blur_logo2.png",c=a.assetUrl,n=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===m?n.call(e,t,{hash:{}}):n===_?h.call(e,"assetUrl",t,{hash:{}}):n,i+=f(t)+'"/>\n      </div>\n      <div style="margin-right:10px;">\n        <div class="body-notification" style="font-size:12px;">',t="mm_notification_helper_save_login_blur_is_the_best",c=a.intl,n=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===m?n.call(e,t,{hash:{}}):n===_?h.call(e,"intl",t,{hash:{}}):n,i+=f(t)+'</div>\n        <div style="margin:10px 30px;font-size:12px;">\n          ',t="mm_notification_helper_save_login_would_you_like",c=a.intl,n=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===m?n.call(e,t,{hash:{}}):n===_?h.call(e,"intl",t,{hash:{}}):n,i+=f(t)+'\n          <div style="margin-top:10px;">\n            <input type="button" class="btn done" id="never-unregistered" style="text-align:center;" value="',t="mm_notification_helper_never",c=a.intl,n=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===m?n.call(e,t,{hash:{}}):n===_?h.call(e,"intl",t,{hash:{}}):n,i+=f(t)+'" />\n            <input type="button" class="btn btn-success done" id="save-unregistered" style="text-align:center;" value="',t="mm_notification_helper_save_login",c=a.intl,n=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===m?n.call(e,t,{hash:{}}):n===_?h.call(e,"intl",t,{hash:{}}):n,i+=f(t)+'" />\n          </div>\n        </div>\n      </div>\n     <div class="links settings-link" data-highlight="rememberaccounts" title="',t="mm_notification_helper_settings",c=a.intl,n=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===m?n.call(e,t,{hash:{}}):n===_?h.call(e,"intl",t,{hash:{}}):n,i+=f(t)+'">\n          <img class="header-icon" src="',t="/pages/images/dnt-ui-header-settings.png",c=a.assetUrl,n=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===m?n.call(e,t,{hash:{}}):n===_?h.call(e,"assetUrl",t,{hash:{}}):n,i+=f(t)+'">\n      </div>\n    </span>\n  '}function s(e){var t,i,r="";return r+='\n    <span id="save-password-dialog">\n      <div>\n          <div class="btn btn-primary done" id="save" style="padding:10px;font-size:25px;text-align:center;margin:5px;margin-top:10px;width: 80%;"><img src="',t="/pages/images/2015panels/save_account_check.png",c=a.assetUrl,i=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof i===m?i.call(e,t,{hash:{}}):i===_?h.call(e,"assetUrl",t,{hash:{}}):i,r+=f(t)+'">',t="mm_notification_helper_save_this_password",c=a.intl,i=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===m?i.call(e,t,{hash:{}}):i===_?h.call(e,"intl",t,{hash:{}}):i,r+=f(t)+'</div><br>\n          <a class="done" id="never" style="text-decoration:underline;text-align:center;margin:5px;color:darkgrey;">',t="mm_notification_helper_never_for_this_site",c=a.intl,i=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===m?i.call(e,t,{hash:{}}):i===_?h.call(e,"intl",t,{hash:{}}):i,r+=f(t)+'</a>\n          <strong><a class="done" id="always-save-accounts-checkbox" style="text-decoration:underline;text-align:center;margin:5px;color:#3398db;">',t="mm_notification_helper_always_save_passwords",c=a.intl,i=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===m?i.call(e,t,{hash:{}}):i===_?h.call(e,"intl",t,{hash:{}}):i,r+=f(t)+'</a></strong>\n      </div>\n    </span>\n    <!-- Default header (actually footer) for the panels -->\n  <div style="position:absolute;right:0;bottom:5px;top:0;">\n      ',t=e,t=p.invokePartial(n["common.header"],"common.header",t,a,n),(t||0===t)&&(r+=t),r+="\n    </div>\n  "}a=a||e.helpers,n=n||e.partials;var o,l,c,d,u="",p=this,m="function",h=a.helperMissing,_=void 0,f=this.escapeExpression;return u+='<div class="panel">\n  <div class="close-notification">\n      <img style="margin-top:1.2em;" src="',o="/images/blur_xclose.png",c=a.assetUrl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),o=typeof l===m?l.call(t,o,{hash:{}}):l===_?h.call(t,"assetUrl",o,{hash:{}}):l,u+=f(o)+'"/>\n  </div>\n\n  ',c=a.unregistered,o=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"unregistered"),l=a["if"],d=p.program(1,r,i),d.hash={},d.fn=d,d.inverse=p.program(3,s,i),o=l.call(t,o,d),(o||0===o)&&(u+=o),u+="\n\n  ",o=t,o=p.invokePartial(n["notification_helper.login_register_form"],"notification_helper.login_register_form",o,a,n),(o||0===o)&&(u+=o),u+='\n\n  <span id="post-signin-dialog" style="display:none;">\n    <div class="body-notification"><img src="',o="/images/Icon.png",c=a.assetUrl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),o=typeof l===m?l.call(t,o,{hash:{}}):l===_?h.call(t,"assetUrl",o,{hash:{}}):l,u+=f(o)+'"/>',o="mm_notification_helper_password_saved",c=a.intl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof l===m?l.call(t,o,{hash:{}}):l===_?h.call(t,"intl",o,{hash:{}}):l,u+=f(o)+"</div>\n    <div>\n      ",o="mm_notification_helper_blur_will_now_protect",c=a.intl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof l===m?l.call(t,o,{hash:{}}):l===_?h.call(t,"intl",o,{hash:{}}):l,u+=f(o)+'\n    </div>\n    <div style="margin:10px 0px;">\n      <input type="button" id="ok-post-register" class="btn btn-success" style="margin-right:5px" value=\'',o="mm_dntme_ok",c=a.intl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof l===m?l.call(t,o,{hash:{}}):l===_?h.call(t,"intl",o,{hash:{}}):l,u+=f(o)+'\'/>\n      <a href=\'https://link.abine.com/learnmore-passwords\' target="_blank" id="learn-more-post-register" class="btn btn-primary">',o="mm_dntme_learn_more",c=a.intl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof l===m?l.call(t,o,{hash:{}}):l===_?h.call(t,"intl",o,{hash:{}}):l,u+=f(o)+"</a>\n    </div>\n\n  </span>\n\n\n</div>"}),ABINE_DNTME.CompiledTemplates.notification_helper_save_login}),ABINE_DNTME.require(["wycats/handlebars"],function(e){e.registerPartial("payment_helper.company_cards",e.template(function(e,t,a,n,i){function r(e){var t,n,i="";return i+='\n      <a href="#" class="mmKeyOption">\n        <div class="element otherred" id="createCompanyCard">\n          <span class="panelLeft">\n              <img class="iconPos" src="',t="/pages/images/2015panels/card_green.png",l=a.assetUrl,n=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===p?n.call(e,t,{hash:{}}):n===h?m.call(e,"assetUrl",t,{hash:{}}):n,i+=_(t)+'" style="width:43px;height:21px;"/>\n            ',t="mm_payment_helper_company_create",l=a.intl,n=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===p?n.call(e,t,{hash:{}}):n===h?m.call(e,"intl",t,{hash:{}}):n,i+=_(t)+"\n          </span>\n        </div>\n      </a>\n"}a=a||e.helpers;var s,o,l,c,d="",u=this,p="function",m=a.helperMissing,h=void 0,_=this.escapeExpression;return d+="\n<!-- If Company Cards available-->\n",l=a.hasCompanyCards,s=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"hasCompanyCards"),o=a["if"],c=u.program(1,r,i),c.hash={},c.fn=c,c.inverse=u.noop,s=o.call(t,s,c),(s||0===s)&&(d+=s),d}))}),ABINE_DNTME.require(["wycats/handlebars"],function(e){e.registerPartial("payment_helper.disposable_cards",e.template(function(e,t,a,n,i){function r(e,t){var n,i,r="";return r+="\n  ",c=a.disposableCards,n=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"disposableCards"),i=a.each,d=p.program(2,s,t),d.hash={},d.fn=d,d.inverse=p.noop,n=i.call(e,n,d),(n||0===n)&&(r+=n),r+="\n"}function s(e){var t,n,i="";return i+='\n    <a href="#" data-cardid="',c=a.id,t=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof t===m?t=t.call(e,{hash:{}}):t===_&&(t=h.call(e,"id",{hash:{}})),i+=f(t)+'" class="mmKeyOption usedCard">\n      <div class="element othergreen" id="mask">\n        <span class="panelLeft">\n          <img class="iconPos" src="',t="/pages/images/2015panels/card_green.png",c=a.assetUrl,n=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===m?n.call(e,t,{hash:{}}):n===_?h.call(e,"assetUrl",t,{hash:{}}):n,i+=f(t)+'"\n               style="width:43px;height:21px;"/>\n          ',t="mm_payment_helper_useCardEnding",c=a.intl,n=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===m?n.call(e,t,{hash:{}}):n===_?h.call(e,"intl",t,{hash:{}}):n,i+=f(t)+" ",t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getLastFour"),typeof t===m?t=t.call(e,{hash:{}}):t===_&&(t=h.call(e,"this.getLastFour",{hash:{}})),i+=f(t)+'\n        </span>\n        <span class="panelRight">\n          <span class="overflowText">',c=a.getOriginalValue,t=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getOriginalValue"),typeof t===m?t=t.call(e,{hash:{}}):t===_&&(t=h.call(e,"getOriginalValue",{hash:{}})),i+=f(t)+" ",t="mm_payment_helper_card",c=a.intl,n=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===m?n.call(e,t,{hash:{}}):n===_?h.call(e,"intl",t,{hash:{}}):n,i+=f(t)+"</span>\n        </span>\n      </div>\n    </a>\n  "}a=a||e.helpers;var o,l,c,d,u="",p=this,m="function",h=a.helperMissing,_=void 0,f=this.escapeExpression;return u+="<!-- If Masked Cards already exist for this domain -->\n",c=a.disposableCards,o=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"disposableCards"),l=a["if"],d=p.program(1,r,i),d.hash={},d.fn=d,d.inverse=p.noop,o=l.call(t,o,d),(o||0===o)&&(u+=o),u}))}),ABINE_DNTME.require(["wycats/handlebars"],function(e){e.registerPartial("payment_helper.inline_faq",e.template(function(e,t,a){a=a||e.helpers;var n,i,r,s="",o="function",l=a.helperMissing,c=void 0,d=this.escapeExpression;return s+='<div id="inlineFaq" class="left-panel" style="display:none;margin-bottom:15px;">\n<div class=\'faqGotIt\' style="cursor:pointer;margin-left:10px;margin-top:5px;color:#555;font-weight:bold;"><img src="',n="/pages/images/2015panels/back_arrow.png",r=a.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"assetUrl",n,{hash:{}}):i,s+=d(n)+'"/>&nbsp;&nbsp;&nbsp;&nbsp;Go Back</div>\n<div class="payments-header" style="text-align:center;">\n  ',n="mm_payment_helper_safestWayTitle",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,s+=d(n)+"\n</div>\n<div style=\"margin: 0px 15px;\">\n  <div class='faq-question-header'>",n="mm_payment_helper_inlineFaqWhatAre",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,s+=d(n)+"</div>\n  <div class='faq-body'>\n    ",n="mm_payment_helper_inlineFaqMaskedCardsAre",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,s+=d(n)+"\n  </div>\n  <div class='faq-question-header'>",n="mm_payment_helper_inlineFaqAreThereAdditional",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,s+=d(n)+"</div>\n  <div class='faq-body'>\n    ",n="mm_payment_helper_inlineFaqAdditionalFees",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,s+=d(n)+"\n  </div>\n  <div class='faq-question-header'>",n="mm_payment_helper_inlineFaqWhatIfIDont",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,s+=d(n)+"</div>\n  <div class='faq-body'>\n    ",n="mm_payment_helper_inlineFaqClose_1",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,s+=d(n)+" <a href='#' id='viewCardsDashboard'>",n="mm_payment_helper_inlineFaqClose_2",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,s+=d(n)+"</a>\n  </div>\n  <div style=\"text-align: center;margin:5px 0px;\">\n    <input type=\"button\" id='faqCardLink' class='btn btn-primary' value='",n="mm_payment_helper_link",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,s+=d(n)+"'/>\n    <input type=\"button\" class='faqGotIt btn btn-success' value='",n="mm_payment_helper_inlineFaqGotIt",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,s+=d(n)+"'/>\n  </div>\n</div>\n</div>"}))}),ABINE_DNTME.require(["wycats/handlebars"],function(e){e.registerPartial("payment_helper.mask_my_card",e.template(function(e,t,a,n,i){function r(e,t){var n,i,r="";return r+='\n        <a href="#" data-cardid="',d=a.id,n=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof n===h?n=n.call(e,{hash:{}}):n===f&&(n=_.call(e,"id",{hash:{}})),r+=g(n)+'" class="mmKeyOption">\n            <div class="element othergreen" id="protect-my-card-btn">\n                  <span class="panelLeft">\n                    <img class="iconPos" src="',n="/pages/images/2015panels/card_green.png",d=a.assetUrl,i=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),n=typeof i===h?i.call(e,n,{hash:{}}):i===f?_.call(e,"assetUrl",n,{hash:{}}):i,r+=g(n)+'" style="width:43px;height:21px;"/>\n                    ',n="mm_payment_helper_create_new_masked_card",d=a.intl,i=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===h?i.call(e,n,{hash:{}}):i===f?_.call(e,"intl",n,{hash:{}}):i,r+=g(n)+"\n                  </span>\n            </div>\n        </a>\n\n    ",d=a.entitledToPhone,n=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"entitledToPhone"),i=a["if"],u=m.program(2,s,t),u.hash={},u.fn=u,u.inverse=m.noop,n=i.call(e,n,u),(n||0===n)&&(r+=n),r+="\n    "}function s(e,t){var n,i,r="";return r+="\n        ",d=a.hasAuthorizedCoinbase,n=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"hasAuthorizedCoinbase"),i=a["if"],u=m.program(3,o,t),u.hash={},u.fn=u,u.inverse=m.noop,n=i.call(e,n,u),(n||0===n)&&(r+=n),r+="\n    "}function o(e){var t,n,i="";return i+='\n            <a href="#" data-cardid="',d=a.id,t=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof t===h?t=t.call(e,{hash:{}}):t===f&&(t=_.call(e,"id",{hash:{}})),i+=g(t)+'" class="mmKeyOption">\n                <div class="element othergreen" id="protect-my-card-bitcoin-btn">\n                <span class="panelLeft">\n                    <img class="iconPos" src="',t="/pages/images/maskcard-icon-bitcoin.png",d=a.assetUrl,n=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===h?n.call(e,t,{hash:{}}):n===f?_.call(e,"assetUrl",t,{hash:{}}):n,i+=g(t)+'"/>\n                    ',t="mm_payment_helper_create_new_masked_card",d=a.intl,n=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===h?n.call(e,t,{hash:{}}):n===f?_.call(e,"intl",t,{hash:{}}):n,i+=g(t)+'\n                </span>\n                 <span class="panelRight">\n                    <span class="overflowText">(bitcoin)</span>\n                </span>\n                </div>\n            </a>\n        '}a=a||e.helpers,n=n||e.partials;var l,c,d,u,p="",m=this,h="function",_=a.helperMissing,f=void 0,g=this.escapeExpression;return p+='<div class="payments-step" id="panelOptions">\n    ',d=a.cardDisabled,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"cardDisabled"),c=a.unless,u=m.program(1,r,i),u.hash={},u.fn=u,u.inverse=m.noop,l=c.call(t,l,u),(l||0===l)&&(p+=l),p+="\n\n    ",l=t,l=m.invokePartial(n["payment_helper.disposable_cards"],"payment_helper.disposable_cards",l,a,n),(l||0===l)&&(p+=l),p+="\n    ",l=t,l=m.invokePartial(n["payment_helper.company_cards"],"payment_helper.company_cards",l,a,n),(l||0===l)&&(p+=l),p+="\n    ",l=t,l=m.invokePartial(n["payment_helper.real_cards"],"payment_helper.real_cards",l,a,n),(l||0===l)&&(p+=l),p+="\n</div>"}))}),ABINE_DNTME.require(["wycats/handlebars"],function(e){e.registerPartial("payment_helper.no_card_on_file",e.template(function(e,t,a,n,i){function r(e){var t,n,i="";return i+='\n        <input id="autoEmail" type="text" placeholder="',t="mm_payment_helper_email",l=a.intl,n=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===p?n.call(e,t,{hash:{}}):n===h?m.call(e,"intl",t,{hash:{}}):n,i+=_(t)+'">\n      '}a=a||e.helpers;var s,o,l,c,d="",u=this,p="function",m=a.helperMissing,h=void 0,_=this.escapeExpression;return d+='<div id="register" class="payments-step" style="display: none;">\n  <div class="payments-header">',s="mm_payment_helper_card_complete_title",l=a.intl,o=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),s=typeof o===p?o.call(t,s,{hash:{}}):o===h?m.call(t,"intl",s,{hash:{}}):o,d+=_(s)+'</div>\n\n  <div style="width:610px;" id="billingInfoForm">\n    <div style="width:49%;display:inline-block;vertical-align:top;">\n\n      <input id="autoFname" type="text" placeholder="',s="mm_payment_helper_first_name",l=a.intl,o=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),s=typeof o===p?o.call(t,s,{hash:{}}):o===h?m.call(t,"intl",s,{hash:{}}):o,d+=_(s)+'">\n      <input id="autoLname" type="text" placeholder="',s="mm_payment_helper_last_name",l=a.intl,o=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),s=typeof o===p?o.call(t,s,{hash:{}}):o===h?m.call(t,"intl",s,{hash:{}}):o,d+=_(s)+'">\n\n      <input id="autoAddress" type="text" placeholder="',s="mm_payment_helper_address",l=a.intl,o=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),s=typeof o===p?o.call(t,s,{hash:{}}):o===h?m.call(t,"intl",s,{hash:{}}):o,d+=_(s)+'">\n      <input id="autoApt" data-optional="yes" type="text" placeholder="',s="mm_payment_helper_apt",l=a.intl,o=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),s=typeof o===p?o.call(t,s,{hash:{}}):o===h?m.call(t,"intl",s,{hash:{}}):o,d+=_(s)+'">\n\n      <input id="autoCity" type="text" placeholder="',s="mm_payment_helper_city",l=a.intl,o=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),s=typeof o===p?o.call(t,s,{hash:{}}):o===h?m.call(t,"intl",s,{hash:{}}):o,d+=_(s)+'">\n      <select id="autoStateUS"><option value="">Select State</option><option value="">------------</option><option value="AK">Alaska</option><option value="AL">Alabama</option><option value="AP">Armed Forces Pacific</option><option value="AR">Arkansas</option><option value="AS">American Samoa</option><option value="AZ">Arizona</option><option value="CA">California</option><option value="CO">Colorado</option><option value="CT">Connecticut</option><option value="DC">District of Columbia</option><option value="DE">Delaware</option><option value="FL">Florida</option><option value="FM">Federated States of Micronesia</option><option value="GA">Georgia</option><option value="GU">Guam</option><option value="HI">Hawaii</option><option value="IA">Iowa</option><option value="ID">Idaho</option><option value="IL">Illinois</option><option value="IN">Indiana</option><option value="KS">Kansas</option><option value="KY">Kentucky</option><option value="LA">Louisiana</option><option value="MA">Massachusetts</option><option value="MD">Maryland</option><option value="ME">Maine</option><option value="MH">Marshall Islands</option><option value="MI">Michigan</option><option value="MN">Minnesota</option><option value="MO">Missouri</option><option value="MP">Northern Mariana Islands</option><option value="MS">Mississippi</option><option value="MT">Montana</option><option value="NC">North Carolina</option><option value="ND">North Dakota</option><option value="NE">Nebraska</option><option value="NH">New Hampshire</option><option value="NJ">New Jersey</option><option value="NM">New Mexico</option><option value="NV">Nevada</option><option value="NY">New York</option><option value="OH">Ohio</option><option value="OK">Oklahoma</option><option value="OR">Oregon</option><option value="PA">Pennsylvania</option><option value="PR">Puerto Rico</option><option value="PW">Palau</option><option value="RI">Rhode Island</option><option value="SC">South Carolina</option><option value="SD">South Dakota</option><option value="TN">Tennessee</option><option value="TX">Texas</option><option value="UT">Utah</option><option value="VA">Virginia</option><option value="VI">Virgin Islands</option><option value="VT">Vermont</option><option value="WA">Washington</option><option value="WV">West Virginia</option><option value="WI">Wisconsin</option><option value="WY">Wyoming</option></select>\n      <input id="autoState" type="text" placeholder="',s="mm_payment_helper_state",l=a.intl,o=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),s=typeof o===p?o.call(t,s,{hash:{}}):o===h?m.call(t,"intl",s,{hash:{}}):o,d+=_(s)+'" style="display:none;">\n      <input id="autoZip" type="text" placeholder="',s="mm_payment_helper_zip",l=a.intl,o=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),s=typeof o===p?o.call(t,s,{hash:{}}):o===h?m.call(t,"intl",s,{hash:{}}):o,d+=_(s)+'">\n\n      <select id="autoCountry"><option value="">Select Country</option><option value="">--------------</option><option value="AF">Afghanistan</option><option value="AL">Albania</option><option value="DZ">Algeria</option><option value="AS">American Samoa</option><option value="AD">Andorra</option><option value="AO">Angola</option><option value="AI">Anguilla</option><option value="AQ">Antarctica</option><option value="AG">Antigua and Barbuda</option><option value="AR">Argentina</option><option value="AM">Armenia</option><option value="AW">Aruba</option><option value="AC">Ascension Island</option><option value="AU">Australia</option><option value="AT">Austria</option><option value="AZ">Azerbaijan</option><option value="BS">Bahamas</option><option value="BH">Bahrain</option><option value="BD">Bangladesh</option><option value="BB">Barbados</option><option value="BE">Belgium</option><option value="BZ">Belize</option><option value="BJ">Benin</option><option value="BM">Bermuda</option><option value="BT">Bhutan</option><option value="BO">Bolivia</option><option value="BA">Bosnia and Herzegovina</option><option value="BW">Botswana</option><option value="BV">Bouvet Island</option><option value="BR">Brazil</option><option value="BQ">British Antarctic Territory</option><option value="IO">British Indian Ocean Territory</option><option value="VG">British Virgin Islands</option><option value="BN">Brunei</option><option value="BG">Bulgaria</option><option value="BF">Burkina Faso</option><option value="BI">Burundi</option><option value="KH">Cambodia</option><option value="CM">Cameroon</option><option value="CA">Canada</option><option value="IC">Canary Islands</option><option value="CT">Canton and Enderbury Islands</option><option value="CV">Cape Verde</option><option value="KY">Cayman Islands</option><option value="CF">Central African Republic</option><option value="EA">Ceuta and Melilla</option><option value="TD">Chad</option><option value="CL">Chile</option><option value="CN">China</option><option value="CX">Christmas Island</option><option value="CP">Clipperton Island</option><option value="CC">Cocos [Keeling] Islands</option><option value="CO">Colombia</option><option value="KM">Comoros</option><option value="CD">Congo [DRC]</option><option value="CK">Cook Islands</option><option value="CR">Costa Rica</option><option value="HR">Croatia</option><option value="CU">Cuba</option><option value="CY">Cyprus</option><option value="CZ">Czech Republic</option><option value="DK">Denmark</option><option value="DG">Diego Garcia</option><option value="DJ">Djibouti</option><option value="DM">Dominica</option><option value="DO">Dominican Republic</option><option value="NQ">Dronning Maud Land</option><option value="TL">East Timor</option><option value="EC">Ecuador</option><option value="EG">Egypt</option><option value="SV">El Salvador</option><option value="EE">Estonia</option><option value="ET">Ethiopia</option><option value="FK">Falkland Islands [Islas Malvinas]</option><option value="FO">Faroe Islands</option><option value="FJ">Fiji</option><option value="FI">Finland</option><option value="FR">France</option><option value="GF">French Guiana</option><option value="PF">French Polynesia</option><option value="TF">French Southern Territories</option><option value="FQ">French Southern and Antarctic Territories</option><option value="GA">Gabon</option><option value="GM">Gambia</option><option value="GE">Georgia</option><option value="DE">Germany</option><option value="GH">Ghana</option><option value="GI">Gibraltar</option><option value="GR">Greece</option><option value="GL">Greenland</option><option value="GD">Grenada</option><option value="GP">Guadeloupe</option><option value="GU">Guam</option><option value="GT">Guatemala</option><option value="GG">Guernsey</option><option value="GW">Guinea-Bissau</option><option value="GY">Guyana</option><option value="HT">Haiti</option><option value="HM">Heard Island and McDonald Islands</option><option value="HN">Honduras</option><option value="HK">Hong Kong</option><option value="HU">Hungary</option><option value="IS">Iceland</option><option value="IN">India</option><option value="ID">Indonesia</option><option value="IE">Ireland</option><option value="IM">Isle of Man</option><option value="IL">Israel</option><option value="IT">Italy</option><option value="JM">Jamaica</option><option value="JP">Japan</option><option value="JE">Jersey</option><option value="JT">Johnston Island</option><option value="JO">Jordan</option><option value="KZ">Kazakhstan</option><option value="KE">Kenya</option><option value="KI">Kiribati</option><option value="KW">Kuwait</option><option value="KG">Kyrgyzstan</option><option value="LA">Laos</option><option value="LV">Latvia</option><option value="LS">Lesotho</option><option value="LY">Libya</option><option value="LI">Liechtenstein</option><option value="LT">Lithuania</option><option value="LU">Luxembourg</option><option value="MO">Macau</option><option value="MK">Macedonia [FYROM]</option><option value="MG">Madagascar</option><option value="MW">Malawi</option><option value="MY">Malaysia</option><option value="MV">Maldives</option><option value="ML">Mali</option><option value="MT">Malta</option><option value="MH">Marshall Islands</option><option value="MQ">Martinique</option><option value="MR">Mauritania</option><option value="MU">Mauritius</option><option value="YT">Mayotte</option><option value="FX">Metropolitan France</option><option value="MX">Mexico</option><option value="FM">Micronesia</option><option value="MI">Midway Islands</option><option value="MD">Moldova</option><option value="MC">Monaco</option><option value="MN">Mongolia</option><option value="ME">Montenegro</option><option value="MS">Montserrat</option><option value="MA">Morocco</option><option value="MZ">Mozambique</option><option value="NA">Namibia</option><option value="NR">Nauru</option><option value="NP">Nepal</option><option value="NL">Netherlands</option><option value="AN">Netherlands Antilles</option><option value="NT">Neutral Zone</option><option value="NC">New Caledonia</option><option value="NZ">New Zealand</option><option value="NI">Nicaragua</option><option value="NE">Niger</option><option value="NG">Nigeria</option><option value="NU">Niue</option><option value="NF">Norfolk Island</option><option value="VD">North Vietnam</option><option value="MP">Northern Mariana Islands</option><option value="NO">Norway</option><option value="OM">Oman</option><option value="QO">Outlying Oceania</option><option value="PC">Pacific Islands Trust Territory</option><option value="PK">Pakistan</option><option value="PW">Palau</option><option value="PS">Palestinian Territories</option><option value="PA">Panama</option><option value="PZ">Panama Canal Zone</option><option value="PY">Paraguay</option><option value="YD">People\'s Democratic Republic of Yemen</option><option value="PE">Peru</option><option value="PH">Philippines</option><option value="PN">Pitcairn Islands</option><option value="PL">Poland</option><option value="PT">Portugal</option><option value="PR">Puerto Rico</option><option value="QA">Qatar</option><option value="RO">Romania</option><option value="RU">Russia</option><option value="RW">Rwanda</option><option value="RE">R&eacute;union</option><option value="BL">Saint Barth&eacute;lemy</option><option value="SH">Saint Helena</option><option value="KN">Saint Kitts and Nevis</option><option value="LC">Saint Lucia</option><option value="MF">Saint Martin</option><option value="PM">Saint Pierre and Miquelon</option><option value="VC">Saint Vincent and the Grenadines</option><option value="WS">Samoa</option><option value="SM">San Marino</option><option value="SA">Saudi Arabia</option><option value="SN">Senegal</option><option value="RS">Serbia</option><option value="CS">Serbia and Montenegro</option><option value="SC">Seychelles</option><option value="SL">Sierra Leone</option><option value="SG">Singapore</option><option value="SK">Slovakia</option><option value="SI">Slovenia</option><option value="SB">Solomon Islands</option><option value="ZA">South Africa</option><option value="GS">South Georgia and the South Sandwich Islands</option><option value="KR">South Korea</option><option value="ES">Spain</option><option value="LK">Sri Lanka</option><option value="SR">Suriname</option><option value="SJ">Svalbard and Jan Mayen</option><option value="SZ">Swaziland</option><option value="SE">Sweden</option><option value="CH">Switzerland</option><option value="ST">S&atilde;o Tom&eacute; and Pr&iacute;ncipe</option><option value="TW">Taiwan</option><option value="TJ">Tajikistan</option><option value="TZ">Tanzania</option><option value="TH">Thailand</option><option value="TG">Togo</option><option value="TK">Tokelau</option><option value="TO">Tonga</option><option value="TT">Trinidad and Tobago</option><option value="TA">Tristan da Cunha</option><option value="TN">Tunisia</option><option value="TR">Turkey</option><option value="TM">Turkmenistan</option><option value="TC">Turks and Caicos Islands</option><option value="TV">Tuvalu</option><option value="UM">U.S. Minor Outlying Islands</option><option value="PU">U.S. Miscellaneous Pacific Islands</option><option value="VI">U.S. Virgin Islands</option><option value="UG">Uganda</option><option value="UA">Ukraine</option><option value="AE">United Arab Emirates</option><option value="GB">United Kingdom</option><option value="US" selected="selected">United States</option><option value="UY">Uruguay</option><option value="UZ">Uzbekistan</option><option value="VU">Vanuatu</option><option value="VA">Vatican City</option><option value="VE">Venezuela</option><option value="VN">Vietnam</option><option value="WK">Wake Island</option><option value="WF">Wallis and Futuna</option><option value="EH">Western Sahara</option><option value="YE">Yemen</option><option value="ZM">Zambia</option><option value="AX">&Aring;land Islands</option></select>\n    </div>\n\n    <div style="width:49%;display:inline-block;vertical-align:top;">\n\n      <input id="autoCardNumber" type="text" placeholder="',
s="mm_payment_helper_credit_card_number",l=a.intl,o=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),s=typeof o===p?o.call(t,s,{hash:{}}):o===h?m.call(t,"intl",s,{hash:{}}):o,d+=_(s)+'">\n      <input id="autoCardCvv" type="text" placeholder="',s="mm_payment_helper_cvv",l=a.intl,o=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),s=typeof o===p?o.call(t,s,{hash:{}}):o===h?m.call(t,"intl",s,{hash:{}}):o,d+=_(s)+'">\n\n\n      <select id="autoCardMonth"><option value="1">01 - January</option><option value="2">02 - February</option><option value="3">03 - March</option><option value="4">04 - April</option><option value="5">05 - May</option><option value="6">06 - June</option><option value="7">07 - July</option><option value="8">08 - August</option><option value="9">09 - September</option><option value="10">10 - October</option><option value="11">11 - November</option><option value="12">12 - December</option></select>\n      <select id="autoCardYear"><option name="2015" selected>2015</option><option name="2016">2016</option><option name="2017">2017</option><option name="2018">2018</option><option name="2019">2019</option><option name="2020">2020</option><option name="2021">2021</option><option name="2022">2022</option><option name="2023">2023</option><option name="2014">2024</option></select>\n\n      ',l=a.hasRegistered,s=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"hasRegistered"),o=a.unless,c=u.program(1,r,i),c.hash={},c.fn=c,c.inverse=u.noop,s=o.call(t,s,c),(s||0===s)&&(d+=s),d+='\n      <button class="btn btn-primary" id="registerAndMask" style="position:relative;bottom:-15;">\n        <div>Protect My Card</div>\n      </button>\n\n    </div>\n\n    <div class="alert-error submit-error" style="display: none"></div>\n    <div class="progress" style="display: none;text-align: center;margin-bottom:0px;">please wait...</div>\n  </div>\n</div>'}))}),ABINE_DNTME.require(["wycats/handlebars"],function(e){e.registerPartial("payment_helper.protect_my_card",e.template(function(e,t,a,n,i){function r(e,t){var n,i,r="";return r+="\n      ",d=a.firstFiveCards,n=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"firstFiveCards"),i=a["if"],u=m.program(2,s,t),u.hash={},u.fn=u,u.inverse=m.program(4,o,t),n=i.call(e,n,u),(n||0===n)&&(r+=n),r+="\n    "}function s(e){var t,n,i="";return i+='\n      <div class="payments-header">\n        ',t="mm_payment_helper_safestWayTitle",d=a.intl,n=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===h?n.call(e,t,{hash:{}}):n===f?_.call(e,"intl",t,{hash:{}}):n,i+=g(t)+'\n      </div>\n\n      <div class="payments-protect-card-body">\n        ',t="mm_payment_helper_protectYourCardInFew",d=a.intl,n=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===h?n.call(e,t,{hash:{}}):n===f?_.call(e,"intl",t,{hash:{}}):n,i+=g(t)+'\n      </div>\n      <input type="button" id="protect-my-card-btn" class="btn btn-primary" value="Protect My Card" style="margin: -10px 0px 13px 0px;"/>\n      <div id="inlineFaqLink" class="links help-link" style="display:inline-block;padding-bottom:5px;cursor:pointer;">\n        <img id="help" class="header-icon" src="',t="/pages/images/dnt-ui-header-help.png",d=a.assetUrl,n=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===h?n.call(e,t,{hash:{}}):n===f?_.call(e,"assetUrl",t,{hash:{}}):n,i+=g(t)+'" style="width:19px;margin-left:8px;">\n      </div>\n      '}function o(e){var t,n,i="";return i+='\n      <a href="#" data-cardid="',d=a.id,t=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof t===h?t=t.call(e,{hash:{}}):t===f&&(t=_.call(e,"id",{hash:{}})),i+=g(t)+'" class="mmKeyOption">\n        <div class="element othergreen" id="protect-my-card-btn">\n          <span class="panelLeft">\n            <img class="iconPos" src="',t="/pages/images/2015panels/card_green.png",d=a.assetUrl,n=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===h?n.call(e,t,{hash:{}}):n===f?_.call(e,"assetUrl",t,{hash:{}}):n,i+=g(t)+'" style="width:43px;height:21px;"/>\n            ',t="mm_payment_helper_create_new_masked_card",d=a.intl,n=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===h?n.call(e,t,{hash:{}}):n===f?_.call(e,"intl",t,{hash:{}}):n,i+=g(t)+"\n          </span>\n        </div>\n      </a>\n      "}a=a||e.helpers,n=n||e.partials;var l,c,d,u,p="",m=this,h="function",_=a.helperMissing,f=void 0,g=this.escapeExpression;return p+='<div class="payments-step" id="panelOptions">\n    ',d=a.cardDisabled,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"cardDisabled"),c=a.unless,u=m.program(1,r,i),u.hash={},u.fn=u,u.inverse=m.noop,l=c.call(t,l,u),(l||0===l)&&(p+=l),p+="\n    ",l=t,l=m.invokePartial(n["payment_helper.disposable_cards"],"payment_helper.disposable_cards",l,a,n),(l||0===l)&&(p+=l),p+="\n    ",l=t,l=m.invokePartial(n["payment_helper.company_cards"],"payment_helper.company_cards",l,a,n),(l||0===l)&&(p+=l),p+="\n    ",l=t,l=m.invokePartial(n["payment_helper.real_cards"],"payment_helper.real_cards",l,a,n),(l||0===l)&&(p+=l),p+="\n</div>"}))}),ABINE_DNTME.require(["wycats/handlebars"],function(e){e.registerPartial("payment_helper.real_cards",e.template(function(e,t,a,n,i){function r(e,t){var n,i,r="";return r+="\n  ",m=a.realCardDisabled,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"realCardDisabled"),i=a.unless,h=f.program(2,s,t),h.hash={},h.fn=h,h.inverse=f.noop,n=i.call(e,n,h),(n||0===n)&&(r+=n),r+="\n"}function s(e,t){var n,i,r="";return r+="\n    ",m=a.realCards,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"realCards"),i=a.each,h=f.program(3,o,t),h.hash={},h.fn=h,h.inverse=f.program(6,c,t),n=i.call(e,n,h),(n||0===n)&&(r+=n),r+="\n    ",m=a.realCards,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"realCards"),n=null===n||void 0===n||n===!1?n:ABINE_DNTME.Duckbone.Handlebars.getAttr(n,"length"),i=a["if"],h=f.program(8,d,t),h.hash={},h.fn=h,h.inverse=f.noop,n=i.call(e,n,h),(n||0===n)&&(r+=n),r+="\n  "}function o(e,t){var n,i,r="";return r+='\n      <a href="#" data-cardid="',m=a.id,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof n===g?n=n.call(e,{hash:{}}):n===b&&(n=y.call(e,"id",{hash:{}})),r+=v(n)+'" class="mmKeyOption usedCard">\n        <div class="element" id="disclose">\n          <span class="panelLeft" style="width:80%;overflow:hidden;display: inline-block;height:30px;text-wrap:suppress;word-wrap:break-word;">\n              <img class="iconPos" src="',n="/pages/images/2015panels/card_red_arrow.png",m=a.assetUrl,i=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),n=typeof i===g?i.call(e,n,{hash:{}}):i===b?y.call(e,"assetUrl",n,{hash:{}}):i,r+=v(n)+'" style="width:15px;height:21px;margin-right:0;"/>\n              <img class="iconPos" src="',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getTypeImage"),typeof n===g?n=n.call(e,{hash:{}}):n===b&&(n=y.call(e,"this.getTypeImage",{hash:{}})),r+=v(n)+'" style="width:32px;height:32px;margin-left: -4px;"/>\n            ',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getLabelOrLastFour"),typeof n===g?n=n.call(e,{hash:{}}):n===b&&(n=y.call(e,"this.getLabelOrLastFour",{hash:{}})),r+=v(n)+"\n          </span>\n          ",n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"labelChangeRequired"),i=a["if"],h=f.program(4,l,t),h.hash={},h.fn=h,h.inverse=f.noop,n=i.call(e,n,h),(n||0===n)&&(r+=n),r+="\n        </div>\n      </a>\n    "}function l(e){var t,n,i="";return i+='\n          <span class="panelRight edit_name" style="width:18%;">\n            <span class="overflowText" style="text-transform: none;">',t="mm_payment_helper_edit_name",m=a.intl,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===g?n.call(e,t,{hash:{}}):n===b?y.call(e,"intl",t,{hash:{}}):n,i+=v(t)+"</span>\n          </span>\n          "}function c(e){var t,n,i="";return i+='\n      <a href="#" class="mmKeyOption useMyCard">\n        <div class="element" id="disclose">\n          <span class="panelLeft">\n              <img class="iconPos" src="',t="/pages/images/2015panels/card_red.png",m=a.assetUrl,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===g?n.call(e,t,{hash:{}}):n===b?y.call(e,"assetUrl",t,{hash:{}}):n,i+=v(t)+'" style="width:43px;height:21px;"/>\n            ',t="mm_payment_helper_useMyCard",m=a.intl,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===g?n.call(e,t,{hash:{}}):n===b?y.call(e,"intl",t,{hash:{}}):n,i+=v(t)+"\n          </span>\n        </div>\n      </a>\n    "}function d(e){var t,n,i="";return i+='\n          <a href="#" class="mmKeyOption useMyCard">\n            <div class="element" id="disclose">\n              <span class="panelLeft">\n                  <img class="iconPos" src="',t="/pages/images/2015panels/card_red.png",m=a.assetUrl,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===g?n.call(e,t,{hash:{}}):n===b?y.call(e,"assetUrl",t,{hash:{}}):n,i+=v(t)+'" style="width:43px;height:21px;"/>\n                ',t="mm_payment_helper_addOrEdit",m=a.intl,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===g?n.call(e,t,{hash:{}}):n===b?y.call(e,"intl",t,{hash:{}}):n,i+=v(t)+"\n              </span>\n            </div>\n          </a>\n    "}a=a||e.helpers,n=n||e.partials;var u,p,m,h,_="",f=this,g="function",y=a.helperMissing,b=void 0,v=this.escapeExpression;return _+="\n<!-- If Real Cards to fill-->\n",m=a.canShowRealCards,u=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"canShowRealCards"),p=a["if"],h=f.program(1,r,i),h.hash={},h.fn=h,h.inverse=f.noop,u=p.call(t,u,h),(u||0===u)&&(_+=u),_+="\n\n",u=t,u=f.invokePartial(n["common.auto_fill_with"],"common.auto_fill_with",u,a,n),(u||0===u)&&(_+=u),_}))}),ABINE_DNTME.define("abine/views/paymentHelperPanel",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/views/loading_display","abine/contentMessenger","abine/intl","abine/responseCodes","abine/config","abine/proxies"],function(e,t,a,n,i,r,s,o,l,c,d,u){function p(e){for(var t=0,a=!1,n=e.length-1;n>=0;n--,a=!a){var i=parseInt(e.charAt(n));a&&(i*=2,i>9&&(i-=9)),t+=i}return t%10==0}function m(e,t){t=t||"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ!-$#%^@";for(var a="",n=0;n<e;n++)a+=t.charAt(Math.floor(Math.random()*t.length));return a}var h=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/i,_=/^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|6(?:011|5[0-9]{2})[0-9]{12}|(?:2131|1800|35\d{3})\d{11})$/i,f=[{regex:/^4[0-9]{12}(?:[0-9]{3})?$/,spacing:[4,4,4]},{regex:/^5[1-5][0-9]{14}$/,spacing:[4,4,4]},{regex:/^3[47][0-9]{13}$/,spacing:[4,6]},{regex:/^3(?:0[0-5]|[68][0-9])[0-9]{11}$/,spacing:[4,6]},{regex:/^6(?:011|5[0-9]{2})[0-9]{12}$/,spacing:[4,4,4]},{regex:/^(?:2131|1800|35\d{3})\d{11}$/,spacing:[4,4,4]}],g={"/financial/creditcard/number/part1":"part1","/financial/creditcard/number/part2":"part2","/financial/creditcard/number/part3":"part3","/financial/creditcard/number/part4":"part4","/financial/creditcard/number":"number","/financial/creditcard/type":"type","/financial/creditcard/issuedto":"issuedto","/financial/creditcard/expirymonth":"expirymonth","/financial/creditcard/expiryyear":"expiryyear","/financial/creditcard/verification":"cvv","/contact/postaladdress/billing":"address1","/contact/postaladdressAdditional/billing":"address2","/contact/state/billing":"state","/contact/state/code/billing":"state","/contact/city/billing":"city","/contact/country/billing":"country","/contact/postalcode/billing":"zip","/contact/postaladdress":"address1","/contact/postaladdressAdditional":"address2","/contact/state":"state","/contact/state/code":"state","/contact/city":"city","/contact/country":"country","/contact/postalcode":"zip","/nameperson/last":"lname","/nameperson/first":"fname","/nameperson/full":"name"},y=i.extend({templateName:"payment_helper_paymentsr3_card_money",events:{"click .whatIsThisLink":"openMaskedCardsIn30","mousedown a.disposableCard":"verifyCardRequest","click #registerAndMask":"registerAndMask","mousedown a.usedCard":"fillWithUsedCard","click a.useMyCard":"openAddCard","click a.getStarted":"getStarted","click a.setupCard":"getStartedWithPayments","click .panelSection":"performActions","click #createCard":"createCard","click #cancelCardCreate":"cancelCardCreate","click #confirmCardCreate":"confirmCardCreate","click .switch-to-ach":"switchToAch","click #useMaskedCard":"fillWithDisposableCard","click #linkToErrorReport":"makeErrorReport","click .maskedCardErrorSupport":"makeErrorReport","click #registerHelp span":"openCardFAQ","change #autoCountry":"countryChanged","mousedown .subscription-option":"subscriptionClicked","click .chatNow":"chatNow","click .close-link":"logClose","click .edit_name":"openEditCard","click .cash-for-cards-webapp-faq":"openCashForCardsFaq","click #createCompanyCard":"createCompanyCard","click #protect-my-card-btn":"verifyCardRequest","click #protect-my-card-bitcoin-btn":"verifyCardRequestBtc","click #inlineFaqLink":"openInlineFAQ","click #faqCardLink":"openCardFAQWebapp","click .faqGotIt":"faqGotIt","click #viewCardsDashboard":"openCardsDashboard","click #masterPassAuth":"masterPassAuth","click #retryBiometricAuth":"retryBiometricAuth","submit form.unlock":"verifyMasterPass","click #upgradeToPremiumCheckboxDiv":"upgradeToPremiumCheckboxClicked"},billingInfoViewExtraWidth:215,createCompanyCard:function(e){this.model.companyRequest=!0,this.verifyCardRequest(e)},upgradeToPremiumCheckboxClicked:function(){this.$("#upgradeToPremium").is(":checked")?this.model.upgradeToPremium=!0:this.model.upgradeToPremium=!1,this.ignoreBlur(!0)},openInlineFAQ:function(){this.ignoreBlur(!0);var e={extraWidth:this.$("#register").is(":visible")?this.billingInfoViewExtraWidth*-1:null,extraHeight:this.$("#register").is(":visible")?40:null};this.$(".normal-flow").hide(),this.$("#inlineFaq").show(),this.autoResize(e)},openCardFAQWebapp:function(){u.webapp.openPage("#help/faq/faq-maskedCards"),this.closePanel()},openAddCard:function(){this.updatePanelActivity("impression",this.clickedAutofillRealCardWhenNoCardExistsPanelId,this.fieldId,!1),this.model.realCards&&this.model.realCards.length>0?u.webapp.openPage("/#real_cards"):u.webapp.openPage("/#real_cards/add"),this.closePanel()},switchToAch:function(){u.webapp.openPage("/#settings/edit"),this.closePanel()},openEditCard:function(e){for(var a,n=e.currentTarget;!a&&n;)a=t(n).data("cardid"),n=n.parentNode;return a&&(u.webapp.openPage("/#real_cards/edit/"+a),this.closePanel()),e.preventDefault(),!1},faqGotIt:function(){this.ignoreBlur(!1),this.$("#inlineFaq").hide(),this.$(".normal-flow").show();var e={extraWidth:this.$("#register").is(":visible")?this.billingInfoViewExtraWidth:null};this.autoResize(e),this.$("#cardAmount").focus()},openCardsDashboard:function(e){e.preventDefault(),u.webapp.openPage("/#/client/cards")},logClose:function(){this.updatePanelActivity("closed",this.panelId,this.fieldId,!0)},chatNow:function(e){e.preventDefault(),u.securityManager.openWindow("https://a3.websitealive.com/623/rRouter.asp?infocapture_ids=259,260&groupid=623&wsa_custom0=card-error&wsa_custom1=&websiteid=0&departmentid=3140&dl=blur",400,400)},openMaskedCardsIn30:function(e){return u.webapp.openFAQ("card"),this.closePanel(),e.preventDefault(),!1},openCardFAQ:function(e){return u.webapp.openFAQ("card","freefor30"),e.preventDefault(),!1},chatNow:function(e){e.preventDefault(),u.securityManager.openWindow("https://a3.websitealive.com/623/rRouter.asp?infocapture_ids=259,260&groupid=623&wsa_custom0=card-error&wsa_custom1=&websiteid=0&departmentid=3140&dl=blur",400,400)},getStartedWithPayments:function(e){e&&e.preventDefault(),this.updatePanelActivity("masked",this.panelId,this.fieldId,!0),u.webapp.openCards(),this.closePanel(e)},subscriptionClicked:function(){this.$("#cardAmount").unbind("blur.dntme")},openCashForCardsFaq:function(e){return u.webapp.openCashForCardsFaq(),e.preventDefault(),!1},countryChanged:function(e){"US"==t(e.target).val()?(this.$("#autoStateUS").show(),this.$("#autoState").hide()):(this.$("#autoState").show(),this.$("#autoStateUS").hide())},cardNumberFocus:function(e){var a=t(e.target);a.val(a.val().replace(/[^0-9]+/g,""))},cardNumberBlur:function(a){var n=t(a.target),i=n.val().replace(/[^0-9]+/g,"");e.each(f,function(t){if(i.match(t.regex)){var a=0,n="";e.each(t.spacing,function(e){n+=i.substr(a,e)+" ",a+=e}),n+=i.substr(a),i=n}}),n.val(i)},makeErrorReport:function(e){return e&&e.preventDefault(),u.webapp.openHelp(),!1},refreshLastFourShieldedCardNumber:function(){u.licenseModule.refreshLastFourCardDigits({},e.bind(function(e,t){!e&&t&&t.last_four&&(this.model.primaryCard.set("last_four",t.last_four),this.$("#last4").text(t.last_four))},this))},convertCentsToString:function(e){return"$"+(e/100).toFixed(2)},processError:function(e){this.$("#loadingMaskedCard").hide();var a=this;"recurly disabled"==e.errorCode?(this.$("#maskedCardErrorMsg").html(l.getText("mm_payment_error_recurly_disabled")),this.$("#maskedCardErrorMsg #recurly-disabled").click(function(e){return u.webapp.openPage("#premium/setup/stripe"),a.closePanel(e),!1})):e.errorCode==c.NO_BILLING_ACCOUNT_FOR_USER_ERROR_CODE||e.errorCode==c.BILLING_FAILED_ERROR_CODE?this.$("#maskedCardErrorMsg").html(l.getText("mm_payment_error_billing")):e.errorCode==c.BILLING_DECLINED_ERROR_CODE?this.$("#maskedCardErrorMsg").html(l.getText("mm_payment_error_declined")):e.errorCode==c.BILLING_COMPANY_FAILED_ERROR_CODE?this.$("#maskedCardErrorMsg").html(l.getText("mm_payment_error_company_declined")):e.errorCode==c.NO_CARDS_AVAILABLE_ERROR_CODE||e.errorCode==c.PROVIDER_READ_FAILED_ERROR_CODE||e.errorCode==c.PROVIDER_CARD_CREATION_FAILED_ERROR_CODE?this.$("#maskedCardErrorMsg").html(l.getText("mm_payment_error_provider")):e.errorCode==c.REQUESTED_AMOUNT_OVER_LIMIT_ERROR_CODE?"verified"==e.responseJSON.data.category?this.$("#maskedCardErrorMsg").html(l.getText("mm_payment_error_validation_verified",[this.convertCentsToString(e.responseJSON.data.min),this.convertCentsToString(e.responseJSON.data.max)])):this.$("#maskedCardErrorMsg").html(l.getText("mm_payment_error_validation_max",[this.convertCentsToString(e.responseJSON.data.max),d.protocol+d.webAppHost+"/#/client/cards/verify"])):e.errorCode==c.REQUESTED_AMOUNT_BELOW_MINIMUM_ERROR_CODE?this.$("#maskedCardErrorMsg").html(l.getText("mm_payment_error_validation_min",[this.convertCentsToString(e.responseJSON.data.min)])):e.errorCode==c.REQUEST_ALREADY_EXISTS_ERROR_CODE||e.errorCode==c.NO_CARD_FOUND_ERROR_CODE||e.errorCode==c.NO_BILLING_TRANSACTION_FOUND_ERROR_CODE?this.$("#maskedCardErrorMsg").html(l.getText("mm_payment_error_abine")):e.errorCode==c.REFUND_FAILED_ERROR_CODE?this.$("#maskedCardErrorMsg").html(l.getText("mm_payment_error_refund")):e.errorCode==c.GLOBAL_SOFT_LIMIT_REACHED?this.$("#maskedCardErrorMsg").html(l.getText("mm_payment_error_global_limit")):e.errorCode==c.FRAUD_SOFT_LIMIT_REACHED?this.$("#maskedCardErrorMsg").html(l.getText("mm_payment_error_soft_limit",[d.protocol+d.webAppHost+"/#/client/cards/verify"])):e.errorCode==c.FRAUD_HARD_LIMIT_REACHED?this.$("#maskedCardErrorMsg").html(l.getText("mm_payment_error_hard_limit")):e.errorCode==c.FRAUD_VERIFIED_SOFT_LIMIT_REACHED?this.$("#maskedCardErrorMsg").html(l.getText("mm_payment_error_verified_soft_limit")):e.errorCode==c.FRAUD_HIGH_RISK_COUNTRY_ERROR_CODE?this.$("#maskedCardErrorMsg").html(l.getText("mm_payment_error_high_risk_country")):e.errorCode==c.GREY_LISTED_ERROR_CODE?this.$("#maskedCardErrorMsg").html(l.getText("mm_payment_error_grey_listed",[d.protocol+d.webAppHost+"/#/client/cards/verify"])):e.errorCode==c.BILLING_IN_NON_US_ERROR_CODE?t(this.el).find("#maskedCardErrorMsg").html(l.getText("mm_payment_helper_non_us1",[ABINE_DNTME.config.protocol+ABINE_DNTME.config.webAppHost+"/#/phones"])):e.errorCode==c.DUPLICATE_CARD_ERROR_CODE?t(this.el).find("#maskedCardErrorMsg").html(l.getText("mm_payment_error_duplicate_card_ban")):e.errorCode==c.BANNED_DOMAIN_ERROR_CODE?t(this.el).find("#maskedCardErrorMsg").html(l.getText("mm_payment_error_banned_domain",[this.options.domain])):e.errorCode==c.REJECTED_DOMAIN_ERROR_CODE?t(this.el).find("#maskedCardErrorMsg").html(l.getText("mm_payment_error_rejected_domain",[this.options.domain])):e.errorCode==c.SERVICE_UNAVAILABLE_ERROR?t(this.el).find("#maskedCardErrorMsg").html(l.getText("mm_dntme_service_unavailable")):e.errorCode==c.SCHEDULED_DOWNTIME?t(this.el).find("#maskedCardErrorMsg").html(l.getText("mm_dntme_server_maintenance")):e.errorCode==c.BIOMETRIC_AUTH_FAILED?t(this.el).find("#maskedCardErrorMsg").html(l.getText("mm_dntme_server_biometric_auth_failed")):this.$("#maskedCardErrorMsg").html(l.getText("mm_payment_error")),this.$("#maskedCardErrorMsg a[target=_blank]").click(function(e){return u.webapp.openPage(e.target.href.substr(e.target.href.indexOf("#"))),e.preventDefault(),!1}),this.$("#maskedCardView, #maskedCardError, #maskedCardErrorMsg").show()},masterPassAuth:function(e){e&&e.preventDefault(),r.clearTimeout(this.noResponseTimer),this.$("#biometricAuth").hide(),this.$("#masterPassStep").show(),this.autoResize()},verifyMasterPass:function(e){e&&e.preventDefault();var t=this;this.$("#masterPassErr").hide();var a=this.$("#password").val();if(0==a.length)return this.$("#masterPassErr").text(l.getText("mm_payment_helper_master_pass_invalid")).show(),void this.autoResize();var i="password:auth:response:"+Math.random(),r=this.options.contentManager.messenger;return r.on(i,function(e){t.$("#newMaskedCard, #confirmAmountView, #register, #biometricAuth").hide(),t.$("#masterPassStep").show(),e.success?(t.biometricToken=e.token,t.$("#masterPassStep").hide(),t._maskedCardAuth?t._confirmCardCreate():t._fillWithUsedCard(),r.off(i)):t.$("#masterPassErr").text(l.getText("mm_payment_helper_master_pass_invalid")).show(),r.off(i),t.autoResize()}),u.licenseModule.getGenericBiometricKey(null,function(e){e.success?(t.biometricKey=e.key,r.send("password:auth",{responseId:i,key:t.biometricKey,password:a,domain:t.options.domain,amount:n.DisposableCard.convertStringToCents(this.amount)})):t.$("#masterPassErr").text(l.getText("mm_payment_helper_master_pass_retry")).show()}),this.autoResize(),!1},confirmCardCreate:function(e,t){this.biometricKey?(t=t||{},this.$("#newMaskedCard, #confirmAmountView, #register").hide(),this._maskedCardAuth=!0,this.sendBiometricAuthRequest(e,t),this.autoResize()):this._confirmCardCreate(e,t)},retryBiometricAuth:function(e,t){var a=this;r.clearTimeout(this.noResponseTimer),u.licenseModule.getGenericBiometricKey(null,function(n){n.success&&(a.biometricKey=n.key,a.sendBiometricAuthRequest(e,t))})},sendBiometricAuthRequest:function(e,t){this.ignoreExplicitClose=!0;var a=this.biometricKey.split(":");if(a.length>2)return this.biometricKey=a[0]+":"+a[1],this.biometricToken=a[2],this.$("#biometricAuth").hide(),void(this._maskedCardAuth?this._confirmCardCreate(e,t):this._fillWithUsedCard());this.$("#biometricAuth").show();var i=this.options.contentManager.messenger,s=this;s.$("#biometricInfo, #biometricAuth").show(),this.model.face_id?s.$("#biometricInfo").html(l.getText("mm_payment_helper_request_faceid_auth",[s.model.biometric_type])):s.$("#biometricInfo").html(l.getText("mm_payment_helper_request_biometric_auth",[s.model.biometric_type])),s.$("#biometricError").hide(),s.autoResize(),this.biometricResponseId&&i.off(this.biometricResponseId);var o="biometric:auth:response:"+Math.random();r.clearTimeout(this.noResponseTimer),this.noResponseTimer=r.setTimeout(function(){s.$("#biometricInfo").text(l.getText("mm_payment_helper_biometric_no_response")),s.autoResize()},2e4),i.on(o,function(a){if(r.clearTimeout(s.noResponseTimer),!a.ack||!s.$("#masterPassStep").is(":visible")){if(s.$("#newMaskedCard, #confirmAmountView, #register, #masterPassStep").hide(),s.$("#biometricAuth").show(),a.ack)return s.$("#biometricInfo").show(),s.$("#biometricError").hide(),s.model.face_id?s.$("#biometricInfo").html(l.getText("mm_payment_helper_request_faceid_card_auth_ack",[s.model.biometric_type])):s.$("#biometricInfo").html(l.getText("mm_payment_helper_request_biometric_card_auth_ack",[s.model.biometric_type])),void s.autoResize();a.success?(s.biometricToken=a.token,s.$("#biometricAuth").hide(),s._maskedCardAuth?s._confirmCardCreate(e,t):s._fillWithUsedCard(),i.off(o),s.biometricResponseId=null):(s.$("#biometricInfo").hide(),s.$("#biometricError").text(a.error).show()),s.autoResize()}});var c={type:"card",responseId:o,key:this.biometricKey,domain:this.options.domain};if(this._maskedCardAuth)c.amount=n.DisposableCard.convertStringToCents(this.amount);else{var d=this.getMatchingCard(this._selectedCardId);c.number=d.get("number").substr(-4)}i.send("biometric:auth",c),this.biometricResponseId=o,this.autoResize()},_confirmCardCreate:function(e,t){if(t=t||{},!this.cardBeingCreated){if(!this.model.entitledToPhone&&this.model.upgradeToPremium&&!t.upgraded&&!this.model.companyRequest)return void this.setupSubscription("annual");this.cardBeingCreated=!0,this.biometricKey&&this.biometricToken&&u.memoryStore.set("biometricKeyToken",this.biometricKey+":"+this.biometricToken),this.model.maskedCard=new n.DisposableCard({domain:this.options.domain,biometricKey:this.biometricKey,biometricToken:this.biometricToken,amount:n.DisposableCard.convertStringToCents(this.amount),shielded_card_id:this.model.companyRequest?null:this.model.primaryCard.id,company:this.model.companyRequest,payment_method:this.model.useBitcoin?"bitcoin":"creditcard"}),this.model.maskedCard.set("source","dnt-panel"),this.model.maskedCard.bind("sync:success",function(){this.updatePanelActivity("impression",this.createCardSuccessfullViewPanelId,this.fieldId,!1),this.trigger("render"),this.cardBeingCreated=!1,this.$("#loadingMaskedCard").hide(),this.$("#cardNumber").text(this.model.maskedCard.getPrettyNumber()),this.$("#expiration").text(this.model.maskedCard.getExpiry()),this.$("#cvc").text(this.model.maskedCard.getCVC()),this.$("#domain").text(this.model.maskedCard.getDomain()),this.$("#originalValue").text(this.model.maskedCard.getOriginalValue()),this.$("#maskedCardView").show(),this.$("#maskedCard").show(),this.trigger("render")},this),this.model.maskedCard.bind("sync:error",function(e){this.updatePanelActivity("impression",this.createCardFailedViewPanelId,this.fieldId,!1),this.processError(e),this.trigger("render")},this),this.$("#newMaskedCard, #confirmAmountView, #register").hide(),this.loadingDisplay=new s({customMessages:["mm_loading_display_Crunching","mm_loading_display_Clouds","mm_loading_display_Tubes","mm_loading_display_HangOn","mm_loading_display_Whoops_Panel"],interval:6e3,el:this.$("#loadingMaskedCard"),pageName:"card_create_panel"}),this.$("#loadingMaskedCard").show(),this.trigger("render"),this.ignoreExplicitClose=!0,this.model.maskedCard.save()}},cancelCardCreate:function(){this.$("#confirmAmountView").hide(),this.$("#newMaskedCard").show(),this.ignoreBlur(!1),this.$("#cardAmount").focus(),this.trigger("render")},createCard:function(t){t&&t.preventDefault();var a,i=/[^\d\.]/g;a=this.$("#cardAmount").val(),a=a.replace(i,""),a=parseFloat(parseFloat(a).toFixed(2)),isNaN(a)?(this.$("#amountError").html(l.getText("mm_payment_error_validation_input")),this.trigger("render")):(this.$("#amountError").html(""),this.amount=a,this.model.primaryCard||this.model.companyRequest?u.paymentsModule.retrieveCardFee({requested_amount:n.DisposableCard.convertStringToCents(a),card_use:this.model.companyRequest?"company":"personal"},e.bind(function(e,t){this.$("#processingRequestView").hide(),e?(this.processError(e),this.trigger("render")):(t&&t.fee&&t.fee.total_fee?(this.model.total_fee=t.fee.total_fee,this.model.unlimited_plan=t.unlimited_plan,this.model.free_cards_used=t.free_cards_used,this.model.billing_account_type=t.billing_account_type):(this.model.total_fee=0,this.model.unlimited_plan=!1),this.model.primaryCard||this.model.companyRequest?this.model.entitledToPhone||this.model.upgradeToPremium||this.model.hasFreeCards||this.model.isFreeTrial?this.showConfirmAmountView():this.model.hasFreeCards||(this.$("#amountError").html(l.getText("mm_payment_helper_outOfCardsCheck")),this.trigger("render")):this.showBillingInfoView())},this)):this.showBillingInfoView())},showConfirmAmountView:function(){this.updatePanelActivity("impression",this.showConfirmAmountViewPanelId,this.fieldId,!1);var e={extraWidth:this.$("#register").is(":visible")?this.billingInfoViewExtraWidth*-1:null,extraHeight:this.$("#register").is(":visible")?40:null};this.$(".payments-step").hide(),this.model.entitledToPhone||!this.model.upgradeToPremium||this.model.companyRequest?this.model.companyRequest?this.$("#confirmRegularMsg").html(l.getText("mm_payment_helper_company_willBeCharged")):this.model.useBitcoin?this.$("#confirmRegularMsg").html(l.getText("mm_payment_helper_paymentsr2_willBeChargedBitcoin")):"credit_card"==this.model.billing_account_type?this.$("#confirmRegularMsg").html(l.getText("mm_payment_helper_paymentsr2_willBeCharged_1",this.model.companyRequest?"XXXX":this.model.primaryCard.getLastFour())+" <span class='confirmAmount'></span> "+l.getText("mm_payment_helper_paymentsr2_willBeCharged_2")):this.$("#confirmRegularMsg").html(l.getText("mm_payment_helper_paymentsr2_willBeChargedAch",this.model.companyRequest?"XXXX":this.model.primaryCard.getLastFour())+" <span class='confirmAmount'></span> "+l.getText("mm_payment_helper_paymentsr2_willBeCharged_2")):this.$("#confirmRegularMsg").html(l.getText("mm_payment_helper_paymentsr2_willBeChargedUpgradePremium",this.model.companyRequest?"XXXX":this.model.primaryCard.getLastFour())),this.$(".confirmAmount").text(this.convertCentsToString(Number(n.DisposableCard.convertStringToCents(this.amount))+Number(this.model.total_fee))),this.model.unlimited_plan?(this.$(".unlimitedExceeded").show(),this.$(".unlimitedExceededCount").text(this.model.free_cards_used),this.$("#confirmCardCreate").val("Confirm with "+this.convertCentsToString(Number(this.model.total_fee))+" fee")):(this.$(".unlimitedExceeded").hide(),this.$("#confirmCardCreate").val("Confirm")),this.$("#confirmAmountView").show(),this.ignoreBlur(!0),this.ignoreExplicitClose=!0,this.focusField(),this.autoResize(e)},verifyCardRequestBtc:function(e){this.model.useBitcoin=!0,this.verifyCardRequest(e)},verifyCardRequest:function(t){if(!this.model.useBitcoin&&!this.model.companyRequest&&!this.model.primaryCard&&"stripe"==this.model.billing_manager)return void u.webapp.openPage("#premium");this.ignoreBlur(!0);var a=new Date,n=a.getMonth()+1,i=a.getFullYear();this.$("#autoCardMonth").val(n),this.$("#autoCardYear").val(i),t&&t.preventDefault(),this.$("#processingRequestView").show(),this.$("#panelOptions").hide(),this.ignoreExplicitClose=!0;var r={domain:this.options.domain};this.model.companyRequest&&(r.company=!0),u.paymentsModule.verifyCardRequest(r,e.bind(function(t,a){t?(this.$("#processingRequestView").hide(),this.processError(t),this.trigger("render")):(a&&a.key&&(this.biometricKey=a.key),this.model.hasRegistered&&!this.model.entitledToPhone?u.paymentsModule.retrieveCardFee({requested_amount:0},e.bind(function(e,t){this.$("#processingRequestView").hide(),e?(this.processError(e),this.trigger("render")):(t.card_credit&&t.card_credit.free_cards&&t.card_credit.free_cards>0&&(this.model.hasFreeCards=!0),this.showNewMaskedCardView())},this)):(this.$("#processingRequestView").hide(),this.showNewMaskedCardView()))},this)),this.autoResize()},showNewMaskedCardView:function(a){a&&a.preventDefault(),this.model.companyRequest&&t("#upgradeToPremiumCheckboxDiv").hide(),this.updatePanelActivity("masked",this.panelId,this.fieldId,!0),this.$("#panelOptions").hide(),this.$("#newMaskedCard").show(),this.model.hasRegistered&&(this.model.hasFreeCards||(this.$("#upgradeToPremium").prop("checked",!0),this.model.upgradeToPremium=!0)),this.ignoreBlur(!0),this.ignoreExplicitClose=!0,this.updatePanelActivity("impression",this.showCollectMaskedCardAmountViewPanelId,this.fieldId,!1),this.trigger("render"),r.setTimeout(e.bind(function(){this.$("#cardAmount").focus(),this.bindPanelTextInput(this.$("#cardAmount")),r.setTimeout(e.bind(function(){this.ignoreBlur(!1)},this),50)},this),500)},cleanupPanel:function(){},canShowAutoPremiumPanel:function(){return this.fieldType.indexOf("/financial/creditcard/number")!=-1},refreshUserInput:function(){var a=this.model.userInput;if(e.each(this.options.fields,e.bind(function(e){var n=e.dataType;if(n){var i=t(e.element).val();if(i&&""!=i)for(var r=0;r<2;r++)n in g&&(!a[g[n]]||""==a[g[n]]||0==r)&&(a[g[n]]=i),n=n.substr(0,n.lastIndexOf("/"))}},this)),a.part1&&""!=a.part1&&(a.number=a.part1+a.part2+a.part3+a.part4),a.number&&(a.number=a.number.replace(/[^0-9]+/g,""),a.last4=a.number.substr(a.number.length-4)),a.name&&""!=a.name||(a.name=a.issuedto),a.name&&""!=a.name||(a.name=a.fname),
!a.lname||""==a.lname){var n=a.name;if(n&&""!=n){var i=a.name.split(/\s+/);i.length>0&&(a.fname=i[0],a.lname=i[1])}}a.fname&&a.lname&&(a.fname=a.fname.replace(a.lname,"").replace(/^[\s]+]|[\s]+$/g,"")),a.country&&a.country.match(/USA|United[\s]*States/i)&&(a.country="US"),a.expirymonth&&(a.expirymonth=parseInt(a.expirymonth.replace(/[^0-9]+/g,"")))},afterInitialize:function(){this.options.entitledToPhone&&(this.templateName="payment_helper_paymentsr2_panel"),this.strategyId=this.options.strategyId,this.fieldId=this.options.fieldId,this.fieldType=this.options.fieldType,this.numMenuOptions=2,this.bindBaseEvents(),this.applyFadingStyle(),this.fadeIn(),this.contentManager=this.options.contentManager,this.messenger=this.options.contentManager.messenger,this.on("remove",e.bind(function(){this.biometricResponseId&&this.messenger.off(this.biometricResponseId)},this));var t=this.contentManager.preferences.getPref("biometric_type"),a="fingerprint";"apns.face_id"==t?a="Face ID":"apns.touch_id"==t&&(a="Touch ID"),this.model={panelType:"card",primaryCard:!1,authToken:this.options.authToken,hasRegistered:this.options.hasRegistered,isFreeTrial:this.options.entitledToPayments&&!this.options.entitledToPhone,entitledToPayments:this.options.entitledToPayments,cardNotSetup:this.contentManager.preferences.getPref("cardNotSetup"),hasEnabledPayments:this.options.hasEnabledPayments,hasAuthorizedCoinbase:this.options.hasAuthorizedCoinbase,entitledToPhone:this.options.entitledToPhone,canShowRealCards:this.contentManager.preferences.getSplitTest("wallet01")!=c.SPLIT_WALLET_OFF,cardDisabled:this.options.cardDisabled,realCardDisabled:this.options.realCardDisabled,mapper:!!this.contentManager.preferences.getPref("mapping:mapper"),face_id:"apns.face_id"==t,touch_id:"apns.face_id"!=t,biometric_type:a,showMapper:this.contentManager.preferences.isMapper(),show_settings:!this.contentManager.preferences.getPref("card-settings-seen"),hasCompanyCards:this.contentManager.preferences.getPref("hasCompanyCards"),firstFiveCards:parseInt(this.contentManager.preferences.getPref("countCardNotifications")||0)<5};var i=this;u.securityManager.getBillingManager(function(e){i.model.billing_manager=e});var s=this.contentManager.preferences.getPref("hasEnabledPayments");this.model.shieldedCard=new n.ShieldedCardCollection,this.panelId=8000006,this.maskedCardFirstStepPanelId=8000026,this.showCollectMaskedCardAmountViewPanelId=8000036,this.showConfirmAmountViewPanelId=8000046,this.createCardSuccessfullViewPanelId=8000056,this.createCardFailedViewPanelId=8000066,this.usedMaskedCardPanelId=8000076,this.usedAutofillMaskedCardViewPanelId=8000086,this.usedAutofillRealCardViewPanelId=8000096,this.showCollectBillingInfoViewPanelId=7000016,this.addingBillingInfoSuccessfullViewPanelId=7000026,this.addingBillingInfoFailedViewPanelId=7000036,this.clickedAutofillRealCardWhenNoCardExistsPanelId=7000046,this.updatePanelActivity("impression",this.maskedCardFirstStepPanelId,this.fieldId,!1),this.model.tabData=new n.TabData({messenger:this.options.messenger}),this.model.tabData.fetchTrackers({success:e.bind(function(){this.model.realCards=new n.RealCardCollection,this.model.realCards.fetchAll({success:e.bind(function(){this.model.hasRegistered?this.model.shieldedCard.fetchAll({success:e.bind(function(){this.model.shieldedCard.length>0&&(this.model.primaryCard=this.model.shieldedCard.at(0)),this.model.disposableCards=new n.DisposableCardCollection,this.model.disposableCards.fetchAllByDomain(this.options.domain,e.bind(function(){if(u.memoryStore.get("cardgrowl"+this.options.strategyId,e.bind(function(e){this.showCardGrowl(e)},this)),this.model.primaryCard){if(this.refreshLastFourShieldedCardNumber(),this.updatePanelActivity("impression",this.panelId,this.fieldId,!0),!s)return void this.closePanel();this.bind("enter0",this.verifyCardRequest,this),e.each(this.model.disposableCards.models,function(e,t){this.bind("enter"+(t+1),function(t){this.fillWithUsedCard(t,e.get("id"))},this)},this),this.render(),this.checkCallFromNotification()}else this.options.dynamicPanel?(this.model.dynamicPanel=this.options.dynamicPanel,this.setupDynamicPanel(),this.model.panelSections=this.panelSections,this.panelId=this.model.dynamicPanel.id,this.updatePanelActivity("impression",this.panelId,this.fieldId,!0),this.render()):(this.updatePanelActivity("impression",this.panelId,this.fieldId,!0),this.render(),this.checkCallFromNotification())},this))},this)}):(this.updatePanelActivity("impression",this.panelId,this.fieldId,!0),this.render(),this.checkCallFromNotification())},this)})},this)}),this.options.fromContextMenu&&(this.ignoreBlur(!0),r.setTimeout(e.bind(function(){this.verifyCardRequest()},this),100)),this.contentManager.closeToolbarPanel()},checkCallFromNotification:function(){this.options.params?(this.panelReason="growl","new_card"==this.options.params.step?this.verifyCardRequest():"fill_card"==this.options.params.step&&this.fillWithUsedCard(null,this.options.params.id)):(this.panelReason="panel",u.licenseModule.logCheckout({method:this.panelReason,merchant:this.contentManager.domain,shown:1,amount:this.options.amount}))},beforeRemove:function(){this.options.params&&this.contentManager.messenger.sendToCS(this.options.params.frameId,"panel:closed")},showCardGrowl:function(e){var t=this.getMatchingCard(e);if(t){var a="realCard"==t.storageEntity,n=t.toJSON();t.get("address")&&(n.address=t.get("address")),this.options.contentManager.showNotification({msg:"",targetUrl:ABINE_DNTME.config.protocol+ABINE_DNTME.config.webAppHost+"/#/cards",targetId:"",model:{maskedCard:n},height:260,neverFade:!0,type:a?"real_card":"card"})}},showBillingInfoView:function(){this.updatePanelActivity("impression",this.showCollectBillingInfoViewPanelId,this.fieldId,!1),this.$(".payments-step").hide(),this.$("#register").show(),this.ignoreBlur(!0),this.options.entitledToPhone?this.trigger("render"):this.trigger("render",{extraWidth:this.billingInfoViewExtraWidth})},registerAndMask:function(a){a&&a.preventDefault();var n=!1,i=this.$("#register input,#register select");e.each(i,function(e){var e=t(e);e.is(":visible")&&""==e.val()&&!e.data("optional")?(e.addClass("error"),n||e.focus(),n=!0):e.removeClass("error")});var r=this.$("#autoCardNumber").val().replace(/[^0-9]+/g,"");if(!r.match(_)||!p(r)||"552942"==r.substring(0,6))return this.$("#autoCardNumber").addClass("error").focus(),this.$(".alert-error").text(l.getText("mm_payment_helper_valid_card_number")).show(),void this.autoResize();if("US"!=this.$("#autoCountry").val())return this.$("#autoCountry").addClass("error").focus(),this.$(".alert-error").text(l.getText("mm_payment_helper_non_us3")).show(),void this.autoResize();if(n)return this.$(".alert-error").text(l.getText("mm_payment_helper_fill_all_required")).show(),void this.autoResize();if(this.model.hasRegistered)this.setupSubscription();else{if(!this.$("#autoEmail").val().match(h))return this.$(".alert-error").text(l.getText("mm_dntme_invalid_email")).show(),void this.autoResize();this.setupUser()}},setupUser:function(){var t=this.$("#autoEmail").val(),a=m(6),n={email:t,password:a,password_hint:l.getText("mm_pwhint_default"),generated_password:!0,register_type:"dnt_card_panel"};this.showProgress(),u.licenseModule.register(n,e.bind(function(t,a){this.processRegistration(t,a,n,e.bind(function(e){e||this.setupSubscription()},this))},this)),this.autoResize()},setupSubscription:function(t){t=t||"two_dollars",this.$("#autoEmail").hide();var a=this.$("#autoState").val();"US"==this.$("#autoCountry").val()&&(a=this.$("#autoStateUS").val());var n=this.$("#autoCardNumber").val().replace(/[^0-9]+/g,"");if("552942"==n.substring(0,6))return this.$(".alert-error").text(l.getText("mm_payment_helper_valid_card_number")).show(),void this.autoResize();this.$(".alert-error").hide(),this.showProgress();var i,r=!!this.model.primaryCard;i=r?{first_name:this.model.primaryCard.get("first_name"),last_name:this.model.primaryCard.get("last_name")}:{first_name:this.$("#autoFname").val(),last_name:this.$("#autoLname").val(),address1:this.$("#autoAddress").val(),state:a,city:this.$("#autoCity").val(),zip:this.$("#autoZip").val(),country:this.$("#autoCountry").val(),number:n,year:this.$("#autoCardYear").val(),month:this.$("#autoCardMonth").val(),verification_value:this.$("#autoCardCvv").val()},u.licenseModule.subscribe(i,t,"dntme_payment_helper",e.bind(function(a,n){this.processSubscription(a,n,i,e.bind(function(a){this.hideProgress(),a||(this.updatePanelActivity("disclosed",this.panelId,this.fieldId,!0),this.model.shieldedCard.fetchAll({success:e.bind(function(){this.model.shieldedCard.length>0&&(this.model.primaryCard=this.model.shieldedCard.at(0)),"two_dollars"==t?"total_fee"in this.model?this.showConfirmAmountView():this.createCard():this.confirmCardCreate(null,{upgraded:!0})},this)}))},this))},this))},showProgress:function(){this.$(".progress").show(),this.$("#register input, #register select, #register button, #confirmAmountView input").attr("disabled","disabled"),this.autoResize()},hideProgress:function(){this.$(".progress").hide(),this.$("#register input, #register select, #register button, #confirmAmountView input").removeAttr("disabled"),this.autoResize()},processRegistration:function(t,a,n,i){if(t){var r=l.getText("mm_payment_helper_register_error"),s=t.responseJSON&&t.responseJSON.data?t.responseJSON.data.errors:null;"invalid email address"==t.responseJSON.error_code?r=l.getText("mm_payment_helper_invalid_email_server_error"):s&&s.email&&("has already been taken"==s.email[0]?r=l.getText("mm_payment_helper_duplicate_email",[n.email]):"was used for MaskMe Heavy"==s.email[0]&&(r=l.getText("mm_payment_helper_version_not_allowed"))),this.$(".alert-error").html(r).show(),this.$(".alert-error #loginButton").click(e.bind(this.openLoginPage,this)),this.$(".alert-error #dnt2upgrade").click(e.bind(this.openDnt2UpgradePage,this)),this.autoResize(),i(r)}else this.contentManager.preferences.fetchAll(),this.model.hasRegistered=!0,i()},processSubscription:function(e,t,a,n){if(e){this.updatePanelActivity("impression",this.addingBillingInfoFailedViewPanelId,this.fieldId,!1);var i=t.errors.base;this.$(".alert-error").text(i[0]).show(),this.autoResize(),n(e)}else this.updatePanelActivity("impression",this.addingBillingInfoSuccessfullViewPanelId,this.fieldId,!1),this.contentManager.preferences.fetchAll(),n()},fillWithDisposableCard:function(e){e&&e.preventDefault(),this.updatePanelActivity("impression",this.usedMaskedCardPanelId,this.fieldId,!1);var t=this.model.maskedCard.toJSON();this.fillFields("payment",t,"payment"),this.options.contentManager.showNotification({msg:"<h4 style='display:inline;'>Masked Card</h4><div style='text-align:center;'><div>"+this.model.maskedCard.get("type")+"</div><div>"+this.model.maskedCard.get("number")+"</div><div>"+this.model.maskedCard.getExpiry()+"</div><div>"+this.model.maskedCard.getCVC()+"</div></div>",targetUrl:ABINE_DNTME.config.protocol+ABINE_DNTME.config.webAppHost+"/#/cards",targetId:"",model:{maskedCard:t},height:260,neverFade:!0,type:"card"}),this.closePanel()},setupCard:function(e){this.getContentMessenger(),this.messenger.send("window:createTab",{localUrl:"pages/index.html#payments"}),this.closePanel(e)},fillWithUsedCard:function(e,a){if(!e||(e.preventDefault(),!e.target.className.match(/overflow|right/i)))if("undefined"==typeof a?this._selectedCardId=t(e.currentTarget).data("cardid"):this._selectedCardId=a,"panel"==this.panelReason&&u.licenseModule.logCheckout({method:this.panelReason,merchant:this.contentManager.domain,clicked:1,amount:this.options.amount}),"biometric"==this.contentManager.preferences.getPref("masked_card_auth")){u.licenseModule.logCheckout({method:this.panelReason,merchant:this.contentManager.domain,biometric:1,amount:this.options.amount}),this.$("#panelOptions").hide(),this._maskedCardAuth=!1;var n=this;u.licenseModule.getGenericBiometricKey(null,function(t){t.success?(n.biometricKey=t.key,n.sendBiometricAuthRequest(e,options)):(n.$("#biometricAuth").show(),n.$("#biometricInfo").hide(),n.$("#biometricError").text(l.getText("mm_payment_helper_biometric_auth_disabled",[n.model.biometric_type])).show(),n.autoResize())})}else this._fillWithUsedCard()},getMatchingCard:function(t){var a;return this.model.disposableCards&&(a=e.find(this.model.disposableCards.models,function(e){if(e.id==t)return!0})),a||(a=e.find(this.model.realCards.models,function(e){if(e.id==t)return!0})),a},_fillWithUsedCard:function(){var e=this._selectedCardId,t=this.getMatchingCard(e);if(!t.get("number")){var a=this;return this.$("#fetchingCard").show(),t.fetch({success:function(){a._fillWithUsedCard()}}),void this.autoResize()}this.biometricKey&&this.biometricToken&&u.memoryStore.set("biometricKeyToken",this.biometricKey+":"+this.biometricToken),this.updatePanelActivity("masked",this.panelId,this.fieldId,!0);var n="realCard"==t.storageEntity;if(n){var i=t.get("type");t.get("brand")&&t.get("brand").indexOf("generic")==-1&&(i=t.get("brand")),this.updatePanelActivity("impression",this.usedAutofillRealCardViewPanelId,this.fieldId,!1)}else{var i="masked";this.updatePanelActivity("impression",this.usedAutofillMaskedCardViewPanelId,this.fieldId,!1)}var r=t.toJSON();t.get("address")&&(r.address=t.get("address")),this.logged||(this.logged=!0,u.licenseModule.logCheckout({method:this.panelReason,merchant:this.contentManager.domain,success:1,filled:i,amount:this.options.amount})),this.fillFields("payment",r,"payment"),this.options.contentManager.showNotification({msg:"",targetUrl:ABINE_DNTME.config.protocol+ABINE_DNTME.config.webAppHost+"/#/cards",targetId:"",model:{maskedCard:r},height:260,neverFade:!0,type:n?"real_card":"card"}),this.closePanel()}});return y}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.payment_helper_paymentsr2_panel=e.template(function(e,t,a,n,i){function r(e){var t,i="";return i+="\n      ",t=e,t=m.invokePartial(n["payment_helper.mask_my_card"],"payment_helper.mask_my_card",t,a,n),(t||0===t)&&(i+=t),i+="\n    "}function s(e){var t,i="";return i+="\n      ",t=e,t=m.invokePartial(n["payment_helper.protect_my_card"],"payment_helper.protect_my_card",t,a,n),(t||0===t)&&(i+=t),i+="\n    "}a=a||e.helpers,n=n||e.partials;var o,l,c,d,u,p="",m=this,h="function",_=a.helperMissing,f=void 0,g=this.escapeExpression;return p+='<div class="newpanel">\n  <span class="normal-flow">\n  <div class="left-panel">\n\n  <!--Protect My Card Step 1-->\n    ',d=a.hasAuthorizedCoinbase,o=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"hasAuthorizedCoinbase"),l=a["if"],u=m.program(1,r,i),u.hash={},u.fn=u,u.inverse=m.program(3,s,i),o=l.call(t,o,u),(o||0===o)&&(p+=o),p+='\n  <!-- End Step 1 -->\n\n  <!--Protect My Card Step 2 Enter Card Amount -->\n  <div id="newMaskedCard" class="payments-step" style="display:none;">\n    <div class="payments-header">\n      ',o="mm_payment_helper_safestWayTitle",d=a.intl,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof l===h?l.call(t,o,{hash:{}}):l===f?_.call(t,"intl",o,{hash:{}}):l,p+=g(o)+'\n    </div>\n    <div class="payments-how-much-text" style="margin-bottom: 5px;">\n      ',o="mm_payment_helper_howMuch",d=a.intl,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof l===h?l.call(t,o,{hash:{}}):l===f?_.call(t,"intl",o,{hash:{}}):l,p+=g(o)+'\n    </div>\n\n    <div>\n      <span class="input-prepend" style="margin: 10px 10px 20px -20px;">\n        <span class="add-on" style="font-size:38px;line-height:40px;height:40px;">$</span>\n        <input maxlength="7" class="span2" id="cardAmount" type="text" placeholder="0.00"/>\n      </span>\n\n      <input type="button" id="createCard" style="font-size:16px;padding:10px 20px;margin-bottom:16px;" value="Finish Up" class="btn btn-primary" />\n      <span id="amountError" style="display:block;margin:-10px 0px 10px 0px;line-height:11px;font-size:10px;color:red;"></span>\n    </div>\n  </div>\n  <!-- End Step 2 Enter Card Amount -->\n\n  <div id="processingRequestView" style="display:none;height: 50px;margin: 20px;">\n    ',o="mm_payment_helper_please_wait",d=a.intl,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof l===h?l.call(t,o,{hash:{}}):l===f?_.call(t,"intl",o,{hash:{}}):l,p+=g(o)+'\n  </div>\n\n  <div id="loadingMaskedCard" style="height:50px;display:none;text-align:center;padding:10px;">\n  </div>\n\n  <!-- No Card On File -->\n  <div id="register" class="payments-step" style="display: none;padding: 10px;">\n    ',o="mm_payment_error_card_not_setup",d=a.intl,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof l===h?l.call(t,o,{hash:{}}):l===f?_.call(t,"intl",o,{hash:{}}):l,(o||0===o)&&(p+=o),p+='\n  </div>\n  <!-- End No Card On File -->\n\n  <!-- Step 3 Confirmation -->\n  <div class="payments-step" id="confirmAmountView" style="display:none;">\n    <div class="payments-header">\n      ',o="mm_payment_helper_finishUpTitle",d=a.intl,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof l===h?l.call(t,o,{hash:{}}):l===f?_.call(t,"intl",o,{hash:{}}):l,p+=g(o)+'\n    </div>\n    <div class="payments-confirm-card-body" style="text-align:center;margin:5px 30px;">\n      <span>',o="mm_payment_helper_paymentsr2_ready",d=a.intl,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof l===h?l.call(t,o,{hash:{}}):l===f?_.call(t,"intl",o,{hash:{}}):l,p+=g(o)+'</span>\n      <h5 class="unlimitedExceeded" style="display: none; color: red">\n        You have used <span class="unlimitedExceededCount" style="font-weight: bold;"></span> free cards in last 30 days.\n        Please switch to <u style="cursor: pointer;color:blue !important;" class="switch-to-ach">Bank Account</u> to continue using unlimited free masked card.\n        <br/>\n      </h5>\n      <h5 id="confirmRegularMsg">\n        ',d=a.primaryCard,o=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"primaryCard"),o=null===o||void 0===o||o===!1?o:ABINE_DNTME.Duckbone.Handlebars.getAttr(o,"getLastFour"),l="mm_payment_helper_paymentsr2_willBeCharged_1",d=a.intl,c=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof c===h?c.call(t,l,o,{hash:{}}):c===f?_.call(t,"intl",l,o,{hash:{}}):c,p+=g(o)+"<span class='confirmAmount'></span> ",o="mm_payment_helper_paymentsr2_willBeCharged_2",d=a.intl,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof l===h?l.call(t,o,{hash:{}}):l===f?_.call(t,"intl",o,{hash:{}}):l,p+=g(o)+'\n      </h5>\n      <div style="text-align:center;margin-bottom:10px;">\n          <input type="button" value="Confirm" id="confirmCardCreate" class="btn btn-primary" style="margin-bottom:3px;padding:8px 40px;"/>\n      </div>\n    </div>\n  </div>\n  <!-- End Step 3 Confirmation -->\n\n  ',o=t,o=m.invokePartial(n["common.biometric_auth"],"common.biometric_auth",o,a,n),(o||0===o)&&(p+=o),p+='\n\n  <div id="fetchingCard" style="display:none;padding: 20px 10px;">\n      Please wait. Fetching card details...\n  </div>\n  <!-- Step 4 Use Card -->\n    <span id="maskedCardView" style="display:none;">\n        <div id="maskedCardError" style="display:none;text-align:center;padding:10px;">\n            <div id="maskedCardErrorMsg" class="alert alert-error">\n\n            </div>\n            <div style="text-align:center;padding:10px 0 5px 0;">\n                <input type="button" id="chatNow" class="btn btn-primary chatNow" style="width:90%;text-align:center;" value="',o="mm_notification_helper_chatNow",d=a.intl,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof l===h?l.call(t,o,{hash:{}}):l===f?_.call(t,"intl",o,{hash:{}}):l,p+=g(o)+'" />\n            </div>            \n        </div>\n        <div id="maskedCard" class="creditcardfont" style="color:rgb(80,80,80);width:336px;margin:auto;padding:10px;display:none;">\n          <div style="background-repeat:no-repeat;background-size:100%;height:181px;background-image:url(\'',o="/pages/images/2015panels/masked_card_blank.png",d=a.assetUrl,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),o=typeof l===h?l.call(t,o,{hash:{}}):l===f?_.call(t,"assetUrl",o,{hash:{}}):l,p+=g(o)+'\');">\n              <br style="clear:both;"/>\n              <div style="text-align:right;margin-right:20px;color:white;">\n                  <span style="font-family:\'Open Sans\', \'Helvetica Neue\', Arial, sans-serif !important;font-weight:bold;font-size:24pt;" id="originalValue">',d=a.getOriginalValue,o=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getOriginalValue"),typeof o===h?o=o.call(t,{hash:{}}):o===f&&(o=_.call(t,"getOriginalValue",{hash:{}})),p+=g(o)+"</span>\n                  <br/>\n                  <span style=\"font-family:'Open Sans', 'Helvetica Neue', Arial, sans-serif !important;font-size:11pt;\">",o="mm_notification_helper_at",d=a.intl,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof l===h?l.call(t,o,{hash:{}}):l===f?_.call(t,"intl",o,{hash:{}}):l,p+=g(o)+"&nbsp;</span><span id=\"domain\" style=\"font-family:'Open Sans', 'Helvetica Neue', Arial, sans-serif !important;font-weight:bold;font-size:11pt;\">",d=a.getDomain,o=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getDomain"),typeof o===h?o=o.call(t,{hash:{}}):o===f&&(o=_.call(t,"getDomain",{hash:{}})),p+=g(o)+'</span>\n              </div>\n              <div style="text-align:center;margin-top:5px;color:white;">\n                  <h3 id="cardNumber" style="font-family:\'Open Sans\', \'Helvetica Neue\', Arial, sans-serif !important;font-weight:lighter;">',d=a.getSeparatedCardNumber,o=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getSeparatedCardNumber"),typeof o===h?o=o.call(t,{hash:{}}):o===f&&(o=_.call(t,"getSeparatedCardNumber",{hash:{}})),p+=g(o)+"</h3>\n              </div>\n              <div style=\"font-size:15px;color:white;margin-left:25px;font-family:'Open Sans', 'Helvetica Neue', Arial, sans-serif !important;font-weight:bold;\">\n                  <span style=\"float:left;\">",o="mm_payment_helper_expDate",d=a.intl,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof l===h?l.call(t,o,{hash:{}}):l===f?_.call(t,"intl",o,{hash:{}}):l,p+=g(o)+' <span id="expiration">',d=a.getExpiry,o=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getExpiry"),typeof o===h?o=o.call(t,{hash:{}}):o===f&&(o=_.call(t,"getExpiry",{hash:{}})),p+=g(o)+'</span></span> <span style="float:right;margin-right:115px;"> ',o="mm_payment_helper_cvc",d=a.intl,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof l===h?l.call(t,o,{hash:{}}):l===f?_.call(t,"intl",o,{hash:{}}):l,p+=g(o)+' <span id="cvc">',d=a.getCVC,o=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getCVC"),typeof o===h?o=o.call(t,{hash:{}}):o===f&&(o=_.call(t,"getCVC",{hash:{}})),p+=g(o)+'</span></span>\n              </div>\n          </div>\n          <div style="text-align:center;margin-top:5px;">\n            <input type="button" value="',o="mm_payment_helper_useMyMasked",d=a.intl,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof l===h?l.call(t,o,{hash:{}}):l===f?_.call(t,"intl",o,{hash:{}}):l,p+=g(o)+'" class="btn btn-primary" id="useMaskedCard" />\n          </div>\n        </div>\n        <div id="dummyCard" class="creditcardfont" style="color:rgb(80,80,80);width:336px;margin:auto;padding:10px;display:none;">\n            <div id="dummyCardTitle" style="display: none;font-family: arial, sans-serif;">',o="mm_payment_helper_dummy_card_ready",d=a.intl,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof l===h?l.call(t,o,{hash:{}}):l===f?_.call(t,"intl",o,{hash:{}}):l,p+=g(o)+'</div>\n            <img class="dummyCardImg" src="',o="/pages/images/masked_card_gold.png",d=a.assetUrl,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),o=typeof l===h?l.call(t,o,{hash:{}}):l===f?_.call(t,"assetUrl",o,{hash:{}}):l,p+=g(o)+'"/>\n        </div>\n    </span>\n\n  <!-- End Step 4 -->\n  </div>\n\n  </span>\n  <!-- End Normal Flow -->\n\n  <!-- Default header (actually footer) for the panels -->\n  ',o=t,o=m.invokePartial(n["common.header"],"common.header",o,a,n),(o||0===o)&&(p+=o),p+="\n\n  <!-- end Default header (actually footer) -->\n\n  <!-- Inline FAQ Panel -->\n  ",o=t,o=m.invokePartial(n["payment_helper.inline_faq"],"payment_helper.inline_faq",o,a,n),(o||0===o)&&(p+=o),p+="\n  <!-- end Inline FAQ Panel -->\n\n</div>\n"}),ABINE_DNTME.CompiledTemplates.payment_helper_paymentsr2_panel}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.payment_helper_paymentsr3_card_money=e.template(function(e,t,a,n,i){function r(e){var t,i="";return i+="\n      ",t=e,t=p.invokePartial(n["payment_helper.mask_my_card"],"payment_helper.mask_my_card",t,a,n),(t||0===t)&&(i+=t),i+="\n    "}function s(e){var t,i="";return i+="\n      ",t=e,t=p.invokePartial(n["payment_helper.protect_my_card"],"payment_helper.protect_my_card",t,a,n),(t||0===t)&&(i+=t),i+="\n    "}a=a||e.helpers,n=n||e.partials;var o,l,c,d,u="",p=this,m="function",h=a.helperMissing,_=void 0,f=this.escapeExpression;return u+='<div class="newpanel">\n  <span class="normal-flow">\n  <div class="left-panel">\n  <div id="processingRequestView" style="display:none;height: 50px;margin: 20px;">\n    ',o="mm_payment_helper_please_wait",c=a.intl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof l===m?l.call(t,o,{hash:{}}):l===_?h.call(t,"intl",o,{hash:{}}):l,u+=f(o)+'\n  </div>\n\n  <div id="loadingMaskedCard" style="display:none;height:50px;text-align:center;padding:10px;">\n  </div>\n\n  <!-- Card Money Step 1-->\n    ',c=a.hasAuthorizedCoinbase,o=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"hasAuthorizedCoinbase"),l=a["if"],d=p.program(1,r,i),d.hash={},d.fn=d,d.inverse=p.program(3,s,i),o=l.call(t,o,d),(o||0===o)&&(u+=o),u+='\n  <!-- End Step 1 -->\n\n  <!--Protect My Card Step 2 Enter Card Amount -->\n  <div id="newMaskedCard" class="payments-step" style="display:none;">\n    <div class="payments-header">\n      ',o="mm_payment_helper_safestWayTitle",c=a.intl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof l===m?l.call(t,o,{hash:{}}):l===_?h.call(t,"intl",o,{hash:{}}):l,u+=f(o)+'\n    </div>\n    <div class="payments-how-much-text" style="margin-bottom: 5px;">\n      ',o="mm_payment_helper_howMuch",c=a.intl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof l===m?l.call(t,o,{hash:{}}):l===_?h.call(t,"intl",o,{hash:{}}):l,u+=f(o)+'\n    </div>\n\n    <div>\n      <span class="input-prepend" style="margin: 10px 10px 20px -20px;">\n        <span class="add-on" style="font-size:38px;line-height:40px;height:40px;">$</span>\n        <input maxlength="7" class="span2" id="cardAmount" type="text" placeholder="0.00"/>\n      </span>\n\n      <input type="button" id="createCard" style="font-size:16px;padding:10px 20px;margin-bottom:16px;" value="Finish Up" class="btn btn-primary" />\n      <span id="amountError" style="display:block;margin:-10px 0px 10px 0px;line-height:11px;font-size:10px;color:red;"></span>\n    </div>\n    <div id="upgradeToPremiumCheckboxDiv" class="checkbox" style="width:300px;margin:0px 10px 10px 20px;">\n      <!-- default values and text changed in panel.js depending on card money/has free cards/if registered/premium states -->\n      <label id="upgradeToPremiumCheckboxLabel" class="alert-success" style="font-size:12px;"><input type="checkbox" id="upgradeToPremium"/>',o="mm_payment_helper_goPremiumCheckboxLabel",c=a.intl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof l===m?l.call(t,o,{hash:{}}):l===_?h.call(t,"intl",o,{hash:{}}):l,u+=f(o)+"</label>\n    </div>\n  </div>\n  <!-- End Step 2 Enter Card Amount -->\n\n  <!-- Card Money Step No Card On File -->\n  ",o=t,o=p.invokePartial(n["payment_helper.no_card_on_file"],"payment_helper.no_card_on_file",o,a,n),(o||0===o)&&(u+=o),u+='\n  <!-- End Step Card Money No Card On File -->\n\n  <!-- Step 3 Confirmation -->\n  <div class="payments-step" id="confirmAmountView" style="display:none;">\n    <div class="payments-header">\n      ',o="mm_payment_helper_finishUpTitle",c=a.intl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof l===m?l.call(t,o,{hash:{}}):l===_?h.call(t,"intl",o,{hash:{}}):l,u+=f(o)+'\n    </div>\n    <div class="payments-confirm-card-body" style="text-align:center;margin:5px 30px;">\n      <span>',o="mm_payment_helper_paymentsr2_ready",c=a.intl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof l===m?l.call(t,o,{hash:{}}):l===_?h.call(t,"intl",o,{hash:{}}):l,u+=f(o)+'</span>\n      <h5 id="confirmRegularMsg"></h5>\n      <div style="text-align:center;margin-bottom:10px;">\n          <input type="button" value="Confirm" id="confirmCardCreate" class="btn btn-primary" style="margin-bottom:3px;padding:8px 40px;"/>\n      </div>\n    </div>\n    <div class="alert-error submit-error" style="display: none"></div>\n    <div class="progress" style="display: none;text-align: center;margin-bottom:0px;">please wait...</div>\n  </div>\n  <!-- End Step 3 Confirmation -->\n\n  ',o=t,o=p.invokePartial(n["common.biometric_auth"],"common.biometric_auth",o,a,n),(o||0===o)&&(u+=o),u+='\n\n  <!-- Step 4 Use Card -->\n  <span id="maskedCardView" style="display:none;">\n      <div id="maskedCardError" style="text-align:center;padding:10px;display:none;">\n        <div id="maskedCardErrorMsg" class="alert alert-error"></div>\n        <div style="text-align:center;padding:10px 0 5px 0;">\n          <input type="button" id="chatNow" class="btn btn-primary chatNow" style="width:90%;text-align:center;" value="',o="mm_notification_helper_chatNow",c=a.intl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof l===m?l.call(t,o,{hash:{}}):l===_?h.call(t,"intl",o,{hash:{}}):l,u+=f(o)+'" />\n        </div>\n      </div>\n      <div id="maskedCard" class="creditcardfont" style="color:rgb(80,80,80);width:336px;margin:auto;padding:10px;display:none;">\n        <div style="background-repeat:no-repeat;background-size:100%;height:181px;background-image:url(\'',o="/pages/images/2015panels/masked_card_blank.png",c=a.assetUrl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),o=typeof l===m?l.call(t,o,{hash:{}}):l===_?h.call(t,"assetUrl",o,{hash:{}}):l,u+=f(o)+'\');">\n            <br style="clear:both;"/>\n            <div style="text-align:right;margin-right:20px;color:white;">\n                <span style="font-family:\'Open Sans\', \'Helvetica Neue\', Arial, sans-serif !important;font-weight:bold;font-size:24pt;" id="originalValue">',c=a.getOriginalValue,o=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getOriginalValue"),typeof o===m?o=o.call(t,{hash:{}}):o===_&&(o=h.call(t,"getOriginalValue",{hash:{}})),u+=f(o)+"</span>\n                <br/>\n                <span style=\"font-family:'Open Sans', 'Helvetica Neue', Arial, sans-serif !important;font-size:11pt;\">",o="mm_notification_helper_at",c=a.intl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof l===m?l.call(t,o,{hash:{}}):l===_?h.call(t,"intl",o,{hash:{}}):l,u+=f(o)+"&nbsp;</span><span id=\"domain\" style=\"font-family:'Open Sans', 'Helvetica Neue', Arial, sans-serif !important;font-weight:bold;font-size:11pt;\">",c=a.getDomain,o=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getDomain"),typeof o===m?o=o.call(t,{hash:{}}):o===_&&(o=h.call(t,"getDomain",{hash:{}})),u+=f(o)+'</span>\n            </div>\n            <div style="text-align:center;margin-top:5px;color:white;">\n                <h3 id="cardNumber" style="font-family:\'Open Sans\', \'Helvetica Neue\', Arial, sans-serif !important;font-weight:lighter;">',c=a.getSeparatedCardNumber,o=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getSeparatedCardNumber"),typeof o===m?o=o.call(t,{hash:{}}):o===_&&(o=h.call(t,"getSeparatedCardNumber",{hash:{}})),u+=f(o)+"</h3>\n            </div>\n            <div style=\"font-size:15px;color:white;margin-left:25px;font-family:'Open Sans', 'Helvetica Neue', Arial, sans-serif !important;font-weight:bold;\">\n                <span style=\"float:left;\">",o="mm_payment_helper_expDate",c=a.intl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof l===m?l.call(t,o,{hash:{}}):l===_?h.call(t,"intl",o,{hash:{}}):l,u+=f(o)+' <span id="expiration">',c=a.getExpiry,o=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getExpiry"),typeof o===m?o=o.call(t,{hash:{}}):o===_&&(o=h.call(t,"getExpiry",{hash:{}})),u+=f(o)+'</span></span> <span style="float:right;margin-right:115px;"> ',o="mm_payment_helper_cvc",c=a.intl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof l===m?l.call(t,o,{hash:{}}):l===_?h.call(t,"intl",o,{hash:{}}):l,u+=f(o)+' <span id="cvc">',c=a.getCVC,o=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getCVC"),typeof o===m?o=o.call(t,{hash:{}}):o===_&&(o=h.call(t,"getCVC",{hash:{}})),u+=f(o)+'</span></span>\n            </div>\n        </div>\n        <div style="text-align:center;margin-top:5px;">\n          <input type="button" value="',
o="mm_payment_helper_useMyMasked",c=a.intl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof l===m?l.call(t,o,{hash:{}}):l===_?h.call(t,"intl",o,{hash:{}}):l,u+=f(o)+'" class="btn btn-primary" id="useMaskedCard" />\n        </div>\n      </div>\n  </span>\n  <!-- End Step 4 -->\n\n   </div>\n  </span>\n  <!-- Default header (actually footer) for the panels -->\n   ',o=t,o=p.invokePartial(n["common.header"],"common.header",o,a,n),(o||0===o)&&(u+=o),u+="\n\n  <!-- end Default header (actually footer) -->\n  <!-- End Normal Flow -->\n\n  <!-- Inline FAQ Panel -->\n    ",o=t,o=p.invokePartial(n["payment_helper.inline_faq"],"payment_helper.inline_faq",o,a,n),(o||0===o)&&(u+=o),u+="\n  <!-- end Inline FAQ Panel -->\n\n</div>"}),ABINE_DNTME.CompiledTemplates.payment_helper_paymentsr3_card_money}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.password_helper_panel=e.template(function(e,t,a,n,i){function r(e,t){var n,i,r="";return r+='\n        <!-- existing passwords -->\n        <a href="#" class="mmKeyOption account" data-account="',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof n===h?n=n.call(e,{hash:{}}):n===f&&(n=_.call(e,"this.id",{hash:{}})),r+=g(n)+'"><div class="element otherblue" >\n          <span class="panelLeft" title="',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getAddress"),typeof n===h?n=n.call(e,{hash:{}}):n===f&&(n=_.call(e,"this.getAddress",{hash:{}})),r+=g(n)+'">\n          ',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"isCompanyAccount"),i=a["if"],u=m.program(2,s,t),u.hash={},u.fn=u,u.inverse=m.program(4,o,t),n=i.call(e,n,u),(n||0===n)&&(r+=n),r+="\n            Fill password: ",n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getAddressX"),typeof n===h?n=n.call(e,{hash:{}}):n===f&&(n=_.call(e,"this.getAddressX",{hash:{}})),r+=g(n)+'\n          </span>\n          <span class="panelRight">\n            <span class="overflowText">(',n="createdAt",d=a.live_timestamp,i=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"live_timestamp"),n=typeof i===h?i.call(e,n,{hash:{}}):i===f?_.call(e,"live_timestamp",n,{hash:{}}):i,r+=g(n)+")</span>\n          </span>\n        </div></a>\n    "}function s(e){var t,n,i="";return i+='\n              <img class="replace-fav-icon" src="',t="/pages/images/2015panels/login_red.png",d=a.assetUrl,n=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===h?n.call(e,t,{hash:{}}):n===f?_.call(e,"assetUrl",t,{hash:{}}):n,i+=g(t)+'" style="width:40px;height:21px;"/>\n          '}function o(e){var t,n,i="";return i+='\n              <img class="replace-fav-icon" src="',t="/pages/images/2015panels/login_blue.png",d=a.assetUrl,n=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===h?n.call(e,t,{hash:{}}):n===f?_.call(e,"assetUrl",t,{hash:{}}):n,i+=g(t)+'" style="width:40px;height:21px;"/>\n          '}a=a||e.helpers,n=n||e.partials;var l,c,d,u,p="",m=this,h="function",_=a.helperMissing,f=void 0,g=this.escapeExpression;return p+='<div class="newpanel">\n    <div class="left-panel">\n    ',d=a.accounts,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"accounts"),c=a.each,u=m.program(1,r,i),u.hash={},u.fn=u,u.inverse=m.noop,l=c.call(t,l,u),(l||0===l)&&(p+=l),p+='\n\n    <!-- Generate Password -->\n    <a href="#" class="mmKeyOption password strongPassword lessOptions"><div class="element mask" id="pass">\n      <span class="panelLeft">\n        <img class="iconPos" src="',l="/pages/images/2015panels/pass_green.png",d=a.assetUrl,c=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),l=typeof c===h?c.call(t,l,{hash:{}}):c===f?_.call(t,"assetUrl",l,{hash:{}}):c,p+=g(l)+'"/>\n        ',l="mm_password_helper_generateStrong",d=a.intl,c=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),l=typeof c===h?c.call(t,l,{hash:{}}):c===f?_.call(t,"intl",l,{hash:{}}):c,p+=g(l)+'\n      </span>\n    </div></a>\n    <a href="#" class="mmKeyOption password lessOptions"><div class="element otherblue" style="margin-bottom:5px;" id="options">\n      <span>\n        <img class="iconPos" src="',l="/pages/images/2015panels/pass_blue.png",d=a.assetUrl,c=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),l=typeof c===h?c.call(t,l,{hash:{}}):c===f?_.call(t,"assetUrl",l,{hash:{}}):c,p+=g(l)+'"/>\n        ',l="mm_new_password_helper_generate",d=a.intl,c=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),l=typeof c===h?c.call(t,l,{hash:{}}):c===f?_.call(t,"intl",l,{hash:{}}):c,p+=g(l)+'\n      </span>\n    </div></a>\n    <!-- more options -->\n    <div class="password moreOptions" style="display:none;text-align:center;">\n        <div style="margin-top:10px;">\n            <input type="text" id="password-input" style="height:25px;"/>&nbsp;&nbsp;<img style="cursor:pointer;vertical-align:top;margin-top:4px;" id="refresh-password" src="',l="pages/images/pass_gen_refresh.png",d=a.assetUrl,c=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),l=typeof c===h?c.call(t,l,{hash:{}}):c===f?_.call(t,"assetUrl",l,{hash:{}}):c,p+=g(l)+'"/>\n        </div>\n        <div>\n            <label for="length">',l="mm_new_password_helper_length",d=a.intl,c=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),l=typeof c===h?c.call(t,l,{hash:{}}):c===f?_.call(t,"intl",l,{hash:{}}):c,p+=g(l)+'&nbsp;&nbsp;<input id="length" type="range" min="6" max="25" value="10" step="1"/>&nbsp;&nbsp;<span id="pw-length-number" style="color:#168AD3;">10</span></label>\n        </div>\n        <div style="margin-top:10px;" class="clearfix">\n            <div style="width:40%;float:left;">\n                <label for="numbers"><input id="numbers" type="checkbox" checked/>&nbsp;&nbsp;',l="mm_new_password_helper_numbers",d=a.intl,c=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),l=typeof c===h?c.call(t,l,{hash:{}}):c===f?_.call(t,"intl",l,{hash:{}}):c,p+=g(l)+'</label>\n            </div>\n            <div style="width:50%;float:left;">\n                <label for="special"><input id="special" type="checkbox" checked/>&nbsp;&nbsp;',l="mm_new_password_helper_special",d=a.intl,c=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),l=typeof c===h?c.call(t,l,{hash:{}}):c===f?_.call(t,"intl",l,{hash:{}}):c,p+=g(l)+'</label>\n            </div>\n        </div>\n    <div style="margin-top:10px;margin-bottom:10px;">\n      <input type="button" id="fillIt" class="btn btn-success done" style="background:#168AD3;" value="',l="mm_new_password_helper_save",d=a.intl,c=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),l=typeof c===h?c.call(t,l,{hash:{}}):c===f?_.call(t,"intl",l,{hash:{}}):c,p+=g(l)+'"/>\n    </div>\n    </div>\n    ',l=t,l=m.invokePartial(n["common.auto_fill_with"],"common.auto_fill_with",l,a,n),(l||0===l)&&(p+=l),p+="\n    </div>\n    ",l=t,l=m.invokePartial(n["common.header"],"common.header",l,a,n),(l||0===l)&&(p+=l),p+="\n\n</div>\n"}),ABINE_DNTME.CompiledTemplates.password_helper_panel}),ABINE_DNTME.define("abine/views/passwordHelperPanel",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/password","abine/timer","abine/proxies"],function(e,t,a,n,i,r,s,o){var l=i.extend({templateName:"password_helper_panel",events:{"click .panelSection":"performActions","click #options":"showOptions","click a.strongPassword":"fillWithStrongPassword","click #differentSpecialChars":"fillWithDifferentSpecialChars","click #noSpecialChars":"fillWithNoSpecialChars","click #noNumbers":"fillWithNoNumbers","click .account":"fillWithAccount","click #faqLink":"openHelp","click a.getStarted":"getStarted","click .close-header":"logClose","click #refresh-password":"generatePasswordOption","click #fillIt":"fillWithOptionPassword","change #length":"updateLengthNumber","change #numbers":"generatePasswordOption","click #special":"generatePasswordOption"},logClose:function(){this.updatePanelActivity("closed",this.panelId,this.fieldId,!0)},openHelp:function(){o.webapp.openHelp("/faq/guides-blurPasswordManager"),this.closePanel()},afterInitialize:function(){this.fieldId=this.options.fieldId,this.strategyId=this.options.strategyId,this.contentManager=this.options.contentManager,this.messenger=this.options.contentManager.messenger,this.numMenuOptions=1,this.bindBaseEvents(),this.applyFadingStyle(),this.fadeIn(),this.model={panelType:"password",hasRegistered:this.options.hasRegistered,dynamicPanel:this.options.dynamicPanel,mapper:!!this.contentManager.preferences.getPref("mapping:mapper"),showMapper:this.contentManager.preferences.isMapper(),show_settings:!this.contentManager.preferences.getPref("password-settings-seen")},this.options.dynamicPanel&&(this.setupDynamicPanel(),this.model.panelSections=this.panelSections),this.model.tabData=new n.TabData({messenger:this.options.messenger}),this.model.tabData.fetchTrackers({success:e.bind(function(){this.loadAccounts(e.bind(function(){this.contentManager.loadUserPreferences(e.bind(function(){if(this.model.hasRegistered=!!this.contentManager.preferences.getPref("hasRegistered"),this.model.hasRegistered){for(this.updatePanelActivity("impression",2000001,this.fieldId,!0),this.numMenuOptions=0;this.numMenuOptions<this.model.accounts.length;)this.bind("enter"+this.numMenuOptions++,function(e,t){this.fillWithAccount(e,t)});this.bind("enter"+this.numMenuOptions++,function(e){this.fillWithStrongPassword(e)}),this.bind("enter"+this.numMenuOptions++,function(e){this.showOptions(e)}),s.setTimeout(e.bind(function(){this.replaceWithFavicons(this.contentManager.domain)},this),100)}else this.model.dynamicPanel?this.updatePanelActivity("closed",this.model.dynamicPanel.id,this.fieldId,!0):this.bind("enter0",function(e){this.getStarted(e)},this);this.render()},this))},this))},this)})},loadAccounts:function(t){var a=new n.AccountCollection;a.fetchLoginsByDomain(this.options.domain,e.bind(function(){this.model.accounts=new n.AccountCollection(a.filter(function(e){return!!e.get("password")})),t()},this))},fillWithAccount:function(a,n){a&&a.preventDefault();var i;if(n||0==n){var r=this.getKeyOptions();i=t(r[n]).data("account")}else i=t(a.target).closest("a").data("account");var s=e.find(this.model.accounts.models,function(e){return e.get("id")==i}),o=s.get("login_url");(!o||0==o.length||o!=this.contentManager.href&&this.contentManager.href.indexOf(o)==-1)&&s.set("login_url",this.contentManager.href);var l=s.get("times_used")||0;if(s.set("times_used",l+1),s.set("pushed",0),s.save(),this.contentManager.messenger.send("update:panelActivity:masked",{panelId:7000004}),s.get("mfa"))return this.contentManager.closeCurrentPanel(),this.options.fillAccount=s,this.ignoreBlur(!0),void this.contentManager.showLoginPanel(this.options);var c=s.get("email"),d=s.get("username"),u=s.get("password");d&&0!=d.length||(d=c),c&&0!=c.length||(c=d),this.fillFields("login-no-submit",{email:c,username:d,password:u},"login"),this.closePanel()},showOptions:function(a){a&&a.preventDefault(),this.ignoreBlur(!0),this.generatePasswordOption(a),t(".moreOptions",this.el).show(),t(".lessOptions",this.el).hide(),this.trigger("render"),s.setTimeout(e.bind(function(){this.focusField(),s.setTimeout(e.bind(function(){this.ignoreBlur(!1)},this),500)},this),100)},generatePasswordOption:function(){var e=this.$("#length").val(),a=this.$("#numbers").prop("checked"),n=this.$("#special").prop("checked");t("#password-input",this.el).val(r.generateNewOptionsPassword(e,a,n))},updateLengthNumber:function(){var e=parseInt(this.$("#length").val());this.$("#pw-length-number").text(e),this.generatePasswordOption()},fillPassword:function(e,t){e&&e.preventDefault(),this.updatePanelActivity("masked",2000001,this.fieldId,!0);var a="/password"==this.options.fieldType;this.fillFields("password",t,{origin:"strong",exactTypeMatch:a}),this.closePanel()},fillWithOptionPassword:function(e){var a=t("#password-input",this.el).val();this.fillPassword(e,a)},fillWithStrongPassword:function(e){var t={"/password":"generateNoSpecialCharsPassword","/password/differentSpecialChars":"generateSpecialCharsPassword","/password/noSpecialChars":"generateNoSpecialCharsPassword","/password/noNumbers":"generateNoDigitsPassword"},a="";a=this.options.fieldType in t?r[t[this.options.fieldType]]():r.generateNoSpecialCharsPassword(),this.fillPassword(e,a)},fillWithDifferentSpecialChars:function(e){o.licenseModule.logPasswordFillData({choice:"differentSpecialChars",domain:this.contentManager.domain}),this.fillPassword(e,r.generateSpecialCharsPassword())},fillWithNoSpecialChars:function(e){o.licenseModule.logPasswordFillData({choice:"noSpecialChars",domain:this.contentManager.domain}),this.fillPassword(e,r.generateNoSpecialCharsPassword())},fillWithNoNumbers:function(e){o.licenseModule.logPasswordFillData({choice:"noNumbers",domain:this.contentManager.domain}),this.fillPassword(e,r.generateNoDigitsPassword())}});return l}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.phone_helper_panel=e.template(function(e,t,a,n,i){function r(e,t){var n,i,r="";return r+="\n          ",v=a.primaryPhone,n=v||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"primaryPhone"),n=null===n||void 0===n||n===!1?n:ABINE_DNTME.Duckbone.Handlebars.getAttr(n,"isValidated"),i=a["if"],w=E.program(2,s,t),w.hash={},w.fn=w,w.inverse=E.program(7,c,t),n=i.call(e,n,w),(n||0===n)&&(r+=n),r+='\n          <!--Disclose My Phone-->\n          <a href="#" class="mmKeyOption primaryPhone"><div class="element" id="disclose">\n              <span class="panelLeft">\n                  <img class="iconPos" src="',n="/pages/images/2015panels/phone_red.png",v=a.assetUrl,i=v||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),n=typeof i===A?i.call(e,n,{hash:{}}):i===T?N.call(e,"assetUrl",n,{hash:{}}):i,r+=D(n)+'"/>\n                  ',n="mm_phone_helper_disclosePhone",v=a.intl,i=v||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===A?i.call(e,n,{hash:{}}):i===T?N.call(e,"intl",n,{hash:{}}):i,r+=D(n)+" ",v=a.primaryPhone,n=v||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"primaryPhone"),n=null===n||void 0===n||n===!1?n:ABINE_DNTME.Duckbone.Handlebars.getAttr(n,"getPrettyNumber"),typeof n===A?n=n.call(e,{hash:{}}):n===T&&(n=N.call(e,"primaryPhone.getPrettyNumber",{hash:{}})),r+=D(n)+"\n              </span>\n          </div></a>\n    "}function s(e,t){var n,i,r="";return r+="\n              ",v=a.disposablePhone,n=v||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"disposablePhone"),n=null===n||void 0===n||n===!1?n:ABINE_DNTME.Duckbone.Handlebars.getAttr(n,"released"),i=a["if"],w=E.program(3,o,t),w.hash={},w.fn=w,w.inverse=E.program(5,l,t),n=i.call(e,n,w),(n||0===n)&&(r+=n),r+="\n          "}function o(e){var t,n,i="";return i+='\n                <!--Error Handling-->\n                <div id="error" class="element" style="display:none">\n                  <span class="message">',t="mm_phone_helper_restore_failed",v=a.intl,n=v||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===A?n.call(e,t,{hash:{}}):n===T?N.call(e,"intl",t,{hash:{}}):n,i+=D(t)+'</span>\n                </div>\n\n                <!--Get New Mask Phone-->\n                <a href="#" class="mmKeyOption disposablePhone"><div class="element" id="mask">\n                  <span class="panelLeft">\n                      <img class="iconPos" src="',t="/pages/images/2015panels/phone_green.png",v=a.assetUrl,n=v||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===A?n.call(e,t,{hash:{}}):n===T?N.call(e,"assetUrl",t,{hash:{}}):n,i+=D(t)+'"/>\n                      <span class="msg">',t="mm_phone_helper_newMaskPhone",v=a.intl,n=v||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===A?n.call(e,t,{hash:{}}):n===T?N.call(e,"intl",t,{hash:{}}):n,i+=D(t)+'</span>\n                  </span>\n                  <span class="panelRight">\n                    <img class="loading" style="display:none;" src="',t="/pages/images/ajax_loader.gif",v=a.assetUrl,n=v||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===A?n.call(e,t,{hash:{}}):n===T?N.call(e,"assetUrl",t,{hash:{}}):n,i+=D(t)+'"/>\n                  </span>\n                </div></a>\n              '}function l(e){var t,n,i="";return i+='\n                <!--Mask My Phone-->\n                <a href="#" class="mmKeyOption disposablePhone"><div class="element" id="mask">\n                  <span class="panelLeft">\n                      <img class="iconPos" src="',t="/pages/images/2015panels/phone_green.png",v=a.assetUrl,n=v||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===A?n.call(e,t,{hash:{}}):n===T?N.call(e,"assetUrl",t,{hash:{}}):n,i+=D(t)+'"/>\n                    ',t="mm_phone_helper_maskPhone",v=a.intl,n=v||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===A?n.call(e,t,{hash:{}}):n===T?N.call(e,"intl",t,{hash:{}}):n,i+=D(t)+'\n                  </span>\n                  <span class="panelRight">\n                      <span class="overflowText">',v=a.disposablePhone,t=v||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"disposablePhone"),t=null===t||void 0===t||t===!1?t:ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getPrettyNumber"),typeof t===A?t=t.call(e,{hash:{}}):t===T&&(t=N.call(e,"disposablePhone.getPrettyNumber",{hash:{}})),i+=D(t)+"</span>\n                  </span>\n                </div></a>\n              "}function c(e){var t,n,i="";return i+='\n              <!-- Setup your Masked Phone -->\n              <a href="#" class="mmKeyOption setupPhone"><div class="element" id="mask">\n                  <span class="panelLeft">\n                      ',t="mm_phone_helper_pleaseValidate",v=a.intl,n=v||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===A?n.call(e,t,{hash:{}}):n===T?N.call(e,"intl",t,{hash:{}}):n,i+=D(t)+"\n                  </span>\n              </div></a>\n          "}function d(e,t){var n,i,r="";return r+="\n\n        ",v=a.dynamicPanel,n=v||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"dynamicPanel"),i=a["if"],w=E.program(10,u,t),w.hash={},w.fn=w,w.inverse=E.program(13,m,t),n=i.call(e,n,w),(n||0===n)&&(r+=n),r+="\n    "}function u(e,t){var n,i,r="";return r+="\n            ",v=a.panelSections,n=v||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"panelSections"),i=a.each,w=E.program(11,p,t),w.hash={},w.fn=w,w.inverse=E.noop,n=i.call(e,n,w),(n||0===n)&&(r+=n),r+="\n        "}function p(e){var t,a="";return a+='\n                <div id="',t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof t===A?t=t.call(e,{hash:{}}):t===T&&(t=N.call(e,"this.id",{hash:{}})),a+=D(t)+'" style="height:',t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"height"),typeof t===A?t=t.call(e,{hash:{}}):t===T&&(t=N.call(e,"this.height",{hash:{}})),a+=D(t)+'" class="panelSection ',t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"class_name"),typeof t===A?t=t.call(e,{hash:{}}):t===T&&(t=N.call(e,"this.class_name",{hash:{}})),a+=D(t)+'">\n                    ',t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"body"),typeof t===A?t=t.call(e,{hash:{}}):t===T&&(t=N.call(e,"this.body",{hash:{}})),(t||0===t)&&(a+=t),a+="\n                </div>\n            "}function m(e,t){var n,i,r="";return r+="\n            ",v=a.entitledToPhone,n=v||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"entitledToPhone"),i=a["if"],w=E.program(14,h,t),w.hash={},w.fn=w,w.inverse=E.program(16,_,t),n=i.call(e,n,w),(n||0===n)&&(r+=n),r+="\n        "}function h(e){var t,n,i="";return i+='\n                <a href="#" class="mmKeyOption upgradeToPhone">\n                    <div class="element" id="mask">\n                        <span class="panelLeft">\n                            ',t="mm_phone_helper_setupMasked",v=a.intl,n=v||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===A?n.call(e,t,{hash:{}}):n===T?N.call(e,"intl",t,{hash:{}}):n,i+=D(t)+"\n                        </span>\n                    </div>\n                </a>\n            "}function _(e){var t,n,i="";return i+='\n                <a href="#" class="mmKeyOption upgradeToPhone">\n                    <div class="element" id="mask">\n                        <span class="panelLeft" style="width:100%;">\n                            ',t="mm_phone_helper_upgradeMaskedPhone",v=a.intl,n=v||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===A?n.call(e,t,{hash:{}}):n===T?N.call(e,"intl",t,{hash:{}}):n,i+=D(t)+"\n                        </span>\n                    </div>\n                </a>\n            "}function f(e){var t,n,i="";return i+='\n            <a href="#" class="mmKeyOption alternatePhone" data-number="+',t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"country_code"),typeof t===A?t=t.call(e,{hash:{}}):t===T&&(t=N.call(e,"this.country_code",{hash:{}})),i+=D(t)+" ",t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"number"),typeof t===A?t=t.call(e,{hash:{}}):t===T&&(t=N.call(e,"this.number",{hash:{}})),i+=D(t)+'"><div class="element" id="disclose">\n              <span class="panelLeft">\n                  <img class="iconPos" src="',t="/pages/images/2015panels/phone_red.png",v=a.assetUrl,n=v||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===A?n.call(e,t,{hash:{}}):n===T?N.call(e,"assetUrl",t,{hash:{}}):n,i+=D(t)+'"/>\n                  ',t="mm_phone_helper_disclosePhone",v=a.intl,n=v||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===A?n.call(e,t,{hash:{}}):n===T?N.call(e,"intl",t,{hash:{}}):n,i+=D(t)+" ",t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getPrettyNumber"),typeof t===A?t=t.call(e,{hash:{}}):t===T&&(t=N.call(e,"this.getPrettyNumber",{hash:{}})),i+=D(t)+"\n              </span>\n            </div></a>\n        "}function g(e){var t,i="";return i+="\n        ",t=e,t=E.invokePartial(n["common.header"],"common.header",t,a,n),(t||0===t)&&(i+=t),i+="\n    "}a=a||e.helpers,n=n||e.partials;var y,b,v,w,k="",E=this,A="function",N=a.helperMissing,T=void 0,D=this.escapeExpression;return k+='<div class="newpanel">\n    <div class="left-panel">\n    ',v=a.primaryPhone,y=v||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"primaryPhone"),b=a["if"],w=E.program(1,r,i),w.hash={},w.fn=w,w.inverse=E.program(9,d,i),y=b.call(t,y,w),(y||0===y)&&(k+=y),k+="\n        <!--Alternate Phones from identities -->\n        ",v=a.alternatePhones,y=v||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"alternatePhones"),b=a.each,w=E.program(18,f,i),w.hash={},w.fn=w,w.inverse=E.noop,y=b.call(t,y,w),(y||0===y)&&(k+=y),k+="\n    </div>\n    ",y=t,y=E.invokePartial(n["common.auto_fill_with"],"common.auto_fill_with",y,a,n),(y||0===y)&&(k+=y),k+="\n\n    ",v=a.dynamicPanel,y=v||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"dynamicPanel"),b=a.unless,w=E.program(20,g,i),w.hash={},w.fn=w,w.inverse=E.noop,y=b.call(t,y,w),(y||0===y)&&(k+=y),k+="\n\n</div>"}),ABINE_DNTME.CompiledTemplates.phone_helper_panel}),ABINE_DNTME.define("abine/views/phoneHelperPanel",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies","abine/intl"],function(e,t,a,n,i,r,s,o){var l=i.extend({templateName:"phone_helper_panel",events:{"click a.primaryPhone":"fillWithPrimaryPhone","click a.alternatePhone":"fillWithAlternatePhone","click a.disposablePhone":"fillWithDisposablePhone","click a.getStarted":"getStarted","click a.setupPhone":"setupPhone","click a.upgradeToPhone":"getStartedWithPhone","click .panelSection":"performActions","click .help-link":"openHelp","click .close-link":"logClose"},logClose:function(){this.updatePanelActivity("closed",this.panelId,this.fieldId,!0)},getStartedWithPhone:function(e){e&&e.preventDefault(),this.updatePanelActivity("masked",this.panelId,this.fieldId,!0),s.webapp.openPhones(),this.closePanel(e)},openHelp:function(){s.webapp.openHelp("/phone"),this.closePanel()},setupPhone:function(e){s.webapp.openPhones(),this.closePanel(e),e.preventDefault()},afterInitialize:function(){this.fieldId=this.options.fieldId,this.strategyId=this.options.strategyId,this.numMenuOptions=2,this.bindBaseEvents(),this.applyFadingStyle(),this.fadeIn(),this.contentManager=this.options.contentManager,this.messenger=this.options.contentManager.messenger,this.model={panelType:"phone",primaryPhone:!1,disposablePhone:!1,alternatePhones:new n.ShieldedCardCollection,hasRegistered:this.options.hasRegistered,entitledToPhone:this.options.entitledToPhone,mapper:!!this.contentManager.preferences.getPref("mapping:mapper"),showMapper:this.contentManager.preferences.isMapper(),show_settings:!this.contentManager.preferences.getPref("phone-settings-seen")},this.model.tabData=new n.TabData({messenger:this.options.messenger}),this.model.tabData.fetchTrackers({success:e.bind(function(){this.contentManager.loadUserPreferences(e.bind(function(){this.model.hasRegistered=!!this.contentManager.preferences.getPref("hasRegistered"),this.model.shieldedPhones=new n.ShieldedPhoneCollection,this.model.shieldedPhones.bind("sync:success",function(){if(this.model.shieldedPhones.length>0&&(this.model.primaryPhone=this.model.shieldedPhones.at(0),this.model.primaryPhone.get("number")||(this.model.primaryPhone=null),e.each(this.model.shieldedPhones.models,e.bind(function(e){e.get("identity")&&this.model.alternatePhones.add(e)},this))),this.model.primaryPhone){if(this.panelId=3000001,this.updatePanelActivity("impression",this.panelId,this.fieldId,!0),this.model.primaryPhone.isValidated()){var t=this.model.primaryPhone.generateDisposable();t.save({},{success:e.bind(function(){this.model.disposablePhone=t,this.render()},this)}),this.bind("enter0",this.fillWithDisposablePhone,this)}else this.bind("enter0",this.setupPhone,this);this.bind("enter1",this.fillWithPrimaryPhone,this)}else if(this.options.dynamicPanel)this.model.dynamicPanel=this.options.dynamicPanel,this.setupDynamicPanel(),this.model.panelSections=this.panelSections,this.panelId=this.model.dynamicPanel.id,this.updatePanelActivity("impression",this.panelId,this.fieldId,!0);else{if(!this.model.entitledToPhone&&0==this.model.alternatePhones.length)return void this.closePanel();this.panelId=7000001,this.updatePanelActivity("impression",this.panelId,this.fieldId,!0),this.bind("enter0",this.getStartedWithPhone,this)}this.render()},this),this.model.shieldedPhones.fetchAll()},this))},this)})},fillWithPrimaryPhone:function(e){e&&e.preventDefault(),this.updatePanelActivity("disclosed",this.panelId,this.fieldId,!0),this.fillFields("phone",this.model.primaryPhone.toJSON(),"primary"),this.closePanel()},fillWithAlternatePhone:function(a){a&&a.preventDefault();for(var n=null,i=a.target;!n;)n=t(i).data("number"),i=i.parentNode;var r=e.find(this.model.alternatePhones.models,function(e){return n=="+"+e.get("country_code")+" "+e.get("number")});this.updatePanelActivity("disclosed",this.panelId,this.fieldId,!0),this.fillFields("phone",r.toJSON(),"primary"),this.closePanel()},fillWithDisposablePhone:function(t){t&&t.preventDefault(),this.ignoreBlur(!0),this.$(".loading").show(),this.$(".disposablePhone .msg").text(o.getText("mm_phone_helper_restore_progress")),this.contentManager.messenger.send("update:panelActivity:masked",{panelId:this.panelId});var a=this.model.primaryPhone.generateDisposable();a.save({filling:!0},{success:e.bind(function(){this.fillFields("phone",a.toJSON(),"disposable"),this.closePanel()},this),error:e.bind(function(){this.$(".disposablePhone").hide(),this.$("#error").show(),this.trigger("resize")},this)})}});return l}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.changepassword_helper_login_panel=e.template(function(e,t,a,n,i){function r(e){var t,n,i="";return i+='\n    <!-- Login Emails -->\n    <a href="#" class="mmKeyOption account" data-account="',t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof t===p?t=t.call(e,{hash:{}}):t===h&&(t=m.call(e,"this.id",{hash:{}})),i+=_(t)+'"><div class="element" id="mask">\n        <span class="panelLeft" title="',t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getAddress"),typeof t===p?t=t.call(e,{hash:{}}):t===h&&(t=m.call(e,"this.getAddress",{hash:{}})),i+=_(t)+'">\n            <img class="iconPos" src="',t="/pages/images/2015panels/pass_green.png",l=a.assetUrl,n=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===p?n.call(e,t,{hash:{}}):n===h?m.call(e,"assetUrl",t,{hash:{}}):n,i+=_(t)+'"/>\n            ',t="mm_cp_login_helper_use",l=a.intl,n=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===p?n.call(e,t,{hash:{}}):n===h?m.call(e,"intl",t,{hash:{}}):n,i+=_(t)+" ",t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getAddress"),typeof t===p?t=t.call(e,{hash:{}}):t===h&&(t=m.call(e,"this.getAddress",{hash:{}})),i+=_(t)+'\n        </span>\n        <span class="panelRight">\n            <span class="overflowText">',t="mm_email_helper_created",l=a.intl,n=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===p?n.call(e,t,{hash:{}}):n===h?m.call(e,"intl",t,{hash:{}}):n,i+=_(t)+" ",t="createdAt",l=a.live_timestamp,n=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"live_timestamp"),t=typeof n===p?n.call(e,t,{hash:{}}):n===h?m.call(e,"live_timestamp",t,{hash:{}}):n,i+=_(t)+"</span>\n        </span>\n    </div></a>\n    "}a=a||e.helpers,n=n||e.partials;var s,o,l,c,d="",u=this,p="function",m=a.helperMissing,h=void 0,_=this.escapeExpression;return d+='<div class="newpanel">\n    <div class="left-panel">\n    ',l=a.accounts,s=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"accounts"),o=a.each,c=u.program(1,r,i),c.hash={},c.fn=c,c.inverse=u.noop,s=o.call(t,s,c),(s||0===s)&&(d+=s),d+="\n    </div>\n    ",s=t,s=u.invokePartial(n["common.header"],"common.header",s,a,n),(s||0===s)&&(d+=s),d+="\n</div>"}),ABINE_DNTME.CompiledTemplates.changepassword_helper_login_panel}),ABINE_DNTME.define("abine/views/changePasswordHelperPanel",["documentcloud/underscore","jquery","duckbone/core","abine/views/panelBase","abine/password","abine/timer","abine/proxies"],function(e,t,a,n,i,r,s){var o=n.extend({templateName:"changepassword_helper_password_panel",events:{"click .panelSection":"performActions","click #options":"showOptions","click a.strongPassword":"fillWithStrongPassword","click #differentSpecialChars":"fillWithDifferentSpecialChars","click #noSpecialChars":"fillWithNoSpecialChars","click #noNumbers":"fillWithNoNumbers","click #faqLink":"openHelp","click a.getStarted":"getStarted","click .close-header":"logClose","click #refresh-password":"generatePasswordOption","click #fillIt":"fillWithOptionPassword","change #length":"updateLengthNumber","change #numbers":"generatePasswordOption","click #special":"generatePasswordOption"},logClose:function(){this.updatePanelActivity("closed",this.panelId,this.fieldId,!0)},openHelp:function(){s.webapp.openHelp("/faq/guides-blurPasswordManager"),this.closePanel()},afterInitialize:function(){this.fieldId=this.options.fieldId,this.strategyId=this.options.strategyId,this.contentManager=this.options.contentManager,this.messenger=this.options.contentManager.messenger,this.numMenuOptions=1,this.bindBaseEvents(),this.applyFadingStyle(),this.fadeIn(),this.model={panelType:"password",hasRegistered:this.options.hasRegistered,dynamicPanel:this.options.dynamicPanel,show_settings:!this.contentManager.preferences.getPref("password-settings-seen")},this.options.dynamicPanel&&(this.setupDynamicPanel(),this.model.panelSections=this.panelSections),this.contentManager.loadUserPreferences(e.bind(function(){this.model.hasRegistered=!!this.contentManager.preferences.getPref("hasRegistered"),this.model.hasRegistered?(this.updatePanelActivity("impression",2000001,this.fieldId,!0),this.bind("enter0",function(e){this.fillWithStrongPassword(e)})):this.model.dynamicPanel?this.updatePanelActivity("closed",this.model.dynamicPanel.id,this.fieldId,!0):this.bind("enter0",function(e){this.getStarted(e)},this),this.render()},this))},showOptions:function(a){a&&a.preventDefault(),this.ignoreBlur(!0),this.generatePasswordOption(a),t(".moreOptions",this.el).show(),t(".lessOptions",this.el).hide(),this.trigger("render"),r.setTimeout(e.bind(function(){this.focusField(),r.setTimeout(e.bind(function(){this.ignoreBlur(!1)},this),500)},this),100)},generatePasswordOption:function(){var e=this.$("#length").val(),a=this.$("#numbers").prop("checked"),n=this.$("#special").prop("checked");t("#password-input",this.el).val(i.generateNewOptionsPassword(e,a,n))},updateLengthNumber:function(){var e=parseInt(this.$("#length").val());this.$("#pw-length-number").text(e),this.generatePasswordOption()},fillPassword:function(e,t){e&&e.preventDefault(),this.updatePanelActivity("masked",2000001,this.fieldId,!0),this.fillFields("password",t,{origin:"strong",exactTypeMatch:!0}),this.closePanel()},fillWithOptionPassword:function(e){var a=t("#password-input",this.el).val();this.fillPassword(e,a)},fillWithStrongPassword:function(e){
var t={"/password":i.generateRandomPassword,"/password/differentSpecialChars":i.generateSpecialCharsPassword,"/password/noSpecialChars":i.generateNoSpecialCharsPassword,"/password/noNumbers":i.generateNoDigitsPassword};if(this.fieldType in t)var a=t[this.fieldType]();else var a=i.generateNoSpecialCharsPassword();this.fillPassword(e,a)},fillWithDifferentSpecialChars:function(e){s.licenseModule.logPasswordFillData({choice:"differentSpecialChars",domain:this.contentManager.domain}),this.fillPassword(e,i.generateSpecialCharsPassword())},fillWithNoSpecialChars:function(e){s.licenseModule.logPasswordFillData({choice:"noSpecialChars",domain:this.contentManager.domain}),this.fillPassword(e,i.generateNoSpecialCharsPassword())},fillWithNoNumbers:function(e){s.licenseModule.logPasswordFillData({choice:"noNumbers",domain:this.contentManager.domain}),this.fillPassword(e,i.generateNoDigitsPassword())}});return o}),ABINE_DNTME.define("abine/views/changePasswordLoginHelperPanel",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/proxies"],function(e,t,a,n,i,r){var s=i.extend({templateName:"changepassword_helper_login_panel",events:{"click a.account":"fillWithAccount","click .help-link":"openHelp"},openHelp:function(){r.webapp.openHelp("/faq/guides-blurPasswordManager"),this.closePanel()},afterInitialize:function(){this.fieldId=this.options.fieldId,this.strategyId=this.options.strategyId,this.bindBaseEvents(),this.applyFadingStyle(),this.fadeIn(),this.contentManager=this.options.contentManager,this.messenger=this.options.contentManager.messenger,this.model={panelType:"account",accounts:new n.AccountCollection,show_settings:!this.contentManager.preferences.getPref("account-settings-seen")},this.model.accounts.fetchLoginsByDomain(this.options.domain,e.bind(function(e){if(e||0==this.model.accounts.length)this.closePanel();else{this.numMenuOptions=this.model.accounts.length;for(var t=0;t<this.numMenuOptions;t++)this.bind("enter"+t,function(e,t){this.fillWithAccount(e,t)},this);this.render()}},this))},fillWithAccount:function(a,n){a&&a.preventDefault();var i;if(n||0==n){var r=this.getKeyOptions();i=t(r[n]).data("account")}else i=t(a.target).closest("a").data("account");var s=e.find(this.model.accounts.models,function(e){return e.get("id")==i});this.contentManager.messenger.send("update:panelActivity:masked",{panelId:7000004});var o=s.get("email"),l=s.get("username"),c=s.get("password");l&&0!=l.length||(l=o),o&&0!=o.length||(o=l),this.fillFields("login",{email:o,username:l,password:c,accountId:s.id},"changepassword"),this.closePanel()}});return s}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.changepassword_helper_password_panel=e.template(function(e,t,a,n){a=a||e.helpers,n=n||e.partials;var i,r,s,o="",l=this,c="function",d=a.helperMissing,u=void 0,p=this.escapeExpression;return o+='<div class="newpanel">\n    <!-- Generate Password -->\n    <div class="left-panel">\n    <a href="#" class="mmKeyOption password strongPassword lessOptions"><div class="element mask" id="pass">\n      <span class="panelLeft">\n        <img class="iconPos" src="',i="/pages/images/2015panels/pass_green.png",s=a.assetUrl,r=s||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),i=typeof r===c?r.call(t,i,{hash:{}}):r===u?d.call(t,"assetUrl",i,{hash:{}}):r,o+=p(i)+'"/>\n        ',i="mm_password_helper_generateStrong",s=a.intl,r=s||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),i=typeof r===c?r.call(t,i,{hash:{}}):r===u?d.call(t,"intl",i,{hash:{}}):r,o+=p(i)+'\n      </span>\n      </div>\n    </a>\n    <a href="#" class="mmKeyOption password lessOptions"><div class="element mask" id="options">\n      <span>\n        <img class="iconPos" src="',i="/pages/images/2015panels/pass_green.png",s=a.assetUrl,r=s||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),i=typeof r===c?r.call(t,i,{hash:{}}):r===u?d.call(t,"assetUrl",i,{hash:{}}):r,o+=p(i)+'" style="width:37px;height:21px;"/>\n        ',i="mm_new_password_helper_generate",s=a.intl,r=s||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),i=typeof r===c?r.call(t,i,{hash:{}}):r===u?d.call(t,"intl",i,{hash:{}}):r,o+=p(i)+'\n      </span>\n    </div></a>\n    <!-- more options -->\n    <div class="password moreOptions" style="display:none;text-align:center;">\n        <div style="margin-top:10px;">\n            <input type="text" id="password-input" style="height:25px;"/>&nbsp;&nbsp;<img style="cursor:pointer;vertical-align:top;margin-top:4px;" id="refresh-password" src="',i="pages/images/pass_gen_refresh.png",s=a.assetUrl,r=s||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),i=typeof r===c?r.call(t,i,{hash:{}}):r===u?d.call(t,"assetUrl",i,{hash:{}}):r,o+=p(i)+'"/>\n        </div>\n        <div>\n            <label for="length">',i="mm_new_password_helper_length",s=a.intl,r=s||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),i=typeof r===c?r.call(t,i,{hash:{}}):r===u?d.call(t,"intl",i,{hash:{}}):r,o+=p(i)+'&nbsp;&nbsp;<input id="length" type="range" min="6" max="25" value="10" step="1"/>&nbsp;&nbsp;<span id="pw-length-number" style="color:#168AD3;">10</span></label>\n        </div>\n        <div>\n            <div style="width:50%;float:left;">\n                <label for="numbers"><input id="numbers" type="checkbox" checked/>&nbsp;&nbsp;',i="mm_new_password_helper_numbers",s=a.intl,r=s||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),i=typeof r===c?r.call(t,i,{hash:{}}):r===u?d.call(t,"intl",i,{hash:{}}):r,o+=p(i)+'</label>\n            </div>\n            <div style="width:50%;float:right;">\n                <label for="special"><input id="special" type="checkbox" checked/>&nbsp;&nbsp;',i="mm_new_password_helper_special",s=a.intl,r=s||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),i=typeof r===c?r.call(t,i,{hash:{}}):r===u?d.call(t,"intl",i,{hash:{}}):r,o+=p(i)+'</label>\n            </div>\n        </div>\n        <div style="margin-top:10px;margin-bottom:10px;">\n            <input type="button" id="fillIt" class="btn btn-success done" style="background:#168AD3;" value="',i="mm_new_password_helper_save",s=a.intl,r=s||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),i=typeof r===c?r.call(t,i,{hash:{}}):r===u?d.call(t,"intl",i,{hash:{}}):r,o+=p(i)+'"/>\n        </div>\n    </div>\n    </div>\n    ',i=t,i=l.invokePartial(n["common.header"],"common.header",i,a,n),(i||0===i)&&(o+=i),o+="\n</div>"}),ABINE_DNTME.CompiledTemplates.changepassword_helper_password_panel}),ABINE_DNTME.require(["wycats/handlebars"],function(e){e.registerPartial("search_helper.actions",e.template(function(e,t,a){a=a||e.helpers;var n,i,r,s="",o="function",l=a.helperMissing,c=void 0,d=this.escapeExpression;return s+='<div class="action">\n    <button class="btn btn-small fill" data-id="',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"id"),typeof n===o?n=n.call(t,{hash:{}}):n===c&&(n=l.call(t,"this.id",{hash:{}})),s+=d(n)+'">Fill</button>\n    <img src="',n="/pages/images/arrow-closed.png",r=a.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"assetUrl",n,{hash:{}}):i,s+=d(n)+'" class="arrow-open" />\n    <img src="',n="/pages/images/arrow-opened.png",r=a.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"assetUrl",n,{hash:{}}):i,s+=d(n)+'" class="arrow-close" style="display: none;"/>\n</div>'}))}),ABINE_DNTME.require(["wycats/handlebars"],function(e){e.registerPartial("search_helper.actions_copy",e.template(function(e,t,a){a=a||e.helpers;var n,i,r,s="",o="function",l=a.helperMissing,c=void 0,d=this.escapeExpression;return s+='<div class="action">\n    <button class="btn btn-small fill" data-id="',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"id"),typeof n===o?n=n.call(t,{hash:{}}):n===c&&(n=l.call(t,"this.id",{hash:{}})),s+=d(n)+'">Fill</button>\n    <button class="btn btn-small copy" data-id="',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"id"),typeof n===o?n=n.call(t,{hash:{}}):n===c&&(n=l.call(t,"this.id",{hash:{}})),s+=d(n)+'"><img src="',n="/pages/images/copy-icon.png",r=a.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"assetUrl",n,{hash:{}}):i,s+=d(n)+'" class="copy-icon"/> Copy</button>\n</div>'}))}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.search_helper_account=e.template(function(e,t,a,n,i){function r(e,t){var n,i,r="";return r+='\n    <div class="result-detail" style="display: none;padding-left: 60px">\n            ',m=a.email,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"email"),i=a["if"],h=f.program(2,s,t),h.hash={},h.fn=h,h.inverse=f.noop,n=i.call(e,n,h),(n||0===n)&&(r+=n),r+="\n            ",m=a.username,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"username"),i=a["if"],h=f.program(4,o,t),h.hash={},h.fn=h,h.inverse=f.noop,n=i.call(e,n,h),(n||0===n)&&(r+=n),r+="\n            ",m=a.password,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"password"),i=a["if"],h=f.program(6,l,t),h.hash={},h.fn=h,h.inverse=f.noop,n=i.call(e,n,h),(n||0===n)&&(r+=n),r+="\n            ",m=a.createdAt,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"createdAt"),i=a["if"],h=f.program(8,c,t),h.hash={},h.fn=h,h.inverse=f.noop,n=i.call(e,n,h),(n||0===n)&&(r+=n),r+="\n    </div>\n    "}function s(e){var t,n,i="";return i+='\n                <div class="copy" title="copy" data-type="email address" data-copy="',m=a.email,t=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"email"),typeof t===g?t=t.call(e,{hash:{}}):t===b&&(t=y.call(e,"email",{hash:{}})),i+=v(t)+'">Email: &nbsp;',m=a.email,t=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"email"),typeof t===g?t=t.call(e,{hash:{}}):t===b&&(t=y.call(e,"email",{hash:{}})),i+=v(t)+'\n                    <img src="',t="/pages/images/copy-icon.png",m=a.assetUrl,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===g?n.call(e,t,{hash:{}}):n===b?y.call(e,"assetUrl",t,{hash:{}}):n,i+=v(t)+'" class="copy-icon"/></div>\n            '}function o(e){var t,n,i="";return i+='\n                <div class="copy" title="copy" data-type="username" data-copy="',m=a.username,t=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"username"),typeof t===g?t=t.call(e,{hash:{}}):t===b&&(t=y.call(e,"username",{hash:{}})),i+=v(t)+'">Username: &nbsp;',m=a.username,t=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"username"),typeof t===g?t=t.call(e,{hash:{}}):t===b&&(t=y.call(e,"username",{hash:{}})),i+=v(t)+'\n                    <img src="',t="/pages/images/copy-icon.png",m=a.assetUrl,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===g?n.call(e,t,{hash:{}}):n===b?y.call(e,"assetUrl",t,{hash:{}}):n,i+=v(t)+'" class="copy-icon"/></div>\n            '}function l(e){var t,n,i="";return i+='\n                <div class="copy" title="copy" data-type="password" data-copy="',m=a.password,t=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"password"),typeof t===g?t=t.call(e,{hash:{}}):t===b&&(t=y.call(e,"password",{hash:{}})),i+=v(t)+'">Password: &nbsp;<span class="password">**********</span>\n                    &nbsp;<img title="show password" src="',t="/pages/images/show-password.png",m=a.assetUrl,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===g?n.call(e,t,{hash:{}}):n===b?y.call(e,"assetUrl",t,{hash:{}}):n,i+=v(t)+'" class="view-password"/>\n                    <img title="hide password" src="',t="/pages/images/hide-password.png",m=a.assetUrl,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===g?n.call(e,t,{hash:{}}):n===b?y.call(e,"assetUrl",t,{hash:{}}):n,i+=v(t)+'" class="hide-password" style="display: none;"/>\n                    <img src="',t="/pages/images/copy-icon.png",m=a.assetUrl,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===g?n.call(e,t,{hash:{}}):n===b?y.call(e,"assetUrl",t,{hash:{}}):n,i+=v(t)+'" class="copy-icon"/>\n                </div>\n            '}function c(e){var t,n,i="";return i+="\n                <div>Created: ",t="createdAt",m=a.live_timestamp,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"live_timestamp"),t=typeof n===g?n.call(e,t,{hash:{}}):n===b?y.call(e,"live_timestamp",t,{hash:{}}):n,i+=v(t)+"</div>\n            "}function d(e){var t,i="";return i+='\n    <div class="result-detail" style="display: none;text-align: center">\n        Account protected with Mobile confirmation.\n        <input type="button" class="btn btn-success done trigger-biometric" style="background:#168AD3;" value="Authorize to View Account"/>\n        ',t=e,t=f.invokePartial(n["common.biometric_auth"],"common.biometric_auth",t,a,n),(t||0===t)&&(i+=t),i+="\n    </div>\n    "}a=a||e.helpers,n=n||e.partials;var u,p,m,h,_="",f=this,g="function",y=a.helperMissing,b=void 0,v=this.escapeExpression;return _+='<div class="result account" data-id="',u=ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"id"),typeof u===g?u=u.call(t,{hash:{}}):u===b&&(u=y.call(t,"this.id",{hash:{}})),_+=v(u)+'">\n    <div class="title-row clearfix">\n        <div class="icon"><img src="',u="/pages/images/accounts.png",m=a.assetUrl,p=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),u=typeof p===g?p.call(t,u,{hash:{}}):p===b?y.call(t,"assetUrl",u,{hash:{}}):p,_+=v(u)+'"/></div>\n        <div class="title">',u=ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getAddress"),typeof u===g?u=u.call(t,{hash:{}}):u===b&&(u=y.call(t,"this.getAddress",{hash:{}})),_+=v(u)+" - ",m=a.domain,u=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"domain"),typeof u===g?u=u.call(t,{hash:{}}):u===b&&(u=y.call(t,"domain",{hash:{}})),_+=v(u)+"</div>\n        ",u=t,u=f.invokePartial(n["search_helper.actions"],"search_helper.actions",u,a,n),(u||0===u)&&(_+=u),_+="\n    </div>\n    ",m=a.mfa,u=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"mfa"),p=a.unless,h=f.program(1,r,i),h.hash={},h.fn=h,h.inverse=f.program(10,d,i),u=p.call(t,u,h),(u||0===u)&&(_+=u),_+="\n</div>"}),ABINE_DNTME.CompiledTemplates.search_helper_account}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.search_helper_add_account=e.template(function(e,t,a,n,i){function r(){return'style="display: none"'}function s(){return'style="display: none;"'}function o(){return"display: none;"}function l(e,t){var n,i,r="";return r+="\n            ",h=a.email,n=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"email"),i=a["if"],_=g.program(8,c,t),_.hash={},_.fn=_,_.inverse=g.noop,n=i.call(e,n,_),(n||0===n)&&(r+=n),r+="\n            ",h=a.username,n=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"username"),i=a["if"],_=g.program(10,d,t),_.hash={},_.fn=_,_.inverse=g.noop,n=i.call(e,n,_),(n||0===n)&&(r+=n),r+='\n            <div class="copy" title="copy" data-type="password" data-copy="',h=a.password,n=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"password"),typeof n===y?n=n.call(e,{hash:{}}):n===v&&(n=b.call(e,"password",{hash:{}})),r+=w(n)+'">Password: &nbsp;<span class="password">**********</span>\n                &nbsp;<img title="show password" src="',n="/pages/images/show-password.png",h=a.assetUrl,i=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),n=typeof i===y?i.call(e,n,{hash:{}}):i===v?b.call(e,"assetUrl",n,{hash:{}}):i,r+=w(n)+'" class="view-password"/>\n                <img title="hide password" src="',n="/pages/images/hide-password.png",h=a.assetUrl,i=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),n=typeof i===y?i.call(e,n,{hash:{}}):i===v?b.call(e,"assetUrl",n,{hash:{}}):i,r+=w(n)+'" class="hide-password" style="display: none;"/>\n                <img src="',n="/pages/images/copy-icon.png",h=a.assetUrl,i=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),n=typeof i===y?i.call(e,n,{hash:{}}):i===v?b.call(e,"assetUrl",n,{hash:{}}):i,r+=w(n)+'" class="copy-icon"/>\n            </div>\n            <div style="margin-top:10px;margin-bottom:10px;">\n                <input type="button" id="fillIt" class="btn btn-success done" style="background:#168AD3;" value="Fill Account"/>\n            </div>\n        '}function c(e){var t,n,i="";return i+='<div class="copy" title="copy" data-type="email address" data-copy="',h=a.email,t=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"email"),typeof t===y?t=t.call(e,{hash:{}}):t===v&&(t=b.call(e,"email",{hash:{}})),i+=w(t)+'">Email: &nbsp;',h=a.email,t=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"email"),typeof t===y?t=t.call(e,{hash:{}}):t===v&&(t=b.call(e,"email",{hash:{}})),i+=w(t)+' <img src="',t="/pages/images/copy-icon.png",h=a.assetUrl,n=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===y?n.call(e,t,{hash:{}}):n===v?b.call(e,"assetUrl",t,{hash:{}}):n,i+=w(t)+'" class="copy-icon"/></div>'}function d(e){var t,n,i="";return i+='<div class="copy" title="copy" data-type="username" data-copy="',h=a.usernae,t=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"usernae"),typeof t===y?t=t.call(e,{hash:{}}):t===v&&(t=b.call(e,"usernae",{hash:{}})),i+=w(t)+'">Username: &nbsp;',h=a.username,t=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"username"),typeof t===y?t=t.call(e,{hash:{}}):t===v&&(t=b.call(e,"username",{hash:{}})),i+=w(t)+' <img src="',t="/pages/images/copy-icon.png",h=a.assetUrl,n=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===y?n.call(e,t,{hash:{}}):n===v?b.call(e,"assetUrl",t,{hash:{}}):n,i+=w(t)+'" class="copy-icon"/></div>'}function u(){return'\n            <label for="new_email">Email: </label>\n            <input type="text" id="new_email" autocomplete="off"/>\n            <label for="new_username">Username: </label>\n            <input type="text" id="new_username" autocomplete="off"/>\n            <label for="new_password">Password: </label>\n            <input type="password" id="new_password" autocomplete="off"/>\n            <div style="margin-top:10px;margin-bottom:10px;">\n                <input type="button" id="saveIt" class="btn btn-success done" style="background:#168AD3;" value="Save Account"/>\n            </div>\n        '}a=a||e.helpers;var p,m,h,_,f="",g=this,y="function",b=a.helperMissing,v=void 0,w=this.escapeExpression;return f+='<div class="result account" data-id="',p=ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"cid"),typeof p===y?p=p.call(t,{hash:{}}):p===v&&(p=b.call(t,"this.cid",{hash:{}})),f+=w(p)+'">\n    <div class="title-row clearfix">\n        <div class="icon"><img src="',p="/pages/images/accounts.png",h=a.assetUrl,m=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),p=typeof m===y?m.call(t,p,{hash:{}}):m===v?b.call(t,"assetUrl",p,{hash:{}}):m,f+=w(p)+'"/></div>\n        <div class="title">Add Account</div>\n        <div class="action">\n            <img src="',p="/pages/images/arrow-closed.png",h=a.assetUrl,m=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),p=typeof m===y?m.call(t,p,{hash:{}}):m===v?b.call(t,"assetUrl",p,{hash:{}}):m,f+=w(p)+'" class="arrow-open" ',h=a.email,p=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"email"),m=a["if"],_=g.program(1,r,i),_.hash={},_.fn=_,_.inverse=g.noop,p=m.call(t,p,_),(p||0===p)&&(f+=p),f+='/>\n            <img src="',p="/pages/images/arrow-opened.png",h=a.assetUrl,m=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),p=typeof m===y?m.call(t,p,{hash:{}}):m===v?b.call(t,"assetUrl",p,{hash:{}}):m,f+=w(p)+'" class="arrow-close" ',h=a.email,p=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"email"),m=a.unless,_=g.program(3,s,i),_.hash={},_.fn=_,_.inverse=g.noop,p=m.call(t,p,_),(p||0===p)&&(f+=p),f+='/>\n        </div>\n    </div>\n    <div class="result-detail" style="padding-left: 60px;',h=a.email,p=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"email"),m=a.unless,_=g.program(5,o,i),_.hash={},_.fn=_,_.inverse=g.noop,p=m.call(t,p,_),(p||0===p)&&(f+=p),f+='">\n        <div class="error" style="display: none;color:red;"></div>\n        ',h=a.password,p=h||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"password"),m=a["if"],_=g.program(7,l,i),_.hash={},_.fn=_,_.inverse=g.program(12,u,i),p=m.call(t,p,_),(p||0===p)&&(f+=p),f+="\n    </div>\n</div>"}),ABINE_DNTME.CompiledTemplates.search_helper_add_account}),ABINE_DNTME.define("abine/views/addAccountView",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies","abine/timer","abine/views/searchResultBase"],function(e,t,a,n,i,r,s,o,l){var c=l.extend({getName:function(){return"phone"},events:e.extend({},l.prototype.events,{}),loadData:function(){this.model.loading=!0;var e=[new n.Account({_type:"masked_account",domain:this.options.domain}),new n.Account({_type:"strong_password",domain:this.options.domain}),new n.Account({_type:"add_account",domain:this.options.domain})];this.model.results=e,this.model.loading=!1,this.renderResults()},onExpand:function(e,t){"add_account"==t.get("_type")&&this.$("#saveIt")[0].scrollIntoView()}});return c}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.search_helper_address=e.template(function(e,t,a,n,i){function r(e){var t;return t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"fullLabel"),typeof t===b?t=t.call(e,{hash:{}}):t===w&&(t=v.call(e,"this.fullLabel",{hash:{}})),k(t)}function s(e){var t;return t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"label"),typeof t===b?t=t.call(e,{hash:{}}):t===w&&(t=v.call(e,"this.label",{hash:{}})),k(t)}function o(e){var t,n,i="";return i+='<div class="copy" data-type="name" data-copy="',_=a.first_name,t=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"first_name"),typeof t===b?t=t.call(e,{hash:{}}):t===w&&(t=v.call(e,"first_name",{hash:{}})),i+=k(t)+" ",_=a.last_name,t=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"last_name"),typeof t===b?t=t.call(e,{hash:{}}):t===w&&(t=v.call(e,"last_name",{hash:{}})),i+=k(t)+'" title="copy">Name: ',_=a.first_name,t=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"first_name"),typeof t===b?t=t.call(e,{hash:{}}):t===w&&(t=v.call(e,"first_name",{hash:{}})),i+=k(t)+" ",_=a.last_name,t=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"last_name"),typeof t===b?t=t.call(e,{hash:{}}):t===w&&(t=v.call(e,"last_name",{hash:{}})),i+=k(t)+'\n            <img src="',t="/pages/images/copy-icon.png",_=a.assetUrl,n=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===b?n.call(e,t,{hash:{}}):n===w?v.call(e,"assetUrl",t,{hash:{}}):n,i+=k(t)+'" class="copy-icon"/>\n        </div>'}function l(e){var t,n,i="";return i+='<div class="copy" title="copy" data-type="address line 1" data-copy="',_=a.address1,t=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"address1"),typeof t===b?t=t.call(e,{hash:{}}):t===w&&(t=v.call(e,"address1",{hash:{}})),i+=k(t)+'">Line 1: ',_=a.address1,t=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"address1"),typeof t===b?t=t.call(e,{hash:{}}):t===w&&(t=v.call(e,"address1",{hash:{}})),i+=k(t)+' <img src="',t="/pages/images/copy-icon.png",_=a.assetUrl,n=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===b?n.call(e,t,{hash:{}}):n===w?v.call(e,"assetUrl",t,{hash:{}}):n,i+=k(t)+'" class="copy-icon"/></div>'}function c(e){var t,n,i="";return i+='<div class="copy" title="copy" data-type="address line 2" data-copy="',_=a.address2,t=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"address2"),typeof t===b?t=t.call(e,{hash:{}}):t===w&&(t=v.call(e,"address2",{hash:{}})),i+=k(t)+'">Line 2: ',_=a.address2,t=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"address2"),typeof t===b?t=t.call(e,{hash:{}}):t===w&&(t=v.call(e,"address2",{hash:{}})),i+=k(t)+' <img src="',t="/pages/images/copy-icon.png",_=a.assetUrl,n=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===b?n.call(e,t,{hash:{}}):n===w?v.call(e,"assetUrl",t,{hash:{}}):n,i+=k(t)+'" class="copy-icon"/></div>'}function d(e){var t,n,i="";return i+='<div class="copy" title="copy" data-type="city" data-copy="',_=a.city,t=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"city"),typeof t===b?t=t.call(e,{hash:{}}):t===w&&(t=v.call(e,"city",{hash:{}})),i+=k(t)+'">City: ',_=a.city,t=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"city"),typeof t===b?t=t.call(e,{hash:{}}):t===w&&(t=v.call(e,"city",{hash:{}})),i+=k(t)+' <img src="',t="/pages/images/copy-icon.png",_=a.assetUrl,n=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===b?n.call(e,t,{hash:{}}):n===w?v.call(e,"assetUrl",t,{hash:{}}):n,i+=k(t)+'" class="copy-icon"/></div>'}function u(e){var t,n,i="";return i+='<div class="copy" title="copy" data-type="state" data-copy="',_=a.state,t=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"state"),typeof t===b?t=t.call(e,{hash:{}}):t===w&&(t=v.call(e,"state",{hash:{}})),i+=k(t)+'">State: ',_=a.state,t=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"state"),typeof t===b?t=t.call(e,{hash:{}}):t===w&&(t=v.call(e,"state",{hash:{}})),i+=k(t)+' <img src="',t="/pages/images/copy-icon.png",_=a.assetUrl,n=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===b?n.call(e,t,{hash:{}}):n===w?v.call(e,"assetUrl",t,{hash:{}}):n,i+=k(t)+'" class="copy-icon"/></div>'}function p(e){var t,n,i="";return i+='<div class="copy" title="copy" data-type="zip code" data-copy="',_=a.zip,t=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"zip"),typeof t===b?t=t.call(e,{hash:{}}):t===w&&(t=v.call(e,"zip",{hash:{}})),i+=k(t)+'">Zip: ',_=a.zip,t=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"zip"),typeof t===b?t=t.call(e,{hash:{}}):t===w&&(t=v.call(e,"zip",{hash:{}})),i+=k(t)+' <img src="',t="/pages/images/copy-icon.png",_=a.assetUrl,n=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===b?n.call(e,t,{hash:{}}):n===w?v.call(e,"assetUrl",t,{hash:{}}):n,i+=k(t)+'" class="copy-icon"/></div>'}a=a||e.helpers,n=n||e.partials;var m,h,_,f,g="",y=this,b="function",v=a.helperMissing,w=void 0,k=this.escapeExpression;return g+='<div class="result account" data-id="',m=ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"id"),typeof m===b?m=m.call(t,{hash:{}}):m===w&&(m=v.call(t,"this.id",{hash:{}})),g+=k(m)+'">\n    <div class="title-row clearfix">\n        <div class="icon"><img src="',m="/pages/images/dnt-address-icon.png",_=a.assetUrl,h=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),m=typeof h===b?h.call(t,m,{hash:{}}):h===w?v.call(t,"assetUrl",m,{hash:{}}):h,g+=k(m)+'"/></div>\n        <div class="title">',m=ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"fullLabel"),h=a["if"],f=y.program(1,r,i),f.hash={},f.fn=f,f.inverse=y.program(3,s,i),m=h.call(t,m,f),(m||0===m)&&(g+=m),g+="</div>\n        ",m=t,m=y.invokePartial(n["search_helper.actions"],"search_helper.actions",m,a,n),(m||0===m)&&(g+=m),g+='\n    </div>\n    <div class="result-detail" style="display: none;padding-left: 60px">\n        ',_=a.first_name,m=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"first_name"),h=a["if"],f=y.program(5,o,i),f.hash={},f.fn=f,f.inverse=y.noop,m=h.call(t,m,f),(m||0===m)&&(g+=m),g+="\n        ",_=a.address1,m=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"address1"),h=a["if"],f=y.program(7,l,i),f.hash={},f.fn=f,f.inverse=y.noop,m=h.call(t,m,f),(m||0===m)&&(g+=m),g+="\n        ",_=a.address2,m=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"address2"),h=a["if"],f=y.program(9,c,i),f.hash={},f.fn=f,f.inverse=y.noop,m=h.call(t,m,f),(m||0===m)&&(g+=m),g+="\n        ",_=a.city,m=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"city"),h=a["if"],f=y.program(11,d,i),f.hash={},f.fn=f,f.inverse=y.noop,m=h.call(t,m,f),(m||0===m)&&(g+=m),g+="\n        ",_=a.state,m=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"state"),h=a["if"],f=y.program(13,u,i),f.hash={},f.fn=f,f.inverse=y.noop,m=h.call(t,m,f),(m||0===m)&&(g+=m),g+="\n        ",_=a.zip,m=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"zip"),h=a["if"],f=y.program(15,p,i),f.hash={},f.fn=f,f.inverse=y.noop,m=h.call(t,m,f),(m||0===m)&&(g+=m),g+="\n        </div>\n    </div>\n</div>"}),ABINE_DNTME.CompiledTemplates.search_helper_address}),ABINE_DNTME.define("abine/views/addressView",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies","abine/timer","abine/views/searchResultBase","abine/intl"],function(e,t,a,n,i,r,s,o,l,c){var d=l.extend({getName:function(){return"address"},events:e.extend({},l.prototype.events,{}),loadData:function(){this.model.loading=!0;var t=new n.AddressCollection;t.fetchAll({success:e.bind(function(){for(var e=0;e<t.models.length;e++)"Masked Card"==t.models[e].get("label")&&(t.models[e].attributes.fullLabel=c.getText("mm_address_helper_abine_address"));this.model.results=this.wrap(t.models,"address"),this.model.loading=!1,this.renderResults()},this)})}});return d}),ABINE_DNTME.define("abine/views/searchResultBase",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies","abine/timer","abine/views/resultList"],function(e,t,a,n,i,r,s,o,l){var c=a.View.extend({templateName:"search_helper_results",events:{"click .fill":"fill","click .arrow-open":"toggle","click .arrow-close":"toggle","click .result .title":"toggle","click .copy":"copy"},afterInitialize:function(){this.doc=this.el.document,this.model={name:this.getName(),loading:!0,results:[]},this.loadData(),this.render()},renderResults:function(){this.render(!0)},loadData:function(){throw"load data not implemented in child class"},wrap:function(e,t){return e.forEach(function(e){e.attributes._type=t}),e},createChildren:function(){var e={results:new l({base:this,contentManager:this.options.contentManager,mfaPref:this.options.mfaPref,mfaPrefType:this.options.mfaPrefType})};return e},getRecord:function(e){var a=t(e).data("id"),n=null;return this.model.results.find(function(e){if(e.get("id")==a||e.cid==a)return n=e,!0}),n},getResultNode:function(e){for(;e&&(!e.className||e.className.indexOf("result")==-1);)e=e.parentNode;return e},toggle:function(e){var a=this.getResultNode(e.target);t(".arrow-open",a).toggle(),t(".arrow-close",a).toggle(),t(".result-detail",a).toggle(),t(".result-detail",a).is(":visible")?this.onExpand(a,this.getRecord(a)):this.onCollapse(a)},fill:function(e){var t=this.getRecord(e.target);this.children.results.children[t.cid].fillFields(t)},showPassword:function(e){var a=e.parentNode;t(".view-password",a).hide(),t(".hide-password",a).show(),t("span.password",a).text(t(a).data("copy"))},hidePassword:function(e){var a=e.parentNode;t(".view-password",a).show(),t(".hide-password",a).hide(),t("span.password",a).text("**********")},copy:function(e){var a=null,n=t(e.target);if(n.hasClass("view-password"))return this.showPassword(e.target),!1;if(n.hasClass("hide-password"))return this.hidePassword(e.target),!1;var i=n.data("copy"),a=n.data("type");if(i||(i=t(e.target.parentNode).data("copy"),a=t(e.target.parentNode).data("type")),!i){var r=this.getRecord(e.target);r.get&&r.get("email")&&(i=r.get("email"),a="email address"),!i&&r.getAddress&&(i=r.getAddress(),a="email address"),!i&&r.getAreaCode&&(i=r.get("number"),a="phone number")}i&&(this.copyTextToClipboard(i),this.trigger("footer-message",a?"Copied "+a+" to clipboard":"Copied to clipboard"))},onExpand:function(e,a){if(!a.get("number")&&"disposable_card"==a.get("_type")){var n=this;a.fetch({success:function(){var e=n.children.results.children[a.cid];e.render(),t(".arrow-open",e.el).toggle(),t(".arrow-close",e.el).toggle(),t(".result-detail",e.el).toggle()}})}},onCollapse:function(){},copyTextToClipboard:function(e){var t=document.createElement("textarea");t.textContent=e;var a=document.getElementsByTagName("body")[0]||document.documentElement;a.appendChild(t),t.select(),document.execCommand("copy"),a.removeChild(t)}});return c}),ABINE_DNTME.define("abine/views/cardView",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies","abine/timer","abine/views/searchResultBase"],function(e,t,a,n,i,r,s,o,l){var c=l.extend({getName:function(){return"card"},events:e.extend({},l.prototype.events,{}),loadData:function(){this.model.loading=!0;var t=new n.RealCardCollection;t.fetchAll({success:e.bind(function(){var a=new n.DisposableCardCollection;a.fetchAll({success:e.bind(function(){var e=this.wrap(a.models,"disposable_card");this.model.results=e.concat(this.wrap(t.models,"real_card")),this.model.loading=!1,this.renderResults()},this)})},this)})}});return c}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.search_helper_disposable_card=e.template(function(e,t,a,n,i){function r(e){var t,n="";return n+=" - ",p=a.domain,t=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),
typeof t===f?t=t.call(e,{hash:{}}):t===y&&(t=g.call(e,"domain",{hash:{}})),n+=b(t)}function s(e,t){var n,i,r="";return r+="\n        ",p=a.number,n=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"number"),i=a["if"],m=_.program(4,o,t),m.hash={},m.fn=m,m.inverse=_.program(6,l,t),n=i.call(e,n,m),(n||0===n)&&(r+=n),r+="\n    "}function o(e){var t,n,i="";return i+='\n            <div class="result-detail" style="display: none;padding-left: 60px">\n                <div class="copy" data-type="card number" data-copy="',p=a.number,t=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"number"),typeof t===f?t=t.call(e,{hash:{}}):t===y&&(t=g.call(e,"number",{hash:{}})),i+=b(t)+'" title="copy">\n                    Number: ',p=a.getSeparatedCardNumber,t=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getSeparatedCardNumber"),typeof t===f?t=t.call(e,{hash:{}}):t===y&&(t=g.call(e,"getSeparatedCardNumber",{hash:{}})),i+=b(t)+'\n                    <img src="',t="/pages/images/copy-icon.png",p=a.assetUrl,n=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===f?n.call(e,t,{hash:{}}):n===y?g.call(e,"assetUrl",t,{hash:{}}):n,i+=b(t)+'" class="copy-icon"/>\n                </div>\n                <div class="copy" data-type="expiry date" data-copy="',p=a.getExpiry,t=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getExpiry"),typeof t===f?t=t.call(e,{hash:{}}):t===y&&(t=g.call(e,"getExpiry",{hash:{}})),i+=b(t)+'" title="copy">Expiry: <span\n                        class="expiration">',p=a.getExpiry,t=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getExpiry"),typeof t===f?t=t.call(e,{hash:{}}):t===y&&(t=g.call(e,"getExpiry",{hash:{}})),i+=b(t)+'</span>\n                    <img src="',t="/pages/images/copy-icon.png",p=a.assetUrl,n=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===f?n.call(e,t,{hash:{}}):n===y?g.call(e,"assetUrl",t,{hash:{}}):n,i+=b(t)+'" class="copy-icon"/>\n                </div>\n                <div class="copy" data-type="cvc" data-copy="',p=a.getCVC,t=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getCVC"),typeof t===f?t=t.call(e,{hash:{}}):t===y&&(t=g.call(e,"getCVC",{hash:{}})),i+=b(t)+'" title="copy">CVC: <span\n                        class="cvc">',p=a.getCVC,t=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getCVC"),typeof t===f?t=t.call(e,{hash:{}}):t===y&&(t=g.call(e,"getCVC",{hash:{}})),i+=b(t)+'</span>\n                    <img src="',t="/pages/images/copy-icon.png",p=a.assetUrl,n=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===f?n.call(e,t,{hash:{}}):n===y?g.call(e,"assetUrl",t,{hash:{}}):n,i+=b(t)+'" class="copy-icon"/>\n                </div>\n                <div>Amount: <span>',p=a.getOriginalValue,t=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getOriginalValue"),typeof t===f?t=t.call(e,{hash:{}}):t===y&&(t=g.call(e,"getOriginalValue",{hash:{}})),i+=b(t)+"</span></div>\n            </div>\n        "}function l(e){var t,n,i="";return i+='\n            <div class="result-detail" style="display: none;text-align: center">\n                <div style="text-align: center">Fetching card details <img\n                        src="',t="/pages/images/ajax_loader.gif",p=a.assetUrl,n=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===f?n.call(e,t,{hash:{}}):n===y?g.call(e,"assetUrl",t,{hash:{}}):n,i+=b(t)+'"/></div>\n            </div>\n        '}function c(e){var t,i="";return i+='\n        <div class="result-detail" style="display: none;text-align: center">\n            Credit Cards protected with Mobile confirmation.\n            <input type="button" class="btn btn-success done trigger-biometric" style="background:#168AD3;" value="Authorize to View Card"/>\n            ',t=e,t=_.invokePartial(n["common.biometric_auth"],"common.biometric_auth",t,a,n),(t||0===t)&&(i+=t),i+="\n        </div>\n    "}a=a||e.helpers,n=n||e.partials;var d,u,p,m,h="",_=this,f="function",g=a.helperMissing,y=void 0,b=this.escapeExpression;return h+='<div class="result card" data-id="',d=ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"id"),typeof d===f?d=d.call(t,{hash:{}}):d===y&&(d=g.call(t,"this.id",{hash:{}})),h+=b(d)+'">\n    <div class="title-row clearfix">\n        <div class="icon"><img src="',d="/pages/images/maskcard-icon.png",p=a.assetUrl,u=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),d=typeof u===f?u.call(t,d,{hash:{}}):u===y?g.call(t,"assetUrl",d,{hash:{}}):u,h+=b(d)+'"/></div>\n        <div class="title">Masked Card ',d=ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getPlainLabelOrLastFour"),typeof d===f?d=d.call(t,{hash:{}}):d===y&&(d=g.call(t,"this.getPlainLabelOrLastFour",{hash:{}})),h+=b(d)+" ",p=a.domain,d=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"domain"),u=a["if"],m=_.program(1,r,i),m.hash={},m.fn=m,m.inverse=_.noop,d=u.call(t,d,m),(d||0===d)&&(h+=d),h+="</div>\n        ",d=t,d=_.invokePartial(n["search_helper.actions"],"search_helper.actions",d,a,n),(d||0===d)&&(h+=d),h+="\n    </div>\n    ",p=a.mfa,d=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"mfa"),u=a.unless,m=_.program(3,s,i),m.hash={},m.fn=m,m.inverse=_.program(8,c,i),d=u.call(t,d,m),(d||0===d)&&(h+=d),h+="\n</div>"}),ABINE_DNTME.CompiledTemplates.search_helper_disposable_card}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.search_helper_disposable_email=e.template(function(e,t,a,n){a=a||e.helpers,n=n||e.partials;var i,r,s,o="",l=this,c="function",d=a.helperMissing,u=void 0,p=this.escapeExpression;return o+='<div class="result email" data-id="',i=ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"id"),typeof i===c?i=i.call(t,{hash:{}}):i===u&&(i=d.call(t,"this.id",{hash:{}})),o+=p(i)+'">\n    <div class="title-row clearfix">\n        <div class="icon"><img src="',i="/pages/images/maskmail-icon.png",s=a.assetUrl,r=s||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),i=typeof r===c?r.call(t,i,{hash:{}}):r===u?d.call(t,"assetUrl",i,{hash:{}}):r,o+=p(i)+'"/></div>\n        <div class="title">',i=ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getAddress"),typeof i===c?i=i.call(t,{hash:{}}):i===u&&(i=d.call(t,"this.getAddress",{hash:{}})),o+=p(i)+"</div>\n        ",i=t,i=l.invokePartial(n["search_helper.actions_copy"],"search_helper.actions_copy",i,a,n),(i||0===i)&&(o+=i),o+="\n    </div>\n</div>"}),ABINE_DNTME.CompiledTemplates.search_helper_disposable_email}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.search_helper_disposable_phone=e.template(function(e,t,a,n){a=a||e.helpers,n=n||e.partials;var i,r,s,o="",l=this,c="function",d=a.helperMissing,u=void 0,p=this.escapeExpression;return o+='<div class="result card" data-id="',i=ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"id"),typeof i===c?i=i.call(t,{hash:{}}):i===u&&(i=d.call(t,"this.id",{hash:{}})),o+=p(i)+'">\n    <div class="icon"><img src="',i="/pages/images/maskphone-icon-green.png",s=a.assetUrl,r=s||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),i=typeof r===c?r.call(t,i,{hash:{}}):r===u?d.call(t,"assetUrl",i,{hash:{}}):r,o+=p(i)+'"/></div>\n    <div class="title">',i=ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getPrettyNumber"),typeof i===c?i=i.call(t,{hash:{}}):i===u&&(i=d.call(t,"this.getPrettyNumber",{hash:{}})),o+=p(i)+"</div>\n    ",i=t,i=l.invokePartial(n["search_helper.actions"],"search_helper.actions",i,a,n),(i||0===i)&&(o+=i),o+="\n</div>"}),ABINE_DNTME.CompiledTemplates.search_helper_disposable_phone}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.search_helper_email=e.template(function(e,t,a,n){a=a||e.helpers,n=n||e.partials;var i,r,s,o="",l=this,c="function",d=a.helperMissing,u=void 0,p=this.escapeExpression;return o+='<div class="result email" data-id="',i=ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"id"),typeof i===c?i=i.call(t,{hash:{}}):i===u&&(i=d.call(t,"this.id",{hash:{}})),o+=p(i)+'">\n    <div class="icon"><img src="',i="/pages/images/disclosemail-icon.png",s=a.assetUrl,r=s||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),i=typeof r===c?r.call(t,i,{hash:{}}):r===u?d.call(t,"assetUrl",i,{hash:{}}):r,o+=p(i)+'"/></div>\n    <div class="title">',i=ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"email"),typeof i===c?i=i.call(t,{hash:{}}):i===u&&(i=d.call(t,"this.email",{hash:{}})),o+=p(i)+"</div>\n    ",i=t,i=l.invokePartial(n["search_helper.actions_copy"],"search_helper.actions_copy",i,a,n),(i||0===i)&&(o+=i),o+="\n</div>"}),ABINE_DNTME.CompiledTemplates.search_helper_email}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.search_helper_entity=e.template(function(e,t,a,n){a=a||e.helpers,n=n||e.partials;var i,r,s,o="",l=this,c="function",d=a.helperMissing,u=void 0,p=this.escapeExpression;return o+='<div class="result account">\n    <div class="title-row clearfix">\n        <div class="icon"><img src="',i="/pages/images/accounts.png",s=a.assetUrl,r=s||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),i=typeof r===c?r.call(t,i,{hash:{}}):r===u?d.call(t,"assetUrl",i,{hash:{}}):r,o+=p(i)+'"/></div>\n        <div class="title">',i=ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"id"),typeof i===c?i=i.call(t,{hash:{}}):i===u&&(i=d.call(t,"this.id",{hash:{}})),o+=p(i)+"</div>\n        ",i=t,i=l.invokePartial(n["search_helper.actions"],"search_helper.actions",i,a,n),(i||0===i)&&(o+=i),o+="\n    </div>\n</div>"}),ABINE_DNTME.CompiledTemplates.search_helper_entity}),ABINE_DNTME.define("abine/views/entity/account",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies","abine/timer","abine/password","abine/intl","abine/views/entity/base"],function(e,t,a,n,i,r,s,o,l,c,d){var u=d.extend({templateName:"search_helper_account",afterInitialize:function(){this.model.get("mfa")&&("biometric"!=this.options.mfaPref?this.model.set("mfa",!1):this.enableMfa()),this.render()},getAuthSuffix:function(){return"auth"},getAuthAckSuffix:function(){return"auth_ack"},getBiometricAuthPayload:function(e){return{type:"login",responseId:e,key:this.biometricKey,domain:this.options.domain,account:this.model.get("label")||this.model.get("username")||this.model.get("email")}},fillFields:function(){if(this.model.get("mfa"))return this.expand(),void this.triggerBiometric();var e=this.model.get("email"),t=this.model.get("username"),a=this.model.get("password");t&&0!=t.length||(t=e),e&&0!=e.length||(e=t),this.trigger("fill-fields",{type:"login",data:{email:e,username:t,password:a},origin:"login"})}});return u}),ABINE_DNTME.define("abine/views/entity/add_account",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies","abine/timer","abine/password","abine/intl","abine/views/entity/account"],function(e,t,a,n,i,r,s,o,l,c,d){var u=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/i,p=/^[\s]+|[\s]+$/g,m=d.extend({templateName:"search_helper_add_account",events:e.extend({},d.prototype.events,{"click #fillIt":"fillFields","click #saveIt":"saveAccount"}),saveAccount:function(){var e=this.$("#new_email").val().replace(p,""),t=this.$("#new_username").val().replace(p,""),a=this.$("#new_password").val();return e&&!e.match(u)?void this.$(".error").text("Please enter valid email address").show():e||t?a?(e&&this.model.set("email",e),t&&this.model.set("username",t),this.model.set("password",a),this.model.save(),this.render(),void this.expand()):void this.$(".error").text("Please enter password").show():void this.$(".error").text("Please enter email address and/or username").show()}});return m}),ABINE_DNTME.define("abine/views/entity/address",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies","abine/timer","abine/password","abine/intl","abine/views/entity/base"],function(e,t,a,n,i,r,s,o,l,c,d){var u=d.extend({templateName:"search_helper_address",fillFields:function(e){this.trigger("fill-fields",{type:"address",data:e.toJSON(),origin:"address"})}});return u}),ABINE_DNTME.define("abine/views/entity/base",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies","abine/timer","abine/password","abine/intl"],function(e,t,a,n,i,r,s,o,l,c){var d=a.View.extend({templateName:"search_helper_entity",events:{"click .trigger-biometric":"triggerBiometric","click #masterPassAuth":"masterPassAuth","click #retryBiometricAuth":"retryBiometricAuth","submit form.unlock":"verifyMasterPass"},biometricSuccess:function(){this.model.set("mfa",!1),this.render(),this.expand()},expand:function(){this.$(".arrow-open").hide(),this.$(".arrow-close, .result-detail").show()},triggerBiometric:function(e){var t=this;s.licenseModule.getGenericBiometricKey(null,function(a){t.$(".trigger-biometric").hide(),a.success?(t.biometricKey=a.key,t.sendBiometricAuthRequest(e)):(t.$("#biometricAuth").show(),t.$("#biometricInfo").hide(),t.$("#biometricError").text(c.getText("mm_payment_helper_biometric_auth_disabled",[t.model.biometric_type])).show())})},retryBiometricAuth:function(e,t){var a=this;o.clearTimeout(this.noResponseTimer),s.licenseModule.getGenericBiometricKey(null,function(n){n.success&&(a.biometricKey=n.key,a.sendBiometricAuthRequest(e,t))})},sendBiometricAuthRequest:function(){var e=this.biometricKey.split(":");if(e.length>2)return this.biometricKey=e[0]+":"+e[1],this.biometricToken=e[2],this.$("#biometricAuth").hide(),void this.biometricSuccess();this.$("#biometricAuth").show();var t=this.options.contentManager.messenger,a=this;a.$("#biometricInfo, #biometricAuth").show(),this.model.face_id?a.$("#biometricInfo").html(c.getText("mm_payment_helper_request_faceid_"+a.getAuthSuffix(),[a.model.biometric_type])):this.model.touch_id?a.$("#biometricInfo").html(c.getText("mm_payment_helper_request_biometric_"+a.getAuthSuffix(),[a.model.biometric_type])):a.$("#biometricInfo").html(c.getText("mm_payment_helper_request_phoneid_"+a.getAuthSuffix(),[a.model.biometric_type])),a.$("#biometricError").hide(),this.biometricResponseId&&t.off(this.biometricResponseId);var n="biometric:auth:response:"+Math.random();o.clearTimeout(this.noResponseTimer),this.noResponseTimer=o.setTimeout(function(){a.$("#biometricInfo").text(c.getText("mm_payment_helper_biometric_no_response"))},2e4),t.on(n,function(e){if(o.clearTimeout(a.noResponseTimer),!e.ack||!a.$("#masterPassStep").is(":visible"))return a.$("#accountList, #masterPassStep").hide(),a.$("#biometricAuth").show(),e.ack?(a.$("#biometricInfo").show(),a.$("#biometricError").hide(),void(a.model.face_id?a.$("#biometricInfo").html(c.getText("mm_payment_helper_request_faceid_"+a.getAuthAckSuffix(),[a.model.biometric_type])):a.model.touch_id?a.$("#biometricInfo").html(c.getText("mm_payment_helper_request_biometric_"+a.getAuthAckSuffix(),[a.model.biometric_type])):a.$("#biometricInfo").html(c.getText("mm_payment_helper_request_phoneid_"+a.getAuthAckSuffix(),[a.model.biometric_type])))):void(e.success?(a.biometricToken=e.token,a.$("#biometricAuth").hide(),a.biometricSuccess(),t.off(n),a.biometricResponseId=null):(a.$("#biometricInfo").hide(),a.$("#biometricError").text(e.error).show()))});var i=this.getBiometricAuthPayload(n);t.send("biometric:auth",i),this.biometricResponseId=n},masterPassAuth:function(e){e&&e.preventDefault(),o.clearTimeout(this.noResponseTimer),this.$("#biometricAuth").hide(),this.$("#masterPassStep").show()},verifyMasterPass:function(e){e&&e.preventDefault();var t=this;this.$("#masterPassErr").hide();var a=this.$("#password").val();if(0==a.length)return void this.$("#masterPassErr").text(c.getText("mm_payment_helper_master_pass_invalid")).show();var n="password:auth:response:"+Math.random(),i=this.options.contentManager.messenger;return i.on(n,function(e){t.$("#accountList, #biometricAuth").hide(),t.$("#masterPassStep").show(),e.success?(t.biometricToken=e.token,t.$("#masterPassStep").hide(),t.biometricSuccess(),i.off(n)):t.$("#masterPassErr").text(c.getText("mm_payment_helper_master_pass_invalid")).show(),i.off(n)}),s.licenseModule.getGenericBiometricKey(null,function(e){e.success?(t.biometricKey=e.key,i.send("password:auth",{responseId:n,key:t.biometricKey,password:a,domain:t.options.domain})):t.$("#masterPassErr").text(c.getText("mm_payment_helper_master_pass_retry")).show()}),!1},enableMfa:function(){this.model.set("mfa",!0);var e;"apns.face_id"==this.options.mfaPrefType?(e="Face ID",this.model.set("face_id",!0)):"apns.touch_id"==this.options.mfaPrefType?(e="Touch ID",this.model.set("touch_id",!0)):"apns.pin_id"==this.options.mfaPrefType&&(e="Mobile"),this.model.biometric_type=e},fillFields:function(e){console.log("filling fields not implemented for type ",e.get("_type"))}});return d}),ABINE_DNTME.define("abine/views/entity/card",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies","abine/timer","abine/password","abine/intl","abine/views/entity/base"],function(e,t,a,n,i,r,s,o,l,c,d){var u=d.extend({templateName:"search_helper_real_card",afterInitialize:function(){"biometric"==this.options.mfaPref&&this.enableMfa(),this.render()},getAuthSuffix:function(){return"auth"},getAuthAckSuffix:function(){return"card_auth_ack"},getBiometricAuthPayload:function(e){return{type:"card",responseId:e,key:this.biometricKey,domain:this.options.domain,number:this.model.get("number")?this.model.get("number").substr(-4):this.model.get("last_four")}},fillFields:function(e){return this.model.get("mfa")?(this.expand(),void this.triggerBiometric()):void this.trigger("fill-fields",{type:"payment",data:e.toJSON(),origin:"payment"})}});return u}),ABINE_DNTME.define("abine/views/entity/email",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies","abine/timer","abine/password","abine/intl","abine/views/entity/base"],function(e,t,a,n,i,r,s,o,l,c,d){var u=d.extend({templateName:"search_helper_email",fillFields:function(e){this.trigger("fill-fields",{type:"email",data:e.get("email"),origin:"primary"})}});return u}),ABINE_DNTME.define("abine/views/entity/masked_account",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies","abine/timer","abine/password","abine/intl","abine/views/entity/account"],function(e,t,a,n,i,r,s,o,l,c,d){var u=d.extend({templateName:"search_helper_new_masked_account",events:e.extend({},d.prototype.events,{"click #fillIt":"fillFields","click #generateIt":"generate"}),generate:function(){this.$(".generating-account").show(),this.$(".error").hide();var t=new n.ShieldedEmailCollection;t.fetchAll({success:e.bind(function(){if(t.length>0){var a=t.at(0),n=a.generateDisposable(this.model.get("domain"),"dnt-search-panel");n.save({},{success:e.bind(function(){this.model.set("email",n.getAddress()),this.model.set("password",l.generateNewOptionsPassword(10,!0,!0)),this.model.save(),this.render()},this),error:e.bind(function(){this.$(".error").text("Error created disposable email.  Please try again later.").show(),this.$(".generating-account").hide()})})}},this)})}});return u}),ABINE_DNTME.define("abine/views/entity/masked_card",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies","abine/timer","abine/password","abine/intl","abine/views/entity/card"],function(e,t,a,n,i,r,s,o,l,c,d){var u=d.extend({templateName:"search_helper_disposable_card",fillFields:function(e){return this.model.get("mfa")?(this.expand(),void this.triggerBiometric()):void this.trigger("fill-fields",{type:"payment",data:e.toJSON(),origin:"disposable"})}});return u}),ABINE_DNTME.define("abine/views/entity/masked_email",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies","abine/timer","abine/password","abine/intl","abine/views/entity/base"],function(e,t,a,n,i,r,s,o,l,c,d){var u=d.extend({templateName:"search_helper_disposable_email",fillFields:function(e){this.trigger("fill-fields",{type:"email",data:e.getAddress(),origin:"disposable"})}});return u}),ABINE_DNTME.define("abine/views/entity/masked_phone",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies","abine/timer","abine/password","abine/intl","abine/views/entity/base"],function(e,t,a,n,i,r,s,o,l,c,d){var u=d.extend({templateName:"search_helper_disposable_phone",fillFields:function(e){this.trigger("fill-fields",{type:"phone",data:e.toJSON(),origin:"disposable"})}});return u}),ABINE_DNTME.define("abine/views/entity/phone",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies","abine/timer","abine/password","abine/intl","abine/views/entity/base"],function(e,t,a,n,i,r,s,o,l,c,d){var u=d.extend({templateName:"search_helper_phone",fillFields:function(e){this.trigger("fill-fields",{type:"phone",data:e.toJSON(),origin:"phone"})}});return u}),ABINE_DNTME.define("abine/views/entity/strong_password",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies","abine/timer","abine/password","abine/intl","abine/views/entity/base"],function(e,t,a,n,i,r,s,o,l,c,d){var u=d.extend({templateName:"search_helper_strong_password",events:{"click #fillIt":"save","click #refresh-password":"generatePasswordOption","change #length":"updateLengthNumber","change #numbers":"generatePasswordOption","click #special":"generatePasswordOption"},afterInitialize:function(){setTimeout(e.bind(function(){this.generatePasswordOption()},this),500),this.render()},updateLengthNumber:function(){var e=parseInt(this.$("#length").val());this.$("#pw-length-number").text(e),this.generatePasswordOption()},save:function(){var e=t("#password-input",this.el).val();this.model.set("password",e),this.model.save();var a=document.createElement("textarea");a.textContent=e;var n=document.getElementsByTagName("body")[0]||document.documentElement;n.appendChild(a),a.select(),document.execCommand("copy"),n.removeChild(a),this.trigger("footer-message","Password saved and copied to clipboard")},generatePasswordOption:function(){var e=this.$("#length").val(),a=this.$("#numbers").prop("checked"),n=this.$("#special").prop("checked");t("#password-input",this.el).val(l.generateNewOptionsPassword(e,a,n))},fillFields:function(e){this.trigger("fill-fields",{type:"password",data:e.get("password"),origin:"strong"})}});return u}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.search_helper_new_masked_account=e.template(function(e,t,a,n,i){function r(){return'style="display: none"'}function s(){return'style="display: none;"'}function o(){return"display: none;text-align:center;"}function l(){return"padding-left: 60px;"}function c(e){var t,n,i="";return i+='<div class="copy" title="copy" data-type="email address" data-copy="',_=a.email,t=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"email"),typeof t===b?t=t.call(e,{hash:{}}):t===w&&(t=v.call(e,"email",{hash:{}})),i+=k(t)+'">Email: &nbsp;',_=a.email,t=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"email"),typeof t===b?t=t.call(e,{hash:{}}):t===w&&(t=v.call(e,"email",{hash:{}})),i+=k(t)+' <img src="',t="/pages/images/copy-icon.png",_=a.assetUrl,n=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===b?n.call(e,t,{hash:{}}):n===w?v.call(e,"assetUrl",t,{hash:{}}):n,i+=k(t)+'" class="copy-icon"/></div>'}function d(e){var t,n,i="";return i+='\n            <div class="copy" title="copy" data-type="password" data-copy="',_=a.password,t=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"password"),typeof t===b?t=t.call(e,{hash:{}}):t===w&&(t=v.call(e,"password",{hash:{}})),i+=k(t)+'">Password: &nbsp;<span class="password">**********</span>\n                &nbsp;<img title="show password" src="',t="/pages/images/show-password.png",_=a.assetUrl,n=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===b?n.call(e,t,{hash:{}}):n===w?v.call(e,"assetUrl",t,{hash:{}}):n,i+=k(t)+'" class="view-password"/>\n                <img title="hide password" src="',t="/pages/images/hide-password.png",_=a.assetUrl,n=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===b?n.call(e,t,{hash:{}}):n===w?v.call(e,"assetUrl",t,{hash:{}}):n,i+=k(t)+'" class="hide-password" style="display: none;"/>\n                <img src="',t="/pages/images/copy-icon.png",_=a.assetUrl,n=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===b?n.call(e,t,{hash:{}}):n===w?v.call(e,"assetUrl",t,{hash:{}}):n,i+=k(t)+'" class="copy-icon"/>\n            </div>\n        '}function u(e){var t,n,i="";return i+='<input type="button" id="generateIt" class="btn btn-success done" style="background:#168AD3;" value="Generate Masked Account"/><img style="display: none" class="generating-account" src="',t="/pages/images/ajax_loader.gif",_=a.assetUrl,n=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===b?n.call(e,t,{hash:{}}):n===w?v.call(e,"assetUrl",t,{hash:{}}):n,i+=k(t)+'"/>'}function p(){return'<input type="button" id="fillIt" class="btn btn-success done" style="background:#168AD3;" value="Fill Account"/>'}a=a||e.helpers;var m,h,_,f,g="",y=this,b="function",v=a.helperMissing,w=void 0,k=this.escapeExpression;return g+='<div class="result account" data-id="',m=ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"cid"),typeof m===b?m=m.call(t,{hash:{}}):m===w&&(m=v.call(t,"this.cid",{hash:{}})),g+=k(m)+'">\n    <div class="title-row clearfix">\n        <div class="icon"><img src="',m="/pages/images/accounts.png",_=a.assetUrl,h=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),m=typeof h===b?h.call(t,m,{hash:{}}):h===w?v.call(t,"assetUrl",m,{hash:{}}):h,g+=k(m)+'"/></div>\n        <div class="title">New Masked Account</div>\n        <div class="action">\n            <img src="',m="/pages/images/arrow-closed.png",_=a.assetUrl,h=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),m=typeof h===b?h.call(t,m,{hash:{}}):h===w?v.call(t,"assetUrl",m,{hash:{}}):h,g+=k(m)+'" class="arrow-open" ',_=a.email,m=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"email"),h=a["if"],f=y.program(1,r,i),f.hash={},f.fn=f,f.inverse=y.noop,m=h.call(t,m,f),(m||0===m)&&(g+=m),g+='/>\n            <img src="',m="/pages/images/arrow-opened.png",_=a.assetUrl,h=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),m=typeof h===b?h.call(t,m,{hash:{}}):h===w?v.call(t,"assetUrl",m,{hash:{}}):h,g+=k(m)+'" class="arrow-close" ',_=a.email,m=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"email"),h=a.unless,f=y.program(3,s,i),f.hash={},f.fn=f,f.inverse=y.noop,m=h.call(t,m,f),(m||0===m)&&(g+=m),g+='/>\n        </div>\n    </div>\n    <div class="result-detail" style="',_=a.email,m=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"email"),h=a.unless,f=y.program(5,o,i),f.hash={},f.fn=f,f.inverse=y.program(7,l,i),m=h.call(t,m,f),(m||0===m)&&(g+=m),g+='">\n        <div class="error" style="display: none;color:red;"></div>\n        ',_=a.email,m=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"email"),h=a["if"],f=y.program(9,c,i),f.hash={},f.fn=f,f.inverse=y.noop,m=h.call(t,m,f),(m||0===m)&&(g+=m),g+="\n        ",_=a.password,m=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"password"),h=a["if"],f=y.program(11,d,i),f.hash={},f.fn=f,f.inverse=y.noop,m=h.call(t,m,f),(m||0===m)&&(g+=m),g+='\n        <div style="margin-top:10px;margin-bottom:10px;">\n            ',_=a.email,m=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"email"),h=a.unless,f=y.program(13,u,i),f.hash={},f.fn=f,f.inverse=y.noop,m=h.call(t,m,f),(m||0===m)&&(g+=m),g+="\n            ",_=a.email,m=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"email"),h=a["if"],f=y.program(15,p,i),f.hash={},f.fn=f,f.inverse=y.noop,m=h.call(t,m,f),(m||0===m)&&(g+=m),g+="\n        </div>\n    </div>\n</div>"}),ABINE_DNTME.CompiledTemplates.search_helper_new_masked_account}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.search_helper_panel=e.template(function(e,t,a,n,i){function r(){return'style="display: none;"'}function s(e){var t,n,i="";return i+='\n            <div class="menu clearfix options" data-type="options">\n                <div class="icon"><img src="',t="/pages/images/settings-fw.png",c=a.assetUrl,n=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===m?n.call(e,t,{hash:{}}):n===_?h.call(e,"assetUrl",t,{hash:{}}):n,i+=f(t)+'" style="height:21px;"/></div>\n                <div class="text">\n                    <div class="title no-description">More Options</div>\n                </div>\n            </div>\n            '}a=a||e.helpers;var o,l,c,d,u="",p=this,m="function",h=a.helperMissing,_=void 0,f=this.escapeExpression;return u+='<div class="clearfix panel">\n    <div class="top-header" style="clear:both;">\n        <span class="logo-link">\n            <img class="logo" src="',o="/images/Icon-48.png",c=a.assetUrl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),o=typeof l===m?l.call(t,o,{hash:{}}):l===_?h.call(t,"assetUrl",o,{hash:{}}):l,u+=f(o)+'"/>\n        </span>\n        <input type="text" id="q" placeholder="Search Blur" autocomplete="off"/>\n        <button class="btn btn-small search"><img src="',o="/pages/images/search-fw.png",c=a.assetUrl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),o=typeof l===m?l.call(t,o,{hash:{}}):l===_?h.call(t,"assetUrl",o,{hash:{}}):l,u+=f(o)+'"/> Go</button>\n        <div class="links-wrapper">\n            <div class="links close-link">\n                <img id="close" class="header-icon" src="',o="/pages/images/dnt-ui-header-close.png",c=a.assetUrl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),o=typeof l===m?l.call(t,o,{hash:{}}):l===_?h.call(t,"assetUrl",o,{hash:{}}):l,u+=f(o)+'">\n            </div>\n            <div class="links help-link">\n                <img class="header-icon" src="',o="/pages/images/dnt-ui-header-help.png",c=a.assetUrl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),o=typeof l===m?l.call(t,o,{hash:{}}):l===_?h.call(t,"assetUrl",o,{hash:{}}):l,u+=f(o)+'">\n            </div>\n        </div>\n    </div>\n\n    <div class="body clearfix">\n        <div class="left">\n            <div class="menu clearfix search" ',c=a.q,o=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"q"),l=a.unless,d=p.program(1,r,i),d.hash={},d.fn=d,d.inverse=p.noop,o=l.call(t,o,d),(o||0===o)&&(u+=o),u+=' data-type="search">\n                <div class="icon"><img src="',o="/pages/images/search-fw.png",c=a.assetUrl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),o=typeof l===m?l.call(t,o,{hash:{}}):l===_?h.call(t,"assetUrl",o,{hash:{}}):l,u+=f(o)+'"\n                                       style="height:21px;"/></div>\n                <div class="text">\n                    <div class="title description">Search Results</div>\n                    <div class="description">for ',c=a.q,o=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"q"),typeof o===m?o=o.call(t,{hash:{}}):o===_&&(o=h.call(t,"q",{hash:{}})),u+=f(o)+'</div>\n                </div>\n            </div>\n            <div class="menu clearfix suggested" data-type="suggested">\n                <div class="icon"><img class="replace-fav-icon"\n                                       src="',o="/pages/images/2015panels/panel_b_logo.png",c=a.assetUrl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),o=typeof l===m?l.call(t,o,{hash:{}}):l===_?h.call(t,"assetUrl",o,{hash:{}}):l,u+=f(o)+'"\n                                       style="width:40px;height:21px;"/></div>\n                <div class="text">\n                    <div class="title">Suggested</div>\n                    <div class="description">for ',c=a.domain,o=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"domain"),typeof o===m?o=o.call(t,{hash:{}}):o===_&&(o=h.call(t,"domain",{hash:{}})),u+=f(o)+'</div>\n                </div>\n            </div>\n            <div class="menu clearfix add" data-type="add">\n                <div class="icon"><img src="',o="/pages/images/user-fw.png",c=a.assetUrl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),o=typeof l===m?l.call(t,o,{hash:{}}):l===_?h.call(t,"assetUrl",o,{hash:{}}):l,u+=f(o)+'"\n                                       style="height:21px;"/></div>\n                <div class="text">\n                    <div class="title no-description">Add Account</div>\n                </div>\n            </div>\n            <div class="menu clearfix address" data-type="address">\n                <div class="icon"><img src="',
o="/pages/images/home-fw.png",c=a.assetUrl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),o=typeof l===m?l.call(t,o,{hash:{}}):l===_?h.call(t,"assetUrl",o,{hash:{}}):l,u+=f(o)+'" style="height:21px;"/></div>\n                <div class="text">\n                    <div class="title no-description">Addresses</div>\n                </div>\n            </div>\n            <div class="menu clearfix card" data-type="card">\n                <div class="icon"><img src="',o="/pages/images/card-fw.png",c=a.assetUrl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),o=typeof l===m?l.call(t,o,{hash:{}}):l===_?h.call(t,"assetUrl",o,{hash:{}}):l,u+=f(o)+'" style="height:21px;"/></div>\n                <div class="text">\n                    <div class="title no-description">Credit Cards</div>\n                </div>\n            </div>\n            <div class="menu clearfix phone" data-type="phone">\n                <div class="icon"><img src="',o="/pages/images/phone-fw.png",c=a.assetUrl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),o=typeof l===m?l.call(t,o,{hash:{}}):l===_?h.call(t,"assetUrl",o,{hash:{}}):l,u+=f(o)+'" style="height:21px;"/></div>\n                <div class="text">\n                    <div class="title no-description">Phones</div>\n                </div>\n            </div>\n            ',c=a.fromField,o=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"fromField"),l=a["if"],d=p.program(3,s,i),d.hash={},d.fn=d,d.inverse=p.noop,o=l.call(t,o,d),(o||0===o)&&(u+=o),u+='\n            <div class="menu clearfix map-form" id="mapForm" data-type="map-form" style="display: none;">\n                <div class="icon"><img src="',o="/pages/images/settings-fw.png",c=a.assetUrl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),o=typeof l===m?l.call(t,o,{hash:{}}):l===_?h.call(t,"assetUrl",o,{hash:{}}):l,u+=f(o)+'" style="height:21px;"/></div>\n                <div class="text">\n                    <div class="title no-description">Map Form</div>\n                </div>\n            </div>\n        </div>\n        <div class="right">',o="results",c=a.child,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"),o=typeof l===m?l.call(t,o,{hash:{}}):l===_?h.call(t,"child",o,{hash:{}}):l,u+=f(o)+'</div>\n    </div>\n    <div class="footer"></div>\n</div>'}),ABINE_DNTME.CompiledTemplates.search_helper_panel}),ABINE_DNTME.define("abine/views/searchPanel",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/contentMessenger","abine/proxies","abine/views/suggestedView","abine/views/searchView","abine/views/addressView","abine/views/cardView","abine/views/phoneView","abine/views/addAccountView"],function(e,t,a,n,i,r,s,o,l,c,d,u,p,m){var h=i.extend({templateName:"search_helper_panel",events:{"click .help-link":"openHelp","click .logo-link":"openHelp","click .close-link":"logClose","click .cancel":"cancel","keyup #q":"queryChange","click .search":"search","click .menu":"switchMenu"},logClose:function(){this.updatePanelActivity("closed",this.panelId),this.closePanel()},cancel:function(){this.updatePanelActivity("closed",this.panelId),this.closePanel()},switchMenu:function(e){this.type=null;for(var a=e.target;!this.type;)this.type=t(a).data("type"),a=a.parentNode;return"options"==this.type?void this.autoFillWith(e):"map-form"==this.type?(e.preventDefault(),this.options.contentManager.showMapForm({formId:this.strategyId||this.forms[0],forms:this.forms}),this.closePanel(e,!0),void this.trigger("remove")):void this.renderChildren()},queryChange:function(t){var a=this;clearTimeout(a.searchTimer),13===t.keyCode?a.searchTimer=setTimeout(function(){var e=this.$("#q").val().replace(/^[\s]+|[\s+]$/g,"").replace(/[\s]+/g," ");a.model.q=e,a.model.q?a.type="search":a.type="suggested",a.renderChildren()}):a.searchTimer=setTimeout(e.bind(function(){this.queryChange({keyCode:13})},this),2e3)},search:function(){this.queryChange({keyCode:13})},openHelp:function(e){return!t(e.target).hasClass("num-trackers")&&(o.webapp.openHelp("/email"),void this.closePanel())},setupModel:function(){this.model={domain:this.contentManager.domain,fromField:!!this.fieldId&&!!this.strategyId,q:""}},afterInitialize:function(){this.type=this.options.category||"suggested",this.fieldId=this.options.fieldId,this.strategyId=this.options.strategyId,this.contentManager=this.options.contentManager,this.messenger=this.options.contentManager.messenger,this.numMenuOptions=3,this.applyFadingStyle(),this.fadeIn(),this.panelId=9000081,this.updatePanelActivity("impression",this.panelId),this.setupModel(),this.on("render",e.bind(function(){this.replaceWithFavicons(this.contentManager.domain),this.$(".menu.active").removeClass("active"),this.$(".menu."+this.type).addClass("active")},this)),this.render(),this.fetchFormIds()},fetchFormIds:function(){this.forms=[],this.formIdFetchHooked||(this.formIdFetchHooked=!0,this.messenger.on("form:ids:response",e.bind(function(e){0==this.forms.length&&e.length>0&&this.$("#mapForm").show(),this.forms=this.forms.concat(e)},this))),this.messenger.sendToCS("CS","get:form:ids",this.options.contentManager.frameId)},renderChildren:function(){this.render(),this.$(".menu.active").removeClass("active"),this.$(".menu."+this.type).addClass("active"),this.$("#q").val(this.model.q),"search"==this.type&&this.$("#q").focus()},setDelayedView:function(t,a){var n=this;this.children[t]=new DelayedView({doc:this.el.ownerDocument,realView:e.bind(a,this),postLoad:function(e){n.children[t]=e}})},getChildView:function(t){var a=this.contentManager.preferences.getPref("masked_card_auth"),n=this.contentManager.preferences.getPref("biometric_type"),i=new t({doc:this.el.ownerDocument,messenger:this.messenger,contentManager:this.contentManager,domain:this.contentManager.domain,q:this.model.q,mfaPref:a,mfaPrefType:n});return i.transferEvents(["resize","max-height","close"],this),i.on("fill-fields",e.bind(function(e){this.options.contentManager.fillFields(e.type,this.strategyId,this.fieldId,e.data,e.origin)},this)),i.on("footer-message",function(e){var t=this.$(".footer");t.text(e),clearTimeout(this._footerTimer),this._footerTimer=setTimeout(function(){t.text("")},3e3)},this),i},createChildren:function(){var e;switch(this.type){case"search":e=this.getChildView(c);break;case"address":e=this.getChildView(d);break;case"card":e=this.getChildView(u);break;case"phone":e=this.getChildView(p);break;case"add":e=this.getChildView(m);break;default:e=this.getChildView(l)}return{results:e}}});return h}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.search_helper_phone=e.template(function(e,t,a,n){a=a||e.helpers,n=n||e.partials;var i,r,s,o="",l=this,c="function",d=a.helperMissing,u=void 0,p=this.escapeExpression;return o+='<div class="result card" data-id="',i=ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"id"),typeof i===c?i=i.call(t,{hash:{}}):i===u&&(i=d.call(t,"this.id",{hash:{}})),o+=p(i)+'">\n    <div class="title-row clearfix">\n        <div class="icon"><img src="',i="/pages/images/maskphone-icon-red.png",s=a.assetUrl,r=s||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),i=typeof r===c?r.call(t,i,{hash:{}}):r===u?d.call(t,"assetUrl",i,{hash:{}}):r,o+=p(i)+'"/></div>\n        <div class="title">',i=ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getPrettyNumber"),typeof i===c?i=i.call(t,{hash:{}}):i===u&&(i=d.call(t,"this.getPrettyNumber",{hash:{}})),o+=p(i)+"</div>\n        ",i=t,i=l.invokePartial(n["search_helper.actions_copy"],"search_helper.actions_copy",i,a,n),(i||0===i)&&(o+=i),o+="\n    </div>\n</div>"}),ABINE_DNTME.CompiledTemplates.search_helper_phone}),ABINE_DNTME.define("abine/views/phoneView",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies","abine/timer","abine/views/searchResultBase"],function(e,t,a,n,i,r,s,o,l){var c=l.extend({getName:function(){return"phone"},events:e.extend({},l.prototype.events,{}),loadData:function(){this.model.loading=!0;var t=[],a=null,i=null,r=new n.ShieldedPhoneCollection,s=function(){var e=this.wrap(t,"phone");a&&(e=e.concat(this.wrap([a],"phone"))),i&&!i.get("released")&&(e=e.concat(this.wrap([i],"disposable_phone"))),this.model.results=e,this.model.loading=!1,this.renderResults()};r.bind("sync:success",function(){if(r.length>0&&(a=r.at(0),a.get("number")||(a=null),e.each(r.models,e.bind(function(e){e.get("identity")&&t.push(e)},this))),a&&a.isValidated()){var n=a.generateDisposable();return void n.save({},{success:e.bind(function(){i=n,s.call(this)},this)})}s.call(this)},this),r.fetchAll()}});return c}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.search_helper_real_card=e.template(function(e,t,a,n,i){function r(e,t){var n,i,r="";return r+='\n    <div class="result-detail" style="display: none;padding-left: 60px">\n        <div class="copy" data-type="card number" data-copy="',u=a.number,n=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"number"),typeof n===_?n=n.call(e,{hash:{}}):n===g&&(n=f.call(e,"number",{hash:{}})),r+=y(n)+'" title="copy">Number: ',u=a.getSeparatedCardNumber,n=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getSeparatedCardNumber"),typeof n===_?n=n.call(e,{hash:{}}):n===g&&(n=f.call(e,"getSeparatedCardNumber",{hash:{}})),r+=y(n)+'\n            <img src="',n="/pages/images/copy-icon.png",u=a.assetUrl,i=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),n=typeof i===_?i.call(e,n,{hash:{}}):i===g?f.call(e,"assetUrl",n,{hash:{}}):i,r+=y(n)+'" class="copy-icon"/>\n        </div>\n        <div class="copy" data-type="expiry date" data-copy="',u=a.getExpiry,n=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getExpiry"),typeof n===_?n=n.call(e,{hash:{}}):n===g&&(n=f.call(e,"getExpiry",{hash:{}})),r+=y(n)+'" title="copy">Expiry: <span class="expiration">',u=a.getExpiry,n=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getExpiry"),typeof n===_?n=n.call(e,{hash:{}}):n===g&&(n=f.call(e,"getExpiry",{hash:{}})),r+=y(n)+'</span>\n            <img src="',n="/pages/images/copy-icon.png",u=a.assetUrl,i=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),n=typeof i===_?i.call(e,n,{hash:{}}):i===g?f.call(e,"assetUrl",n,{hash:{}}):i,r+=y(n)+'" class="copy-icon"/>\n        </div>\n        ',u=a.getCVC,n=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getCVC"),i=a["if"],p=h.program(2,s,t),p.hash={},p.fn=p,p.inverse=h.noop,n=i.call(e,n,p),(n||0===n)&&(r+=n),r+="\n        ",u=a.first_name,n=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"first_name"),i=a["if"],p=h.program(4,o,t),p.hash={},p.fn=p,p.inverse=h.noop,n=i.call(e,n,p),(n||0===n)&&(r+=n),r+="\n    </div>\n    "}function s(e){var t,n,i="";return i+='\n        <div class="copy" data-type="cvc" data-copy="',u=a.getCVC,t=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getCVC"),typeof t===_?t=t.call(e,{hash:{}}):t===g&&(t=f.call(e,"getCVC",{hash:{}})),i+=y(t)+'" title="copy">CVC: <span class="cvc">',u=a.getCVC,t=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getCVC"),typeof t===_?t=t.call(e,{hash:{}}):t===g&&(t=f.call(e,"getCVC",{hash:{}})),i+=y(t)+'</span>\n            <img src="',t="/pages/images/copy-icon.png",u=a.assetUrl,n=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===_?n.call(e,t,{hash:{}}):n===g?f.call(e,"assetUrl",t,{hash:{}}):n,i+=y(t)+'" class="copy-icon"/>\n        </div>\n        '}function o(e){var t,n,i="";return i+='\n        <div class="copy" data-type="name" data-copy="',u=a.first_name,t=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"first_name"),typeof t===_?t=t.call(e,{hash:{}}):t===g&&(t=f.call(e,"first_name",{hash:{}})),i+=y(t)+" ",u=a.last_name,t=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"last_name"),typeof t===_?t=t.call(e,{hash:{}}):t===g&&(t=f.call(e,"last_name",{hash:{}})),i+=y(t)+'" title="copy">Name: ',u=a.first_name,t=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"first_name"),typeof t===_?t=t.call(e,{hash:{}}):t===g&&(t=f.call(e,"first_name",{hash:{}})),i+=y(t)+" ",u=a.last_name,t=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"last_name"),typeof t===_?t=t.call(e,{hash:{}}):t===g&&(t=f.call(e,"last_name",{hash:{}})),i+=y(t)+'\n            <img src="',t="/pages/images/copy-icon.png",u=a.assetUrl,n=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===_?n.call(e,t,{hash:{}}):n===g?f.call(e,"assetUrl",t,{hash:{}}):n,i+=y(t)+'" class="copy-icon"/>\n        </div>\n        '}function l(e){var t,i="";return i+='\n    <div class="result-detail" style="display: none;text-align: center">\n        Credit Cards protected with Mobile confirmation.\n        <input type="button" class="btn btn-success done trigger-biometric" style="background:#168AD3;" value="Authorize to View Card"/>\n        ',t=e,t=h.invokePartial(n["common.biometric_auth"],"common.biometric_auth",t,a,n),(t||0===t)&&(i+=t),i+="\n    </div>\n    "}a=a||e.helpers,n=n||e.partials;var c,d,u,p,m="",h=this,_="function",f=a.helperMissing,g=void 0,y=this.escapeExpression;return m+='<div class="result card" data-id="',c=ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"id"),typeof c===_?c=c.call(t,{hash:{}}):c===g&&(c=f.call(t,"this.id",{hash:{}})),m+=y(c)+'">\n    <div class="title-row clearfix">\n        <div class="icon"><img src="',c=ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getTypeImage"),typeof c===_?c=c.call(t,{hash:{}}):c===g&&(c=f.call(t,"this.getTypeImage",{hash:{}})),m+=y(c)+'"/></div>\n        <div class="title">',c=ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getPlainLabelOrLastFour"),typeof c===_?c=c.call(t,{hash:{}}):c===g&&(c=f.call(t,"this.getPlainLabelOrLastFour",{hash:{}})),m+=y(c)+"</div>\n        ",c=t,c=h.invokePartial(n["search_helper.actions"],"search_helper.actions",c,a,n),(c||0===c)&&(m+=c),m+="\n    </div>\n    ",u=a.mfa,c=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"mfa"),d=a.unless,p=h.program(1,r,i),p.hash={},p.fn=p,p.inverse=h.program(6,l,i),c=d.call(t,c,p),(c||0===c)&&(m+=c),m+="\n</div>"}),ABINE_DNTME.CompiledTemplates.search_helper_real_card}),ABINE_DNTME.define("abine/views/resultList",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies","abine/timer","abine/password","abine/intl","abine/views/entity/base","abine/views/entity/account","abine/views/entity/masked_account","abine/views/entity/strong_password","abine/views/entity/email","abine/views/entity/masked_email","abine/views/entity/card","abine/views/entity/masked_card","abine/views/entity/address","abine/views/entity/phone","abine/views/entity/masked_phone","abine/views/entity/add_account"],function(e,t,a,n,i,r,s,o,l,c,d,u,p,m,h,_,f,g,y,b,v,w){var k=a.ListView.extend({tagName:"div",className:"",createChildren:function(){return this.options.base.model?e.reduce(this.options.base.model.results,function(t,a){return t[a.cid]=this.getView(a),t[a.cid].on("fill-fields",e.bind(function(e){this.options.base.trigger("fill-fields",e)},this)),t[a.cid].on("footer-message",e.bind(function(e){this.options.base.trigger("footer-message",e)},this)),t},{},this):{}},renderItems:function(){this.setupNestedViews();var t=this.doc.createDocumentFragment();e.each(this.children,function(e){t.appendChild(e.el)}),this.el.appendChild(t)},getView:function(e){var t=d;return"account"==e.get("_type")&&(t=u),"email"==e.get("_type")&&(t=h),"disposable_email"==e.get("_type")&&(t=_),"phone"==e.get("_type")&&(t=b),"disposable_phone"==e.get("_type")&&(t=v),"real_card"==e.get("_type")&&(t=f),"disposable_card"==e.get("_type")&&(t=g),"address"==e.get("_type")&&(t=y),"masked_account"==e.get("_type")&&(t=p),"strong_password"==e.get("_type")&&(t=m),"add_account"==e.get("_type")&&(t=w),new t({model:e,doc:this.doc,contentManager:this.options.contentManager,domain:this.options.contentManager.domain,mfaPref:this.options.mfaPref,mfaPrefType:this.options.mfaPrefType})}});return k}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.search_helper_results=e.template(function(e,t,a,n,i){function r(e){var t,n,i="";return i+='\n    <div class="loading">Please wait <img src="',t="/pages/images/ajax_loader.gif",u=a.assetUrl,n=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===h?n.call(e,t,{hash:{}}):n===f?_.call(e,"assetUrl",t,{hash:{}}):n,i+=g(t)+'"/></div>\n'}function s(e,t){var n,i,r="";return r+="\n    ",u=a.results,n=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"results"),i=a["if"],p=m.program(4,o,t),p.hash={},p.fn=p,p.inverse=m.program(6,l,t),n=i.call(e,n,p),(n||0===n)&&(r+=n),r+="\n"}function o(e){var t,n,i="";return i+="\n        ",t="results",u=a.child,n=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"child"),t=typeof n===h?n.call(e,t,{hash:{}}):n===f?_.call(e,"child",t,{hash:{}}):n,i+=g(t)+"\n    "}function l(){return'\n        <div class="loading" style="color:red;">No matching records found.</div>\n    '}a=a||e.helpers;var c,d,u,p,m=this,h="function",_=a.helperMissing,f=void 0,g=this.escapeExpression;return u=a.loading,c=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"loading"),d=a["if"],p=m.program(1,r,i),p.hash={},p.fn=p,p.inverse=m.program(3,s,i),c=d.call(t,c,p),c||0===c?c:""}),ABINE_DNTME.CompiledTemplates.search_helper_results}),ABINE_DNTME.define("abine/views/searchView",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies","abine/timer","abine/views/searchResultBase"],function(e,t,a,n,i,r,s,o,l){var c=l.extend({getName:function(){return"search"},events:e.extend({},l.prototype.events,{}),loadData:function(){this.model.loading=!0;var t=new RegExp(this.options.q,"i"),a=new n.ShieldedEmailCollection;a.fetchAll({success:e.bind(function(){var i=a.at(0),r=new n.AccountCollection;r.search(this.options.q,e.bind(function(){var a=new n.DisposableEmailCollection;a.search(this.options.q,e.bind(function(){var s=new n.DisposableCardCollection;s.search(this.options.q,e.bind(function(){var o=new n.AddressCollection;o.search(this.options.q,e.bind(function(){var l=new n.RealCardCollection;l.search(this.options.q,e.bind(function(){var c=new n.ShieldedPhoneCollection;c.fetchAll({success:e.bind(function(){var n=[];if(n=n.concat(this.wrap(r.models,"account")),n=n.concat(this.wrap(a.models,"disposable_email")),n=n.concat(this.wrap(s.models,"disposable_card")),n=n.concat(this.wrap(l.models,"real_card")),n=n.concat(this.wrap(o.models,"address")),c.length>0){var d=c.at(0);d.get("number")&&d.get("number").match(t)&&(n=n.concat(this.wrap([d],"phone"))),e.each(c.models,e.bind(function(e){e.get("identity")&&e.get("number").match(t)&&(n=n.concat(this.wrap([e],"phone")))},this))}i.get("email").match(t)&&(n=n.concat(this.wrap([i],"email"))),i.altEmails&&i.altEmails.models&&i.altEmails.models.forEach(e.bind(function(e){e.get("email").match(t)&&(n=n.concat(this.wrap([e],"email")))},this)),this.model.results=n,this.model.loading=!1,this.renderResults()},this)})},this))},this))},this))},this))},this))},this)})}});return c}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.search_helper_strong_password=e.template(function(e,t,a){a=a||e.helpers;var n,i,r,s="",o="function",l=a.helperMissing,c=void 0,d=this.escapeExpression;return s+='<div class="result account" data-id="',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"cid"),typeof n===o?n=n.call(t,{hash:{}}):n===c&&(n=l.call(t,"this.cid",{hash:{}})),s+=d(n)+'">\n    <div class="title-row clearfix">\n        <div class="icon"><img src="',n="/pages/images/password-icon.png",r=a.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"assetUrl",n,{hash:{}}):i,s+=d(n)+'"/></div>\n        <div class="title">Generate Strong Password</div>\n        <div class="action">\n            <img src="',n="/pages/images/arrow-closed.png",r=a.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"assetUrl",n,{hash:{}}):i,s+=d(n)+'" class="arrow-open" />\n            <img src="',n="/pages/images/arrow-opened.png",r=a.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"assetUrl",n,{hash:{}}):i,s+=d(n)+'" class="arrow-close" style="display: none;"/>\n        </div>\n    </div>\n    <div class="result-detail" style="display: none;padding-left: 0px">\n        <div class="password" style="text-align:center;">\n            <div style="margin-top:10px;">\n                <input type="text" id="password-input" style="height:25px;"/>&nbsp;&nbsp;<img style="cursor:pointer;vertical-align:top;margin-top:4px;" id="refresh-password" src="',n="pages/images/pass_gen_refresh.png",r=a.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"assetUrl",n,{hash:{}}):i,s+=d(n)+'"/>\n            </div>\n            <div>\n                <label for="length">',n="mm_new_password_helper_length",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,s+=d(n)+'&nbsp;&nbsp;<input id="length" type="range" min="6" max="25" value="10" step="1"/>&nbsp;&nbsp;<span id="pw-length-number" style="color:#168AD3;">10</span></label>\n            </div>\n            <div style="margin-top:10px;" class="clearfix">\n                <div style="width:40%;float:left;">\n                    <label for="numbers"><input id="numbers" type="checkbox" checked/>&nbsp;&nbsp;',n="mm_new_password_helper_numbers",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,s+=d(n)+'</label>\n                </div>\n                <div style="width:50%;float:left;">\n                    <label for="special"><input id="special" type="checkbox" checked/>&nbsp;&nbsp;',n="mm_new_password_helper_special",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,s+=d(n)+'</label>\n                </div>\n            </div>\n            <div style="margin-top:10px;margin-bottom:10px;">\n                <input type="button" id="fillIt" class="btn btn-success done" style="background:#168AD3;" value="Save & Copy"/>\n            </div>\n        </div>\n    </div>\n</div>'}),ABINE_DNTME.CompiledTemplates.search_helper_strong_password}),ABINE_DNTME.define("abine/views/suggestedView",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies","abine/timer","abine/views/searchResultBase"],function(e,t,a,n,i,r,s,o,l){var c=l.extend({getName:function(){return"suggested"},events:e.extend({},l.prototype.events,{}),loadData:function(){this.model.loading=!0;var t=new n.ShieldedEmailCollection;t.fetchAll({success:e.bind(function(){var a=t.at(0),i=new n.AccountCollection;i.fetchLoginsByDomain(this.options.domain,e.bind(function(){var t=new n.DisposableEmailCollection;t.fetchAllByDomain(this.options.domain,e.bind(function(){var r=new n.DisposableCardCollection;r.fetchAllByDomain(this.options.domain,e.bind(function(){var e=[];e=e.concat(this.wrap(i.models,"account")),e=e.concat(this.wrap(t.models,"disposable_email")),e=e.concat(this.wrap(r.models,"disposable_card")),a&&(e=e.concat(this.wrap([a],"email")),a.altEmails&&a.altEmails.models&&(e=e.concat(this.wrap(a.altEmails.models,"email")))),this.model.results=e,this.model.loading=!1,this.renderResults()},this))},this))},this))},this)})}});return c}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_blur_panel=e.template(function(e,t,a){a=a||e.helpers;var n,i,r,s="",o="function",l=a.helperMissing,c=void 0,d=this.escapeExpression;return s+='<div class="panel compact">\n    <div class="content-wrap">\n        <div style="background:linear-gradient(45deg,#25519c,#46c8f9);text-align:center;">\n             <div class="links-wrapper">\n              <div class="links close-link" style="padding:5px;">\n                <img id="close" height="12px" width="12px" class="header-icon" src="',n="/pages/images/dnt_blur_growl_xclose.png",r=a.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"assetUrl",n,{hash:{}}):i,s+=d(n)+'">\n              </div>\n            </div>\n            <div style="padding-top:30px;padding-bottom:10px;">\n                <img class="thing" src="',n="/pages/images/dnt_blur_growl_dnt_logo.png",r=a.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"assetUrl",n,{hash:{}}):i,s+=d(n)+'"/>\n            </div>\n            <div style="padding:0px;">\n                <p style="color:white;font-size:20px;">',n="mm_dntme_blur_isnow",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,s+=d(n)+'</p>\n            </div>\n            <div style="padding:5px;">\n                <img class="thing" src="',n="/pages/images/blur_growl.png",r=a.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"assetUrl",n,{hash:{}}):i,s+=d(n)+'"/>\n            </div>\n            <div style="padding:10px;">\n                <p style="color:white;font-size:20px;">',n="mm_dntme_blur_passwords",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,s+=d(n)+"<br>",n="mm_dntme_blur_privacy",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,s+=d(n)+'</p>\n            </div>\n            <div class="btn" style="margin-bottom:30px;background:#fff;box-shadow:0 2px 0 0 darkblue;">\n                <a id="seeBlur" href="#" style="color:#25519c;font-size:20px;line-height:1.5em;font-weight:bold;">',n="mm_dntme_blur_new",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,s+=d(n)+"</a>\n            </div>\n        </div>\n    </div>\n</div>"}),ABINE_DNTME.CompiledTemplates.dntme_blur_panel}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_compact_panel_a=e.template(function(e,t,a){a=a||e.helpers;var n,i,r,s="",o="function",l=a.helperMissing,c=void 0,d=this.escapeExpression;return s+='<div class="panel compact">\n    <div class="content-wrap">\n        <div class="page-content clearfix">\n            <div class="links close-link"></div>\n            <div class="one">',n="pageContent",r=a.child,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"child",n,{hash:{}}):i,s+=d(n)+'</div>\n            <div class="header-settings-link settings-link">\n                <img class="logo compact" src="',n="/pages/images/dnt-ui-header-settings-grey.png",r=a.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"assetUrl",n,{hash:{}}):i,s+=d(n)+'"/>\n            </div>\n        </div>\n    </div>\n    <div class="footer clearfix">\n        <div class="premium-a-link">\n            <img src="',n="pages/images/dnt-ui-footer-new.png",r=a.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"assetUrl",n,{hash:{}}):i,s+=d(n)+'"/>\n            ',n="mm_dntme_new_premium_added",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,s+=d(n)+'\n        </div>\n    </div>\n    <div class="header dntme">\n        <div class="logo-link">\n          <img class="logo" height="16px" width="17px" src="',n="/pages/images/dnt-ui-header-logo.png",r=a.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"assetUrl",n,{hash:{}}):i,s+=d(n)+'"/>\n          <span class="boldFont">Blur</span>\n        </div>\n    </div>\n</div>'}),ABINE_DNTME.CompiledTemplates.dntme_compact_panel_a}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_compact_panel_b=e.template(function(e,t,a){a=a||e.helpers;var n,i,r,s="",o="function",l=a.helperMissing,c=void 0,d=this.escapeExpression;return s+='<div class="panel compact">\n    <div class="content-wrap">\n        <div class="page-content clearfix">\n            <div class="links close-link"></div>\n            <div class="one">',n="pageContent",r=a.child,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"child",n,{hash:{}}):i,s+=d(n)+'</div>\n            <div class="header-settings-link settings-link">\n                <img class="logo compact" src="',n="/pages/images/dnt-ui-header-settings.png",r=a.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"assetUrl",n,{hash:{}}):i,s+=d(n)+'"/>\n            </div>\n        </div>\n    </div>\n    <div class="footer clearfix">\n        <div class="premium-b-link">\n            <img src="',n="pages/images/dnt-ui-footer-heart.png",r=a.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"assetUrl",n,{hash:{}}):i,s+=d(n)+'"/>\n          ',n="mm_dntme_support_online_privacy",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,s+=d(n)+'\n        </div>\n    </div>\n    <div class="header dntme">\n        <div class="logo-link">\n          <img class="logo" height="16px" width="17px" src="',n="/pages/images/dnt-ui-header-logo.png",r=a.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"assetUrl",n,{hash:{}}):i,s+=d(n)+'"/>\n          <span class="boldFont">Blur</span>\n        </div>\n    </div>\n</div>'}),ABINE_DNTME.CompiledTemplates.dntme_compact_panel_b}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_compact_panel_c=e.template(function(e,t,a){a=a||e.helpers;var n,i,r,s="",o="function",l=a.helperMissing,c=void 0,d=this.escapeExpression;return s+='<div class="panel compact">\n    <div class="content-wrap">\n        <div class="page-content clearfix">\n            <div class="one">',n="pageContent",r=a.child,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"child",n,{hash:{}}):i,s+=d(n)+'</div>\n        </div>\n    </div>\n    <div class="header dntme clearfix">\n        <div class="logo-link-compact">\n          <img class="logo" height="13px" width="13px" src="',n="/pages/images/dnt-ui-header-logo.png",r=a.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"assetUrl",n,{hash:{}}):i,s+=d(n)+'"/>\n          <span class="boldFont">Blur</span>\n        </div>\n        <div class="links-wrapper">\n          <div class="links close-link">\n            <img id="close" height="12px" width="12px" class="header-icon" src="',n="/pages/images/dnt-ui-header-close.png",r=a.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"assetUrl",n,{hash:{}}):i,s+=d(n)+'">\n          </div>\n        </div>\n    </div>\n</div>'}),ABINE_DNTME.CompiledTemplates.dntme_compact_panel_c}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_compact_panel_d=e.template(function(e,t,a,n,i){function r(e){var t,n,i="";return i+='\n        <div class="header" id="complete-setup-div" style="text-align:center;margin-bottom:10px;"><input type="button" id="complete-setup" class="btn btn-primary" value=\'',t="mm_dntme_complete_setup_button",l=a.intl,n=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===p?n.call(e,t,{
hash:{}}):n===h?m.call(e,"intl",t,{hash:{}}):n,i+=_(t)+"'/></div>\n    "}a=a||e.helpers;var s,o,l,c,d="",u=this,p="function",m=a.helperMissing,h=void 0,_=this.escapeExpression;return d+='<div class="panel compact">\n    <div class="content-wrap">\n        <div class="page-content clearfix">\n            <div class="one">',s="pageContent",l=a.child,o=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"),s=typeof o===p?o.call(t,s,{hash:{}}):o===h?m.call(t,"child",s,{hash:{}}):o,d+=_(s)+"</div>\n        </div>\n    </div>\n    ",l=a.registered,s=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"registered"),o=a.unless,c=u.program(1,r,i),c.hash={},c.fn=c,c.inverse=u.noop,s=o.call(t,s,c),(s||0===s)&&(d+=s),d+='\n    <div class="header dntme clearfix">\n        <div class="logo-link-compact">\n          <img class="logo" height="13px" width="13px" src="',s="/pages/images/dnt-ui-header-logo.png",l=a.assetUrl,o=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),s=typeof o===p?o.call(t,s,{hash:{}}):o===h?m.call(t,"assetUrl",s,{hash:{}}):o,d+=_(s)+'"/>\n          <span class="boldFont">Blur</span>\n        </div>\n        <div class="links-wrapper">\n          <div class="links close-link">\n            <img id="close" height="12px" width="12px" class="header-icon" src="',s="/pages/images/dnt-ui-header-close.png",l=a.assetUrl,o=l||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),s=typeof o===p?o.call(t,s,{hash:{}}):o===h?m.call(t,"assetUrl",s,{hash:{}}):o,d+=_(s)+'">\n          </div>\n        </div>\n    </div>\n</div>'}),ABINE_DNTME.CompiledTemplates.dntme_compact_panel_d}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_compact_panel_e=e.template(function(e,t,a,n,i){function r(e,t){var n,i,r="";return r+="\n        ",c=a.notNow,n=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"notNow"),i=a.unless,d=p.program(2,s,t),d.hash={},d.fn=d,d.inverse=p.noop,n=i.call(e,n,d),(n||0===n)&&(r+=n),r+="\n    "}function s(e){var t,n,i="";return i+='\n            <div class="header" id="complete-setup-div" style="text-align:center;margin-bottom:90px;">\n                <div id="welcome-message" style="text-transform:none;">',t="mm_dntme_join_and_protect_1",c=a.intl,n=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===m?n.call(e,t,{hash:{}}):n===_?h.call(e,"intl",t,{hash:{}}):n,i+=f(t)+"<br/>",t="mm_dntme_join_and_protect_2",c=a.intl,n=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===m?n.call(e,t,{hash:{}}):n===_?h.call(e,"intl",t,{hash:{}}):n,i+=f(t)+'</div>\n                <div id="error" style="display:none;color:red;text-transform:none;"></div>\n                <div id="progress-section" style="display:none">\n                    <div class="progress progress-striped active">\n                        <div class="bar bar-info" style="width: 100%;"></div>\n                    </div>\n                    <div class="loading-message" style="text-transform:none;"></div>\n                </div>\n                <div id="form-div">\n                <input class="span2" id="protect-email" type="text" style="width:130px;height:25px;margin:10px;" placeholder="',t="mm_dntme_enter_email_simple",c=a.intl,n=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===m?n.call(e,t,{hash:{}}):n===_?h.call(e,"intl",t,{hash:{}}):n,i+=f(t)+'"/>\n                <input type="button" id="not-now" class="btn" value=\'',t="mm_dntme_intrusive_not_now",c=a.intl,n=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===m?n.call(e,t,{hash:{}}):n===_?h.call(e,"intl",t,{hash:{}}):n,i+=f(t)+'\'/>\n                <input type="button" id="submit-email" class="btn btn-primary" value=\'',t="mm_dntme_intrusive_submit",c=a.intl,n=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===m?n.call(e,t,{hash:{}}):n===_?h.call(e,"intl",t,{hash:{}}):n,i+=f(t)+"'/>\n                </div>\n            </div>\n        "}a=a||e.helpers;var o,l,c,d,u="",p=this,m="function",h=a.helperMissing,_=void 0,f=this.escapeExpression;return u+='<div class="panel compact">\n    <div class="content-wrap">\n        <div class="page-content clearfix">\n            <div class="one">',o="pageContent",c=a.child,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"),o=typeof l===m?l.call(t,o,{hash:{}}):l===_?h.call(t,"child",o,{hash:{}}):l,u+=f(o)+"</div>\n        </div>\n    </div>\n    ",c=a.registered,o=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"registered"),l=a.unless,d=p.program(1,r,i),d.hash={},d.fn=d,d.inverse=p.noop,o=l.call(t,o,d),(o||0===o)&&(u+=o),u+='\n    <div class="header dntme clearfix">\n        <div class="logo-link-compact">\n          <img class="logo" height="13px" width="13px" src="',o="/pages/images/dnt-ui-header-logo.png",c=a.assetUrl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),o=typeof l===m?l.call(t,o,{hash:{}}):l===_?h.call(t,"assetUrl",o,{hash:{}}):l,u+=f(o)+'"/>\n          <span class="boldFont">Blur</span>\n        </div>\n        <div class="links-wrapper">\n          <div class="links close-link">\n            <img id="close" height="12px" width="12px" class="header-icon" src="',o="/pages/images/dnt-ui-header-close.png",c=a.assetUrl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),o=typeof l===m?l.call(t,o,{hash:{}}):l===_?h.call(t,"assetUrl",o,{hash:{}}):l,u+=f(o)+'">\n          </div>\n        </div>\n    </div>\n</div>'}),ABINE_DNTME.CompiledTemplates.dntme_compact_panel_e}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_compact_panel_f=e.template(function(e,t,a,n,i){function r(e,t){var n,i,r="";return r+="\n        ",c=a.notNow,n=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"notNow"),i=a.unless,d=p.program(2,s,t),d.hash={},d.fn=d,d.inverse=p.noop,n=i.call(e,n,d),(n||0===n)&&(r+=n),r+="\n    "}function s(e){var t,n,i="";return i+='\n            <div class="header" id="complete-setup-div" style="text-align:center;margin-bottom:110px;">\n                <div id="welcome-message" style="text-transform:none;">',t="mm_dntme_complete_setup",c=a.intl,n=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===m?n.call(e,t,{hash:{}}):n===_?h.call(e,"intl",t,{hash:{}}):n,i+=f(t)+'</div>\n                <div id="error" style="display:none;color:red;text-transform:none;"></div>\n                <div id="progress-section" style="display:none">\n                    <div class="progress progress-striped active">\n                        <div class="bar bar-info" style="width: 100%;"></div>\n                    </div>\n                    <div class="loading-message" style="text-transform:none;"></div>\n                </div>\n                <div id="form-div">\n                <input class="span2" id="protect-email" type="text" style="width:130px;height:25px;margin:10px 10px 5px 10px;" placeholder="',t="mm_dntme_enter_email_simple",c=a.intl,n=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===m?n.call(e,t,{hash:{}}):n===_?h.call(e,"intl",t,{hash:{}}):n,i+=f(t)+'"/>\n                <input class="span2" id="password-field" type="password" style="width:130px;height:25px;margin:5px 10px 10px 10px;" placeholder="',t="mm_dntme_enter_password_simple",c=a.intl,n=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===m?n.call(e,t,{hash:{}}):n===_?h.call(e,"intl",t,{hash:{}}):n,i+=f(t)+'"/>\n                <input type="button" id="submit-email" class="btn btn-primary" value=\'',t="mm_dntme_intrusive_register",c=a.intl,n=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===m?n.call(e,t,{hash:{}}):n===_?h.call(e,"intl",t,{hash:{}}):n,i+=f(t)+"'/>\n                </div>\n            </div>\n        "}a=a||e.helpers;var o,l,c,d,u="",p=this,m="function",h=a.helperMissing,_=void 0,f=this.escapeExpression;return u+='<div class="panel compact">\n    <div class="content-wrap">\n        <div class="page-content clearfix">\n            <div class="one">',o="pageContent",c=a.child,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"),o=typeof l===m?l.call(t,o,{hash:{}}):l===_?h.call(t,"child",o,{hash:{}}):l,u+=f(o)+"</div>\n        </div>\n    </div>\n    ",c=a.registered,o=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"registered"),l=a.unless,d=p.program(1,r,i),d.hash={},d.fn=d,d.inverse=p.noop,o=l.call(t,o,d),(o||0===o)&&(u+=o),u+='\n    <div class="header dntme clearfix">\n        <div class="logo-link-compact">\n          <img class="logo" height="13px" width="13px" src="',o="/pages/images/dnt-ui-header-logo.png",c=a.assetUrl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),o=typeof l===m?l.call(t,o,{hash:{}}):l===_?h.call(t,"assetUrl",o,{hash:{}}):l,u+=f(o)+'"/>\n          <span class="boldFont">Blur</span>\n        </div>\n        <div class="links-wrapper">\n          <div class="links close-link">\n            <img id="close" height="12px" width="12px" class="header-icon" src="',o="/pages/images/dnt-ui-header-close.png",c=a.assetUrl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),o=typeof l===m?l.call(t,o,{hash:{}}):l===_?h.call(t,"assetUrl",o,{hash:{}}):l,u+=f(o)+'">\n          </div>\n        </div>\n    </div>\n</div>'}),ABINE_DNTME.CompiledTemplates.dntme_compact_panel_f}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_compact_panel_medal=e.template(function(e,t,a){a=a||e.helpers;var n,i,r,s="",o="function",l=a.helperMissing,c=void 0,d=this.escapeExpression;return s+='<div class="panel compact">\n    <div class="content-wrap">\n        <div class="page-content clearfix">\n            <div class="links close-link"></div>\n            <div class="one">',n="pageContent",r=a.child,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"child",n,{hash:{}}):i,s+=d(n)+'</div>\n            <div class="header-settings-link settings-link">\n                <img class="logo compact" src="',n="/pages/images/dnt-ui-header-settings-grey.png",r=a.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"assetUrl",n,{hash:{}}):i,s+=d(n)+'"/>\n            </div>\n        </div>\n    </div>\n</div>'}),ABINE_DNTME.CompiledTemplates.dntme_compact_panel_medal}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_compact_panel_weekly_report=e.template(function(e,t,a){a=a||e.helpers;var n,i,r,s="",o="function",l=a.helperMissing,c=void 0,d=this.escapeExpression;return s+='<div class="panel compact">\n    <div class="content-wrap">\n        <div class="page-content clearfix">\n            <div class="links close-link"></div>\n            <div class="one">',n="pageContent",r=a.child,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"child",n,{hash:{}}):i,s+=d(n)+'</div>\n            <div class="header-settings-link settings-link">\n                <img class="logo compact" src="',n="/pages/images/dnt-ui-header-settings-grey.png",r=a.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"assetUrl",n,{hash:{}}):i,s+=d(n)+'"/>\n            </div>\n        </div>\n    </div>\n    <div class="footer weeklyReport clearfix">\n        <img src="',n="pages/images/dnt-ui-weekly-report.png",r=a.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"assetUrl",n,{hash:{}}):i,s+=d(n)+'"/>\n        <span></span>',n="mm_dntme_weekly_report_title",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,s+=d(n)+" &rarr;\n    </div>\n</div>"}),ABINE_DNTME.CompiledTemplates.dntme_compact_panel_weekly_report}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_dashboard_accounts=e.template(function(e,t,a,n,i){function r(){return"off"}function s(e){var t,n,i="";return i+='"',t="mm_dntme_help_what_will_happen_on_rememberaccounts",D=a.intl,n=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===C?n.call(e,t,{hash:{}}):n===B?S.call(e,"intl",t,{hash:{}}):n,i+=P(t)+'"'}function o(e){var t,n,i="";return i+='"',t="mm_dntme_help_what_will_happen_off_rememberaccounts",D=a.intl,n=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===C?n.call(e,t,{hash:{}}):n===B?S.call(e,"intl",t,{hash:{}}):n,i+=P(t)+'"'}function l(){return"off"}function c(){return"on"}function d(){return"off"}function u(e){var t,n,i="";return i+='"',t="mm_dntme_help_what_will_happen_on_helpmelogin",D=a.intl,n=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===C?n.call(e,t,{hash:{}}):n===B?S.call(e,"intl",t,{hash:{}}):n,i+=P(t)+'"'}function p(e){var t,n,i="";return i+='"',t="mm_dntme_help_what_will_happen_off_helpmelogin",D=a.intl,n=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===C?n.call(e,t,{hash:{}}):n===B?S.call(e,"intl",t,{hash:{}}):n,i+=P(t)+'"'}function m(){return"off"}function h(){return"on"}function _(){return"off"}function f(e){var t,n,i="";return i+='"',t="mm_dntme_help_what_will_happen_on_submit_account",D=a.intl,n=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===C?n.call(e,t,{hash:{}}):n===B?S.call(e,"intl",t,{hash:{}}):n,i+=P(t)+'"'}function g(e){var t,n,i="";return i+='"',t="mm_dntme_help_what_will_happen_off_submit_account",D=a.intl,n=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===C?n.call(e,t,{hash:{}}):n===B?S.call(e,"intl",t,{hash:{}}):n,i+=P(t)+'"'}function y(){return"off"}function b(){return"on"}function v(){return"off"}function w(e){var t,n,i="";return i+='"',t="mm_dntme_help_what_will_happen_on_suggeststrongpassword",D=a.intl,n=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===C?n.call(e,t,{hash:{}}):n===B?S.call(e,"intl",t,{hash:{}}):n,i+=P(t)+'"'}function k(e){var t,n,i="";return i+='"',t="mm_dntme_help_what_will_happen_off_suggeststrongpassword",D=a.intl,n=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===C?n.call(e,t,{hash:{}}):n===B?S.call(e,"intl",t,{hash:{}}):n,i+=P(t)+'"'}function E(){return"off"}function A(){return"on"}a=a||e.helpers;var N,T,D,M,I="",x=this,C="function",S=a.helperMissing,B=void 0,P=this.escapeExpression;return I+='<div id="account" class="clearfix setting-row ',D=a.blacklist,N=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),N=null===N||void 0===N||N===!1?N:ABINE_DNTME.Duckbone.Handlebars.getAttr(N,"accountOff"),T=a["if"],M=x.program(1,r,i),M.hash={},M.fn=M,M.inverse=x.noop,N=T.call(t,N,M),(N||0===N)&&(I+=N),I+='" data-type="blacklist" data-name="save_account">\n  <div class="message" style="width:160px;" title=',D=a.blacklist,N=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),N=null===N||void 0===N||N===!1?N:ABINE_DNTME.Duckbone.Handlebars.getAttr(N,"accountOff"),T=a["if"],M=x.program(3,s,i),M.hash={},M.fn=M,M.inverse=x.program(5,o,i),N=T.call(t,N,M),(N||0===N)&&(I+=N),I+=">",N="mm_dntme_accounts_save_account",D=a.intl,T=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),N=typeof T===C?T.call(t,N,{hash:{}}):T===B?S.call(t,"intl",N,{hash:{}}):T,I+=P(N)+'</div>\n  <div class="word switch ',D=a.blacklist,N=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),N=null===N||void 0===N||N===!1?N:ABINE_DNTME.Duckbone.Handlebars.getAttr(N,"accountOff"),T=a["if"],M=x.program(7,l,i),M.hash={},M.fn=M,M.inverse=x.program(9,c,i),N=T.call(t,N,M),(N||0===N)&&(I+=N),I+='">\n    <div class="knob"></div>\n  </div>\n  <div class="for">',N="mm_dntme_for_this_site",D=a.intl,T=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),N=typeof T===C?T.call(t,N,{hash:{}}):T===B?S.call(t,"intl",N,{hash:{}}):T,I+=P(N)+'</div>\n</div>\n\n<div id="account" class="clearfix setting-row ',D=a.blacklist,N=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),N=null===N||void 0===N||N===!1?N:ABINE_DNTME.Duckbone.Handlebars.getAttr(N,"loginOff"),T=a["if"],M=x.program(11,d,i),M.hash={},M.fn=M,M.inverse=x.noop,N=T.call(t,N,M),(N||0===N)&&(I+=N),I+='" data-type="blacklist" data-name="account">\n  <div class="message" style="width:160px;" title=',D=a.blacklist,N=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),N=null===N||void 0===N||N===!1?N:ABINE_DNTME.Duckbone.Handlebars.getAttr(N,"loginOff"),T=a["if"],M=x.program(13,u,i),M.hash={},M.fn=M,M.inverse=x.program(15,p,i),N=T.call(t,N,M),(N||0===N)&&(I+=N),I+=">",N="mm_dntme_accounts_help_login",D=a.intl,T=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),N=typeof T===C?T.call(t,N,{hash:{}}):T===B?S.call(t,"intl",N,{hash:{}}):T,I+=P(N)+'</div>\n  <div class="word switch ',D=a.blacklist,N=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),N=null===N||void 0===N||N===!1?N:ABINE_DNTME.Duckbone.Handlebars.getAttr(N,"loginOff"),T=a["if"],M=x.program(17,m,i),M.hash={},M.fn=M,M.inverse=x.program(19,h,i),N=T.call(t,N,M),(N||0===N)&&(I+=N),I+='">\n    <div class="knob"></div>\n  </div>\n  <div class="for">',N="mm_dntme_for_this_site",D=a.intl,T=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),N=typeof T===C?T.call(t,N,{hash:{}}):T===B?S.call(t,"intl",N,{hash:{}}):T,I+=P(N)+'</div>\n</div>\n\n<div id="submit_account" class="clearfix setting-row ',D=a.blacklist,N=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),N=null===N||void 0===N||N===!1?N:ABINE_DNTME.Duckbone.Handlebars.getAttr(N,"submitAccountOff"),T=a["if"],M=x.program(21,_,i),M.hash={},M.fn=M,M.inverse=x.noop,N=T.call(t,N,M),(N||0===N)&&(I+=N),I+='" data-type="blacklist" data-name="submit_account">\n  <div class="message" style="width:160px;" title=',D=a.blacklist,N=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),N=null===N||void 0===N||N===!1?N:ABINE_DNTME.Duckbone.Handlebars.getAttr(N,"submitAccountOff"),T=a["if"],M=x.program(23,f,i),M.hash={},M.fn=M,M.inverse=x.program(25,g,i),N=T.call(t,N,M),(N||0===N)&&(I+=N),I+=">",N="mm_dntme_accounts_submit_account",D=a.intl,T=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),N=typeof T===C?T.call(t,N,{hash:{}}):T===B?S.call(t,"intl",N,{hash:{}}):T,I+=P(N)+'</div>\n  <div class="word switch ',D=a.blacklist,N=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),N=null===N||void 0===N||N===!1?N:ABINE_DNTME.Duckbone.Handlebars.getAttr(N,"submitAccountOff"),T=a["if"],M=x.program(27,y,i),M.hash={},M.fn=M,M.inverse=x.program(29,b,i),N=T.call(t,N,M),(N||0===N)&&(I+=N),I+='">\n    <div class="knob"></div>\n  </div>\n  <div class="for">',N="mm_dntme_for_this_site",D=a.intl,T=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),N=typeof T===C?T.call(t,N,{hash:{}}):T===B?S.call(t,"intl",N,{hash:{}}):T,I+=P(N)+'</div>\n</div>\n\n<div id="password" class="clearfix setting-row ',D=a.blacklist,N=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),N=null===N||void 0===N||N===!1?N:ABINE_DNTME.Duckbone.Handlebars.getAttr(N,"passwordOff"),T=a["if"],M=x.program(31,v,i),M.hash={},M.fn=M,M.inverse=x.noop,N=T.call(t,N,M),(N||0===N)&&(I+=N),I+='" data-type="blacklist" data-name="password">\n  <div class="message" style="width:160px;" title=',D=a.blacklist,N=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),N=null===N||void 0===N||N===!1?N:ABINE_DNTME.Duckbone.Handlebars.getAttr(N,"passwordOff"),T=a["if"],M=x.program(33,w,i),M.hash={},M.fn=M,M.inverse=x.program(35,k,i),N=T.call(t,N,M),(N||0===N)&&(I+=N),I+=">",N="mm_dntme_accounts_password",D=a.intl,T=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),N=typeof T===C?T.call(t,N,{hash:{}}):T===B?S.call(t,"intl",N,{hash:{}}):T,I+=P(N)+'</div>\n  <div class="word switch ',D=a.blacklist,N=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),N=null===N||void 0===N||N===!1?N:ABINE_DNTME.Duckbone.Handlebars.getAttr(N,"passwordOff"),T=a["if"],M=x.program(37,E,i),M.hash={},M.fn=M,M.inverse=x.program(39,A,i),N=T.call(t,N,M),(N||0===N)&&(I+=N),I+='">\n    <div class="knob"></div>\n  </div>\n  <div class="for">',N="mm_dntme_for_this_site",D=a.intl,T=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),N=typeof T===C?T.call(t,N,{hash:{}}):T===B?S.call(t,"intl",N,{hash:{}}):T,I+=P(N)+"</div>\n</div>"}),ABINE_DNTME.CompiledTemplates.dntme_dashboard_accounts}),ABINE_DNTME.define("abine/views/accountsDashboard",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies","abine/views/pageTracker","abine/views/settingsChanged","abine/views/dntmePageBase","abine/timer"],function(e,t,a,n,i,r,s,o,l,c,d){var u=c.extend({templateName:"dntme_dashboard_accounts",events:{"click .setting-row":"toggleSwitch","click .more-settings":"showSettings","click .go-back":"goBack","click a.accountsDashboard":"accountsDashboard"},afterInitialize:function(){if(this.doc=this.el.document,this.options.highlight){var t=this.$("#"+this.options.highlight);t&&t[0]&&(t[0].scrollIntoView(),t.addClass("highlight"))}this.options.timeout&&d.setTimeout(e.bind(function(){this.trigger("close")},this),this.options.timeout)},goBack:function(){this.trigger("change-dashboard","dashboard")},accountsDashboard:function(e){e.preventDefault(),s.webapp.openAccounts(),this.trigger("close")},createChildren:function(){return this.children={},this.children}});return u}),ABINE_DNTME.define("abine/views/dashboard",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies","abine/views/pageTracker","abine/intl","abine/timer","abine/responseCodes","abine/views/settingsDashboard"],function(e,t,a,n,i,r,s,o,l,c,d,u){var p=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/i,m=a.View.extend({tagName:"div",templateName:"dntme_dashboard_login",afterInitialize:function(){this.doc=this.el.ownerDocument;var e=this;c.setTimeout(function(){e.trigger("mask-passwords")},100)}}),h=a.View.extend({tagName:"div",templateName:"dntme_dashboard_main_grid",afterInitialize:function(){this.doc=this.el.ownerDocument}}),_=a.View.extend({tagName:"div",templateName:"dntme_dashboard_main",className:"dntme_dashboard",events:{"click .show-details":"showChildDashboard","click #register":"register","click #login":"login","submit #frm":"loginOrRegister","click #forgotPassword":"forgotPassword","click #whySignIn":"whySignIn","click .cell":"showChildDashboard","click .main-tracker-title":"showChildDashboard","click #switchLogin":"switchLogin","click #accountSwitch":"triggerSettings","click #walletSwitch":"triggerSettings","click #maskingSwitch":"triggerSettings","click #trackingSwitch":"triggerSettings","click #default-button":"makeDefault","click .search-row":"showSearch"},showInlineSettings:function(e,a){t(".mobileCell, .syncCell, .dntme_dntStats",this.el.ownerDocument).hide(),t(".trackingCell, .maskingCell",this.el.ownerDocument).removeClass("b"),this.$("#inline-site-settings").show(),this.settingsView?(this.settingsView.options.highlight=e,this.settingsView.options.switchTo=a,this.settingsView.reload()):(this.settingsView=this.getInlineSettings(e,a),delete this.options.highlight)},showSuggestButton:function(){this.$(".suggested-option .description").text("for "+this.options.domain),this.$(".suggested-option").show(),this.$(".search-option").hide(),this.trigger("fav-icons")},showSearch:function(e){e.preventDefault(),this.options.contentManager.showSearch(this.options),this.trigger("close")},makeDefault:function(){this.messenger.send("update:tabData:autofill",{})},getInlineSettings:function(t,a){var n=this.model,i=this.globalData,r=new u({el:this.$("#inline-site-settings")[0],inline:!0,tabData:n,globalData:i,doc:this.el.ownerDocument,messenger:this.messenger,highlight:t,contentManager:this.contentManager,settingsView:"site-settings",switchTo:a});return r.transferEvents(["resize","max-height"],this),n.on("settings-changed",e.debounce(e.bind(function(){this.model.fetch({success:e.bind(function(){this.children.mainGrid.render()},this)})},this),500)),r},triggerSettings:function(a){for(var n="off",i=a.target;!t(i).data("group");)i=i.parentNode;if(this.$(i).hasClass("on")&&(n="on"),!t(i).data("changing"))return t(i).data("changing",!0),t(".knob",i).animate({marginLeft:"on"==n?0:20},e.bind(function(){t(i).removeData("changing"),t(i).toggleClass("on").toggleClass("off")})),this.showInlineSettings(t(i).data("group"),n),a.preventDefault(),!1},afterInitialize:function(){if(this.toolBarPanelId=7000066,this.messenger.send("update:panelActivity:impression",{panelId:this.toolBarPanelId}),this.model.get("loggedIn")?this.messenger.send("update:panelActivity:masked",{panelId:this.toolBarPanelId}):this.messenger.send("update:panelActivity:disclosed",{panelId:this.toolBarPanelId}),this.doc=this.el.ownerDocument,this.messenger=this.options.messenger,this.contentManager=this.options.contentManager,t("#protect-email, #password-field",this.el).css("height","25px"),this.options.highlight&&(this.model.get("loggedIn")?r.setTimeout(e.bind(function(){this.showInlineSettings(this.options.highlight,"no-switch"),delete this.options.highlight},this),500):delete this.options.highlight),this.model.get("loggedIn")){var a=new n.AccountCollection;a.fetchLoginsByDomain(this.options.domain,e.bind(function(){if(a.models.length>0)return void this.showSuggestButton();var t=new n.DisposableEmailCollection;t.fetchAllByDomain(this.options.domain,e.bind(function(){if(t.models.length>0)return void this.showSuggestButton();var a=new n.DisposableCardCollection;a.fetchAllByDomain(this.options.domain,e.bind(function(){},this))},this))},this))}},switchLogin:function(e){e.preventDefault(),t(".lockBit",this.el).hide(),t("#login",this.el).val(l.getText("mm_dntme_sign_in")),t(".loginBit",this.el).show(),t("#protect-email",this.el).val(""),this.contentManager.preferences.removePref("oldEmail"),this.contentManager.preferences.setPref("loginNotLock","true")},whySignIn:function(e){e.preventDefault(),this.trigger("change-dashboard","login_help")},showChildDashboard:function(e){e.preventDefault();var a=t(e.target).data("dashboard");return a||(a=t(e.target.parentNode).data("dashboard")),"anywhere"==a?(this.model.get("hasMobileApp")||s.webapp.openDntAnywhere(),void this.trigger("close")):"accounts"==a?void this.accountsDashboard():"masking"==a?void this.maskingDashboard():"wallet"==a?void this.walletDashboard():void this.trigger("change-dashboard",a)},accountsDashboard:function(){s.webapp.openAccounts(),this.trigger("close")},maskingDashboard:function(){s.webapp.openMasking(),this.trigger("close")},walletDashboard:function(){s.webapp.openWallet(),this.trigger("close")},forgotPassword:function(e){e.preventDefault(),this.messenger.send("update:panelActivity:closed",{panelId:this.toolBarPanelId}),s.webapp.openForgotPassword(),this.trigger("close")},loginOrRegister:function(e){this.model.get("email")?this.login(e):this.register(e)},login:function(a){function n(e,a){try{m.get(0).ownerDocument&&(t(".loading-message",m).text(l.getText("mm_loading_display_login")),e<a&&(h=c.setTimeout(function(){n(e+1,a)},500)))}catch(e){}}a&&a.preventDefault(),this.trigger("ignore-blur",!0);var i=this.$("#protect-email").val(),r=this.$("#password-field").val(),o=this.$("#mfa-code-field").val(),d=this.$("#error");if(d.hide(),!i.match(p))return this.$("#welcome-message").hide(),d.text(l.getText("mm_dntme_invalid_email")).show(),this.trigger("resize"),void this.trigger("ignore-blur",!1);if(0==r.length)return this.$("#welcome-message").hide(),d.text(l.getText("mm_dntme_invalid_password")).show(),this.trigger("resize"),void this.trigger("ignore-blur",!1);var u={email:i,password:r,mfa_code:o},m=this.$("#progress-section");m.height(this.$("#form-div").height()-10);var h=null;n(0,20),m.show(),this.$("#form-div").hide(),s.licenseModule.login(u,e.bind(function(t,a){this.trigger("ignore-blur",!1),this.processRegistration(t,a,u,e.bind(function(e){c.clearTimeout(h),m.hide(),e||(this.messenger.send("update:panelActivity:masked",{panelId:this.panelId}),this.$("#complete-setup-div").hide(),this.trigger("change-dashboard","dashboard"))},this))},this)),this.trigger("resize")},register:function(a){function n(e,a){try{u.get(0).ownerDocument&&(t(".loading-message",u).text(l.getText("mm_loading_display_register_use"+Math.floor(e/10))),e<a&&(m=c.setTimeout(function(){n(e+1,a)},500)))}catch(e){}}a&&a.preventDefault(),this.trigger("ignore-blur",!0),this.$("#welcome-message").show();var i=this.$("#protect-email").val(),r=this.$("#password-field").val(),o=this.$("#error");if(o.hide(),!i.match(p))return this.$("#welcome-message").hide(),o.text(l.getText("mm_dntme_invalid_email")).show(),this.trigger("resize"),void this.trigger("ignore-blur",!1);if(0==r.length)return this.$("#welcome-message").hide(),o.text(l.getText("mm_dntme_invalid_password")).show(),this.trigger("resize"),void this.trigger("ignore-blur",!1);var d={email:i,password:r,password_hint:l.getText("mm_pwhint_default"),register_type:"dnt_panel",send_password_email:!1},u=this.$("#progress-section");u.height(this.$("#form-div").height()-10);var m=null;n(0,40),u.show(),this.$("#form-div").hide(),s.licenseModule.register(d,e.bind(function(t,a){this.trigger("ignore-blur",!1),this.processRegistration(t,a,d,e.bind(function(e){c.clearTimeout(m),u.hide(),e||(this.messenger.send("update:panelActivity:masked",{panelId:this.panelId}),this.$("#complete-setup-div").hide(),c.setTimeout(function(){s.webapp.openTour()},1e3),this.trigger("close"))},this))},this)),this.trigger("resize")},processRegistration:function(t,a,n,i){if(t){this.messenger.send("update:panelActivity:disclosed",{panelId:this.panelId});var r=l.getText("mm_dntme_register_error"),o=t.responseJSON&&t.responseJSON.data?t.responseJSON.data.errors:null;"invalid email address"==t.responseJSON.error_code?r=l.getText("mm_dntme_invalid_email_server_error"):"mfa code required"==t.responseJSON.error_code?(r="You have enabled 2-factor authentication.  Please enter authentication code below:",this.$("#login-section").hide(),this.$("#mfa-section").show(),this.$("#error, #progress-section").hide(),this.$("#complete-setup-div, #form-div").show(),this.trigger("render")):"wrong password"==t.responseJSON.error_code?r=l.getText("mm_dntme_wrong_password"):"no account found for email"==t.responseJSON.error_code?r=l.getText("mm_dntme_wrong_email"):"version not allowed"==t.responseJSON.error_code?r=l.getText("mm_dntme_version_not_allowed"):"account has been locked"==t.responseJSON.error_code?r=l.getText("mm_dntme_account_locked"):t.responseJSON.error_code==d.SCHEDULED_DOWNTIME?r=l.getText("mm_dntme_server_maintenance"):o&&o.email&&("has already been taken"==o.email[0]?r=l.getText("mm_dntme_duplicate_email",[n.email]):"was used for MaskMe Heavy"==o.email[0]&&(r=l.getText("mm_dntme_version_not_allowed"))),this.$("#error").html(r).show(),t.responseJSON&&t.responseJSON.data&&1==t.responseJSON.data.generated_password&&this.$("#error #loginButton").click(e.bind(function(e){return s.webapp.openPasswordSetupPage(n.email),e.preventDefault(),!1},this)),this.$("#error #retryEmail, #error #loginButton").click(e.bind(this.retryEmail,this)),this.$("#error #dnt2upgrade").click(s.webapp.openDnt2UpgradePage),this.trigger("resize"),i(r)}else this.trigger("refresh-preferences"),i()},retryEmail:function(e){e&&e.preventDefault(),this.$("#error, #progress-section").hide(),this.$("#complete-setup-div, #form-div").show(),this.trigger("render")},createChildren:function(){return this.children={trackersTitle:new o.TitleView({model:this.model,doc:this.el.ownerDocument}),mainGrid:new h({model:this.model,doc:this.el.ownerDocument})},this.globalData=this.globalData||new n.GlobalData({messenger:this.options.messenger}),this.model.showSettings&&(this.settingsView=this.getInlineSettings(this.options.highlight,"no-switch"),delete this.options.highlight),this.children.trackersTitle.transferEvents(["open:understanding:tracker"],this),this.model.get("loggedIn")||(this.model.get("email")?this.panelId=2000011:this.panelId=3000011,this.messenger.send("update:panelActivity:impression",{panelId:this.panelId}),this.children.loginSection=new m({model:this.model,doc:this.el.ownerDocument}),this.children.loginSection.transferEvents(["mask-passwords"],this)),this.children}});return _}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_dashboard_ignore_settings=e.template(function(e,t,a,n,i){
function r(e,t){var n,i,r="";return r+=' \n  <div id="bl-save_account-region" class="ignore-region" style="max-height:185px;overflow: scroll;">\n    ',ne=a.blacklistCollection,n=ne||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"blacklistCollection"),i=a.each,ie=se.program(2,s,t),ie.hash={},ie.fn=ie,ie.inverse=se.noop,n=i.call(e,n,ie),(n||0===n)&&(r+=n),r+='\n  </div>\n  <div id="bl-account-region" class="ignore-region" style="display:none;max-height:185px;overflow: scroll;">\n    ',ne=a.blacklistCollection,n=ne||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"blacklistCollection"),i=a.each,ie=se.program(8,d,t),ie.hash={},ie.fn=ie,ie.inverse=se.noop,n=i.call(e,n,ie),(n||0===n)&&(r+=n),r+='\n  </div>\n  <div id="bl-submit_account-region" class="ignore-region" style="display:none;max-height:185px;overflow: scroll;">\n    ',ne=a.blacklistCollection,n=ne||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"blacklistCollection"),i=a.each,ie=se.program(14,h,t),ie.hash={},ie.fn=ie,ie.inverse=se.noop,n=i.call(e,n,ie),(n||0===n)&&(r+=n),r+='\n  </div>\n  <div id="bl-save_card-region" class="ignore-region" style="display:none;max-height:185px;overflow: scroll;">\n    ',ne=a.blacklistCollection,n=ne||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"blacklistCollection"),i=a.each,ie=se.program(20,y,t),ie.hash={},ie.fn=ie,ie.inverse=se.noop,n=i.call(e,n,ie),(n||0===n)&&(r+=n),r+='\n  </div>\n  <div id="bl-identity-region" class="ignore-region" style="display:none;max-height:185px;overflow: scroll;">\n    ',ne=a.blacklistCollection,n=ne||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"blacklistCollection"),i=a.each,ie=se.program(26,k,t),ie.hash={},ie.fn=ie,ie.inverse=se.noop,n=i.call(e,n,ie),(n||0===n)&&(r+=n),r+='\n  </div>\n  <div id="bl-tracker-region" class="ignore-region" style="display:none;max-height:185px;overflow: scroll;">\n    ',ne=a.blacklistCollection,n=ne||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"blacklistCollection"),i=a.each,ie=se.program(32,T,t),ie.hash={},ie.fn=ie,ie.inverse=se.noop,n=i.call(e,n,ie),(n||0===n)&&(r+=n),r+='\n  </div>\n  <div id="bl-address-region" class="ignore-region" style="display:none;max-height:185px;overflow: scroll;">\n    ',ne=a.blacklistCollection,n=ne||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"blacklistCollection"),i=a.each,ie=se.program(38,x,t),ie.hash={},ie.fn=ie,ie.inverse=se.noop,n=i.call(e,n,ie),(n||0===n)&&(r+=n),r+='\n  </div>\n  <div id="bl-card-region" class="ignore-region" style="display:none;max-height:185px;overflow: scroll;">\n    ',ne=a.blacklistCollection,n=ne||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"blacklistCollection"),i=a.each,ie=se.program(44,P,t),ie.hash={},ie.fn=ie,ie.inverse=se.noop,n=i.call(e,n,ie),(n||0===n)&&(r+=n),r+='\n  </div>\n  <div id="bl-email-region" class="ignore-region" style="display:none;max-height:185px;overflow: scroll;">\n    ',ne=a.blacklistCollection,n=ne||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"blacklistCollection"),i=a.each,ie=se.program(50,H,t),ie.hash={},ie.fn=ie,ie.inverse=se.noop,n=i.call(e,n,ie),(n||0===n)&&(r+=n),r+='\n  </div>\n  <div id="bl-password-region" class="ignore-region" style="display:none;max-height:185px;overflow: scroll;">\n    ',ne=a.blacklistCollection,n=ne||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"blacklistCollection"),i=a.each,ie=se.program(56,j,t),ie.hash={},ie.fn=ie,ie.inverse=se.noop,n=i.call(e,n,ie),(n||0===n)&&(r+=n),r+='\n  </div>\n  <div id="bl-phone-region" class="ignore-region" style="display:none;max-height:185px;overflow: scroll;">\n    ',ne=a.blacklistCollection,n=ne||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"blacklistCollection"),i=a.each,ie=se.program(62,$,t),ie.hash={},ie.fn=ie,ie.inverse=se.noop,n=i.call(e,n,ie),(n||0===n)&&(r+=n),r+='\n  </div>\n    <div id="bl-real_card-region" class="ignore-region" style="display:none;max-height:185px;overflow: scroll;">\n    ',ne=a.blacklistCollection,n=ne||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"blacklistCollection"),i=a.each,ie=se.program(68,Y,t),ie.hash={},ie.fn=ie,ie.inverse=se.noop,n=i.call(e,n,ie),(n||0===n)&&(r+=n),r+='\n  </div>\n  <div class="blacklist-entry blacklist-empty" style="margin-left:2em;display:none">',n="mm_dntme_settings_ignore_no_results",ne=a.intl,i=ne||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===oe?i.call(e,n,{hash:{}}):i===ce?le.call(e,"intl",n,{hash:{}}):i,r+=de(n)+'. <a href="#" class="clear-blacklist-search">',n="mm_dntme_settings_ignore_clear_search",ne=a.intl,i=ne||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===oe?i.call(e,n,{hash:{}}):i===ce?le.call(e,"intl",n,{hash:{}}):i,r+=de(n)+'</a></div>\n  </br>\n  <input style="margin-left:3em;height:2.5em" type="text" id="blacklist-search" placeholder="Search">\n  <div style="margin-left:6em;display:none" id="blacklist-no-entry">',n="mm_dntme_settings_ignore_no_web",ne=a.intl,i=ne||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===oe?i.call(e,n,{hash:{}}):i===ce?le.call(e,"intl",n,{hash:{}}):i,r+=de(n)+"</div>\n  "}function s(e,t){var n,i,r="";return r+="\n      ",n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"save_account"),i=a["if"],ie=se.program(3,o,t),ie.hash={},ie.fn=ie,ie.inverse=se.noop,n=i.call(e,n,ie),(n||0===n)&&(r+=n),r+="\n    "}function o(e,t){var n,i,r="";return r+='<div class="container-',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof n===oe?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.domain",{hash:{}})),r+=de(n)+' blacklist-entry setting-row" data-name="save_account" data-type="blacklist" data-domain="',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof n===oe?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.domain",{hash:{}})),r+=de(n)+'" data-id="',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof n===oe?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.id",{hash:{}})),r+=de(n)+'">\n        <div class="message">',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof n===oe?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.domain",{hash:{}})),r+=de(n)+'</div>\n        <div class="word switch ',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"save_account"),i=a["if"],ie=se.program(4,l,t),ie.hash={},ie.fn=ie,ie.inverse=se.program(6,c,t),n=i.call(e,n,ie),(n||0===n)&&(r+=n),r+='" style="float:right;"\n        >\n          <div class="knob"></div>\n        </div>\n      </div>'}function l(){return"off"}function c(){return"on"}function d(e,t){var n,i,r="";return r+="\n      ",n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"account"),i=a["if"],ie=se.program(9,u,t),ie.hash={},ie.fn=ie,ie.inverse=se.noop,n=i.call(e,n,ie),(n||0===n)&&(r+=n),r+="\n    "}function u(e,t){var n,i,r="";return r+='<div class="container-',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof n===oe?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.domain",{hash:{}})),r+=de(n)+' blacklist-entry setting-row" data-name="account" data-type="blacklist" data-domain="',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof n===oe?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.domain",{hash:{}})),r+=de(n)+'" data-id="',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof n===oe?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.id",{hash:{}})),r+=de(n)+'">\n        <div class="message">',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof n===oe?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.domain",{hash:{}})),r+=de(n)+'</div>\n        <div class="word switch ',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"account"),i=a["if"],ie=se.program(10,p,t),ie.hash={},ie.fn=ie,ie.inverse=se.program(12,m,t),n=i.call(e,n,ie),(n||0===n)&&(r+=n),r+='" style="float:right;">\n          <div class="knob"></div>\n        </div>\n      </div>'}function p(){return"off"}function m(){return"on"}function h(e,t){var n,i,r="";return r+="\n      ",n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"submit_account"),i=a["if"],ie=se.program(15,_,t),ie.hash={},ie.fn=ie,ie.inverse=se.noop,n=i.call(e,n,ie),(n||0===n)&&(r+=n),r+="\n    "}function _(e,t){var n,i,r="";return r+='<div class="container-',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof n===oe?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.domain",{hash:{}})),r+=de(n)+' blacklist-entry setting-row" data-name="submit_account" data-type="blacklist" data-domain="',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof n===oe?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.domain",{hash:{}})),r+=de(n)+'" data-id="',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof n===oe?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.id",{hash:{}})),r+=de(n)+'">\n        <div class="message">',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof n===oe?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.domain",{hash:{}})),r+=de(n)+'</div>\n        <div class="word switch ',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"submit_account"),i=a["if"],ie=se.program(16,f,t),ie.hash={},ie.fn=ie,ie.inverse=se.program(18,g,t),n=i.call(e,n,ie),(n||0===n)&&(r+=n),r+='" style="float:right;">\n          <div class="knob"></div>\n        </div>\n      </div>'}function f(){return"off"}function g(){return"on"}function y(e,t){var n,i,r="";return r+="\n      ",n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"save_card"),i=a["if"],ie=se.program(21,b,t),ie.hash={},ie.fn=ie,ie.inverse=se.noop,n=i.call(e,n,ie),(n||0===n)&&(r+=n),r+="\n    "}function b(e,t){var n,i,r="";return r+='<div class="container-',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof n===oe?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.domain",{hash:{}})),r+=de(n)+' blacklist-entry setting-row" data-name="save_card" data-type="blacklist" data-domain="',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof n===oe?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.domain",{hash:{}})),r+=de(n)+'" data-id="',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof n===oe?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.id",{hash:{}})),r+=de(n)+'">\n        <div class="message">',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof n===oe?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.domain",{hash:{}})),r+=de(n)+'</div>\n        <div class="word switch ',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"save_card"),i=a["if"],ie=se.program(22,v,t),ie.hash={},ie.fn=ie,ie.inverse=se.program(24,w,t),n=i.call(e,n,ie),(n||0===n)&&(r+=n),r+='" style="float:right;">\n          <div class="knob"></div>\n        </div>\n      </div>'}function v(){return"off"}function w(){return"on"}function k(e,t){var n,i,r="";return r+="\n      ",n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"identity"),i=a["if"],ie=se.program(27,E,t),ie.hash={},ie.fn=ie,ie.inverse=se.noop,n=i.call(e,n,ie),(n||0===n)&&(r+=n),r+="\n    "}function E(e,t){var n,i,r="";return r+='<div class="container-',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof n===oe?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.domain",{hash:{}})),r+=de(n)+' blacklist-entry setting-row" data-name="identity" data-type="blacklist" data-domain="',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof n===oe?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.domain",{hash:{}})),r+=de(n)+'" data-id="',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof n===oe?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.id",{hash:{}})),r+=de(n)+'">\n        <div class="message">',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof n===oe?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.domain",{hash:{}})),r+=de(n)+'</div>\n        <div class="word switch ',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"identity"),i=a["if"],ie=se.program(28,A,t),ie.hash={},ie.fn=ie,ie.inverse=se.program(30,N,t),n=i.call(e,n,ie),(n||0===n)&&(r+=n),r+='" style="float:right;">\n          <div class="knob"></div>\n        </div>\n      </div>'}function A(){return"off"}function N(){return"on"}function T(e,t){var n,i,r="";return r+="\n      ",n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"tracker"),i=a["if"],ie=se.program(33,D,t),ie.hash={},ie.fn=ie,ie.inverse=se.noop,n=i.call(e,n,ie),(n||0===n)&&(r+=n),r+="\n    "}function D(e,t){var n,i,r="";return r+='<div class="container-',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof n===oe?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.domain",{hash:{}})),r+=de(n)+' blacklist-entry setting-row" data-name="tracker" data-type="blacklist" data-domain="',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof n===oe?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.domain",{hash:{}})),r+=de(n)+'" data-id="',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof n===oe?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.id",{hash:{}})),r+=de(n)+'">\n        <div class="message">',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof n===oe?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.domain",{hash:{}})),r+=de(n)+'</div>\n        <div class="word switch ',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"tracker"),i=a["if"],ie=se.program(34,M,t),ie.hash={},ie.fn=ie,ie.inverse=se.program(36,I,t),n=i.call(e,n,ie),(n||0===n)&&(r+=n),r+='" style="float:right;">\n          <div class="knob"></div>\n        </div>\n      </div>'}function M(){return"off"}function I(){return"on"}function x(e,t){var n,i,r="";return r+="\n      ",n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"address"),i=a["if"],ie=se.program(39,C,t),ie.hash={},ie.fn=ie,ie.inverse=se.noop,n=i.call(e,n,ie),(n||0===n)&&(r+=n),r+="\n    "}function C(e,t){var n,i,r="";return r+='<div class="container-',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof n===oe?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.domain",{hash:{}})),r+=de(n)+' blacklist-entry setting-row" data-name="address" data-type="blacklist" data-domain="',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof n===oe?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.domain",{hash:{}})),r+=de(n)+'" data-id="',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof n===oe?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.id",{hash:{}})),r+=de(n)+'">\n        <div class="message">',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof n===oe?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.domain",{hash:{}})),r+=de(n)+'</div>\n        <div class="word switch ',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"address"),i=a["if"],ie=se.program(40,S,t),ie.hash={},ie.fn=ie,ie.inverse=se.program(42,B,t),n=i.call(e,n,ie),(n||0===n)&&(r+=n),r+='" style="float:right;">\n          <div class="knob"></div>\n        </div>\n      </div>'}function S(){return"off"}function B(){return"on"}function P(e,t){var n,i,r="";return r+="\n      ",n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"card"),i=a["if"],ie=se.program(45,z,t),ie.hash={},ie.fn=ie,ie.inverse=se.noop,n=i.call(e,n,ie),(n||0===n)&&(r+=n),r+="\n    "}function z(e,t){var n,i,r="";return r+='<div class="container-',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof n===oe?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.domain",{hash:{}})),r+=de(n)+' blacklist-entry setting-row" data-name="card" data-type="blacklist" data-domain="',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof n===oe?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.domain",{hash:{}})),r+=de(n)+'" data-id="',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof n===oe?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.id",{hash:{}})),r+=de(n)+'">\n        <div class="message">',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof n===oe?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.domain",{hash:{}})),r+=de(n)+'</div>\n        <div class="word switch ',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"card"),i=a["if"],ie=se.program(46,F,t),ie.hash={},ie.fn=ie,ie.inverse=se.program(48,O,t),n=i.call(e,n,ie),(n||0===n)&&(r+=n),r+='" style="float:right;">\n          <div class="knob"></div>\n        </div>\n      </div>'}function F(){return"off"}function O(){return"on"}function H(e,t){var n,i,r="";return r+="\n      ",n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"email"),i=a["if"],ie=se.program(51,R,t),ie.hash={},ie.fn=ie,ie.inverse=se.noop,n=i.call(e,n,ie),(n||0===n)&&(r+=n),r+="\n    "}function R(e,t){var n,i,r="";return r+='<div class="container-',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof n===oe?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.domain",{hash:{}})),r+=de(n)+' blacklist-entry setting-row" data-name="email" data-type="blacklist" data-domain="',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof n===oe?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.domain",{hash:{}})),r+=de(n)+'" data-id="',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof n===oe?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.id",{hash:{}})),r+=de(n)+'">\n        <div class="message">',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof n===oe?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.domain",{hash:{}})),r+=de(n)+'</div>\n        <div class="word switch ',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"email"),i=a["if"],ie=se.program(52,L,t),ie.hash={},ie.fn=ie,ie.inverse=se.program(54,q,t),n=i.call(e,n,ie),(n||0===n)&&(r+=n),r+='" style="float:right;">\n          <div class="knob"></div>\n        </div>\n      </div>'}function L(){return"off"}function q(){return"on"}function j(e,t){var n,i,r="";return r+="\n      ",n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"password"),i=a["if"],ie=se.program(57,U,t),ie.hash={},ie.fn=ie,ie.inverse=se.noop,n=i.call(e,n,ie),(n||0===n)&&(r+=n),r+="\n    "}function U(e,t){var n,i,r="";return r+='<div class="container-',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof n===oe?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.domain",{hash:{}})),r+=de(n)+' blacklist-entry setting-row" data-name="password" data-type="blacklist" data-domain="',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof n===oe?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.domain",{hash:{}})),r+=de(n)+'" data-id="',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof n===oe?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.id",{hash:{}})),r+=de(n)+'">\n        <div class="message">',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof n===oe?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.domain",{hash:{}})),r+=de(n)+'</div>\n        <div class="word switch ',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"password"),i=a["if"],ie=se.program(58,V,t),ie.hash={},ie.fn=ie,ie.inverse=se.program(60,W,t),n=i.call(e,n,ie),(n||0===n)&&(r+=n),r+='" style="float:right;">\n          <div class="knob"></div>\n        </div>\n      </div>'}function V(){return"off"}function W(){return"on"}function $(e,t){var n,i,r="";return r+="\n      ",n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"phone"),i=a["if"],ie=se.program(63,G,t),ie.hash={},ie.fn=ie,ie.inverse=se.noop,n=i.call(e,n,ie),(n||0===n)&&(r+=n),r+="\n    "}function G(e,t){var n,i,r="";return r+='<div class="container-',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof n===oe?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.domain",{hash:{}})),r+=de(n)+' blacklist-entry setting-row" data-name="phone" data-type="blacklist" data-domain="',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof n===oe?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.domain",{hash:{}})),r+=de(n)+'" data-id="',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof n===oe?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.id",{hash:{}})),r+=de(n)+'">\n        <div class="message">',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof n===oe?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.domain",{hash:{}})),r+=de(n)+'</div>\n        <div class="word switch ',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"phone"),i=a["if"],ie=se.program(64,K,t),ie.hash={},ie.fn=ie,ie.inverse=se.program(66,J,t),n=i.call(e,n,ie),(n||0===n)&&(r+=n),r+='" style="float:right;">\n          <div class="knob"></div>\n        </div>\n      </div>'}function K(){return"off"}function J(){return"on"}function Y(e,t){var n,i,r="";return r+="\n      ",n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"real_card"),i=a["if"],ie=se.program(69,X,t),ie.hash={},ie.fn=ie,ie.inverse=se.noop,n=i.call(e,n,ie),(n||0===n)&&(r+=n),r+="\n    "}function X(e,t){var n,i,r="";return r+='<div class="container-',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof n===oe?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.domain",{hash:{}})),r+=de(n)+' blacklist-entry setting-row" data-name="real_card" data-type="blacklist" data-domain="',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof n===oe?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.domain",{hash:{}})),r+=de(n)+'" data-id="',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof n===oe?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.id",{hash:{}})),r+=de(n)+'">\n        <div class="message">',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof n===oe?n=n.call(e,{hash:{}}):n===ce&&(n=le.call(e,"this.domain",{hash:{}})),r+=de(n)+'</div>\n        <div class="word switch ',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"real_card"),i=a["if"],ie=se.program(70,Z,t),ie.hash={},ie.fn=ie,ie.inverse=se.program(72,Q,t),n=i.call(e,n,ie),(n||0===n)&&(r+=n),r+='" style="float:right;">\n          <div class="knob"></div>\n        </div>\n      </div>'}function Z(){return"off"}function Q(){return"on"}function ee(e){var t,n,i="";return i+='\n    <div style="margin-left:6em">',t="mm_dntme_settings_ignore_no_web",ne=a.intl,n=ne||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===oe?n.call(e,t,{hash:{}}):n===ce?le.call(e,"intl",t,{hash:{}}):n,i+=de(t)+"</div>\n  "}a=a||e.helpers;var te,ae,ne,ie,re="",se=this,oe="function",le=a.helperMissing,ce=void 0,de=this.escapeExpression;return re+='<div id="ignore-container">\n  <div style="margin-left:2em">',te="mm_dntme_settings_ignore_list_for",ne=a.intl,ae=ne||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),te=typeof ae===oe?ae.call(t,te,{hash:{}}):ae===ce?le.call(t,"intl",te,{hash:{}}):ae,re+=de(te)+': <br/><select id="ignore-dropdown" style="width:90%">\n    <option style=\'text-align:left;\' value="account">',te="mm_dntme_settings_ignore_dd_account_auto",ne=a.intl,ae=ne||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),te=typeof ae===oe?ae.call(t,te,{hash:{}}):ae===ce?le.call(t,"intl",te,{hash:{}}):ae,re+=de(te)+"</option>\n    <option style='text-align:left;' value=\"submit_account\" selected>",te="mm_dntme_settings_ignore_dd_submit_account",ne=a.intl,ae=ne||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),te=typeof ae===oe?ae.call(t,te,{hash:{}}):ae===ce?le.call(t,"intl",te,{hash:{}}):ae,re+=de(te)+"</option>\n    <option style='text-align:left;' value=\"save_account\" selected>",te="mm_dntme_settings_ignore_dd_account_save",ne=a.intl,ae=ne||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),te=typeof ae===oe?ae.call(t,te,{hash:{}}):ae===ce?le.call(t,"intl",te,{hash:{}}):ae,re+=de(te)+"</option>\n    <option style='text-align:left;' value=\"save_card\">",te="mm_dntme_settings_ignore_dd_save_card",ne=a.intl,ae=ne||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),te=typeof ae===oe?ae.call(t,te,{hash:{}}):ae===ce?le.call(t,"intl",te,{hash:{}}):ae,re+=de(te)+"</option>\n    <option style='text-align:left;' value=\"address\">",te="mm_dntme_settings_ignore_dd_address_auto",ne=a.intl,ae=ne||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),te=typeof ae===oe?ae.call(t,te,{hash:{}}):ae===ce?le.call(t,"intl",te,{hash:{}}):ae,re+=de(te)+"</option>\n    <option style='text-align:left;' value=\"real_card\">",te="mm_dntme_settings_ignore_dd_cc_auto",ne=a.intl,ae=ne||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),te=typeof ae===oe?ae.call(t,te,{hash:{}}):ae===ce?le.call(t,"intl",te,{hash:{}}):ae,re+=de(te)+"</option>\n    <option style='text-align:left;' value=\"card\">",te="mm_dntme_settings_ignore_dd_cc_mask",ne=a.intl,ae=ne||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),te=typeof ae===oe?ae.call(t,te,{hash:{}}):ae===ce?le.call(t,"intl",te,{hash:{}}):ae,re+=de(te)+"</option>\n    <option style='text-align:left;' value=\"email\">",te="mm_dntme_settings_ignore_dd_email_mask",ne=a.intl,ae=ne||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),te=typeof ae===oe?ae.call(t,te,{hash:{}}):ae===ce?le.call(t,"intl",te,{hash:{}}):ae,re+=de(te)+"</option>\n    <option style='text-align:left;' value=\"phone\">",te="mm_dntme_settings_ignore_dd_phone_mask",ne=a.intl,ae=ne||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),te=typeof ae===oe?ae.call(t,te,{hash:{}}):ae===ce?le.call(t,"intl",te,{hash:{}}):ae,re+=de(te)+"</option>\n    <option style='text-align:left;' value=\"password\">",te="mm_dntme_settings_ignore_dd_pw",ne=a.intl,ae=ne||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),te=typeof ae===oe?ae.call(t,te,{hash:{}}):ae===ce?le.call(t,"intl",te,{hash:{}}):ae,re+=de(te)+"</option>\n    <option style='text-align:left;' value=\"identity\">",te="mm_dntme_settings_ignore_dd_identity",ne=a.intl,ae=ne||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),te=typeof ae===oe?ae.call(t,te,{hash:{}}):ae===ce?le.call(t,"intl",te,{hash:{}}):ae,re+=de(te)+"</option>\n    <option style='text-align:left;' value=\"tracker\">",te="mm_dntme_settings_ignore_dd_tracker",ne=a.intl,ae=ne||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),te=typeof ae===oe?ae.call(t,te,{hash:{}}):ae===ce?le.call(t,"intl",te,{hash:{}}):ae,re+=de(te)+"</option>\n  </select>\n  </div>\n  </br>\n  ",ne=a.blacklistCollection,te=ne||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklistCollection"),ae=a["if"],ie=se.program(1,r,i),ie.hash={},ie.fn=ie,ie.inverse=se.program(74,ee,i),te=ae.call(t,te,ie),(te||0===te)&&(re+=te),re+="\n</div>"}),ABINE_DNTME.CompiledTemplates.dntme_dashboard_ignore_settings}),ABINE_DNTME.define("abine/views/ignoreSettings",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies","abine/views/pageTracker","abine/views/settingsChanged","abine/views/dntmePageBase","abine/timer"],function(e,t,a,n,i,r,s,o,l,c,d){var u=c.extend({templateName:"dntme_dashboard_ignore_settings",events:{"click .setting-row":"toggleSwitch","click .more-settings":"showSettings","click .go-back":"goBack","change #ignore-dropdown":"toggleSection","keyup #blacklist-search":"blacklistSearch","click .clear-blacklist-search":"clearBlacklistSearch"},afterInitialize:function(){if(this.toggleSection(),this.doc=this.el.document,this.options.highlight){var t=this.$("#"+this.options.highlight);t&&t[0]&&(t[0].scrollIntoView(),t.addClass("highlight"))}this.options.timeout&&d.setTimeout(e.bind(function(){this.trigger("close")},this),this.options.timeout)},goBack:function(){this.trigger("change-dashboard","dashboard")},createChildren:function(){return this.children={},this.children},toggleSection:function(){this.$(".ignore-region").hide(),this.$("#bl-"+this.$("#ignore-dropdown").val()+"-region").show();var e=this.$("#bl-"+this.$("#ignore-dropdown").val()+"-region div.blacklist-entry:visible");0==e.length?(this.$("#blacklist-no-entry").show(),this.$("#blacklist-search").hide()):(this.$("#blacklist-no-entry").hide(),this.$("#blacklist-search").show()),this.trigger("resize")},blacklistSearch:function(){var e=this.$("#blacklist-search").val().replace(".","\\.");e=e.replace(/[^a-z0-9\\.\s]/gi,"").replace(/[_\s]/g,""),this.$(".blacklist-entry").hide();var t=this.$(".blacklist-entry[class*="+e+"]");t.length>0||""==e?(t.show(),this.$(".blacklist-empty").hide()):this.$(".blacklist-empty").show(),this.trigger("resize")},clearBlacklistSearch:function(e){return this.$("#blacklist-search").val(""),this.blacklistSearch(),e.preventDefault(),!1}});return u}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_dashboard_login=e.template(function(e,t,a,n,i){function r(){return"display:none;"}function s(){return"display:none;"}function o(e,t){var n,i,r="";return r+='\n  \n  <div id="form-div">\n\n    <div id="login-section">\n      <div style="clear:both;display:block;width:0px;max-width:0px;height:0px;max-height:0px;overflow:hidden;opacity:0;"\n           class="autofill-grabber"><input type="text" autocomplete="off" id="login_email" tabindex="-1"><input type="password" autocomplete="off" id="login_password" tabindex="-1">\n      </div>\n      <input id="protect-email" class="loginBit" type="text" value="',b=a.email,n=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"email"),typeof n===E?n=n.call(e,{hash:{}}):n===N&&(n=A.call(e,"email",{hash:{}})),r+=T(n)+'" style="width:230px;margin:10px 10px 5px 10px;height:25;',b=a.unlockScreen,n=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"unlockScreen"),i=a["if"],v=k.program(6,l,t),v.hash={},v.fn=v,v.inverse=k.noop,n=i.call(e,n,v),(n||0===n)&&(r+=n),r+='" placeholder="',n="mm_dntme_enter_email_simple",b=a.intl,i=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===E?i.call(e,n,{hash:{}}):i===N?A.call(e,"intl",n,{hash:{}}):i,r+=T(n)+'"/><br/>\n      <input id="password-field" type="password" style="width:230px;margin:5px 10px 10px 10px;height:25;" placeholder="',n="mm_dntme_enter_password_simple",b=a.intl,i=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===E?i.call(e,n,{hash:{}}):i===N?A.call(e,"intl",n,{hash:{}}):i,r+=T(n)+'"/>\n    </div>\n\n    <div id="mfa-section" style="display:none;">\n      <input type="text" id="mfa-code-field" style="width:230px;height:25px;margin:5px 10px 10px 10px" name="mfa_code" placeholder="Authentication Code" />\n    </div>\n    <input type="',b=a.loginNotRegister,n=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"loginNotRegister"),i=a["if"],v=k.program(8,c,t),v.hash={},v.fn=v,v.inverse=k.program(10,d,t),n=i.call(e,n,v),(n||0===n)&&(r+=n),r+='" id="login" class="btn btn-success" value=\'',b=a.unlockScreen,n=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"unlockScreen"),i=a["if"],v=k.program(12,u,t),v.hash={},v.fn=v,v.inverse=k.program(14,p,t),n=i.call(e,n,v),(n||0===n)&&(r+=n),r+="'/>\n    <input type=\"",b=a.loginNotRegister,n=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"loginNotRegister"),i=a.unless,v=k.program(16,m,t),v.hash={},v.fn=v,v.inverse=k.program(18,h,t),n=i.call(e,n,v),(n||0===n)&&(r+=n),r+='" style="',b=a.unlockScreen,n=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"unlockScreen"),i=a["if"],v=k.program(20,_,t),v.hash={},v.fn=v,v.inverse=k.noop,n=i.call(e,n,v),(n||0===n)&&(r+=n),r+='" id="register" class="loginBit btn btn-primary" value=\'',n="mm_dntme_create_account",b=a.intl,i=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===E?i.call(e,n,{hash:{}}):i===N?A.call(e,"intl",n,{hash:{}}):i,r+=T(n)+'\'/>\n    <input type="button" style="',b=a.unlockScreen,n=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"unlockScreen"),i=a.unless,v=k.program(22,f,t),v.hash={},v.fn=v,v.inverse=k.noop,n=i.call(e,n,v),(n||0===n)&&(r+=n),r+='" id="switchLogin" class="btn btn-primary lockBit" value=\'',n="mm_dntme_use_another_account",b=a.intl,i=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===E?i.call(e,n,{hash:{}}):i===N?A.call(e,"intl",n,{hash:{}}):i,r+=T(n)+'\'/>\n    <br/>\n  </div>\n  <a href="" id="forgotPassword">',n="mm_dntme_forgot_my_password",b=a.intl,i=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===E?i.call(e,n,{hash:{}}):i===N?A.call(e,"intl",n,{hash:{}}):i,r+=T(n)+"</a><br/>\n  "}function l(){return"display:none;"}function c(){return"submit"}function d(){return"button"}function u(e){var t,n;return t="mm_dntme_unlock",b=a.intl,n=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===E?n.call(e,t,{hash:{}}):n===N?A.call(e,"intl",t,{hash:{}}):n,T(t)}function p(e){var t,n;return t="mm_dntme_sign_in",b=a.intl,n=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===E?n.call(e,t,{hash:{}}):n===N?A.call(e,"intl",t,{hash:{}}):n,T(t)}function m(){return"submit"}function h(){return"button"}function _(){return"display:none;"}function f(){return"display:none;"}a=a||e.helpers;var g,y,b,v,w="",k=this,E="function",A=a.helperMissing,N=void 0,T=this.escapeExpression,D=a.blockHelperMissing;return w+='<div class="login_overlay"></div>\n\n<div class="login_form">\n\n  <div id="welcome-message">\n\n    <span class="lockBit" style="',b=a.unlockScreen,g=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"unlockScreen"),y=a.unless,v=k.program(1,r,i),v.hash={},v.fn=v,v.inverse=k.noop,g=y.call(t,g,v),(g||0===g)&&(w+=g),w+='">',g="mm_dntme_unlock_your",b=a.intl,y=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),g=typeof y===E?y.call(t,g,{hash:{}}):y===N?A.call(t,"intl",g,{hash:{}}):y,w+=T(g)+'</span>\n    <span class="loginBit" style="',b=a.unlockScreen,g=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"unlockScreen"),y=a["if"],v=k.program(3,s,i),
v.hash={},v.fn=v,v.inverse=k.noop,g=y.call(t,g,v),(g||0===g)&&(w+=g),w+='">',g="mm_dntme_sign_in_to_your",b=a.intl,y=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),g=typeof y===E?y.call(t,g,{hash:{}}):y===N?A.call(t,"intl",g,{hash:{}}):y,w+=T(g)+'</span>\n    <img class="logo" height="16px" width="17px" src="',g="/pages/images/dnt-ui-header-logo.png",b=a.assetUrl,y=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),g=typeof y===E?y.call(t,g,{hash:{}}):y===N?A.call(t,"assetUrl",g,{hash:{}}):y,w+=T(g)+'"/>\n    <span class="boldFont">Blur</span>\n    ',g="mm_dntme_sign_in_to_your_account",b=a.intl,y=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),g=typeof y===E?y.call(t,g,{hash:{}}):y===N?A.call(t,"intl",g,{hash:{}}):y,w+=T(g)+'\n  </div>\n  \n  <div id="error" style="display:none;color:white;text-transform:none;"></div>\n  \n  <div id="progress-section" style="display:none;margin-top:10px;">\n    <div class="progress progress-striped active">\n      <div class="bar bar-info" style="width: 100%;"></div>\n    </div>\n    <div class="loading-message" style="text-transform:none;"></div>\n  </div>\n  \n  ',g="frm",b=a.form,y=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"form"),v=k.program(5,o,i),v.hash={},v.fn=v,v.inverse=k.noop,g=b&&typeof y===E?y.call(t,g,v):D.call(t,y,g,v),(g||0===g)&&(w+=g),w+="\n</div>"}),ABINE_DNTME.CompiledTemplates.dntme_dashboard_login}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_dashboard_login_help=e.template(function(e,t,a){a=a||e.helpers;var n,i,r,s="",o="function",l=a.helperMissing,c=void 0,d=this.escapeExpression;return s+='<div class="settings-header clearfix">\n  <div class="go-back"><img src="',n="/pages/images/back.png",r=a.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"assetUrl",n,{hash:{}}):i,s+=d(n)+'" width="18px;"/> ',n="mm_dntme_back",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,s+=d(n)+'</div>\n  <div class="title"><img class="logo" height="24px" width="24px" src="',n="/pages/images/Icon-48.png",r=a.assetUrl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"assetUrl",n,{hash:{}}):i,s+=d(n)+'"/>\n    <span class="boldFont">Blur</span></div>\n</div>\n<div class="login_help">\n  <h3>',n="mm_dntme_dashboard_login_help_title1",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,s+=d(n)+"</h3>\n  <p>",n="mm_dntme_dashboard_login_help_body11",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,s+=d(n)+"</p>\n  <h3>",n="mm_dntme_dashboard_login_help_title2",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,s+=d(n)+"</h3>\n  <p>",n="mm_dntme_dashboard_login_help_body21",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,s+=d(n)+"</p>\n  <p>",n="mm_dntme_dashboard_login_help_body22",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,s+=d(n)+"</p>\n  <p>",n="mm_dntme_dashboard_login_help_body23",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,s+=d(n)+"</p>\n  <h3>",n="mm_dntme_dashboard_login_help_title3",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,s+=d(n)+"</h3>\n  <p>",n="mm_dntme_dashboard_login_help_body31",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,s+=d(n)+"</p>\n  <p>",n="mm_dntme_dashboard_login_help_body32",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,s+=d(n)+"</p>\n  <p>",n="mm_dntme_dashboard_login_help_body33",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,s+=d(n)+"</p>\n  <h3>",n="mm_dntme_dashboard_login_help_title4",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,s+=d(n)+"</h3>\n  <p>",n="mm_dntme_dashboard_login_help_body41",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,s+=d(n)+"</p>\n  <p>",n="mm_dntme_dashboard_login_help_body42",r=a.intl,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"intl",n,{hash:{}}):i,s+=d(n)+"</p>\n</div>"}),ABINE_DNTME.CompiledTemplates.dntme_dashboard_login_help}),ABINE_DNTME.define("abine/views/loginHelp",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies","abine/views/pageTracker","abine/views/settingsChanged","abine/views/dntmePageBase"],function(e,t,a,n,i,r,s,o,l,c){var d=c.extend({templateName:"dntme_dashboard_login_help",events:{"click .go-back":"goBack"},afterInitialize:function(){this.doc=this.el.document},goBack:function(){this.trigger("change-dashboard","dashboard")}});return d}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_dashboard_main=e.template(function(e,t,a,n,i){function r(){return"disabled"}function s(e,t){var n,i,r="";return r+=" ",T=a.trackers,n=T||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"trackers"),n=null===n||void 0===n||n===!1?n:ABINE_DNTME.Duckbone.Handlebars.getAttr(n,"length"),i=a.unless,D=I.program(4,o,t),D.hash={},D.fn=D,D.inverse=I.noop,n=i.call(e,n,D),(n||0===n)&&(r+=n),r}function o(){return"no-trackers"}function l(e){var t,n,i="";return i+='<a href="" class="show-details" data-dashboard="tracking">',t="mm_dntme_dashboard_show_details",T=a.intl,n=T||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===x?n.call(e,t,{hash:{}}):n===S?C.call(e,"intl",t,{hash:{}}):n,i+=B(t)+"</a>"}function c(e,t){var n,i,r="";return r+="\n    ",T=a.canChangeAutofill,n=T||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"canChangeAutofill"),i=a["if"],D=I.program(9,d,t),D.hash={},D.fn=D,D.inverse=I.noop,n=i.call(e,n,D),(n||0===n)&&(r+=n),r+="\n"}function d(){return'\n        <div class="default-autofill clearfix">\n            <span>Blur is not your default Password Manager.</span>\n            <div><button id="default-button" class="btn btn-small" style="font-weight: bold">Make Default</button></div>\n        </div>\n    '}function u(e){var t,n,i="";return i+='\n<div class="search-row clearfix">\n    <div class="search-option"><button class="btn btn-small btn-primary" style="font-weight: bold">Search Blur</button></div>\n    <div class="menu suggested-option" style="display: none">\n        <div class="icon"><img class="replace-fav-icon"\n                               src="',t="/pages/images/2015panels/panel_b_logo.png",T=a.assetUrl,n=T||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===x?n.call(e,t,{hash:{}}):n===S?C.call(e,"assetUrl",t,{hash:{}}):n,i+=B(t)+'"\n                               style="width:60px;height:30px;"/></div>\n        <div class="text">\n            <div class="title">Suggested</div>\n            <div class="description">for ',T=a.domain,t=T||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"domain"),typeof t===x?t=t.call(e,{hash:{}}):t===S&&(t=C.call(e,"domain",{hash:{}})),i+=B(t)+"</div>\n        </div>\n    </div>\n</div>\n"}function p(){return'\n      <div id="inline-site-settings"></div>\n  '}function m(){return'\n      <div id="inline-site-settings" style="display: none;"></div>\n  '}function h(e,t){var n,i,r="";return r+='\n    <div class="mobileCell cell l b" data-dashboard="anywhere" style="font-size:10pt;text-align:center;',T=a.showSettings,n=T||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"showSettings"),i=a["if"],D=I.program(18,_,t),D.hash={},D.fn=D,D.inverse=I.noop,n=i.call(e,n,D),(n||0===n)&&(r+=n),r+='">\n      ',T=a.hasMobileApp,n=T||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"hasMobileApp"),i=a["if"],D=I.program(20,f,t),D.hash={},D.fn=D,D.inverse=I.program(22,g,t),n=i.call(e,n,D),(n||0===n)&&(r+=n),r+='\n    </div>\n    <div class="syncCell cell b" data-dashboard="dropbox" style="font-size:10pt;text-align:center;',T=a.showSettings,n=T||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"showSettings"),i=a["if"],D=I.program(24,y,t),D.hash={},D.fn=D,D.inverse=I.noop,n=i.call(e,n,D),(n||0===n)&&(r+=n),r+='">\n      ',T=a.entitledToSync,n=T||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"entitledToSync"),i=a["if"],D=I.program(26,b,t),D.hash={},D.fn=D,D.inverse=I.program(31,k,t),n=i.call(e,n,D),(n||0===n)&&(r+=n),r+="\n    </div>\n  "}function _(){return"display:none;"}function f(e){var t,n,i="";return i+="\n        ",t="mm_dntme_dashboard_has_mobile_app_1",T=a.intl,n=T||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===x?n.call(e,t,{hash:{}}):n===S?C.call(e,"intl",t,{hash:{}}):n,i+=B(t)+'<br/><span class="green">',t="mm_dntme_dashboard_has_mobile_app_2",T=a.intl,n=T||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===x?n.call(e,t,{hash:{}}):n===S?C.call(e,"intl",t,{hash:{}}):n,i+=B(t)+'</span>\n        <div class="btn disabled" style="height:9px;line-height:0.5;">',t="mm_dntme_dashboard_done",T=a.intl,n=T||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===x?n.call(e,t,{hash:{}}):n===S?C.call(e,"intl",t,{hash:{}}):n,i+=B(t)+"</div>\n      "}function g(e){var t,n,i="";return i+="\n        ",t="mm_dntme_dashboard_no_mobile_app_1",T=a.intl,n=T||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===x?n.call(e,t,{hash:{}}):n===S?C.call(e,"intl",t,{hash:{}}):n,i+=B(t)+'<br/><span class="red">',t="mm_dntme_dashboard_no_mobile_app_2",T=a.intl,n=T||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===x?n.call(e,t,{hash:{}}):n===S?C.call(e,"intl",t,{hash:{}}):n,i+=B(t)+"</span> ",t="mm_dntme_dashboard_no_mobile_app_3",T=a.intl,n=T||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===x?n.call(e,t,{hash:{}}):n===S?C.call(e,"intl",t,{hash:{}}):n,i+=B(t)+'<br/>\n        <div style="float:left;margin-left:15px;margin-right:-20px;color:red;font-size:18pt;"><strong>!</strong></div><div class="btn btn-danger" style="height:9px;line-height:0.5;">',t="mm_dntme_dashboard_get_app",T=a.intl,n=T||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===x?n.call(e,t,{hash:{}}):n===S?C.call(e,"intl",t,{hash:{}}):n,i+=B(t)+"</div>\n      "}function y(){return"display:none;"}function b(e,t){var n,i,r="";return r+="\n          ",T=a.dropboxEnabled,n=T||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"dropboxEnabled"),i=a["if"],D=I.program(27,v,t),D.hash={},D.fn=D,D.inverse=I.program(29,w,t),n=i.call(e,n,D),(n||0===n)&&(r+=n),r+="\n      "}function v(e){var t,n,i="";return i+="\n            ",t="mm_dntme_dashboard_has_dropbox_1",T=a.intl,n=T||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===x?n.call(e,t,{hash:{}}):n===S?C.call(e,"intl",t,{hash:{}}):n,i+=B(t)+'<br/><span class="green">',t="mm_dntme_dashboard_has_dropbox_2",T=a.intl,n=T||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===x?n.call(e,t,{hash:{}}):n===S?C.call(e,"intl",t,{hash:{}}):n,i+=B(t)+'</span>\n            <div class="btn disabled" style="height:9px;line-height:0.5;">',t="mm_dntme_dashboard_done",T=a.intl,n=T||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===x?n.call(e,t,{hash:{}}):n===S?C.call(e,"intl",t,{hash:{}}):n,i+=B(t)+"</div>\n          "}function w(e){var t,n,i="";return i+="\n            ",t="mm_dntme_dashboard_no_dropbox_1",T=a.intl,n=T||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===x?n.call(e,t,{hash:{}}):n===S?C.call(e,"intl",t,{hash:{}}):n,i+=B(t)+'<br/><span class="red">',t="mm_dntme_dashboard_no_dropbox_2",T=a.intl,n=T||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===x?n.call(e,t,{hash:{}}):n===S?C.call(e,"intl",t,{hash:{}}):n,i+=B(t)+"</span> ",t="mm_dntme_dashboard_no_dropbox_3",T=a.intl,n=T||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===x?n.call(e,t,{hash:{}}):n===S?C.call(e,"intl",t,{hash:{}}):n,i+=B(t)+'<br/>\n            <div style="float:left;margin-left:15px;margin-right:-20px;color:red;font-size:18pt;"><strong>!</strong></div><div class="btn btn-danger" style="height:9px;line-height:0.5;">',t="mm_dntme_dashboard_setup_sync",T=a.intl,n=T||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===x?n.call(e,t,{hash:{}}):n===S?C.call(e,"intl",t,{hash:{}}):n,i+=B(t)+"</div>\n          "}function k(e){var t,n,i="";return i+="\n        ",t="mm_dntme_dashboard_no_sync_1",T=a.intl,n=T||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===x?n.call(e,t,{hash:{}}):n===S?C.call(e,"intl",t,{hash:{}}):n,i+=B(t)+'<br/><span class="red">',t="mm_dntme_dashboard_no_sync_2",T=a.intl,n=T||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===x?n.call(e,t,{hash:{}}):n===S?C.call(e,"intl",t,{hash:{}}):n,i+=B(t)+'</span><br/>\n        <div style="float:left;margin-left:15px;margin-right:-20px;color:red;font-size:18pt;"><strong>!</strong></div><div class="btn btn-danger" style="height:9px;line-height:0.5;">',t="mm_dntme_dashboard_premium",T=a.intl,n=T||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===x?n.call(e,t,{hash:{}}):n===S?C.call(e,"intl",t,{hash:{}}):n,i+=B(t)+"</div>\n      "}function E(e){var t,n,i="";return i+="\n    ",t="loginSection",T=a.child,n=T||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"child"),t=typeof n===x?n.call(e,t,{hash:{}}):n===S?C.call(e,"child",t,{hash:{}}):n,i+=B(t)+"\n  "}a=a||e.helpers;var A,N,T,D,M="",I=this,x="function",C=a.helperMissing,S=void 0,B=this.escapeExpression;return M+='<div class="dashboard_title" style="position: relative">\n  <div class="section off others clearfix">\n    <div class="section-header clearfix ',T=a.disabled,A=T||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"disabled"),N=a["if"],D=I.program(1,r,i),D.hash={},D.fn=D,D.inverse=I.program(3,s,i),A=N.call(t,A,D),(A||0===A)&&(M+=A),M+='">\n      ',A="trackersTitle",T=a.child,N=T||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"),A=typeof N===x?N.call(t,A,{hash:{}}):N===S?C.call(t,"child",A,{hash:{}}):N,M+=B(A)+"\n    </div>\n  </div>\n  ",T=a.loggedIn,A=T||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"loggedIn"),N=a.unless,D=I.program(6,l,i),D.hash={},D.fn=D,D.inverse=I.noop,A=N.call(t,A,D),(A||0===A)&&(M+=A),M+="\n</div>\n",T=a.blurDefaultAutofill,A=T||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blurDefaultAutofill"),N=a.unless,D=I.program(8,c,i),D.hash={},D.fn=D,D.inverse=I.noop,A=N.call(t,A,D),(A||0===A)&&(M+=A),M+="\n",T=a.loggedIn,A=T||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"loggedIn"),N=a["if"],D=I.program(11,u,i),D.hash={},D.fn=D,D.inverse=I.noop,A=N.call(t,A,D),(A||0===A)&&(M+=A),M+='\n<div class="grid clearfix">\n  ',A="mainGrid",T=a.child,N=T||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"),A=typeof N===x?N.call(t,A,{hash:{}}):N===S?C.call(t,"child",A,{hash:{}}):N,M+=B(A)+"\n  ",T=a.showSettings,A=T||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"showSettings"),N=a["if"],D=I.program(13,p,i),D.hash={},D.fn=D,D.inverse=I.program(15,m,i),A=N.call(t,A,D),(A||0===A)&&(M+=A),M+="\n  ",T=a.hasMobileAppAndDropboxEnabled,A=T||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"hasMobileAppAndDropboxEnabled"),N=a.unless,D=I.program(17,h,i),D.hash={},D.fn=D,D.inverse=I.noop,A=N.call(t,A,D),(A||0===A)&&(M+=A),M+="\n  ",T=a.loggedIn,A=T||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"loggedIn"),N=a.unless,D=I.program(33,E,i),D.hash={},D.fn=D,D.inverse=I.noop,A=N.call(t,A,D),(A||0===A)&&(M+=A),M+="\n</div>"}),ABINE_DNTME.CompiledTemplates.dntme_dashboard_main}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_dashboard_main_grid=e.template(function(e,t,a,n,i){function r(){return"off"}function s(){return"on"}function o(){return"off"}function l(){return"on"}function c(){return"b"}function d(){return"off"}function u(){return"on"}function p(){return"b"}function m(){return"off"}function h(){return"on"}a=a||e.helpers;var _,f,g,y,b,v,w="",k=this,E="function",A=a.helperMissing,N=void 0,T=this.escapeExpression,D=a.blockHelperMissing;return w+='<div class="cell l" data-dashboard="accounts">\n  <img style="margin-top:-10px" src="',_="pages/images/accounts.png",b=a.assetUrl,f=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),_=typeof f===E?f.call(t,_,{hash:{}}):f===N?A.call(t,"assetUrl",_,{hash:{}}):f,w+=T(_)+'" /><span class="title">',_="mm_dntme_dashboard_accounts",b=a.intl,f=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),_=typeof f===E?f.call(t,_,{hash:{}}):f===N?A.call(t,"intl",_,{hash:{}}):f,w+=T(_)+'</span>\n  <div style="position:absolute;top:18px;left:110px;" id="accountSwitch" data-group="acctGroup" class="word switch ',b=a.blacklist,_=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),_=null===_||void 0===_||_===!1?_:ABINE_DNTME.Duckbone.Handlebars.getAttr(_,"passwordOff"),b=a.blacklist,f=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),f=null===f||void 0===f||f===!1?f:ABINE_DNTME.Duckbone.Handlebars.getAttr(f,"loginOff"),b=a.blacklist,g=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),g=null===g||void 0===g||g===!1?g:ABINE_DNTME.Duckbone.Handlebars.getAttr(g,"accountOff"),b=a.if_all,y=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"if_all"),v=k.program(1,r,i),v.hash={},v.fn=v,v.inverse=k.program(3,s,i),_=b&&typeof y===E?y.call(t,g,f,_,v):D.call(t,y,g,f,_,v),(_||0===_)&&(w+=_),w+='">\n    <div class="knob"></div>\n  </div>\n</div>\n<div class="cell" data-dashboard="wallet">\n  <img style="margin-top:-10px" src="',_="pages/images/wallet.png",b=a.assetUrl,f=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),_=typeof f===E?f.call(t,_,{hash:{}}):f===N?A.call(t,"assetUrl",_,{hash:{}}):f,w+=T(_)+'" /><span class="title">',_="mm_dntme_dashboard_wallet",b=a.intl,f=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),_=typeof f===E?f.call(t,_,{hash:{}}):f===N?A.call(t,"intl",_,{hash:{}}):f,w+=T(_)+'</span>\n  <div style="position:absolute;top:18px;right:5px;" id="walletSwitch" data-group="walletGroup" class="word switch ',b=a.blacklist,_=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),_=null===_||void 0===_||_===!1?_:ABINE_DNTME.Duckbone.Handlebars.getAttr(_,"addressOff"),b=a.blacklist,f=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),f=null===f||void 0===f||f===!1?f:ABINE_DNTME.Duckbone.Handlebars.getAttr(f,"cardOff"),b=a.blacklist,g=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),g=null===g||void 0===g||g===!1?g:ABINE_DNTME.Duckbone.Handlebars.getAttr(g,"realCardOff"),b=a.if_all,y=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"if_all"),v=k.program(5,o,i),v.hash={},v.fn=v,v.inverse=k.program(7,l,i),_=b&&typeof y===E?y.call(t,g,f,_,v):D.call(t,y,g,f,_,v),(_||0===_)&&(w+=_),w+='">\n    <div class="knob"></div>\n  </div>\n</div>\n<div class="maskingCell cell l ',b=a.hasMobileAppAndDropboxEnabled,_=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"hasMobileAppAndDropboxEnabled"),f=a["if"],v=k.program(9,c,i),v.hash={},v.fn=v,v.inverse=k.noop,_=f.call(t,_,v),(_||0===_)&&(w+=_),w+='" data-dashboard="masking">\n  <img style="margin-top:-10px" src="',_="pages/images/masking.png",b=a.assetUrl,f=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),_=typeof f===E?f.call(t,_,{hash:{}}):f===N?A.call(t,"assetUrl",_,{hash:{}}):f,w+=T(_)+'" /><span class="title">',_="mm_dntme_dashboard_masking",b=a.intl,f=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),_=typeof f===E?f.call(t,_,{hash:{}}):f===N?A.call(t,"intl",_,{hash:{}}):f,w+=T(_)+'</span>\n  <div style="position:absolute;top:70px;left:110px;" id="maskingSwitch" data-group="maskingGroup" class="word switch ',b=a.blacklist,_=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),_=null===_||void 0===_||_===!1?_:ABINE_DNTME.Duckbone.Handlebars.getAttr(_,"cardOff"),b=a.blacklist,f=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),f=null===f||void 0===f||f===!1?f:ABINE_DNTME.Duckbone.Handlebars.getAttr(f,"phoneOff"),b=a.blacklist,g=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),g=null===g||void 0===g||g===!1?g:ABINE_DNTME.Duckbone.Handlebars.getAttr(g,"emailOff"),b=a.if_all,y=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"if_all"),v=k.program(11,d,i),v.hash={},v.fn=v,v.inverse=k.program(13,u,i),_=b&&typeof y===E?y.call(t,g,f,_,v):D.call(t,y,g,f,_,v),(_||0===_)&&(w+=_),w+='">\n    <div class="knob"></div>\n  </div>\n</div>\n<div class="trackingCell cell ',b=a.hasMobileAppAndDropboxEnabled,_=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"hasMobileAppAndDropboxEnabled"),f=a["if"],v=k.program(15,p,i),v.hash={},v.fn=v,v.inverse=k.noop,_=f.call(t,_,v),(_||0===_)&&(w+=_),w+='" data-dashboard="tracking">\n  <img style="margin-top:-10px" src="',_="pages/images/tracking.png",b=a.assetUrl,f=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),_=typeof f===E?f.call(t,_,{hash:{}}):f===N?A.call(t,"assetUrl",_,{hash:{}}):f,w+=T(_)+'" />\n  <span class="title">',_="mm_dntme_dashboard_tracking",b=a.intl,f=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),_=typeof f===E?f.call(t,_,{hash:{}}):f===N?A.call(t,"intl",_,{hash:{}}):f,w+=T(_)+'</span>\n  <div style="position:absolute;top:70px;right:5px;" id="trackingSwitch" data-group="trackingGroup" class="word switch ',b=a.blacklist,_=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),_=null===_||void 0===_||_===!1?_:ABINE_DNTME.Duckbone.Handlebars.getAttr(_,"trackerOff"),b=a.if_all,f=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"if_all"),v=k.program(17,m,i),v.hash={},v.fn=v,v.inverse=k.program(19,h,i),_=b&&typeof f===E?f.call(t,_,v):D.call(t,f,_,v),(_||0===_)&&(w+=_),w+='">\n    <div class="knob"></div>\n  </div>\n</div>'}),ABINE_DNTME.CompiledTemplates.dntme_dashboard_main_grid}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_dashboard_masking=e.template(function(e,t,a,n,i){function r(){return"off"}function s(e){var t,n,i="";return i+='"',t="mm_dntme_help_what_will_happen_on_card",E=a.intl,n=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===D?n.call(e,t,{hash:{}}):n===I?M.call(e,"intl",t,{hash:{}}):n,i+=x(t)+'"'}function o(e){var t,n,i="";return i+='"',t="mm_dntme_help_what_will_happen_off_card",E=a.intl,n=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===D?n.call(e,t,{hash:{}}):n===I?M.call(e,"intl",t,{hash:{}}):n,i+=x(t)+'"'}function l(){return"off"}function c(){return"on"}function d(){return"off"}function u(e){var t,n,i="";return i+='"',t="mm_dntme_help_what_will_happen_on_email",E=a.intl,n=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===D?n.call(e,t,{hash:{}}):n===I?M.call(e,"intl",t,{hash:{}}):n,i+=x(t)+'"'}function p(e){var t,n,i="";return i+='"',t="mm_dntme_help_what_will_happen_off_email",E=a.intl,n=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===D?n.call(e,t,{hash:{}}):n===I?M.call(e,"intl",t,{hash:{}}):n,i+=x(t)+'"'}function m(){return"off"}function h(){return"on"}function _(){return"off"}function f(){return"off"}function g(e){var t,n,i="";return i+='"',t="mm_dntme_help_what_will_happen_on_phone",E=a.intl,n=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===D?n.call(e,t,{hash:{}}):n===I?M.call(e,"intl",t,{hash:{}}):n,i+=x(t)+'"'}function y(e){var t,n,i="";return i+='"',t="mm_dntme_help_what_will_happen_off_phone",E=a.intl,n=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===D?n.call(e,t,{hash:{}}):n===I?M.call(e,"intl",t,{hash:{}}):n,i+=x(t)+'"'}function b(){return"off"}function v(){return"on"}a=a||e.helpers;var w,k,E,A,N="",T=this,D="function",M=a.helperMissing,I=void 0,x=this.escapeExpression;return N+='<div id="card" class="clearfix setting-row ',E=a.blacklist,w=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),w=null===w||void 0===w||w===!1?w:ABINE_DNTME.Duckbone.Handlebars.getAttr(w,"cardOff"),k=a["if"],A=T.program(1,r,i),A.hash={},A.fn=A,A.inverse=T.noop,w=k.call(t,w,A),(w||0===w)&&(N+=w),N+='" data-type="blacklist" data-name="card">\n  <div class="message" style="width:160px;" title=',E=a.blacklist,w=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),w=null===w||void 0===w||w===!1?w:ABINE_DNTME.Duckbone.Handlebars.getAttr(w,"cardOff"),k=a["if"],A=T.program(3,s,i),A.hash={},A.fn=A,A.inverse=T.program(5,o,i),w=k.call(t,w,A),(w||0===w)&&(N+=w),N+=">",w="mm_dntme_masking_card",E=a.intl,k=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),w=typeof k===D?k.call(t,w,{hash:{}}):k===I?M.call(t,"intl",w,{hash:{}}):k,N+=x(w)+'</div>\n  <div class="word switch ',E=a.blacklist,w=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),w=null===w||void 0===w||w===!1?w:ABINE_DNTME.Duckbone.Handlebars.getAttr(w,"cardOff"),k=a["if"],A=T.program(7,l,i),A.hash={},A.fn=A,A.inverse=T.program(9,c,i),w=k.call(t,w,A),(w||0===w)&&(N+=w),N+='">\n    <div class="knob"></div>\n  </div>\n  <div class="for">',w="mm_dntme_for_this_site",E=a.intl,k=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),w=typeof k===D?k.call(t,w,{hash:{}}):k===I?M.call(t,"intl",w,{hash:{}}):k,N+=x(w)+'</div>\n</div>\n\n<div id="email" class="clearfix setting-row ',E=a.blacklist,w=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),w=null===w||void 0===w||w===!1?w:ABINE_DNTME.Duckbone.Handlebars.getAttr(w,"emailOff"),k=a["if"],A=T.program(11,d,i),A.hash={},A.fn=A,A.inverse=T.noop,w=k.call(t,w,A),(w||0===w)&&(N+=w),N+='" data-type="blacklist" data-name="email">\n  <div class="message" style="width:160px;" title=',E=a.blacklist,w=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),w=null===w||void 0===w||w===!1?w:ABINE_DNTME.Duckbone.Handlebars.getAttr(w,"emailOff"),k=a["if"],A=T.program(13,u,i),A.hash={},A.fn=A,A.inverse=T.program(15,p,i),w=k.call(t,w,A),(w||0===w)&&(N+=w),N+=">",w="mm_dntme_masking_email",E=a.intl,k=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),w=typeof k===D?k.call(t,w,{hash:{}}):k===I?M.call(t,"intl",w,{hash:{}}):k,N+=x(w)+'</div>\n  <div class="word switch ',E=a.blacklist,w=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),w=null===w||void 0===w||w===!1?w:ABINE_DNTME.Duckbone.Handlebars.getAttr(w,"emailOff"),k=a["if"],A=T.program(17,m,i),A.hash={},A.fn=A,A.inverse=T.program(19,h,i),w=k.call(t,w,A),(w||0===w)&&(N+=w),N+=" ",E=a.blacklist,w=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),w=null===w||void 0===w||w===!1?w:ABINE_DNTME.Duckbone.Handlebars.getAttr(w,"globalEmail"),k=a.unless,A=T.program(21,_,i),A.hash={},A.fn=A,A.inverse=T.noop,w=k.call(t,w,A),(w||0===w)&&(N+=w),N+='">\n    <div class="knob"></div>\n  </div>\n  <div class="for">',w="mm_dntme_for_this_site",E=a.intl,k=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),w=typeof k===D?k.call(t,w,{hash:{}}):k===I?M.call(t,"intl",w,{hash:{}}):k,N+=x(w)+'</div>\n</div>\n\n<div id="phone" class="clearfix setting-row ',E=a.blacklist,w=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),w=null===w||void 0===w||w===!1?w:ABINE_DNTME.Duckbone.Handlebars.getAttr(w,"phoneOff"),k=a["if"],A=T.program(23,f,i),A.hash={},A.fn=A,A.inverse=T.noop,w=k.call(t,w,A),(w||0===w)&&(N+=w),N+='" data-type="blacklist" data-name="phone">\n  <div class="message" style="width:160px;" title=',E=a.blacklist,w=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),w=null===w||void 0===w||w===!1?w:ABINE_DNTME.Duckbone.Handlebars.getAttr(w,"phoneOff"),k=a["if"],A=T.program(25,g,i),A.hash={},A.fn=A,A.inverse=T.program(27,y,i),w=k.call(t,w,A),(w||0===w)&&(N+=w),N+=">",w="mm_dntme_masking_phone",E=a.intl,k=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),w=typeof k===D?k.call(t,w,{hash:{}}):k===I?M.call(t,"intl",w,{hash:{}}):k,N+=x(w)+'</div>\n  <div class="word switch ',E=a.blacklist,w=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),w=null===w||void 0===w||w===!1?w:ABINE_DNTME.Duckbone.Handlebars.getAttr(w,"phoneOff"),k=a["if"],A=T.program(29,b,i),A.hash={},A.fn=A,A.inverse=T.program(31,v,i),w=k.call(t,w,A),(w||0===w)&&(N+=w),N+='">\n    <div class="knob"></div>\n  </div>\n  <div class="for">',w="mm_dntme_for_this_site",E=a.intl,k=E||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),w=typeof k===D?k.call(t,w,{hash:{}}):k===I?M.call(t,"intl",w,{hash:{}}):k,N+=x(w)+"</div>\n</div>\n\n"}),ABINE_DNTME.CompiledTemplates.dntme_dashboard_masking}),ABINE_DNTME.define("abine/views/maskingDashboard",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies","abine/views/pageTracker","abine/views/settingsChanged","abine/views/dntmePageBase","abine/timer"],function(e,t,a,n,i,r,s,o,l,c,d){var u=c.extend({templateName:"dntme_dashboard_masking",events:{"click .setting-row":"toggleSwitch","click .more-settings":"showSettings","click .go-back":"goBack","click a.maskingDashboard":"maskingDashboard"},afterInitialize:function(){if(this.doc=this.el.document,this.options.highlight){var t=this.$("#"+this.options.highlight);t&&t[0]&&(t[0].scrollIntoView(),t.addClass("highlight"))}this.options.timeout&&d.setTimeout(e.bind(function(){this.trigger("close")},this),this.options.timeout)},goBack:function(){this.trigger("change-dashboard","dashboard")},maskingDashboard:function(e){e.preventDefault(),s.webapp.openMasking(),this.trigger("close")},createChildren:function(){return this.children={},this.children}});return u}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_dashboard_settings=e.template(function(e,t,a,n,i){function r(e,t){var n,i,r="";return r+=" <!-- hacky way to prevent render until model is fetched... duckbone lifecycle... -->\n\n<!-- HEADER BARS -->\n",y=a.inline,n=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"inline"),i=a.unless,b=v.program(2,s,t),b.hash={},b.fn=b,b.inverse=v.noop,n=i.call(e,n,b),(n||0===n)&&(r+=n),r+='\n\n<!-- SITE SPECIFIC SETTINGS PAGE -->\n<div id="site-settings-page" class="site-specific">\n  ',n="trackingSettings",y=a.child,i=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"child"),n=typeof i===w?i.call(e,n,{hash:{}}):i===E?k.call(e,"child",n,{hash:{}}):i,r+=A(n)+"\n  ",y=a.showSiteTrackers,n=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"showSiteTrackers"),i=a["if"],b=v.program(11,u,t),b.hash={},b.fn=b,b.inverse=v.noop,n=i.call(e,n,b),(n||0===n)&&(r+=n),r+="\n  ",n="accountSettings",y=a.child,i=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"child"),n=typeof i===w?i.call(e,n,{hash:{}}):i===E?k.call(e,"child",n,{hash:{}}):i,r+=A(n)+"\n  ",n="walletSettings",y=a.child,i=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"child"),n=typeof i===w?i.call(e,n,{hash:{}}):i===E?k.call(e,"child",n,{hash:{}}):i,r+=A(n)+"\n  ",n="maskingSettings",y=a.child,i=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"child"),n=typeof i===w?i.call(e,n,{hash:{}}):i===E?k.call(e,"child",n,{hash:{}}):i,r+=A(n)+"\n",y=a.inline,n=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"inline"),i=a.unless,b=v.program(13,p,t),b.hash={},b.fn=b,b.inverse=v.noop,n=i.call(e,n,b),(n||0===n)&&(r+=n),r+="\n</div>\n\n",y=a.inline,n=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"inline"),i=a.unless,b=v.program(16,h,t),b.hash={},b.fn=b,b.inverse=v.noop,n=i.call(e,n,b),(n||0===n)&&(r+=n),r+="\n\n"}function s(e,t){var n,i,r="";return r+='\n<div class="settings-header clearfix site-specific">\n    <div id="go-back-to-dashboard-btn" style="position:absolute;top:1px;left:10px;" class="go-back"><img src="',n="/pages/images/back.png",y=a.assetUrl,i=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),n=typeof i===w?i.call(e,n,{hash:{}}):i===E?k.call(e,"assetUrl",n,{hash:{}}):i,r+=A(n)+'" width="18px;"/> ',n="mm_dntme_back",y=a.intl,i=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===w?i.call(e,n,{hash:{}}):i===E?k.call(e,"intl",n,{hash:{}}):i,r+=A(n)+'</div>\n    <div class="title" title="',y=a.host,n=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"host"),typeof n===w?n=n.call(e,{hash:{}}):n===E&&(n=k.call(e,"host",{hash:{}})),r+=A(n)+'" style="position:absolute;height:80px;top:5px;right:30px;width:180px;">\n      <span style="display:block;font-size:16px;font-weight:lighter;">',
n="mm_dntme_settings_for",y=a.intl,i=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===w?i.call(e,n,{hash:{}}):i===E?k.call(e,"intl",n,{hash:{}}):i,r+=A(n)+'</span>\n      <span class="boldFont" style="font-size:20px;">',y=a.host,n=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"host"),typeof n===w?n=n.call(e,{hash:{}}):n===E&&(n=k.call(e,"host",{hash:{}})),r+=A(n)+'</span>\n    </div>\n</div>\n<div class="settings-header clearfix global-settings" style="display: none;">\n  <div id="go-back-to-site-settings-btn" class="go-back"><img src="',n="/pages/images/back.png",y=a.assetUrl,i=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),n=typeof i===w?i.call(e,n,{hash:{}}):i===E?k.call(e,"assetUrl",n,{hash:{}}):i,r+=A(n)+'" width="18px;"/> ',n="mm_dntme_back",y=a.intl,i=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===w?i.call(e,n,{hash:{}}):i===E?k.call(e,"intl",n,{hash:{}}):i,r+=A(n)+'</div>\n  <div class="version">\n        ',y=a.new_version,n=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"new_version"),i=a["if"],b=v.program(3,o,t),b.hash={},b.fn=b,b.inverse=v.program(5,l,t),n=i.call(e,n,b),(n||0===n)&&(r+=n),r+='\n  </div>\n</div>\n<div class="ignore-settings settings-header clearfix" style="display:none">\n  <div id="ig-go-back-to-site-settings-btn" class="go-back"><img src="',n="/pages/images/back.png",y=a.assetUrl,i=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),n=typeof i===w?i.call(e,n,{hash:{}}):i===E?k.call(e,"assetUrl",n,{hash:{}}):i,r+=A(n)+'" width="18px;"/> ',n="mm_dntme_back",y=a.intl,i=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===w?i.call(e,n,{hash:{}}):i===E?k.call(e,"intl",n,{hash:{}}):i,r+=A(n)+'</div>\n  <div class="version">\n        ',y=a.new_version,n=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"new_version"),i=a["if"],b=v.program(7,c,t),b.hash={},b.fn=b,b.inverse=v.program(9,d,t),n=i.call(e,n,b),(n||0===n)&&(r+=n),r+="\n  </div>\n</div>\n\n",n="settingsChanged",y=a.child,i=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"child"),n=typeof i===w?i.call(e,n,{hash:{}}):i===E?k.call(e,"child",n,{hash:{}}):i,r+=A(n)+"\n"}function o(e){var t,n,i,r="";return r+='\n          <a href=# id="newVersion" class="info-message"\n             title="',t="mm_dntme_your_version",y=a.intl,n=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===w?n.call(e,t,{hash:{}}):n===E?k.call(e,"intl",t,{hash:{}}):n,r+=A(t)+" ",t="version",y=a.configVar,n=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"configVar"),t=typeof n===w?n.call(e,t,{hash:{}}):n===E?k.call(e,"configVar",t,{hash:{}}):n,r+=A(t)+'">',y=a.new_version,t=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"new_version"),n="mm_dntme_new_version_available",y=a.intl,i=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===w?i.call(e,n,t,{hash:{}}):i===E?k.call(e,"intl",n,t,{hash:{}}):i,r+=A(t)+"</a>\n        "}function l(e){var t,n,i="";return i+="\n          ",t="mm_dntme_version",y=a.intl,n=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===w?n.call(e,t,{hash:{}}):n===E?k.call(e,"intl",t,{hash:{}}):n,i+=A(t)+" ",t="version",y=a.configVar,n=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"configVar"),t=typeof n===w?n.call(e,t,{hash:{}}):n===E?k.call(e,"configVar",t,{hash:{}}):n,i+=A(t)+"\n        "}function c(e){var t,n,i,r="";return r+='\n          <a href=# class="newVersion" class="info-message"\n             title="',t="mm_dntme_your_version",y=a.intl,n=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===w?n.call(e,t,{hash:{}}):n===E?k.call(e,"intl",t,{hash:{}}):n,r+=A(t)+" ",t="version",y=a.configVar,n=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"configVar"),t=typeof n===w?n.call(e,t,{hash:{}}):n===E?k.call(e,"configVar",t,{hash:{}}):n,r+=A(t)+'">',y=a.new_version,t=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"new_version"),n="mm_dntme_new_version_available",y=a.intl,i=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===w?i.call(e,n,t,{hash:{}}):i===E?k.call(e,"intl",n,t,{hash:{}}):i,r+=A(t)+"</a>\n        "}function d(e){var t,n,i="";return i+="\n          ",t="mm_dntme_version",y=a.intl,n=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===w?n.call(e,t,{hash:{}}):n===E?k.call(e,"intl",t,{hash:{}}):n,i+=A(t)+" ",t="version",y=a.configVar,n=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"configVar"),t=typeof n===w?n.call(e,t,{hash:{}}):n===E?k.call(e,"configVar",t,{hash:{}}):n,i+=A(t)+"\n        "}function u(e){var t,n;return t="siteTrackers",y=a.child,n=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"child"),t=typeof n===w?n.call(e,t,{hash:{}}):n===E?k.call(e,"child",t,{hash:{}}):n,A(t)}function p(e,t){var n,i,r="";return r+='\n  <div class="clearfix" style="border-top:1px solid #cccccc">\n    <div style="float:left;margin:0px 0px 0px 10px;">\n      ',n="mm_dntme_version",y=a.intl,i=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===w?i.call(e,n,{hash:{}}):i===E?k.call(e,"intl",n,{hash:{}}):i,r+=A(n)+" ",n="version",y=a.configVar,i=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"configVar"),n=typeof i===w?i.call(e,n,{hash:{}}):i===E?k.call(e,"configVar",n,{hash:{}}):i,r+=A(n)+"\n      ",n="Chrome",y=a.unlessBrowser,i=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"unlessBrowser"),b=v.program(14,m,t),b.hash={},b.fn=b,b.inverse=v.noop,n=y&&typeof i===w?i.call(e,n,b):N.call(e,i,n,b),(n||0===n)&&(r+=n),r+='\n    </div>\n    <div style="float:right;margin-right:10px;" class="otherSettings">\n        <div id="global-settings-btn" style="text-align:center;cursor:pointer;"><a>',n="mm_dntme_settings_for_all_sites",y=a.intl,i=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===w?i.call(e,n,{hash:{}}):i===E?k.call(e,"intl",n,{hash:{}}):i,r+=A(n)+'</a></div>\n        <div class="ignore-settings-btn" style="text-align:center;cursor:pointer;"><a>',n="mm_dntme_settings_ignore",y=a.intl,i=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===w?i.call(e,n,{hash:{}}):i===E?k.call(e,"intl",n,{hash:{}}):i,r+=A(n)+"</a></div>\n    </div>\n  </div>\n"}function m(e){var t,n,i="";return i+='\n        <br/>\n        <a href="#" class="checkForNewVersion">\n          <span>',t="mm_dntme_check_for_version",y=a.intl,n=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===w?n.call(e,t,{hash:{}}):n===E?k.call(e,"intl",t,{hash:{}}):n,i+=A(t)+'</span>\n          <img class="loading" style="display:none;" src="',t="/pages/images/ajax_loader.gif",y=a.assetUrl,n=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===w?n.call(e,t,{hash:{}}):n===E?k.call(e,"assetUrl",t,{hash:{}}):n,i+=A(t)+'"/>\n        </a>\n        <a href="#" style="display: none;" class="newVersionAvailable"></a>\n        <span style="display: none;" class="latestVersion">',t="mm_dntme_latest_version",y=a.intl,n=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===w?n.call(e,t,{hash:{}}):n===E?k.call(e,"intl",t,{hash:{}}):n,i+=A(t)+"</span>\n      "}function h(e,t){var n,i,r="";return r+='\n\n<!-- GLOBAL SETTINGS PAGE -->\n<div id="global-settings-page" class="settings global-settings" style="display: none;">\n\n  <!-- GLOBAL PANEL SETTINGS SECTION -->\n  <div id="global-panel-settings" class="global-panel-settings">\n    <div style="margin: 0px 0px 10px 30px;">\n      <div class="btn " disabled>',n="mm_dntme_panel_settings",y=a.intl,i=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===w?i.call(e,n,{hash:{}}):i===E?k.call(e,"intl",n,{hash:{}}):i,r+=A(n)+'</div>\n      <div id="global-preferences-btn" class="btn btn-primary">',n="mm_dntme_more_settings_capitalized",y=a.intl,i=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===w?i.call(e,n,{hash:{}}):i===E?k.call(e,"intl",n,{hash:{}}):i,r+=A(n)+"</div>\n    </div>\n    ",n="features",y=a.child,i=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"child"),n=typeof i===w?i.call(e,n,{hash:{}}):i===E?k.call(e,"child",n,{hash:{}}):i,r+=A(n)+'\n    <div class="global-language dntme_global_feature">\n      <div id="browsing" class="clearfix setting-row feature browsing">\n        <div class="message" title="" style="width:160px;" data-original-title="">Your language is: </div>\n        <select id="language" style="width:100px!important;">\n            <option value="en">English</option>\n            <option value="es">Spanish</option>\n            <option value="de">German</option>\n            <option value="pl">Polish</option>\n            <option value="pt">Portuguese</option>\n            <option value="zh">Chinese</option>\n            <option value="nl">Dutch</option>\n            <option value="it">Italian</option>\n            <option value="fr">French</option>\n        </select>\n      </div>\n    </div>\n    <div id="site-specific-settings-btn" style="text-align:center;cursor:pointer;"><a>',n="mm_dntme_settings_for_current_site",y=a.intl,i=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===w?i.call(e,n,{hash:{}}):i===E?k.call(e,"intl",n,{hash:{}}):i,r+=A(n)+'</a></div>\n    <div class="ignore-settings-btn" style="text-align:center;cursor:pointer;"><a>',n="mm_dntme_settings_ignore",y=a.intl,i=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===w?i.call(e,n,{hash:{}}):i===E?k.call(e,"intl",n,{hash:{}}):i,r+=A(n)+'</a></div>\n  </div>\n\n  <!-- GLOBAL PREFERENCES SECTION -->\n  <div id="global-preferences" class="global-preferences">\n    <div style="margin: 0px 0px 10px 30px;">\n        <div id="global-panel-settings-btn" class="btn btn-primary">',n="mm_dntme_panel_settings",y=a.intl,i=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===w?i.call(e,n,{hash:{}}):i===E?k.call(e,"intl",n,{hash:{}}):i,r+=A(n)+'</div>\n        <div class="btn" disabled>',n="mm_dntme_more_settings_capitalized",y=a.intl,i=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===w?i.call(e,n,{hash:{}}):i===E?k.call(e,"intl",n,{hash:{}}):i,r+=A(n)+'</div>\n    </div>\n\n    <div style="margin: 0px 0px 15px 10px;">\n      ',n="preferences",y=a.child,i=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"child"),n=typeof i===w?i.call(e,n,{hash:{}}):i===E?k.call(e,"child",n,{hash:{}}):i,r+=A(n)+"\n    </div>\n\n    ",y=a.maskmeInstalled,n=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"maskmeInstalled"),i=a.unless,b=v.program(17,_,t),b.hash={},b.fn=b,b.inverse=v.noop,n=i.call(e,n,b),(n||0===n)&&(r+=n),r+='\n  </div>\n\n</div>\n\n<div class="ignore-settings" style="display: none;">\n',n="ignoreSettings",y=a.child,i=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"child"),n=typeof i===w?i.call(e,n,{hash:{}}):i===E?k.call(e,"child",n,{hash:{}}):i,r+=A(n)+"\n<br/>\n</div>\n"}function _(e){var t,n,i="";return i+='\n    <div>\n      <a href=# class="more-options">\n        ',t="mm_dntme_more_options_in_dashboard",y=a.intl,n=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===w?n.call(e,t,{hash:{}}):n===E?k.call(e,"intl",t,{hash:{}}):n,i+=A(t)+"\n      </a>\n    </div>\n    "}a=a||e.helpers;var f,g,y,b,v=this,w="function",k=a.helperMissing,E=void 0,A=this.escapeExpression,N=a.blockHelperMissing;return y=a.blacklist,f=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),g=a["if"],b=v.program(1,r,i),b.hash={},b.fn=b,b.inverse=v.noop,f=g.call(t,f,b),f||0===f?f:""}),ABINE_DNTME.CompiledTemplates.dntme_dashboard_settings}),ABINE_DNTME.define("abine/views/settingsDashboard",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies","abine/views/maskingDashboard","abine/views/walletDashboard","abine/views/ignoreSettings","abine/views/accountsDashboard","abine/views/settingsChanged","abine/views/trackerBlocking","abine/views/trackers","abine/views/features","abine/views/preferences","abine/views/trustedSites","abine/views/dntmePageBase","abine/timer","abine/intl"],function(e,t,a,n,i,r,s,o,l,c,d,u,p,m,h,_,f,g,y,b){var v=(a.View.extend({templateName:"dntme_empty"}),a.View.extend({className:"dntme_settings settings",templateName:"dntme_dashboard_settings",events:{"click .more-options":"moreOptions","click #viewAllTrackers":"viewAllTrackers","click #hideAllTrackers":"hideAllTrackers","click #reloadTrackers":"reload","click #newVersion":"downloadNewVersion","click .checkForNewVersion":"checkForNewVersion","click .latestVersion":"checkForNewVersion","click .newVersionAvailable":"downloadNewVersion","click #global-settings-btn":"showGlobalPanelSettings","click #global-panel-settings-btn":"showGlobalPanelSettings","click .ignore-settings-btn":"showIgnoreSettings","click #global-preferences-btn":"showGlobalPreferences","click #go-back-to-site-settings-btn":"showSiteSpecificSettings","click #ig-go-back-to-site-settings-btn":"showSiteSpecificSettings","click #go-back-to-dashboard-btn":"showDashboard","click #site-specific-settings-btn":"showSiteSpecificSettings","change #language":"changeLanguage"},changeLanguage:function(){var e=this.$("#language"),t=new n.PreferenceCollection({});t.setPref("dnt_language",e.val()),b.setupLocale(e.val(),function(){})},reload:function(){var e=this,t=0,a=[],n=function(){if(t++,2==t){if(e.options.switchTo)switch(e.options.settingsView="site-settings",e.options.highlight){case"acctGroup":a=["#account","#password"];break;case"maskingGroup":a=["#email","#phone","#card"];break;case"walletGroup":a=["#suggestRealCard","#suggestAddresses","#card","#suggestIdentities","#saveCard"];break;case"trackingGroup":a=["#trackers"];break;default:a=["#"+e.options.highlight]}e.renderView(e.options.settingsView||"site-settings",a,e.options.switchTo),delete e.options.settingsView,delete e.options.switchTo}};this.options.tabData.fetch({success:n}),this.options.globalData.fetch({success:n})},downloadNewVersion:function(e){e.preventDefault(),s.securityManager.openPage("https://link.abine.com/blur-"+ABINE_DNTME.config.browser.toLowerCase()+"-latest"),this.trigger("close")},checkForNewVersion:function(){this.$(".latestVersion, .newVersionAvailable").hide(),this.$(".checkForNewVersion, .checkForNewVersion .loading").show(),this.$(".checkForNewVersion span").text(b.getText("mm_dntme_checking_for_new_version"));var t=new n.ExtensionVersion;t.fetch({success:e.bind(function(){if(this.$(".checkForNewVersion .loading, .otherSettings, .checkForNewVersion").hide(),t.get("newVersionAvailable")){var e=this.$(".newVersionAvailable");e.text(b.getText("mm_dntme_new_version_available_click_here",[t.get("version")])).show(),e.attr("href","https://link.abine.com/blur-"+ABINE_DNTME.config.browser.toLowerCase()+"-latest")}else this.$(".latestVersion, .otherSettings").show()},this)})},showGlobalPanelSettings:function(){var e=b.getLang();this.$("#language").val(e),this.$(".site-specific, .global-preferences, .dntme_page_settings_changed").hide(),this.$(".global-settings, .global-panel-settings").show(),this.trigger("resize")},showGlobalPreferences:function(){this.$(".site-specific, .global-panel-settings, .dntme_page_settings_changed").hide(),this.$(".global-settings, .global-preferences").show(),this.trigger("resize")},showIgnoreSettings:function(){this.$(".site-specific, .global-settings, .global-panel-settings, .site-specific, .dntme_page_settings_changed").hide(),this.$(".ignore-settings").show(),this.trigger("resize")},showDashboard:function(){this.trigger("showPageView"),this.$(".settings-link").show()},showSiteSpecificSettings:function(t,a,n){this.$(".global-preferences, .global-settings, .global-panel-settings").hide(),this.$(".ignore-settings").hide(),this.$(".site-specific, .dntme_page_settings_changed").show(),a&&e(a).each(e.bind(function(e){var t=this.$("#site-settings-page "+e+" div.switch."+n)[0];if(t&&t.click(),"#account"==e){var t=this.$("#site-settings-page "+e+" div.switch."+n)[1];t&&t.click()}},this)),this.trigger("resize")},moreOptions:function(e){e.preventDefault(),s.webapp.openSettings()},viewAllTrackers:function(e){e.preventDefault(),this.showTrackers=!0,this.reload("global-panel-settings")},hideAllTrackers:function(e){e.preventDefault(),this.showTrackers=!1,this.reload("global-panel-settings")},afterInitialize:function(){this.doc=this.el.ownerDocument,this.model=this.options.tabData,this.model.inline=this.options.inline,this.model.on("reloaded",e.bind(function(){if(t(".message, .info-message",this.el.ownerDocument).tooltip({delay:0}),this.options.highlight){var a="#"+this.options.highlight;a.match(/card/)&&(a="#card, #suggestRealCard"),a.match(/identity/)&&(a="#suggestIdentities"),a.match(/address/)&&(a="#address, #suggestAddresses"),a.match(/password/)&&(a="#password, #suggestStrongPassword"),a.match(/account/)&&(a="#account, #rememberAccounts, #helpMeLogin, #submitAccount"),a.match(/acctGroup/)&&(a="#account, #password, #rememberAccounts, #helpMeLogin, #submitAccount, #suggestStrongPassword"),a.match(/walletGroup/)&&(a="#suggestRealCard, #suggestAddresses, #card, #suggestIdentities, #saveCard, #rememberCards"),a.match(/maskingGroup/)&&(a="#email, #phone, #card"),a.match(/trackingGroup/)&&(a="#browsing, #trackers");var n=this.$(a);n.length&&n.addClass("highlight")}this.options.timeout&&y.setTimeout(e.bind(function(){this.trigger("close")},this),this.options.timeout)},this)),this.model.on("open-global-setting",e.bind(function(e){this.options.highlight=e.highlight,this.renderView("global-panel-settings")},this)),this.model.on("settings-changed",e.bind(function(e){t(".message, .info-message",this.el.ownerDocument).tooltip({delay:0}),this.children.settingsChanged.update(e.feature)},this)),this.reload()},renderView:function(e,t,a){switch(this.render(),this.model.trigger("reloaded"),e){case"site-settings":this.showSiteSpecificSettings(null,t,a);break;case"global-panel-settings":this.showGlobalPanelSettings();break;case"global-preferences":this.showGlobalPreferences()}},createChildren:function(){var t=e.extend({},this.options,{model:this.options.tabData});return delete t.el,this.children={settingsChanged:new u(t),trackingSettings:new p(t),maskingSettings:new o(t),accountSettings:new d(t),ignoreSettings:new c(t),walletSettings:new l(t),features:new h({collection:this.options.globalData.globalFeatures,doc:this.el.ownerDocument,highlight:this.options.highlight}),preferences:new _({collection:this.options.globalData.preferences,doc:this.el.ownerDocument}),trustedSites:new f({collection:this.options.globalData.blacklist,doc:this.el.ownerDocument})},this.children.settingsChanged.transferEvents(["resize"],this),this.children.ignoreSettings.transferEvents(["resize"],this),this.children}}));return v}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_dashboard_tracker_blocking=e.template(function(e,t,a,n,i){function r(){return"off"}function s(e){var t,n,i,r="";return r+='"',t="this site",n="mm_dntme_help_what_will_happen_on_browsing",p=a.intl,i=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===f?i.call(e,n,t,{hash:{}}):i===y?g.call(e,"intl",n,t,{hash:{}}):i,r+=b(t)+'"'}function o(e){var t,n,i,r="";return r+='"',t="this site",n="mm_dntme_help_what_will_happen_off_browsing",p=a.intl,i=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===f?i.call(e,n,t,{hash:{}}):i===y?g.call(e,"intl",n,t,{hash:{}}):i,r+=b(t)+'"'}function l(){return"off"}function c(){return"on"}a=a||e.helpers;var d,u,p,m,h="",_=this,f="function",g=a.helperMissing,y=void 0,b=this.escapeExpression;return h+='<div id="trackers" class="clearfix setting-row ',p=a.blacklist,d=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),d=null===d||void 0===d||d===!1?d:ABINE_DNTME.Duckbone.Handlebars.getAttr(d,"trackerOff"),u=a["if"],m=_.program(1,r,i),m.hash={},m.fn=m,m.inverse=_.noop,d=u.call(t,d,m),(d||0===d)&&(h+=d),h+='" data-type="blacklist" data-name="tracker">\n  <div class="message" style="width:160px;" title=',p=a.blacklist,d=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),d=null===d||void 0===d||d===!1?d:ABINE_DNTME.Duckbone.Handlebars.getAttr(d,"trackerOff"),u=a["if"],m=_.program(3,s,i),m.hash={},m.fn=m,m.inverse=_.program(5,o,i),d=u.call(t,d,m),(d||0===d)&&(h+=d),h+=">",d="mm_dntme_tracking_blocker",p=a.intl,u=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),d=typeof u===f?u.call(t,d,{hash:{}}):u===y?g.call(t,"intl",d,{hash:{}}):u,h+=b(d)+'</div>\n  <div class="word switch ',p=a.blacklist,d=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),d=null===d||void 0===d||d===!1?d:ABINE_DNTME.Duckbone.Handlebars.getAttr(d,"trackerOff"),u=a["if"],m=_.program(7,l,i),m.hash={},m.fn=m,m.inverse=_.program(9,c,i),d=u.call(t,d,m),(d||0===d)&&(h+=d),h+='">\n    <div class="knob"></div>\n  </div>\n  <div class="for">',d="mm_dntme_for_this_site",p=a.intl,u=p||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),d=typeof u===f?u.call(t,d,{hash:{}}):u===y?g.call(t,"intl",d,{hash:{}}):u,h+=b(d)+"</div>\n</div>"}),ABINE_DNTME.CompiledTemplates.dntme_dashboard_tracker_blocking}),ABINE_DNTME.define("abine/views/trackerBlocking",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies","abine/views/pageTracker","abine/views/settingsChanged","abine/views/dntmePageBase","abine/timer"],function(e,t,a,n,i,r,s,o,l,c,d){var u=c.extend({templateName:"dntme_dashboard_tracker_blocking",events:{"click .setting-row":"toggleSwitch","click .more-settings":"showSettings","click .go-back":"goBack"},afterInitialize:function(){if(this.doc=this.el.document,this.options.highlight){var t=this.$("#"+this.options.highlight);t&&t[0]&&(t[0].scrollIntoView(),t.addClass("highlight"))}this.options.timeout&&d.setTimeout(e.bind(function(){this.trigger("close")},this),this.options.timeout)},goBack:function(){this.trigger("change-dashboard","dashboard")},createChildren:function(){return this.children={},this.children}});return u}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_dashboard_tracking=e.template(function(e,t,a){a=a||e.helpers;var n,i,r,s="function",o=a.helperMissing,l=void 0,c=this.escapeExpression;return n="trackerSection",r=a.child,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"),n=typeof i===s?i.call(t,n,{hash:{}}):i===l?o.call(t,"child",n,{hash:{}}):i,c(n)}),ABINE_DNTME.CompiledTemplates.dntme_dashboard_tracking}),ABINE_DNTME.define("abine/views/trackingDashboard",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies","abine/views/pageTracker","abine/views/settingsChanged","abine/views/dntmePageBase"],function(e,t,a,n,i,r,s,o,l,c){var d=c.extend({templateName:"dntme_dashboard_tracking",events:{"click .setting-row":"toggleSwitch","click .suggested":"openSuggested","click a.who":"openWhoAreThey"},openSuggested:function(e){e.preventDefault(),s.securityManager.openLink({type:"recommended",host:this.model.get("host")})},openWhoAreThey:function(e){e.preventDefault(),s.webapp.openUnderstandingTracking(),this.trigger("close")},afterInitialize:function(){this.doc=this.el.document},createChildren:function(){return this.children={trackerSection:new o({model:this.model,doc:this.el.ownerDocument,withGoBack:!0})},this.children.trackerSection.on("trackerToggled",e.bind(this.trackerToggled,this)),this.children.trackerSection.transferEvents(["resize","close","change-dashboard"],this),this.children}});return d}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_dashboard_wallet=e.template(function(e,t,a,n,i){function r(){return"off"}function s(e){var t,n,i="";return i+='"',t="mm_dntme_help_what_will_happen_on_suggestrealcard",D=a.intl,n=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===C?n.call(e,t,{hash:{}}):n===B?S.call(e,"intl",t,{hash:{}}):n,i+=P(t)+'"'}function o(e){var t,n,i="";return i+='"',t="mm_dntme_help_what_will_happen_off_suggestrealcard",D=a.intl,n=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===C?n.call(e,t,{hash:{}}):n===B?S.call(e,"intl",t,{hash:{}}):n,i+=P(t)+'"'}function l(){return"off"}function c(){return"on"}function d(){return"off"}function u(e){var t,n,i="";return i+='"',t="mm_dntme_help_what_will_happen_on_suggestidentities",D=a.intl,n=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===C?n.call(e,t,{hash:{}}):n===B?S.call(e,"intl",t,{hash:{}}):n,i+=P(t)+'"'}function p(e){var t,n,i="";return i+='"',t="mm_dntme_help_what_will_happen_off_suggestidentities",D=a.intl,n=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===C?n.call(e,t,{hash:{}}):n===B?S.call(e,"intl",t,{hash:{}}):n,i+=P(t)+'"'}function m(){return"off"}function h(){return"on"}function _(){return"off"}function f(e){var t,n,i="";return i+='"',t="mm_dntme_help_what_will_happen_on_suggestaddresses",D=a.intl,n=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===C?n.call(e,t,{hash:{}}):n===B?S.call(e,"intl",t,{hash:{}}):n,i+=P(t)+'"'}function g(e){var t,n,i="";return i+='"',t="mm_dntme_help_what_will_happen_off_suggestaddresses",D=a.intl,n=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===C?n.call(e,t,{hash:{}}):n===B?S.call(e,"intl",t,{hash:{}}):n,i+=P(t)+'"'}function y(){return"off"}function b(){return"on"}function v(){return"off"}function w(e){var t,n,i="";return i+='"',t="mm_dntme_help_what_will_happen_on_save_card",D=a.intl,n=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===C?n.call(e,t,{hash:{}}):n===B?S.call(e,"intl",t,{hash:{}}):n,i+=P(t)+'"'}function k(e){var t,n,i="";return i+='"',t="mm_dntme_help_what_will_happen_off_save_card",D=a.intl,n=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===C?n.call(e,t,{hash:{}}):n===B?S.call(e,"intl",t,{hash:{}}):n,i+=P(t)+'"'}function E(){return"off"}function A(){return"on"}a=a||e.helpers;var N,T,D,M,I="",x=this,C="function",S=a.helperMissing,B=void 0,P=this.escapeExpression;return I+='<div id="suggestRealCard" class="clearfix setting-row ',D=a.blacklist,N=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),N=null===N||void 0===N||N===!1?N:ABINE_DNTME.Duckbone.Handlebars.getAttr(N,"realCardOff"),T=a["if"],M=x.program(1,r,i),M.hash={},M.fn=M,M.inverse=x.noop,N=T.call(t,N,M),(N||0===N)&&(I+=N),I+='" data-type="blacklist" data-name="real_card">\n  <div class="message" style="width:160px;" title=',D=a.blacklist,N=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),N=null===N||void 0===N||N===!1?N:ABINE_DNTME.Duckbone.Handlebars.getAttr(N,"realCardOff"),T=a["if"],M=x.program(3,s,i),M.hash={},M.fn=M,M.inverse=x.program(5,o,i),N=T.call(t,N,M),(N||0===N)&&(I+=N),I+=">",N="mm_dntme_wallet_real_card",D=a.intl,T=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),N=typeof T===C?T.call(t,N,{hash:{}}):T===B?S.call(t,"intl",N,{hash:{}}):T,I+=P(N)+'</div>\n  <div class="word switch ',D=a.blacklist,N=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),N=null===N||void 0===N||N===!1?N:ABINE_DNTME.Duckbone.Handlebars.getAttr(N,"realCardOff"),T=a["if"],M=x.program(7,l,i),M.hash={},M.fn=M,M.inverse=x.program(9,c,i),N=T.call(t,N,M),(N||0===N)&&(I+=N),I+='">\n    <div class="knob"></div>\n  </div>\n  <div class="for">',N="mm_dntme_for_this_site",D=a.intl,T=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),N=typeof T===C?T.call(t,N,{hash:{}}):T===B?S.call(t,"intl",N,{hash:{}}):T,I+=P(N)+'</div>\n</div>\n\n<div id="suggestIdentities" class="clearfix setting-row ',D=a.blacklist,N=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),N=null===N||void 0===N||N===!1?N:ABINE_DNTME.Duckbone.Handlebars.getAttr(N,"identityOff"),T=a["if"],M=x.program(11,d,i),M.hash={},M.fn=M,M.inverse=x.noop,N=T.call(t,N,M),(N||0===N)&&(I+=N),I+='" data-type="blacklist" data-name="identity">\n  <div class="message" style="width:160px;" title=',D=a.blacklist,N=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),N=null===N||void 0===N||N===!1?N:ABINE_DNTME.Duckbone.Handlebars.getAttr(N,"identityOff"),T=a["if"],M=x.program(13,u,i),M.hash={},M.fn=M,M.inverse=x.program(15,p,i),N=T.call(t,N,M),(N||0===N)&&(I+=N),I+=">",N="mm_dntme_wallet_identity",D=a.intl,T=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),N=typeof T===C?T.call(t,N,{hash:{}}):T===B?S.call(t,"intl",N,{hash:{}}):T,I+=P(N)+'</div>\n  <div class="word switch ',D=a.blacklist,N=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),N=null===N||void 0===N||N===!1?N:ABINE_DNTME.Duckbone.Handlebars.getAttr(N,"identityOff"),T=a["if"],M=x.program(17,m,i),M.hash={},M.fn=M,M.inverse=x.program(19,h,i),N=T.call(t,N,M),(N||0===N)&&(I+=N),I+='">\n    <div class="knob"></div>\n  </div>\n  <div class="for">',N="mm_dntme_for_this_site",D=a.intl,T=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),N=typeof T===C?T.call(t,N,{hash:{}}):T===B?S.call(t,"intl",N,{hash:{}}):T,I+=P(N)+'</div>\n</div>\n\n<div id="suggestAddresses" class="clearfix setting-row ',D=a.blacklist,N=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),N=null===N||void 0===N||N===!1?N:ABINE_DNTME.Duckbone.Handlebars.getAttr(N,"addressOff"),T=a["if"],M=x.program(21,_,i),M.hash={},M.fn=M,M.inverse=x.noop,N=T.call(t,N,M),(N||0===N)&&(I+=N),I+='" data-type="blacklist" data-name="address">\n  <div class="message" style="width:160px;" title=',D=a.blacklist,N=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),N=null===N||void 0===N||N===!1?N:ABINE_DNTME.Duckbone.Handlebars.getAttr(N,"addressOff"),T=a["if"],M=x.program(23,f,i),M.hash={},M.fn=M,M.inverse=x.program(25,g,i),N=T.call(t,N,M),(N||0===N)&&(I+=N),I+=">",N="mm_dntme_wallet_address",D=a.intl,T=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),N=typeof T===C?T.call(t,N,{hash:{}}):T===B?S.call(t,"intl",N,{hash:{}}):T,I+=P(N)+'</div>\n  <div class="word switch ',D=a.blacklist,N=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),N=null===N||void 0===N||N===!1?N:ABINE_DNTME.Duckbone.Handlebars.getAttr(N,"addressOff"),T=a["if"],M=x.program(27,y,i),M.hash={},M.fn=M,M.inverse=x.program(29,b,i),N=T.call(t,N,M),(N||0===N)&&(I+=N),I+='">\n    <div class="knob"></div>\n  </div>\n  <div class="for">',N="mm_dntme_for_this_site",D=a.intl,T=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),N=typeof T===C?T.call(t,N,{hash:{}}):T===B?S.call(t,"intl",N,{hash:{}}):T,I+=P(N)+'</div>\n</div>\n\n<div id="saveCard" class="clearfix setting-row ',D=a.blacklist,N=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),N=null===N||void 0===N||N===!1?N:ABINE_DNTME.Duckbone.Handlebars.getAttr(N,"saveCardOff"),T=a["if"],M=x.program(31,v,i),M.hash={},M.fn=M,M.inverse=x.noop,N=T.call(t,N,M),(N||0===N)&&(I+=N),I+='" data-type="blacklist" data-name="save_card">\n<div class="message" style="width:160px;" title=',D=a.blacklist,N=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),N=null===N||void 0===N||N===!1?N:ABINE_DNTME.Duckbone.Handlebars.getAttr(N,"saveCardOff"),T=a["if"],M=x.program(33,w,i),M.hash={},M.fn=M,M.inverse=x.program(35,k,i),N=T.call(t,N,M),(N||0===N)&&(I+=N),I+=">",N="mm_dntme_wallet_save_card",D=a.intl,T=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),N=typeof T===C?T.call(t,N,{hash:{}}):T===B?S.call(t,"intl",N,{hash:{}}):T,I+=P(N)+'</div>\n<div class="word switch ',D=a.blacklist,N=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),N=null===N||void 0===N||N===!1?N:ABINE_DNTME.Duckbone.Handlebars.getAttr(N,"saveCardOff"),T=a["if"],M=x.program(37,E,i),M.hash={},M.fn=M,M.inverse=x.program(39,A,i),N=T.call(t,N,M),(N||0===N)&&(I+=N),I+='">\n  <div class="knob"></div>\n</div>\n<div class="for">',N="mm_dntme_for_this_site",D=a.intl,T=D||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),N=typeof T===C?T.call(t,N,{hash:{}}):T===B?S.call(t,"intl",N,{hash:{}}):T,I+=P(N)+"</div>\n</div>\n"}),ABINE_DNTME.CompiledTemplates.dntme_dashboard_wallet}),ABINE_DNTME.define("abine/views/walletDashboard",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies","abine/views/pageTracker","abine/views/settingsChanged","abine/views/dntmePageBase","abine/timer"],function(e,t,a,n,i,r,s,o,l,c,d){var u=c.extend({templateName:"dntme_dashboard_wallet",events:{"click .setting-row":"toggleSwitch","click .more-settings":"showSettings","click .go-back":"goBack","click a.walletDashboard":"walletDashboard"},afterInitialize:function(){if(this.doc=this.el.document,this.options.highlight){var t=this.$("#"+this.options.highlight);t&&t[0]&&(t[0].scrollIntoView(),t.addClass("highlight"))}this.options.timeout&&d.setTimeout(e.bind(function(){this.trigger("close")},this),this.options.timeout)},goBack:function(){this.trigger("change-dashboard","dashboard")},walletDashboard:function(e){e.preventDefault(),s.webapp.openWallet(),this.trigger("close")},createChildren:function(){
return this.children={},this.children}});return u}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_empty=e.template(function(e,t,a){a=a||e.helpers;var n="";return n}),ABINE_DNTME.CompiledTemplates.dntme_empty}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_global_feature=e.template(function(e,t,a,n,i){function r(){return"off"}function s(){return"on"}function o(){return"off"}a=a||e.helpers;var l,c,d,u,p="",m=this,h="function",_=a.helperMissing,f=void 0,g=this.escapeExpression;return p+='<div class="clearfix setting-row feature ',d=a.value,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"value"),c=a.unless,u=m.program(1,r,i),u.hash={},u.fn=u,u.inverse=m.noop,l=c.call(t,l,u),(l||0===l)&&(p+=l),p+=" ",d=a.name,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"name"),typeof l===h?l=l.call(t,{hash:{}}):l===f&&(l=_.call(t,"name",{hash:{}})),p+=g(l)+'" id="',d=a.name,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"name"),typeof l===h?l=l.call(t,{hash:{}}):l===f&&(l=_.call(t,"name",{hash:{}})),p+=g(l)+'">\n  <div class="message" style="width:160px;" title="',d=a.getTooltip,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getTooltip"),typeof l===h?l=l.call(t,{hash:{}}):l===f&&(l=_.call(t,"getTooltip",{hash:{}})),p+=g(l)+'">',d=a.getLabel,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getLabel"),typeof l===h?l=l.call(t,{hash:{}}):l===f&&(l=_.call(t,"getLabel",{hash:{}})),p+=g(l)+'</div>\n  <div class="word switch ',d=a.value,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"value"),c=a["if"],u=m.program(3,s,i),u.hash={},u.fn=u,u.inverse=m.program(5,o,i),l=c.call(t,l,u),(l||0===l)&&(p+=l),p+='">\n    <div class="knob"></div>\n  </div>\n  <div class="for">',l="mm_dntme_for_all_sites",d=a.intl,c=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),l=typeof c===h?c.call(t,l,{hash:{}}):c===f?_.call(t,"intl",l,{hash:{}}):c,p+=g(l)+"</div>\n</div>"}),ABINE_DNTME.CompiledTemplates.dntme_global_feature}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_global_features=e.template(function(e,t,a,n,i){function r(e,t){var n,i,r="";return r+="\n  <legend>",n="mm_dntme_trusted_sites",d=a.intl,i=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===h?i.call(e,n,{hash:{}}):i===f?_.call(e,"intl",n,{hash:{}}):i,r+=g(n)+'<span class="info-message" title="',n="mm_dntme_help_trusted_sites",d=a.intl,i=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===h?i.call(e,n,{hash:{}}):i===f?_.call(e,"intl",n,{hash:{}}):i,r+=g(n)+'"> (',n="mm_dntme_info",d=a.intl,i=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===h?i.call(e,n,{hash:{}}):i===f?_.call(e,"intl",n,{hash:{}}):i,r+=g(n)+')</span></legend>\n  <div class="trusted-sites ',d=a.maskmeInstalled,n=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"maskmeInstalled"),i=a["if"],u=m.program(2,s,t),u.hash={},u.fn=u,u.inverse=m.noop,n=i.call(e,n,u),(n||0===n)&&(r+=n),r+='">\n    ',n="blacklist",d=a.child,i=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"child"),n=typeof i===h?i.call(e,n,{hash:{}}):i===f?_.call(e,"child",n,{hash:{}}):i,r+=g(n)+"\n  </div>\n"}function s(){return"maskme"}function o(e){var t,n,i="";return i+='\n<div>\n  <a href=# class="more-options">\n    ',t="mm_dntme_more_options_in_dashboard",d=a.intl,n=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===h?n.call(e,t,{hash:{}}):n===f?_.call(e,"intl",t,{hash:{}}):n,i+=g(t)+"\n  </a>\n</div>\n"}a=a||e.helpers;var l,c,d,u,p="",m=this,h="function",_=a.helperMissing,f=void 0,g=this.escapeExpression;return p+="<legend>",l="mm_dntme_global_defaults",d=a.intl,c=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),l=typeof c===h?c.call(t,l,{hash:{}}):c===f?_.call(t,"intl",l,{hash:{}}):c,p+=g(l)+'<span class="info-message" title="',l="mm_dntme_help_global_defaults",d=a.intl,c=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),l=typeof c===h?c.call(t,l,{hash:{}}):c===f?_.call(t,"intl",l,{hash:{}}):c,p+=g(l)+'"> (',l="mm_dntme_info",d=a.intl,c=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),l=typeof c===h?c.call(t,l,{hash:{}}):c===f?_.call(t,"intl",l,{hash:{}}):c,p+=g(l)+")</span></legend>\n",l="features",d=a.child,c=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"),l=typeof c===h?c.call(t,l,{hash:{}}):c===f?_.call(t,"child",l,{hash:{}}):c,p+=g(l)+"\n\n",d=a.blacklist,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),l=null===l||void 0===l||l===!1?l:ABINE_DNTME.Duckbone.Handlebars.getAttr(l,"length"),c=a["if"],u=m.program(1,r,i),u.hash={},u.fn=u,u.inverse=m.noop,l=c.call(t,l,u),(l||0===l)&&(p+=l),p+="\n\n",d=a.maskmeInstalled,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"maskmeInstalled"),c=a.unless,u=m.program(4,o,i),u.hash={},u.fn=u,u.inverse=m.noop,l=c.call(t,l,u),(l||0===l)&&(p+=l),p}),ABINE_DNTME.CompiledTemplates.dntme_global_features}),ABINE_DNTME.define("abine/views/features",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/intl"],function(e,t,a){var n=a.View.extend({tagName:"div",className:"dntme_global_feature",templateName:"dntme_global_feature",events:{"click .feature":"toggleFeature"},renderFeature:function(){this.render(),"search"==this.model.get("name")&&this.model.collection.messenger.send("private:search:toggle",{search:this.model.get("value")}),t(".info-message",this.el.ownerDocument).tooltip({delay:0})},toggleFeature:function(a){if("A"!=a.target.nodeName){var n=t(a.target);n.hasClass("feature")||(n=t(a.target).parents(".feature"));var i=t(".switch",n);t(i).data("changing")||(t(i).data("changing",!0),t(".knob",i).animate({marginLeft:this.model.get("value")?0:20},e.bind(function(){t(i).removeData("changing"),"search"==this.model.get("name")&&this.model.get("value")&&this.model.collection.messenger.send("update:panelActivity:closed",{panelId:7000002}),this.model.save({value:!this.model.get("value")},{success:e.bind(this.renderFeature,this)}),"browsing"==this.model.get("name")&&t("#reloadTrackers",this.el.ownerDocument).click()},this)))}}}),i=a.ListView.extend({tagName:"div",className:"",viewClass:n});return i}),ABINE_DNTME.define("abine/views/dntmeSettings",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/intl"],function(e,t,a,n,i,r,s){var o=a.View.extend({tagName:"div",className:"dntme_global_features",templateName:"dntme_global_features",createChildren:function(){return{}}}),l=i.extend({className:"dntme_settings",templateName:"dntme_global_main",events:{"click #viewAllTrackers":"viewAllTrackers","click #hideAllTrackers":"hideAllTrackers","click #reloadTrackers":"reload","click .more-options":"moreOptions","click #newVersion":"downloadNewVersion"},afterInitialize:function(){this.doc=this.el.ownerDocument,this.model=new n.GlobalData({messenger:this.options.messenger}),this.on("render",e.bind(function(){if(this.trigger("resize"),this.model.get("premium")?t(".premium",this.el.ownerDocument).text(s.getText("mm_dntme_premium")):t(".premium",this.el.ownerDocument).text(s.getText("mm_dntme_upgrade_to_premium")),this.$("img.info-message").tooltip({delay:0,placement:"bottom"}),this.$(".info-message").tooltip({delay:0}),this.options.highlight){var e=this.$("#"+this.options.highlight);e[0].scrollIntoView(),e.addClass("highlight")}},this)),this.model.bind("sync:success",e.bind(this.render,this))},createChildren:function(){return this.showTrackers?{}:{details:new o({model:this.model,doc:this.el.ownerDocument})}}});return l}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_global_main=e.template(function(e,t,a,n,i){function r(e){var t,n,i,r="";return r+='\n        <a href=# id="newVersion" class="info-message"\n           title="',t="mm_dntme_your_version",c=a.intl,n=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===m?n.call(e,t,{hash:{}}):n===_?h.call(e,"intl",t,{hash:{}}):n,r+=f(t)+" ",t="version",c=a.configVar,n=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"configVar"),t=typeof n===m?n.call(e,t,{hash:{}}):n===_?h.call(e,"configVar",t,{hash:{}}):n,r+=f(t)+'">',c=a.new_version,t=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"new_version"),n="mm_dntme_new_version_available",c=a.intl,i=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof i===m?i.call(e,n,t,{hash:{}}):i===_?h.call(e,"intl",n,t,{hash:{}}):i,r+=f(t)+"</a>\n      "}function s(e){var t,n,i="";return i+="\n        ",t="mm_dntme_version",c=a.intl,n=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===m?n.call(e,t,{hash:{}}):n===_?h.call(e,"intl",t,{hash:{}}):n,i+=f(t)+" ",t="version",c=a.configVar,n=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"configVar"),t=typeof n===m?n.call(e,t,{hash:{}}):n===_?h.call(e,"configVar",t,{hash:{}}):n,i+=f(t)+"\n      "}a=a||e.helpers;var o,l,c,d,u="",p=this,m="function",h=a.helperMissing,_=void 0,f=this.escapeExpression;return u+='<div class="settings">\n  <div class="settings-header clearfix">\n    <div class="go-back"><img src="',o="/pages/images/back.png",c=a.assetUrl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),o=typeof l===m?l.call(t,o,{hash:{}}):l===_?h.call(t,"assetUrl",o,{hash:{}}):l,u+=f(o)+'" width="18px;"/> ',o="mm_dntme_back",c=a.intl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof l===m?l.call(t,o,{hash:{}}):l===_?h.call(t,"intl",o,{hash:{}}):l,u+=f(o)+'</div>\n    <div class="version">\n      ',c=a.new_version,o=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"new_version"),l=a["if"],d=p.program(1,r,i),d.hash={},d.fn=d,d.inverse=p.program(3,s,i),o=l.call(t,o,d),(o||0===o)&&(u+=o),u+="\n    </div>\n  </div>\n\n  ",o="details",c=a.child,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"),o=typeof l===m?l.call(t,o,{hash:{}}):l===_?h.call(t,"child",o,{hash:{}}):l,u+=f(o)+"\n</div>"}),ABINE_DNTME.CompiledTemplates.dntme_global_main}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_global_preference=e.template(function(e,t,a,n,i){function r(){return"on"}function s(){return"off"}function o(e){var t,n;return t="/pages/images/selected.png",u=a.assetUrl,n=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===_?n.call(e,t,{hash:{}}):n===g?f.call(e,"assetUrl",t,{hash:{}}):n,y(t)}function l(e){var t,n;return t="/pages/images/unselected.png",u=a.assetUrl,n=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===_?n.call(e,t,{hash:{}}):n===g?f.call(e,"assetUrl",t,{hash:{}}):n,y(t)}a=a||e.helpers;var c,d,u,p,m="",h=this,_="function",f=a.helperMissing,g=void 0,y=this.escapeExpression;return m+='<div class="pref ',u=a.value,c=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"value"),d=a["if"],p=h.program(1,r,i),p.hash={},p.fn=p,p.inverse=h.program(3,s,i),c=d.call(t,c,p),(c||0===c)&&(m+=c),m+='" id="',u=a.getId,c=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getId"),typeof c===_?c=c.call(t,{hash:{}}):c===g&&(c=f.call(t,"getId",{hash:{}})),m+=y(c)+'">\n  <img width="16px" height="16px" src="',u=a.value,c=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"value"),d=a["if"],p=h.program(5,o,i),p.hash={},p.fn=p,p.inverse=h.program(7,l,i),c=d.call(t,c,p),(c||0===c)&&(m+=c),m+='"/>\n  <span>',u=a.getLabel,c=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getLabel"),typeof c===_?c=c.call(t,{hash:{}}):c===g&&(c=f.call(t,"getLabel",{hash:{}})),m+=y(c)+'</span><span class="info-message" title="',u=a.getTooltip,c=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getTooltip"),typeof c===_?c=c.call(t,{hash:{}}):c===g&&(c=f.call(t,"getTooltip",{hash:{}})),m+=y(c)+'"> (',c="mm_dntme_info",u=a.intl,d=u||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),c=typeof d===_?d.call(t,c,{hash:{}}):d===g?f.call(t,"intl",c,{hash:{}}):d,m+=y(c)+")</span>\n</div>"}),ABINE_DNTME.CompiledTemplates.dntme_global_preference}),ABINE_DNTME.define("abine/views/preferences",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/intl"],function(e,t,a){var n=a.View.extend({tagName:"div",templateName:"dntme_global_preference",className:"dntme_preference",events:{"click .pref":"togglePreference"},togglePreference:function(){this.model.save({value:!this.model.get("value")}),this.render(),t(".info-message",this.el.ownerDocument).tooltip({delay:0})}}),i=a.ListView.extend({tagName:"div",className:"preference-list",viewClass:n});return i}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_global_trackers=e.template(function(e,t,a){a=a||e.helpers;var n,i,r,s="",o="function",l=a.helperMissing,c=void 0,d=this.escapeExpression;return s+='<div class="trackers"><span id="reloadTrackers"></span>\n',n="globalTrackers",r=a.child,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"child",n,{hash:{}}):i,s+=d(n)+"\n</div>"}),ABINE_DNTME.CompiledTemplates.dntme_global_trackers}),ABINE_DNTME.define("abine/views/trackers",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/intl"],function(e,t,a){var n=a.View.extend({tagName:"div",templateName:"dntme_page_tracker",events:{"click .tracker":"toggleTracker"},toggleTracker:function(){this.model.save({blocked:!this.model.get("blocked")}),this.render()}}),i=a.ListView.extend({tagName:"div",className:"",viewClass:n});return i}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_global_trusted_site=e.template(function(e,t,a,n,i){function r(e,t){var n,i,r="";return r+='\n        <img src="',n="/pages/images/key-grey.png",y=a.assetUrl,i=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),n=typeof i===k?i.call(e,n,{hash:{}}):i===A?E.call(e,"assetUrl",n,{hash:{}}):i,r+=N(n)+'" width="16px" height="16px"\n             class="icon-key ',y=a.account,n=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"account"),i=a["if"],b=w.program(2,s,t),b.hash={},b.fn=b,b.inverse=w.program(4,o,t),n=i.call(e,n,b),(n||0===n)&&(r+=n),r+='" title="',n="mm_dntme_help_dont_save_accounts",y=a.intl,i=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===k?i.call(e,n,{hash:{}}):i===A?E.call(e,"intl",n,{hash:{}}):i,r+=N(n)+'" />\n    '}function s(){return"on"}function o(){return"off"}function l(){return"on"}function c(){return"off"}function d(){return"on"}function u(){return"off"}function p(){return"on"}function m(){return"off"}function h(){return"on"}function _(){return"off"}a=a||e.helpers;var f,g,y,b,v="",w=this,k="function",E=a.helperMissing,A=void 0,N=this.escapeExpression;return v+='<div class="clearfix site">\n  <span class="domain">',y=a.domain,f=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"domain"),typeof f===k?f=f.call(t,{hash:{}}):f===A&&(f=E.call(t,"domain",{hash:{}})),v+=N(f)+'</span>\n  <span class="icons">\n    ',y=a.globalAccounts,f=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"globalAccounts"),g=a["if"],b=w.program(1,r,i),b.hash={},b.fn=b,b.inverse=w.noop,f=g.call(t,f,b),(f||0===f)&&(v+=f),v+='\n      <img src="',f="/pages/images/maskcard-icon-grey.png",y=a.assetUrl,g=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),f=typeof g===k?g.call(t,f,{hash:{}}):g===A?E.call(t,"assetUrl",f,{hash:{}}):g,v+=N(f)+'" width="16px" height="11px"\n           class="icon-card ',y=a.card,f=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"card"),g=a["if"],b=w.program(6,l,i),b.hash={},b.fn=b,b.inverse=w.program(8,c,i),f=g.call(t,f,b),(f||0===f)&&(v+=f),v+='" title="',f="mm_dntme_help_trusted_card",y=a.intl,g=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),f=typeof g===k?g.call(t,f,{hash:{}}):g===A?E.call(t,"intl",f,{hash:{}}):g,v+=N(f)+'"/>\n      <img src="',f="/pages/images/maskphone-icon-grey.png",y=a.assetUrl,g=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),f=typeof g===k?g.call(t,f,{hash:{}}):g===A?E.call(t,"assetUrl",f,{hash:{}}):g,v+=N(f)+'" width="18px" height="18px"\n                 class="icon-phone ',y=a.phone,f=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"phone"),g=a["if"],b=w.program(10,d,i),b.hash={},b.fn=b,b.inverse=w.program(12,u,i),f=g.call(t,f,b),(f||0===f)&&(v+=f),v+='" title="',f="mm_dntme_help_trusted_phone",y=a.intl,g=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),f=typeof g===k?g.call(t,f,{hash:{}}):g===A?E.call(t,"intl",f,{hash:{}}):g,v+=N(f)+'"/>\n      <img src="',f="/pages/images/maskmail-icon-grey.png",y=a.assetUrl,g=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),f=typeof g===k?g.call(t,f,{hash:{}}):g===A?E.call(t,"assetUrl",f,{hash:{}}):g,v+=N(f)+'" width="18px" height="13px"\n                 class="icon-email ',y=a.email,f=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"email"),g=a["if"],b=w.program(14,p,i),b.hash={},b.fn=b,b.inverse=w.program(16,m,i),f=g.call(t,f,b),(f||0===f)&&(v+=f),v+='" title="',f="mm_dntme_help_trusted_email",y=a.intl,g=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),f=typeof g===k?g.call(t,f,{hash:{}}):g===A?E.call(t,"intl",f,{hash:{}}):g,v+=N(f)+'"/>\n      <img src="',f="/pages/images/globe-grey.png",y=a.assetUrl,g=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),f=typeof g===k?g.call(t,f,{hash:{}}):g===A?E.call(t,"assetUrl",f,{hash:{}}):g,v+=N(f)+'" width="16px" height="16px"\n           class="icon-tracker ',y=a.tracker,f=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"tracker"),g=a["if"],b=w.program(18,h,i),b.hash={},b.fn=b,b.inverse=w.program(20,_,i),f=g.call(t,f,b),(f||0===f)&&(v+=f),v+='" title="',f="mm_dntme_help_trusted_browsing",y=a.intl,g=y||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),f=typeof g===k?g.call(t,f,{hash:{}}):g===A?E.call(t,"intl",f,{hash:{}}):g,v+=N(f)+'" />\n  </span>\n</div>'}),ABINE_DNTME.CompiledTemplates.dntme_global_trusted_site}),ABINE_DNTME.define("abine/views/trustedSites",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/intl"],function(e,t,a){var n=a.View.extend({tagName:"div",className:"dntme_trusted_site",templateName:"dntme_global_trusted_site",events:{"click .icon-tracker":"toggleBrowsing","click .icon-email":"toggleEmail","click .icon-phone":"togglePhone","click .icon-card":"toggleCard","click .icon-key":"toggleAccount"},toggleBrowsing:function(){this.model.save({changed:"tracker",trusted:!0,tracker:!this.model.get("tracker")},{success:e.bind(this.render,this)})},toggleEmail:function(){this.model.save({changed:"email",trusted:!0,email:!this.model.get("email")},{success:e.bind(this.render,this)})},togglePhone:function(){this.model.save({changed:"phone",trusted:!0,phone:!this.model.get("phone")},{success:e.bind(this.render,this)})},toggleCard:function(){this.model.save({changed:"card",trusted:!0,card:!this.model.get("card")},{success:e.bind(this.render,this)})},toggleAccount:function(){this.model.save({changed:"account",trusted:!0,account:!this.model.get("account")},{success:e.bind(this.render,this)})}}),i=a.ListView.extend({tagName:"div",className:"",viewClass:n});return i}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_page_blacklist=e.template(function(e,t,a,n,i){function r(){return"off"}function s(){return"off"}function o(){return"on"}function l(){return"data-blacklisted=1"}function c(e,t){var n,i,r="";return r+="\n    ",J=a.tracker,n=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"tracker"),i=a["if"],Y=Z.program(10,d,t),Y.hash={},Y.fn=Y,Y.inverse=Z.program(12,u,t),n=i.call(e,n,Y),(n||0===n)&&(r+=n),r+="\n      </a>\n  "}function d(e){var t,n,i="";return i+='\n        <div class="skip suggested">',t="mm_dntme_suggested",J=a.intl,n=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===Q?n.call(e,t,{hash:{}}):n===te?ee.call(e,"intl",t,{hash:{}}):n,i+=ae(t)+"</div>\n    "}function u(e){var t,n,i="";return i+='\n        <div class="skip not suggested">',t="mm_dntme_not_suggested",J=a.intl,n=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===Q?n.call(e,t,{hash:{}}):n===te?ee.call(e,"intl",t,{hash:{}}):n,i+=ae(t)+"</div>\n    "}function p(e,t){var n,i,r="";return r+='\n<div class="clearfix feature ',J=a.globalEmail,n=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"globalEmail"),i=a["if"],Y=Z.program(15,m,t),Y.hash={},Y.fn=Y,Y.inverse=Z.noop,n=i.call(e,n,Y),(n||0===n)&&(r+=n),r+=" ",J=a.globalEmail,n=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"globalEmail"),i=a.unless,Y=Z.program(18,_,t),Y.hash={},Y.fn=Y,Y.inverse=Z.noop,n=i.call(e,n,Y),(n||0===n)&&(r+=n),r+='">\n  <div class="message">',n="mm_dntme_dont_track_email_here",J=a.intl,i=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===Q?i.call(e,n,{hash:{}}):i===te?ee.call(e,"intl",n,{hash:{}}):i,r+=ae(n)+'</div>\n  <div class="message messageHover">',n="mm_dntme_disabled_in_settings",J=a.intl,i=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===Q?i.call(e,n,{hash:{}}):i===te?ee.call(e,"intl",n,{hash:{}}):i,r+=ae(n)+'</div>\n  <div class="switch ',J=a.emailEnabled,n=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"emailEnabled"),i=a["if"],Y=Z.program(20,f,t),Y.hash={},Y.fn=Y,Y.inverse=Z.program(22,g,t),n=i.call(e,n,Y),(n||0===n)&&(r+=n),r+='" data-feature="email" ',J=a.emailEnabled,n=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"emailEnabled"),i=a.unless,Y=Z.program(24,y,t),Y.hash={},Y.fn=Y,Y.inverse=Z.noop,n=i.call(e,n,Y),(n||0===n)&&(r+=n),r+='>\n    <div class="knob"></div>\n  </div>\n  ',J=a.has_masked_emails,n=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"has_masked_emails"),i=a["if"],Y=Z.program(26,b,t),Y.hash={},Y.fn=Y,Y.inverse=Z.noop,n=i.call(e,n,Y),(n||0===n)&&(r+=n),r+='\n</div>\n<div class="clearfix feature ',J=a.globalCard,n=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"globalCard"),i=a["if"],Y=Z.program(28,v,t),Y.hash={},Y.fn=Y,Y.inverse=Z.noop,n=i.call(e,n,Y),(n||0===n)&&(r+=n),r+=" ",J=a.globalCard,n=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"globalCard"),i=a.unless,Y=Z.program(31,k,t),Y.hash={},Y.fn=Y,Y.inverse=Z.noop,n=i.call(e,n,Y),(n||0===n)&&(r+=n),r+='">\n    <div class="message">',n="mm_dntme_dont_track_card_here",J=a.intl,i=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===Q?i.call(e,n,{hash:{}}):i===te?ee.call(e,"intl",n,{hash:{}}):i,r+=ae(n)+'</div>\n    <div class="message messageHover">',n="mm_dntme_disabled_in_settings",J=a.intl,i=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===Q?i.call(e,n,{hash:{}}):i===te?ee.call(e,"intl",n,{hash:{}}):i,r+=ae(n)+'</div>\n    <div class="switch ',J=a.cardEnabled,n=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"cardEnabled"),i=a["if"],Y=Z.program(33,E,t),Y.hash={},Y.fn=Y,Y.inverse=Z.program(35,A,t),n=i.call(e,n,Y),(n||0===n)&&(r+=n),r+='" data-feature="card"  ',J=a.cardEnabled,n=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"cardEnabled"),i=a.unless,Y=Z.program(37,N,t),Y.hash={},Y.fn=Y,Y.inverse=Z.noop,n=i.call(e,n,Y),(n||0===n)&&(r+=n),r+='>\n        <div class="knob"></div>\n    </div>\n  ',J=a.hasEnabledCard,n=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"hasEnabledCard"),i=a["if"],Y=Z.program(39,T,t),Y.hash={},Y.fn=Y,Y.inverse=Z.noop,n=i.call(e,n,Y),(n||0===n)&&(r+=n),r+='\n</div>\n<div class="clearfix feature ',J=a.globalPhone,n=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"globalPhone"),i=a["if"],Y=Z.program(41,D,t),Y.hash={},Y.fn=Y,Y.inverse=Z.noop,n=i.call(e,n,Y),(n||0===n)&&(r+=n),r+=" ",J=a.globalPhone,n=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"globalPhone"),i=a.unless,Y=Z.program(44,I,t),Y.hash={},Y.fn=Y,Y.inverse=Z.noop,n=i.call(e,n,Y),(n||0===n)&&(r+=n),r+='">\n  <div class="message">',n="mm_dntme_dont_track_phone_here",J=a.intl,i=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===Q?i.call(e,n,{hash:{}}):i===te?ee.call(e,"intl",n,{hash:{}}):i,r+=ae(n)+'</div>\n  <div class="message messageHover">',n="mm_dntme_disabled_in_settings",J=a.intl,i=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===Q?i.call(e,n,{hash:{}}):i===te?ee.call(e,"intl",n,{hash:{}}):i,r+=ae(n)+'</div>\n  <div class="switch ',J=a.phoneEnabled,n=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"phoneEnabled"),i=a["if"],Y=Z.program(46,x,t),Y.hash={},Y.fn=Y,Y.inverse=Z.program(48,C,t),n=i.call(e,n,Y),(n||0===n)&&(r+=n),r+='" data-feature="phone" ',J=a.phoneEnabled,n=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"phoneEnabled"),i=a.unless,Y=Z.program(50,S,t),Y.hash={},Y.fn=Y,Y.inverse=Z.noop,n=i.call(e,n,Y),(n||0===n)&&(r+=n),r+='>\n    <div class="knob"></div>\n  </div>\n  ',J=a.has_masked_phones,n=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"has_masked_phones"),i=a["if"],Y=Z.program(52,B,t),Y.hash={},Y.fn=Y,Y.inverse=Z.noop,n=i.call(e,n,Y),(n||0===n)&&(r+=n),r+="\n</div>\n",J=a.accountsEnabled,n=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"accountsEnabled"),i=a["if"],Y=Z.program(54,P,t),Y.hash={},Y.fn=Y,Y.inverse=Z.noop,n=i.call(e,n,Y),(n||0===n)&&(r+=n),r+="\n"}function m(e,t){var n,i;return J=a.email,n=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"email"),i=a["if"],Y=Z.program(16,h,t),Y.hash={},Y.fn=Y,Y.inverse=Z.noop,n=i.call(e,n,Y),n||0===n?n:""}function h(){return"off"}function _(){return"disabled"}function f(){return"on"}function g(){return"off"}function y(){return"data-blacklisted=1"}function b(e){var t,n,i="";return i+='\n    <div class="skip link viewMaskedEmails">',t="mm_dntme_view_maskmed_email",J=a.intl,n=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===Q?n.call(e,t,{hash:{}}):n===te?ee.call(e,"intl",t,{hash:{}}):n,i+=ae(t)+"</div>\n  "}function v(e,t){var n,i;return J=a.cardEnabled,n=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"cardEnabled"),i=a.unless,Y=Z.program(29,w,t),Y.hash={},Y.fn=Y,Y.inverse=Z.noop,n=i.call(e,n,Y),n||0===n?n:""}function w(){return"off"}function k(){return"disabled"}function E(){return"on"}function A(){return"off"}function N(){return"data-blacklisted=1"}function T(e){var t,n,i="";return i+='\n      <div class="skip link viewMaskedCards">',t="mm_dntme_view_maskmed_card",J=a.intl,n=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===Q?n.call(e,t,{hash:{}}):n===te?ee.call(e,"intl",t,{hash:{}}):n,i+=ae(t)+"</div>\n  "}function D(e,t){var n,i;return J=a.phoneEnabled,n=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"phoneEnabled"),i=a.unless,Y=Z.program(42,M,t),Y.hash={},Y.fn=Y,Y.inverse=Z.noop,n=i.call(e,n,Y),n||0===n?n:""}function M(){return"off"}function I(){return"disabled"}function x(){return"on"}function C(){return"off"}function S(){return"data-blacklisted=1"}function B(e){var t,n,i="";return i+='\n    <div class="skip link viewMaskedPhones">',t="mm_dntme_view_maskmed_phone",J=a.intl,n=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===Q?n.call(e,t,{hash:{}}):n===te?ee.call(e,"intl",t,{hash:{}}):n,i+=ae(t)+"</div>\n  "}function P(e,t){var n,i,r="";return r+='\n<div class="clearfix feature ',J=a.globalPassword,n=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"globalPassword"),i=a["if"],Y=Z.program(55,z,t),Y.hash={},Y.fn=Y,Y.inverse=Z.noop,n=i.call(e,n,Y),(n||0===n)&&(r+=n),r+=" ",J=a.globalPassword,n=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"globalPassword"),i=a.unless,Y=Z.program(58,O,t),Y.hash={},Y.fn=Y,Y.inverse=Z.noop,n=i.call(e,n,Y),(n||0===n)&&(r+=n),r+='">\n  <div class="message">',n="mm_dntme_dont_track_passwords_here",J=a.intl,i=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===Q?i.call(e,n,{hash:{}}):i===te?ee.call(e,"intl",n,{hash:{}}):i,r+=ae(n)+'</div>\n  <div class="message messageHover">',n="mm_dntme_disabled_in_settings",J=a.intl,i=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===Q?i.call(e,n,{hash:{}}):i===te?ee.call(e,"intl",n,{hash:{}}):i,r+=ae(n)+'</div>\n  <div class="switch ',J=a.passwordsEnabled,n=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"passwordsEnabled"),i=a["if"],Y=Z.program(60,H,t),Y.hash={},Y.fn=Y,Y.inverse=Z.program(62,R,t),n=i.call(e,n,Y),(n||0===n)&&(r+=n),r+='" data-feature="password" ',J=a.passwordsEnabled,n=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"passwordsEnabled"),i=a.unless,Y=Z.program(64,L,t),Y.hash={},Y.fn=Y,Y.inverse=Z.noop,n=i.call(e,n,Y),(n||0===n)&&(r+=n),r+='>\n    <div class="knob"></div>\n  </div>\n    <div class="skip link viewAccounts">',n="mm_dntme_view_maskmed_passwords",J=a.intl,i=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===Q?i.call(e,n,{hash:{}}):i===te?ee.call(e,"intl",n,{hash:{}}):i,r+=ae(n)+'</div>\n</div>\n<div class="clearfix feature ',J=a.globalLogin,n=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"globalLogin"),i=a["if"],Y=Z.program(66,q,t),Y.hash={},Y.fn=Y,Y.inverse=Z.noop,n=i.call(e,n,Y),(n||0===n)&&(r+=n),r+=" ",J=a.globalLogin,n=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"globalLogin"),i=a.unless,Y=Z.program(69,U,t),Y.hash={},Y.fn=Y,Y.inverse=Z.noop,n=i.call(e,n,Y),(n||0===n)&&(r+=n),r+='">\n  <div class="message">',n="mm_dntme_dont_track_logins_here",J=a.intl,i=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===Q?i.call(e,n,{hash:{}}):i===te?ee.call(e,"intl",n,{hash:{}}):i,r+=ae(n)+'</div>\n  <div class="message messageHover">',n="mm_dntme_disabled_in_settings",J=a.intl,i=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===Q?i.call(e,n,{hash:{}}):i===te?ee.call(e,"intl",n,{hash:{}}):i,r+=ae(n)+'</div>\n  <div class="switch ',J=a.loginsEnabled,n=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"loginsEnabled"),i=a["if"],Y=Z.program(71,V,t),Y.hash={},Y.fn=Y,Y.inverse=Z.program(73,W,t),n=i.call(e,n,Y),(n||0===n)&&(r+=n),r+='" data-feature="login" ',J=a.loginsEnabled,n=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"loginsEnabled"),i=a.unless,Y=Z.program(75,$,t),Y.hash={},Y.fn=Y,Y.inverse=Z.noop,n=i.call(e,n,Y),(n||0===n)&&(r+=n),r+='>\n    <div class="knob"></div>\n  </div>\n    <div class="skip link viewAccounts">',n="mm_dntme_view_maskmed_logins",J=a.intl,i=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===Q?i.call(e,n,{hash:{}}):i===te?ee.call(e,"intl",n,{hash:{}}):i,r+=ae(n)+"</div>\n</div>\n"}function z(e,t){var n,i;return J=a.passwordsEnabled,n=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"passwordsEnabled"),i=a.unless,Y=Z.program(56,F,t),Y.hash={},Y.fn=Y,Y.inverse=Z.noop,n=i.call(e,n,Y),n||0===n?n:""}function F(){return"off"}function O(){return"disabled"}function H(){return"on"}function R(){return"off"}function L(){return"data-blacklisted=1"}function q(e,t){var n,i;return J=a.loginsEnabled,n=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"loginsEnabled"),i=a.unless,Y=Z.program(67,j,t),Y.hash={},Y.fn=Y,Y.inverse=Z.noop,n=i.call(e,n,Y),n||0===n?n:""}function j(){return"off"}function U(){return"disabled"}function V(){return"on"}function W(){return"off"}function $(){return"data-blacklisted=1"}a=a||e.helpers;var G,K,J,Y,X="",Z=this,Q="function",ee=a.helperMissing,te=void 0,ae=this.escapeExpression;return X+='<div class="clearfix feature ',J=a.tracker,G=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"tracker"),K=a["if"],Y=Z.program(1,r,i),Y.hash={},Y.fn=Y,Y.inverse=Z.noop,G=K.call(t,G,Y),(G||0===G)&&(X+=G),X+='">\n  <div class="message">',G="mm_dntme_dont_track_browsing_here",J=a.intl,K=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),G=typeof K===Q?K.call(t,G,{hash:{}}):K===te?ee.call(t,"intl",G,{hash:{}}):K,X+=ae(G)+'</div>\n  <div class="switch ',J=a.tracker,G=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"tracker"),K=a["if"],Y=Z.program(3,s,i),Y.hash={},Y.fn=Y,Y.inverse=Z.program(5,o,i),G=K.call(t,G,Y),(G||0===G)&&(X+=G),X+='" data-feature="tracker" ',J=a.tracker,G=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"tracker"),K=a["if"],Y=Z.program(7,l,i),Y.hash={},Y.fn=Y,Y.inverse=Z.noop,G=K.call(t,G,Y),(G||0===G)&&(X+=G),X+='>\n    <div class="knob"></div>\n  </div>\n  ',J=a.suggestedAllow,G=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"suggestedAllow"),K=a["if"],Y=Z.program(9,c,i),Y.hash={},Y.fn=Y,Y.inverse=Z.noop,G=K.call(t,G,Y),(G||0===G)&&(X+=G),X+="\n</div>\n",J=a.maskmeInstalled,G=J||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"maskmeInstalled"),K=a.unless,Y=Z.program(14,p,i),Y.hash={},Y.fn=Y,Y.inverse=Z.noop,G=K.call(t,G,Y),(G||0===G)&&(X+=G),X}),ABINE_DNTME.CompiledTemplates.dntme_page_blacklist}),ABINE_DNTME.define("abine/views/pageBlacklist",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies"],function(e,t,a,n,i,r,s){
var o=a.View.extend({tagName:"div",templateName:"dntme_page_blacklist",events:{"click .viewMaskedEmails":"viewMaskedEmails","click .viewMaskedPhones":"viewMaskedPhones","click .viewMaskedCards":"viewMaskedCards","click .viewAccounts":"viewAccounts","click .feature":"toggleSwitch","click .suggested":"openSuggested"},viewAccounts:function(e){s.webapp.openAccounts(),e.preventDefault(),this.trigger("close")},viewMaskedEmails:function(e){s.webapp.openEmails(),e.preventDefault(),this.trigger("close")},viewMaskedPhones:function(e){s.webapp.openPhones(),e.preventDefault(),this.trigger("close")},viewMaskedCards:function(e){s.webapp.openCards(),e.preventDefault(),this.trigger("close")},openSuggested:function(e){e.preventDefault(),s.securityManager.openLink({type:"recommended",host:this.model.get("host")})},toggleSwitch:function(a){var n=t(a.target);if(!n.hasClass("skip")&&(n.hasClass("feature")||(n=t(a.target).parents(".feature")),!n.hasClass("disabled"))){var i=t(".switch",n),r={},s=i.data("feature");r.changed=s,r[s]=!i.data("blacklisted"),t(i).data("changing")||(t(i).data("changing",!0),t(".knob",i).animate({marginLeft:r[s]?0:20},e.bind(function(){t(i).removeData("changing"),this.model.save(r),this.trigger("featureToggled",s)},this)))}},afterInitialize:function(){this.doc=this.el.ownerDocument}});return o}),ABINE_DNTME.define("abine/views/cardAlert",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer"],function(e,t,a){var n=a.View.extend({events:{"click #card-alert-got-it":"cardAlertClose","click .section-header":"toggleSection"},tagName:"div",templateName:"dntme_page_card_alert_panel",cardAlertClose:function(){this.trigger("got-it")},afterInitialize:function(){this.doc=this.el.ownerDocument,this.panelId=this.model.get("showFreeCard")?4000006:4000005,this.model.trackers.on("changed",e.bind(function(){this.children.trackersTitle.render(),this.trigger("trackerToggled")},this))},beforeRemove:function(){this.model.trackers.off("changed")},autoResize:function(){this.trigger("resize")},toggleSection:function(a,n){if(a&&a.preventDefault(),this.$("#got-it-div").hide(),this.options.compact)return void this.trigger("show-trackers");if(!this.model.get("disabled")&&this.model.trackers.length>0){var i=this.$(".section-header").parent(".section");i.toggleClass("off").toggleClass("on"),this.trigger("max-height");var r=t(".section-content",i),s=e.bind(this.autoResize,this);n?(r.show(),s()):i.hasClass("on")?r.slideDown("fast",s):r.slideUp("fast",s)}},isOpen:function(){return!this.$(".section-header").parent(".section").hasClass("off")},createChildren:function(){return{trackersTitle:new i({model:this.model,doc:this.el.ownerDocument})}}}),i=a.View.extend({tagName:"span",templateName:"dntme_page_card_alert_panel_title",afterInitialize:function(){this.doc=this.el.ownerDocument}});return n}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_page_card_alert_panel=e.template(function(e,t,a,n,i){function r(e,t){var n,i,r="";return r+='\n<!-- start card money card alert panel -->\n  <div class="section off others clearfix">\n    <div class="section-header clearfix ',_=a.disabled,n=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"disabled"),i=a["if"],f=g.program(2,s,t),f.hash={},f.fn=f,f.inverse=g.program(4,o,t),n=i.call(e,n,f),(n||0===n)&&(r+=n),r+='">\n      ',n="trackersTitle",_=a.child,i=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"child"),n=typeof i===y?i.call(e,n,{hash:{}}):i===v?b.call(e,"child",n,{hash:{}}):i,r+=w(n)+'\n    </div>\n    <div style="margin: 5px 15px;">\n      <div style="font-weight:bold;vertical-align:middle;display:inline-block;width:100px;">',n="mm_dntme_card_alert_panelEarned",_=a.intl,i=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===y?i.call(e,n,{hash:{}}):i===v?b.call(e,"intl",n,{hash:{}}):i,r+=w(n)+'</div>\n      <div style="display:inline-block;vertical-align:middle;width:50px;"><img src="',n="pages/images/card-lock.png",_=a.assetUrl,i=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),n=typeof i===y?i.call(e,n,{hash:{}}):i===v?b.call(e,"assetUrl",n,{hash:{}}):i,r+=w(n)+'"/></div>\n      <div style="margin-top:10px;">',n="mm_dntme_card_alert_panelProtectWith",_=a.intl,i=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===y?i.call(e,n,{hash:{}}):i===v?b.call(e,"intl",n,{hash:{}}):i,r+=w(n)+'</div>\n      <div style="margin-top:10px;">',n="mm_dntme_card_alert_panelRedeemYourCard",_=a.intl,i=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===y?i.call(e,n,{hash:{}}):i===v?b.call(e,"intl",n,{hash:{}}):i,r+=w(n)+'</div>\n    </div>\n    <div id="got-it-div" style="text-align:center;margin-bottom:10px;"><input type="button" id="card-alert-got-it" class="btn btn-primary" value=\'',n="mm_dntme_card_alert_panelGotIt",_=a.intl,i=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===y?i.call(e,n,{hash:{}}):i===v?b.call(e,"intl",n,{hash:{}}):i,r+=w(n)+"'/></div>\n  </div>\n"}function s(){return"disabled"}function o(e,t){var n,i,r="";return r+=" ",_=a.trackers,n=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"trackers"),n=null===n||void 0===n||n===!1?n:ABINE_DNTME.Duckbone.Handlebars.getAttr(n,"length"),i=a.unless,f=g.program(5,l,t),f.hash={},f.fn=f,f.inverse=g.noop,n=i.call(e,n,f),(n||0===n)&&(r+=n),r}function l(){return"no-trackers"}function c(e,t){var n,i,r="";return r+='\n<!-- start premium card alert panel -->\n <div class="section off others clearfix">\n    <div class="section-header clearfix ',_=a.disabled,n=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"disabled"),i=a["if"],f=g.program(8,d,t),f.hash={},f.fn=f,f.inverse=g.program(10,u,t),n=i.call(e,n,f),(n||0===n)&&(r+=n),r+='">\n      ',n="trackersTitle",_=a.child,i=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"child"),n=typeof i===y?i.call(e,n,{hash:{}}):i===v?b.call(e,"child",n,{hash:{}}):i,r+=w(n)+'\n    </div>\n    <div style="margin: 5px 15px;">\n      <div style="font-size:12pt;">',n="mm_dntme_card_alert_panelAtRisk",_=a.intl,i=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===y?i.call(e,n,{hash:{}}):i===v?b.call(e,"intl",n,{hash:{}}):i,r+=w(n)+'</div>\n      <div style="margin-top:10px;">',n="mm_dntme_card_alert_panelUseMask",_=a.intl,i=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===y?i.call(e,n,{hash:{}}):i===v?b.call(e,"intl",n,{hash:{}}):i,r+=w(n)+'</div>\n    </div>\n    <div id="got-it-div" style="text-align:center;margin-bottom:10px;"><input type="button" id="card-alert-got-it" class="btn btn-primary" value=\'',n="mm_dntme_card_alert_panelGotIt",_=a.intl,i=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===y?i.call(e,n,{hash:{}}):i===v?b.call(e,"intl",n,{hash:{}}):i,r+=w(n)+"'/></div>\n  </div>\n<!-- end premium card alert panel -->\n"}function d(){return"disabled"}function u(e,t){var n,i,r="";return r+=" ",_=a.trackers,n=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"trackers"),n=null===n||void 0===n||n===!1?n:ABINE_DNTME.Duckbone.Handlebars.getAttr(n,"length"),i=a.unless,f=g.program(11,p,t),f.hash={},f.fn=f,f.inverse=g.noop,n=i.call(e,n,f),(n||0===n)&&(r+=n),r}function p(){return"no-trackers"}a=a||e.helpers;var m,h,_,f,g=this,y="function",b=a.helperMissing,v=void 0,w=this.escapeExpression;return _=a.showFreeCard,m=_||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"showFreeCard"),h=a["if"],f=g.program(1,r,i),f.hash={},f.fn=f,f.inverse=g.program(7,c,i),m=h.call(t,m,f),m||0===m?m:""}),ABINE_DNTME.CompiledTemplates.dntme_page_card_alert_panel}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_page_card_alert_panel_title=e.template(function(e,t,a,n,i){function r(e,t){var n,i,r="";return r+="\n  ",d=a.disabled,n=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"disabled"),i=a.unless,u=m.program(2,s,t),u.hash={},u.fn=u,u.inverse=m.noop,n=i.call(e,n,u),(n||0===n)&&(r+=n),r+="\n"}function s(e,t){var n,i,r="";return r+="\n    ",d=a.trackers,n=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"trackers"),n=null===n||void 0===n||n===!1?n:ABINE_DNTME.Duckbone.Handlebars.getAttr(n,"length"),i=a["if"],u=m.program(3,o,t),u.hash={},u.fn=u,u.inverse=m.noop,n=i.call(e,n,u),(n||0===n)&&(r+=n),r+="\n  "}function o(e){var t,n,i="";return i+='\n      <div class="right-section">\n        <img class="arrow-open" src="',t="pages/images/dnt-ui-drawer-arrow-closed.png",d=a.assetUrl,n=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===h?n.call(e,t,{hash:{}}):n===f?_.call(e,"assetUrl",t,{hash:{}}):n,i+=g(t)+'" />\n        <img class="arrow-close" src="',t="pages/images/dnt-ui-drawer-arrow-open.png",d=a.assetUrl,n=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===h?n.call(e,t,{hash:{}}):n===f?_.call(e,"assetUrl",t,{hash:{}}):n,i+=g(t)+'" />\n      </div>\n    '}a=a||e.helpers;var l,c,d,u,p="",m=this,h="function",_=a.helperMissing,f=void 0,g=this.escapeExpression;return p+='<div class="left-section">\n  <div class="count">!!</div>\n  <div class="message">\n    <div class="blocked">',l="mm_dntme_card_alert_panel_MaskedCard",d=a.intl,c=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),l=typeof c===h?c.call(t,l,{hash:{}}):c===f?_.call(t,"intl",l,{hash:{}}):c,p+=g(l)+'</div>\n    <div class="host" title="',d=a.host,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"host"),typeof l===h?l=l.call(t,{hash:{}}):l===f&&(l=_.call(t,"host",{hash:{}})),p+=g(l)+'">',l="mm_dntme_at",d=a.intl,c=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),l=typeof c===h?c.call(t,l,{hash:{}}):c===f?_.call(t,"intl",l,{hash:{}}):c,p+=g(l)+" ",d=a.host,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"host"),typeof l===h?l=l.call(t,{hash:{}}):l===f&&(l=_.call(t,"host",{hash:{}})),p+=g(l)+"</div>\n  </div>\n</div>\n\n",d=a.compact,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"compact"),c=a.unless,u=m.program(1,r,i),u.hash={},u.fn=u,u.inverse=m.noop,l=c.call(t,l,u),(l||0===l)&&(p+=l),p+="\n"}),ABINE_DNTME.CompiledTemplates.dntme_page_card_alert_panel_title}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_page_compact=e.template(function(e,t,a){a=a||e.helpers;var n,i,r,s="",o="function",l=a.helperMissing,c=void 0,d=this.escapeExpression;return s+='<div class="page clearfix">\n  ',n="contentSection",r=a.child,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"child",n,{hash:{}}):i,s+=d(n)+"\n  ",n="dntStats",r=a.child,i=r||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"),n=typeof i===o?i.call(t,n,{hash:{}}):i===c?l.call(t,"child",n,{hash:{}}):i,s+=d(n)+"\n</div>"}),ABINE_DNTME.CompiledTemplates.dntme_page_compact}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_page_dnt_stats=e.template(function(e,t,a,n,i){function r(e,t){var n,i,r="";return r+='\n        <div class="total-trackers ',I=a.totalGreaterThan10000,n=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"totalGreaterThan10000"),i=a["if"],x=S.program(2,s,t),x.hash={},x.fn=x,x.inverse=S.noop,n=i.call(e,n,x),(n||0===n)&&(r+=n),r+='">\n\t\t\t\t\t',I=a.formattedTotal,n=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"formattedTotal"),typeof n===B?n=n.call(e,{hash:{}}):n===z&&(n=P.call(e,"formattedTotal",{hash:{}})),r+=F(n)+'\n\t\t\t\t</div>\n\t\t\t\t<div class="trackers-blocked">\n\t\t\t\t\t<span>\n            <a href=# class="understandingTrackers">',n="mm_dntme_dnt_stats_trackers",I=a.intl,i=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===B?i.call(e,n,{hash:{}}):i===z?P.call(e,"intl",n,{hash:{}}):i,r+=F(n)+"</a>\n                        ",n="mm_dntme_dnt_stats_blocked",I=a.intl,i=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===B?i.call(e,n,{hash:{}}):i===z?P.call(e,"intl",n,{hash:{}}):i,r+=F(n)+"\n          </span><br />",n="mm_dntme_since",I=a.intl,i=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===B?i.call(e,n,{hash:{}}):i===z?P.call(e,"intl",n,{hash:{}}):i,r+=F(n)+" <span class='date'>Feb' 12</span>\n\t\t\t\t</div>\n\t\t\t"}function s(e,t){var n,i;return I=a.totalGreaterThan1000000,n=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"totalGreaterThan1000000"),i=a["if"],x=S.program(3,o,t),x.hash={},x.fn=x,x.inverse=S.program(5,l,t),n=i.call(e,n,x),n||0===n?n:""}function o(){return"tiny"}function l(){return"small"}function c(e,t){var n,i,r="";return r+="\n\t\t\t\t",I=a.totalGreaterThan10000,n=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"totalGreaterThan10000"),i=a["if"],x=S.program(8,d,t),x.hash={},x.fn=x,x.inverse=S.program(10,u,t),n=i.call(e,n,x),(n||0===n)&&(r+=n),r+="\n\t\t\t"}function d(e){var t,n,i="";return i+="\n\t\t\t\t\t",t="mm_dntme_alltime_blocked_small_1",I=a.intl,n=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===B?n.call(e,t,{hash:{}}):n===z?P.call(e,"intl",t,{hash:{}}):n,i+=F(t)+" <b>",I=a.formattedTotal,t=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"formattedTotal"),typeof t===B?t=t.call(e,{hash:{}}):t===z&&(t=P.call(e,"formattedTotal",{hash:{}})),i+=F(t)+"</b> ",t="mm_dntme_alltime_blocked_small_2",I=a.intl,n=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===B?n.call(e,t,{hash:{}}):n===z?P.call(e,"intl",t,{hash:{}}):n,i+=F(t)+"\n\t\t\t\t"}function u(e){var t,n,i="";return i+="\n\t\t\t\t\t",t="mm_dntme_alltime_blocked_1",I=a.intl,n=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===B?n.call(e,t,{hash:{}}):n===z?P.call(e,"intl",t,{hash:{}}):n,i+=F(t)+" <b>",I=a.formattedTotal,t=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"formattedTotal"),typeof t===B?t=t.call(e,{hash:{}}):t===z&&(t=P.call(e,"formattedTotal",{hash:{}})),i+=F(t)+"</b> ",t="mm_dntme_alltime_blocked_2",I=a.intl,n=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===B?n.call(e,t,{hash:{}}):n===z?P.call(e,"intl",t,{hash:{}}):n,i+=F(t)+"\n\t\t\t\t"}function p(e,t){var n,i,r="";return r+='\n  <div id="chartArea" class="clearfix medals-expanded-wrapper" style="display:none;">\n  ',I=a.showMedals,n=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"showMedals"),i=a["if"],x=S.program(13,m,t),x.hash={},x.fn=x,x.inverse=S.program(38,T,t),n=i.call(e,n,x),(n||0===n)&&(r+=n),r+="\n  </div>\n "}function m(e,t){var n,i,r="";return r+='\n\t\t<div class="medals-sanity-check">\n\t\t\t<div class="medals-display">\n\t\t\t\t<ul class="medals-list">\n\t\t\t\t\t<li class="bronze medal ',I=a.achievedBronze,n=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"achievedBronze"),i=a["if"],x=S.program(14,h,t),x.hash={},x.fn=x,x.inverse=S.noop,n=i.call(e,n,x),(n||0===n)&&(r+=n),r+='">\n\t\t\t\t\t\t<span class="medal-graphic"></span><br />\n\t\t\t\t\t\t<span class="medal-count">',I=a.achievedBronze,n=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"achievedBronze"),i=a["if"],x=S.program(16,_,t),x.hash={},x.fn=x,x.inverse=S.program(18,f,t),n=i.call(e,n,x),(n||0===n)&&(r+=n),r+='</span>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li class="silver medal ',I=a.achievedSilver,n=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"achievedSilver"),i=a["if"],x=S.program(20,g,t),x.hash={},x.fn=x,x.inverse=S.noop,n=i.call(e,n,x),(n||0===n)&&(r+=n),r+='">\n\t\t\t\t\t\t<span class="medal-graphic"></span><br />\n\t\t\t\t\t\t<span class="medal-count">',I=a.achievedSilver,n=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"achievedSilver"),i=a["if"],x=S.program(22,y,t),x.hash={},x.fn=x,x.inverse=S.program(24,b,t),n=i.call(e,n,x),(n||0===n)&&(r+=n),r+='</span>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li class="gold medal ',I=a.achievedGold,n=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"achievedGold"),i=a["if"],x=S.program(26,v,t),x.hash={},x.fn=x,x.inverse=S.noop,n=i.call(e,n,x),(n||0===n)&&(r+=n),r+='">\n\t\t\t\t\t\t<span class="medal-graphic"></span><br />\n\t\t\t\t\t\t<span class="medal-count">',I=a.achievedGold,n=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"achievedGold"),i=a["if"],x=S.program(28,w,t),x.hash={},x.fn=x,x.inverse=S.program(30,k,t),n=i.call(e,n,x),(n||0===n)&&(r+=n),r+='</span>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li class="platinum medal ',I=a.achievedPlatinum,n=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"achievedPlatinum"),i=a["if"],x=S.program(32,E,t),x.hash={},x.fn=x,x.inverse=S.noop,n=i.call(e,n,x),(n||0===n)&&(r+=n),r+='">\n\t\t\t\t\t\t<span class="medal-graphic"></span><br />\n\t\t\t\t\t\t<span class="medal-count">',I=a.achievedPlatinum,n=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"achievedPlatinum"),i=a["if"],x=S.program(34,A,t),x.hash={},x.fn=x,x.inverse=S.program(36,N,t),n=i.call(e,n,x),(n||0===n)&&(r+=n),r+='</span>\n\t\t\t\t\t</li>\n\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t\t<div class="more-stats">\n\t\t\t\t<p>',n="mm_dntme_dnt_stats_only",I=a.intl,i=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===B?i.call(e,n,{hash:{}}):i===z?P.call(e,"intl",n,{hash:{}}):i,r+=F(n)+'<span id="nextMedalAt">',I=a.nextMedalAtFormatted,n=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"nextMedalAtFormatted"),typeof n===B?n=n.call(e,{hash:{}}):n===z&&(n=P.call(e,"nextMedalAtFormatted",{hash:{}})),r+=F(n)+"</span> ",n="mm_dntme_dnt_stats_moreUntil",I=a.intl,i=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===B?i.call(e,n,{hash:{}}):i===z?P.call(e,"intl",n,{hash:{}}):i,r+=F(n)+'</p>\n\t\t\t\t<a class="see-stats-btn" href="#">',n="mm_dntme_dnt_stats_seeAll",I=a.intl,i=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===B?i.call(e,n,{hash:{}}):i===z?P.call(e,"intl",n,{hash:{}}):i,r+=F(n)+"</a>\n\t\t\t</div>\n\t\t</div>\n  "}function h(){return"achieved"}function _(){return"&#10003;"}function f(){return"X"}function g(){return"achieved"}function y(){return"&#10003;"}function b(){return"X"}function v(){return"achieved"}function w(){return"&#10003;"}function k(){return"X"}function E(){return"achieved"}function A(e){var t;return I=a.getPlatinumCount,t=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"getPlatinumCount"),typeof t===B?t=t.call(e,{hash:{}}):t===z&&(t=P.call(e,"getPlatinumCount",{hash:{}})),F(t)}function N(){return"X"}function T(e){var t,n,i="";return i+='\n      <a class="see-stats-btn" href="#" style="width:120px;margin:5px auto;">',t="mm_dntme_dnt_stats_seeAll",I=a.intl,n=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===B?n.call(e,t,{hash:{}}):n===z?P.call(e,"intl",t,{hash:{}}):n,i+=F(t)+"</a>\n  "}a=a||e.helpers;var D,M,I,x,C="",S=this,B="function",P=a.helperMissing,z=void 0,F=this.escapeExpression;return C+='<div id="DNTPNewBadge" class="clearfix" style="display: none;">\n\t<div class="close-badge"></div>\n\t\t<span class="halfBadge">\n\t\t\t<div class="badgeText badgeIconSmall badge',I=a.getBadgeType,D=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getBadgeType"),typeof D===B?D=D.call(t,{hash:{}}):D===z&&(D=P.call(t,"getBadgeType",{hash:{}})),C+=F(D)+'Img"></div>\n\t\t\t<div class="badgeCongratsNormal">\n\t\t\t\t<div class="blueText congrats">',D="mm_dntme_congrats",I=a.intl,M=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),D=typeof M===B?M.call(t,D,{hash:{}}):M===z?P.call(t,"intl",D,{hash:{}}):M,C+=F(D)+'</div>\n\t\t\t\t<div>\n\t\t\t\t\t<span class="darkText blocked-over">',D="mm_dntme_youve_blocked_over",I=a.intl,M=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),D=typeof M===B?M.call(t,D,{hash:{}}):M===z?P.call(t,"intl",D,{hash:{}}):M,C+=F(D)+'</span>\n\t\t\t\t\t<div class="blueText number-trackers">',I=a.getBadgeCount,D=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getBadgeCount"),typeof D===B?D=D.call(t,{hash:{}}):D===z&&(D=P.call(t,"getBadgeCount",{hash:{}})),C+=F(D)+" ",D="mm_dntme_trackers",I=a.intl,M=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),D=typeof M===B?M.call(t,D,{hash:{}}):M===z?P.call(t,"intl",D,{hash:{}}):M,C+=F(D)+'</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</span>\n</div>\n<div id="viewDetailedStats" class="open clearfix">\n\t\t<div class="allTimeTotal clearfix">\n\t\t\t',I=a.compact,D=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"compact"),M=a.unless,x=S.program(1,r,i),x.hash={},x.fn=x,x.inverse=S.program(7,c,i),D=M.call(t,D,x),(D||0===D)&&(C+=D),C+="\n\t\t</div>\n</div>\n",I=a.compact,D=I||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"compact"),M=a.unless,x=S.program(12,p,i),x.hash={},x.fn=x,x.inverse=S.noop,D=M.call(t,D,x),(D||0===D)&&(C+=D),C}),ABINE_DNTME.CompiledTemplates.dntme_page_dnt_stats}),ABINE_DNTME.define("abine/views/dntmeStats",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies"],function(e,t,a,n,i,r,s){var o=a.View.extend({tagName:"div",templateName:"dntme_page_dnt_stats",className:"dntme_dntStats",events:{"click #viewDetailedStats":"viewDetailedStats","click .allTimeTotal .blue":"viewDetailedStats","click .cash-for-cards-webapp-signup":"openCashForCardsSignup","click .see-stats-btn":"openStatsPage","click .understandingTrackers":"openUnderstandingTrackers","click .medals-display":"reshowLastMedal"},afterInitialize:function(){this.model.sync("read",this,{eventName:"read:dntStats:getBadgeData",success:function(e){this.model.bronzeLimit=e.totalBlocked.levels[0].limit,this.model.silverLimit=e.totalBlocked.levels[1].limit,this.model.goldLimit=e.totalBlocked.levels[2].limit,this.model.platinumLimit=e.totalBlocked.levels[3].limit,this.render()},error:function(){ABINE_DNTME.log.error("[ERROR HANDLER]#[abine/models/dntStats]#[getBadgeData]# error event in model.sync event: read:dntStats:getBadgeData")}})},openUnderstandingTrackers:function(e){e.preventDefault(),this.trigger("open:understanding:tracker")},reshowLastMedal:function(e){e.preventDefault(),this.model.achievedBronze()&&(t("#DNTPNewBadge",this.el).slideDown(),this.hideChart())},openCashForCardsSignup:function(e){this.model.toggleViewedBadge(),s.webapp.openCashForCardsSignup(),e.preventDefault(),this.trigger("close")},hideChart:function(){var t=e.bind(function(){this.trigger("resize")},this);this.$("#chartArea").slideUp(t),this.$("#viewDetailedStats").removeClass("open")},showChart:function(){this.trigger("max-height");var t=e.bind(function(){this.trigger("resize")},this);this.$("#chartArea").slideDown(t),this.$("#viewDetailedStats").addClass("open")},viewDetailedStats:function(e){e.preventDefault(),this.$("#viewDetailedStats").hasClass("open")?this.hideChart():this.showChart()},openStatsPage:function(e){return e.preventDefault(),s.webapp.openStats(),this.trigger("close"),!1}});return o}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_page_main=e.template(function(e,t,a,n,i){function r(e,t){var n,i,r="";return r+='\n    <div class="dynamicPanels">\n      ',d=a.panelSections,n=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"panelSections"),i=a.each,u=m.program(2,s,t),u.hash={},u.fn=u,u.inverse=m.noop,n=i.call(e,n,u),(n||0===n)&&(r+=n),r+="\n    </div>\n  "}function s(e,t){var n,i,r="";return r+='\n        <div id="',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"id"),typeof n===h?n=n.call(e,{hash:{}}):n===f&&(n=_.call(e,"this.id",{hash:{}})),r+=g(n)+'" ',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"height"),i=a["if"],u=m.program(3,o,t),u.hash={},u.fn=u,u.inverse=m.noop,n=i.call(e,n,u),(n||0===n)&&(r+=n),r+=' class="panelSection ',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"class_name"),typeof n===h?n=n.call(e,{hash:{}}):n===f&&(n=_.call(e,"this.class_name",{hash:{}})),r+=g(n)+'">\n          ',n=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"body"),typeof n===h?n=n.call(e,{hash:{}}):n===f&&(n=_.call(e,"this.body",{hash:{}})),(n||0===n)&&(r+=n),r+="\n        </div>\n      "}function o(e){var t,a="";return a+='style="height:',t=ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"height"),typeof t===h?t=t.call(e,{hash:{}}):t===f&&(t=_.call(e,"this.height",{hash:{}})),a+=g(t)+'"'}a=a||e.helpers;var l,c,d,u,p="",m=this,h="function",_=a.helperMissing,f=void 0,g=this.escapeExpression;return p+='<div class="page clearfix">\n  ',l="contentSection",d=a.child,c=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"),l=typeof c===h?c.call(t,l,{hash:{}}):c===f?_.call(t,"child",l,{hash:{}}):c,p+=g(l)+"\n  ",l="dntStats",d=a.child,c=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"),l=typeof c===h?c.call(t,l,{hash:{}}):c===f?_.call(t,"child",l,{hash:{}}):c,p+=g(l)+"\n  ",d=a.dynamicPanel,l=d||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"dynamicPanel"),c=a["if"],u=m.program(1,r,i),u.hash={},u.fn=u,u.inverse=m.noop,l=c.call(t,l,u),(l||0===l)&&(p+=l),p+="\n</div>"}),ABINE_DNTME.CompiledTemplates.dntme_page_main}),ABINE_DNTME.define("abine/views/dntmePage",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies","abine/intl","abine/views/dntmeStats","abine/views/cardAlert","abine/views/pageTracker","abine/views/dashboard","abine/views/trackingDashboard","abine/views/settingsDashboard","abine/views/loginHelp"],function(e,t,a,n,i,r,s,o,l,c,d,u,p,m,h){var _=a.View.extend({templateName:"dntme_empty"}),f=i.extend({events:{"click .panelSection":"performActions","click .close-badge":"toggleBadge"},templateName:"dntme_page_main",className:"dntme_page",toggleBadge:function(){return this.options.compact?(this.model.dntStats.toggleViewedBadge(),this.trigger("show-trackers"),void this.options.messenger.send("update:panelActivity:closed",{panelId:8000005})):(t("#chartArea",this.el).slideDown("fast"),t("#DNTPNewBadge",this.el).slideUp(),this.trigger("max-height"),void(this.model.get("premium")?this.options.messenger.send("update:panelActivity:closed",{panelId:8000004}):this.options.messenger.send("update:panelActivity:closed",{panelId:8000005})))},autoResize:function(){this.trigger("resize")},reload:function(){this.model.fetch({success:e.bind(this.render,this)})},refreshPanel:function(t){this.children&&this.children.contentSection&&!this.model.get("settingsChanged")&&this.model.trackers.length!=t.total&&this.model.fetch({success:e.bind(function(){var e=this.children.contentSection;if(this.children&&e&&e.trackerSection){var t=e.trackerSection.isOpen();e.trackerSection.render(),t&&e.trackerSection.toggleSection(null,!0),this.options.compact&&this.updateStats()}this.autoResize()},this)})},updateStats:function(){this.model.get("reloadRequired")||this.options.compact&&"medals"!=this.options.page&&!this.options.cardAlertPanel?"weekly-report"==this.options.page&&t(".dntme_dntStats",this.el).hide():(this.children.dntStats.render(),this.model.dntStats.showMedals()&&!this.model.dntStats.viewedBadge()?(t("#chartArea",this.el).hide(),t("#allTimeTotal",this.el).hide(),t("#DNTPNewBadge",this.el).show(),this.model.get("premium")?this.options.messenger.send("update:panelActivity:impression",{panelId:8000004}):this.options.messenger.send("update:panelActivity:impression",{panelId:8000005}),this.options.compact||this.model.dntStats.toggleViewedBadge()):(this.options.cardAlertPanel&&(this.model.get("showFreeCard")?this.options.messenger.send("update:panelActivity:impression",{panelId:4000006}):this.options.messenger.send("update:panelActivity:impression",{panelId:4000005})),t("#DNTPNewBadge",this.el).hide())),this.$("#chartArea").hide()},afterInitialize:function(){this.doc=this.el.ownerDocument,this.model=new n.TabData({messenger:this.options.messenger}),this.options.dynamicPanel&&(this.model.dynamicPanel=this.options.dynamicPanel,this.setupDynamicPanel(),this.model.panelSections=this.panelSections),this.options.compact&&(this.templateName="dntme_page_compact",this.model.compact=!0),this.weakBindTo(this.options.messenger,"background:dntme:tracker-count-changed",e.debounce(e.bind(this.refreshPanel,this),1e3)),this.on("render",e.bind(function(){this.model.trackers.messenger=this.options.messenger,this.model.blacklist.messenger=this.options.messenger,this.model.get("weeklyReport")&&t(".weeklyReport span",this.el.ownerDocument).text(this.model.get("weeklyReport")),this.model.get("maskmeInstalled")&&(this.options.compact||t(".footer",this.el.ownerDocument).hide()),this.options.compact&&t(".premium span.date",this.el.ownerDocument).text(this.model.get("installMonth")),this.updateStats(),this.trigger("resize"),t("div.allTimeTotal div.trackers-blocked span.date",this.el.ownerDocument).text(this.model.get("installMonth"))},this)),r.setTimeout(e.bind(function(){this.model.fetch({success:e.bind(function(){if(this.options.compact&&!this.options.page&&!this.options.cardAlertPanel){if(this.model.get("weeklyReport"))return void this.trigger("show-report");if(this.model.dntStats.canAutoShowBadge())return void this.trigger("show-medals")}this.render()},this)})},this),0)},showTrackers:function(){try{this.children.contentSection.toggleSection()}catch(e){}},createChildren:function(){var t;this.options.highlight&&this.model.get("loggedIn")&&(this.model.showSettings=!0);var a="Safari"==ABINE_DNTME.config.browser;this.model.set({safari:a});var n={model:this.model,compact:this.options.compact,domain:this.options.domain,contentManager:this.options.contentManager,messenger:this.options.messenger,doc:this.el.ownerDocument,highlight:this.options.highlight,timeout:this.options.timeout,switchTo:this.options.switchTo};this.options.cardAlertPanel?(t=new c(n),t.on("close",e.bind(function(){this.options.messenger.send("update:panelActivity:closed",{panelId:this.panelId}),this.trigger("close")},this)),t.on("got-it",e.bind(function(){this.options.messenger.send("update:panelActivity:masked",{panelId:this.panelId}),this.trigger("close")},this))):t="dashboard"==this.options.page?new u(n):"login_help"==this.options.page?new h(n):this.options.compact?new d(n):new p(n),t.transferEvents(["resize","max-height","show-trackers","show-dashboard","mask-passwords","close","show-settings","refresh-preferences","open:understanding:tracker","ignore-blur","fav-icons"],this),t.on("change-dashboard",e.bind(function(e){this.options.page=e,this.reload()},this)),t.on("mask-passwords",e.bind(this.maskPasswords,this)),this.model.dntStats.compact=this.model.compact;var i=new _({model:{},doc:this.el.ownerDocument});return"Safari"==ABINE_DNTME.config.browser||"login_help"==this.options.page||this.model.showSettings||(i=new l({model:this.model.dntStats,doc:this.el.ownerDocument}),i.transferEvents(["close","resize","max-height","open:understanding:tracker"],this)),{contentSection:t,dntStats:i}}});return f}),ABINE_DNTME.define("abine/views/dntmePageBase",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies","abine/intl"],function(e,t,a,n,i,r,s,o){var l=a.View.extend({toggleSwitch:function(a){var i=t(a.target);if(!i.hasClass("skip")&&(i.hasClass("setting-row")||(i=t(a.target).parents(".setting-row")),!i.hasClass("disabled"))){var r=t(".switch",i);if(!t(r).data("changing")){var s={},l=i.data("type"),c=i.data("name");s.id=i.data("id")||this.model.blacklist.get("id"),s.domain=i.data("domain")||this.model.blacklist.get("domain"),s.type=l,s.name=c,s.value=!r.hasClass("blacklist"==l?"off":"on");var d,u=null;switch(c){case"identity":d=this.model.blacklist.get("globalIdentity"),u="suggestIdentities";break;case"real_card":d=this.model.blacklist.get("globalRealCard"),u="suggestRealCard";break;case"save_card":d=this.model.blacklist.get("globalSaveCard"),u="saveCard";break;case"password":d=this.model.blacklist.get("globalPassword"),u="suggestStrongPassword";break;case"account":d=this.model.blacklist.get("globalLogin"),u="helpMeLogin";break;case"submit_account":d=this.model.blacklist.get("globalSubmitAccount"),u="submitAccount";break;case"address":d=this.model.blacklist.get("globalAddress"),u="suggestAddresses";break;case"tracker":d=this.model.blacklist.get("globalTracker"),u="browsing";break;case"save_account":d=this.model.blacklist.get("globalAccounts"),u="rememberAccounts";break;default:d=this.model.blacklist.get("global"+c.charAt(0).toUpperCase()+c.slice(1)),u=c}if(0==s.value&&0==d&&!this.options.inline)return this.model.trigger("open-global-setting",{highlight:u}),void this.showSettingsSubPage("global-panel-settings",u);var p=s.value;"blacklist"==l&&(p=!p),t(r).data("changing",!0),t(".knob",r).animate({marginLeft:p?20:0},e.bind(function(){t(r).removeData("changing");var e=new n.BlacklistOrPreference;this.options.inline&&(s.suppressWebapp=!0),e.save(s),i.toggleClass("off"),r.toggleClass("off").toggleClass("on"),t(".message",i).removeAttr("data-original-title");var a=s.value?"on":"off";"browsing"==u?t(".message",i).attr("title",o.getText("mm_dntme_help_what_will_happen_"+a+"_"+u.toLowerCase()),"this site"):t(".message",i).attr("title",o.getText("mm_dntme_help_what_will_happen_"+a+"_"+u.toLowerCase())),
t(".message",i).tooltip({delay:0}),"blacklist"==l&&this.featureToggled(c)},this))}}},trackerToggled:function(){this.featureToggled("individual-tracker")},featureToggled:function(t){this.model.fetch({success:e.bind(function(){var a=this.children.trackerSection;"tracker"==t&&a&&(this.model.get("disabled")?this.$(".section-content",a.el).slideUp("slow",e.bind(function(){a.render(),this.trigger("resize")},this)):(a.render(),this.trigger("resize"))),this.children.settingsChanged?this.children.settingsChanged.update(t):this.model.trigger("settings-changed",{feature:t}),r.setTimeout(e.bind(function(){this.model.get("toggledOff")&&!this.model.custom.isFeedbackShown()&&this.model.custom.setCustomTabData("feedbackShown",!0)},this),500)},this)})},showSettings:function(e){e&&e.preventDefault(),this.trigger("show-settings")},showSettingsSubPage:function(e,t){this.trigger("show-settings",null,{highlight:t,subPage:e})}});return l}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_page_settings_changed=e.template(function(e,t,a,n,i){function r(e,t){var n,i,r="";return r+='\n  <div class="alert">\n    <i class="icon-warning-sign"></i>\n    ',m=a.custom,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"custom"),n=null===n||void 0===n||n===!1?n:ABINE_DNTME.Duckbone.Handlebars.getAttr(n,"changedFeature"),i=a["if"],h=_.program(2,s,t),h.hash={},h.fn=h,h.inverse=_.program(4,o,t),n=i.call(e,n,h),(n||0===n)&&(r+=n),r+="\n  </div>\n  ",m=a.toggledOff,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"toggledOff"),i=a["if"],h=_.program(6,l,t),h.hash={},h.fn=h,h.inverse=_.noop,n=i.call(e,n,h),(n||0===n)&&(r+=n),r+="\n"}function s(e){var t,n,i="";return i+="\n      ",i+="\n      ",m=a.custom,t=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"custom"),t=null===t||void 0===t||t===!1?t:ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"changedFeature"),typeof t===f?t=t.call(e,{hash:{}}):t===y&&(t=g.call(e,"custom.changedFeature",{hash:{}})),i+=b(t)+" ",t="mm_dntme_toggled_reload",m=a.intl,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===f?n.call(e,t,{hash:{}}):n===y?g.call(e,"intl",t,{hash:{}}):n,i+=b(t)+"\n    "}function o(e){var t,n,i="";return i+="\n      ",t="mm_dntme_toggled_reload",m=a.intl,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===f?n.call(e,t,{hash:{}}):n===y?g.call(e,"intl",t,{hash:{}}):n,i+=b(t)+"\n    "}function l(e,t){var n,i,r="";return r+="\n    ",m=a.suggestedAllow,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"suggestedAllow"),i=a.unless,h=_.program(7,c,t),h.hash={},h.fn=h,h.inverse=_.noop,n=i.call(e,n,h),(n||0===n)&&(r+=n),r+="\n  "}function c(e,t){var n,i,r="";return r+="\n      ",m=a.custom,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"custom"),n=null===n||void 0===n||n===!1?n:ABINE_DNTME.Duckbone.Handlebars.getAttr(n,"isFeedbackShown"),i=a.unless,h=_.program(8,d,t),h.hash={},h.fn=h,h.inverse=_.noop,n=i.call(e,n,h),(n||0===n)&&(r+=n),r+="\n    "}function d(e){var t,n,i="";return i+='\n        <div class="thanks alert alert-success" style="display:none"><i class="icon-ok-sign"></i> ',t="mm_dntme_thanks_for_feedback",m=a.intl,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===f?n.call(e,t,{hash:{}}):n===y?g.call(e,"intl",t,{hash:{}}):n,i+=b(t)+'</div>\n        <div class="feedback well">\n            ',t="mm_dntme_help_others",m=a.intl,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===f?n.call(e,t,{hash:{}}):n===y?g.call(e,"intl",t,{hash:{}}):n,i+=b(t)+"\n            <div id=reasons><ul>\n                <li id=reason1>",t="mm_dntme_reason_site_not_working",m=a.intl,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===f?n.call(e,t,{hash:{}}):n===y?g.call(e,"intl",t,{hash:{}}):n,i+=b(t)+"</li>\n                <li id=reason2>",t="mm_dntme_reason_other",m=a.intl,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===f?n.call(e,t,{hash:{}}):n===y?g.call(e,"intl",t,{hash:{}}):n,i+=b(t)+'</li>\n                <textarea id="desc" name="description"></textarea>\n                <button id="feedback-submit" class="btn btn-mini btn-success">',t="mm_dntme_feedback_submit",m=a.intl,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===f?n.call(e,t,{hash:{}}):n===y?g.call(e,"intl",t,{hash:{}}):n,i+=b(t)+'</button>\n                <span class="text-error" style="display:none;">',t="mm_dntme_please_fill_reason",m=a.intl,n=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===f?n.call(e,t,{hash:{}}):n===y?g.call(e,"intl",t,{hash:{}}):n,i+=b(t)+"</span>\n            </ul></div>\n        </div>\n      "}a=a||e.helpers;var u,p,m,h,_=this,f="function",g=a.helperMissing,y=void 0,b=this.escapeExpression;return m=a.settingsChanged,u=m||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"settingsChanged"),p=a["if"],h=_.program(1,r,i),h.hash={},h.fn=h,h.inverse=_.noop,u=p.call(t,u,h),u||0===u?u:""}),ABINE_DNTME.CompiledTemplates.dntme_page_settings_changed}),ABINE_DNTME.define("abine/views/settingsChanged",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer"],function(e,t,a,n,i,r){var s=a.View.extend({tagName:"div",templateName:"dntme_page_settings_changed",events:{"click #reason1":"siteNotWorking","click #feedback-submit":"otherReason"},siteNotWorking:function(e){e.preventDefault(),this.submitFeedback(intl.getText("mm_dntme_reason_site_not_working"))},otherReason:function(e){return e.preventDefault(),this.$(".text-error").hide(),""==this.$("#desc").val()?void this.$(".text-error").show():(this.submitFeedback(this.$("#desc").val()),!1)},submitFeedback:function(t){this.$(".feedback").slideUp("slow"),this.$(".thanks").slideDown("slow"),r.setTimeout(e.bind(function(){this.$(".thanks").fadeOut()},this),3e3),this.model.save({feedback:t}),this.doc.defaultView.focus()},update:function(a){if(this.model.get("settingsChanged")){"individual-tracker"!=a?(this.model.custom.setCustomTabData("changedFeature",a),this.model.custom.setCustomTabData("changedFeatureOffStatus",this.model.blacklist.get(a))):(this.model.custom.setCustomTabData("changedFeature",""),this.model.custom.setCustomTabData("changedFeatureOffStatus","")),this.trigger("max-height");var n=this.el.innerHTML;this.render(),n!=this.el.innerHTML&&(t(this.el).hide(),t(this.el).slideDown("slow",e.bind(function(){this.trigger("resize")},this)))}else t(this.el).slideUp("slow",e.bind(function(){this.render(),this.trigger("resize")},this))},afterInitialize:function(){this.doc=this.el.ownerDocument}});return s}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_page_tracker=e.template(function(e,t,a,n,i){function r(){return"blocked"}function s(){return"with-suggested"}function o(e){var t,n;return t="/pages/images/blocked.png",g=a.assetUrl,n=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===w?n.call(e,t,{hash:{}}):n===E?k.call(e,"assetUrl",t,{hash:{}}):n,A(t)}function l(e){var t,n;return t="/pages/images/unblocked.png",g=a.assetUrl,n=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===w?n.call(e,t,{hash:{}}):n===E?k.call(e,"assetUrl",t,{hash:{}}):n,A(t)}function c(e){var t,n;return t="mm_dntme_blocked",g=a.intl,n=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===w?n.call(e,t,{hash:{}}):n===E?k.call(e,"intl",t,{hash:{}}):n,A(t)}function d(e){var t,n;return t="mm_dntme_unblocked",g=a.intl,n=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===w?n.call(e,t,{hash:{}}):n===E?k.call(e,"intl",t,{hash:{}}):n,A(t)}function u(e,t){var n,i;return g=a.suggested,n=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"suggested"),i=a["if"],y=v.program(14,p,t),y.hash={},y.fn=y,y.inverse=v.noop,n=i.call(e,n,y),n||0===n?n:""}function p(e,t){var n,i;return g=a.blocked,n=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"blocked"),i=a["if"],y=v.program(15,m,t),y.hash={},y.fn=y,y.inverse=v.program(17,h,t),n=i.call(e,n,y),n||0===n?n:""}function m(e){var t,n,i="";return i+='<div class="not suggested">',t="mm_dntme_not_suggested",g=a.intl,n=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===w?n.call(e,t,{hash:{}}):n===E?k.call(e,"intl",t,{hash:{}}):n,i+=A(t)+"</div>"}function h(e){var t,n,i="";return i+='<div class="suggested">',t="mm_dntme_suggested",g=a.intl,n=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===w?n.call(e,t,{hash:{}}):n===E?k.call(e,"intl",t,{hash:{}}):n,i+=A(t)+"</div>"}a=a||e.helpers;var _,f,g,y,b="",v=this,w="function",k=a.helperMissing,E=void 0,A=this.escapeExpression;return b+='<div class="tracker ',g=a.blocked,_=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blocked"),f=a["if"],y=v.program(1,r,i),y.hash={},y.fn=y,y.inverse=v.noop,_=f.call(t,_,y),(_||0===_)&&(b+=_),b+=" ",g=a.suggested,_=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"suggested"),f=a["if"],y=v.program(3,s,i),y.hash={},y.fn=y,y.inverse=v.noop,_=f.call(t,_,y),(_||0===_)&&(b+=_),b+=' clearfix">\n  <span class="name">',g=a.name,_=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"name"),typeof _===w?_=_.call(t,{hash:{}}):_===E&&(_=k.call(t,"name",{hash:{}})),b+=A(_)+'</span>\n  <div class="state"><img class="tracker-image" src="',g=a.blocked,_=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blocked"),f=a["if"],y=v.program(5,o,i),y.hash={},y.fn=y,y.inverse=v.program(7,l,i),_=f.call(t,_,y),(_||0===_)&&(b+=_),b+='" /></div>\n  <div class="message">\n    ',g=a.blocked,_=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blocked"),f=a["if"],y=v.program(9,c,i),y.hash={},y.fn=y,y.inverse=v.program(11,d,i),_=f.call(t,_,y),(_||0===_)&&(b+=_),b+="\n  ",g=a.hasSuggested,_=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"hasSuggested"),f=a["if"],y=v.program(13,u,i),y.hash={},y.fn=y,y.inverse=v.noop,_=f.call(t,_,y),(_||0===_)&&(b+=_),b+="\n  </div>\n</div>"}),ABINE_DNTME.CompiledTemplates.dntme_page_tracker}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_page_tracker_list=e.template(function(e,t,a,n,i){function r(){return"disabled"}function s(e,t){var n,i,r="";return r+=" ",v=a.trackers,n=v||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"trackers"),n=null===n||void 0===n||n===!1?n:ABINE_DNTME.Duckbone.Handlebars.getAttr(n,"length"),i=a.unless,w=E.program(4,o,t),w.hash={},w.fn=w,w.inverse=E.noop,n=i.call(e,n,w),(n||0===n)&&(r+=n),r}function o(){return"no-trackers"}function l(){return"off"}function c(){return"off"}function d(){return"on"}function u(e,t){var n,i,r="";return r+="\n        ",v=a.blacklist,n=v||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"blacklist"),n=null===n||void 0===n||n===!1?n:ABINE_DNTME.Duckbone.Handlebars.getAttr(n,"trackerOff"),i=a["if"],w=E.program(13,p,t),w.hash={},w.fn=w,w.inverse=E.program(15,m,t),n=i.call(e,n,w),(n||0===n)&&(r+=n),r+="\n        </a>\n      "}function p(e){var t,n,i="";return i+='\n          <div class="skip suggested">',t="mm_dntme_suggested",v=a.intl,n=v||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===A?n.call(e,t,{hash:{}}):n===T?N.call(e,"intl",t,{hash:{}}):n,i+=D(t)+"</div>\n        "}function m(e){var t,n,i="";return i+='\n          <div class="skip not suggested">',t="mm_dntme_not_suggested",v=a.intl,n=v||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===A?n.call(e,t,{hash:{}}):n===T?N.call(e,"intl",t,{hash:{}}):n,i+=D(t)+"</div>\n        "}function h(e,t){var n,i,r="";return r+="\n      ",v=a.blacklist,n=v||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"blacklist"),n=null===n||void 0===n||n===!1?n:ABINE_DNTME.Duckbone.Handlebars.getAttr(n,"trackerOff"),i=a.unless,w=E.program(18,_,t),w.hash={},w.fn=w,w.inverse=E.noop,n=i.call(e,n,w),(n||0===n)&&(r+=n),r+="\n    "}function _(e,t){var n,i,r="";return r+="\n        ",v=a.trackers,n=v||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"trackers"),n=null===n||void 0===n||n===!1?n:ABINE_DNTME.Duckbone.Handlebars.getAttr(n,"length"),i=a["if"],w=E.program(19,f,t),w.hash={},w.fn=w,w.inverse=E.noop,n=i.call(e,n,w),(n||0===n)&&(r+=n),r+="\n        ",v=a.safari,n=v||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"safari"),i=a.unless,w=E.program(21,g,t),w.hash={},w.fn=w,w.inverse=E.noop,n=i.call(e,n,w),(n||0===n)&&(r+=n),r+="\n      "}function f(e){var t,n,i="";return i+='\n          <div class="section-content" style="overflow: hidden;display: block;">\n            <div class="list"><div class="content">',t="trackerList",v=a.child,n=v||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"child"),t=typeof n===A?n.call(e,t,{hash:{}}):n===T?N.call(e,"child",t,{hash:{}}):n,i+=D(t)+"</div></div>\n          </div>\n        "}function g(e){var t,n,i="";return i+='\n        <div style="padding:5px;margin:0px 10px;">\n          <img src="',t="pages/images/tracking.png",v=a.assetUrl,n=v||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"assetUrl"),t=typeof n===A?n.call(e,t,{hash:{}}):n===T?N.call(e,"assetUrl",t,{hash:{}}):n,i+=D(t)+'" style="width:40px;margin-right:10px;float:left;"/>\n          <a href="#" class="trackerDashboard" style="text-decoration:underline;line-height:1.5;display:block;">',t="mm_dntme_tracking_goto_dashboard",v=a.intl,n=v||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===A?n.call(e,t,{hash:{}}):n===T?N.call(e,"intl",t,{hash:{}}):n,i+=D(t)+"</a>\n        </div>\n        "}a=a||e.helpers;var y,b,v,w,k="",E=this,A="function",N=a.helperMissing,T=void 0,D=this.escapeExpression;return k+='  <div class="section on others clearfix">\n    <div class="section-header clearfix ',v=a.blacklist,y=v||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),y=null===y||void 0===y||y===!1?y:ABINE_DNTME.Duckbone.Handlebars.getAttr(y,"trackerOff"),b=a["if"],w=E.program(1,r,i),w.hash={},w.fn=w,w.inverse=E.program(3,s,i),y=b.call(t,y,w),(y||0===y)&&(k+=y),k+='">\n      ',y="trackersTitle",v=a.child,b=v||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"),y=typeof b===A?b.call(t,y,{hash:{}}):b===T?N.call(t,"child",y,{hash:{}}):b,k+=D(y)+'\n    </div>\n\n    <div class="clearfix setting-row ',v=a.blacklist,y=v||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),y=null===y||void 0===y||y===!1?y:ABINE_DNTME.Duckbone.Handlebars.getAttr(y,"trackerOff"),b=a["if"],w=E.program(6,l,i),w.hash={},w.fn=w,w.inverse=E.noop,y=b.call(t,y,w),(y||0===y)&&(k+=y),k+='" data-type="blacklist" data-name="tracker" style="margin:5px 0px;">\n      <div class="message">',y="mm_dntme_tracking_blocker",v=a.intl,b=v||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),y=typeof b===A?b.call(t,y,{hash:{}}):b===T?N.call(t,"intl",y,{hash:{}}):b,k+=D(y)+'</div>\n      <div class="word switch ',v=a.blacklist,y=v||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"blacklist"),y=null===y||void 0===y||y===!1?y:ABINE_DNTME.Duckbone.Handlebars.getAttr(y,"trackerOff"),b=a["if"],w=E.program(8,c,i),w.hash={},w.fn=w,w.inverse=E.program(10,d,i),y=b.call(t,y,w),(y||0===y)&&(k+=y),k+='">\n        <div class="knob"></div>\n      </div>\n      ',v=a.suggestedAllow,y=v||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"suggestedAllow"),b=a["if"],w=E.program(12,u,i),w.hash={},w.fn=w,w.inverse=E.noop,y=b.call(t,y,w),(y||0===y)&&(k+=y),k+='\n      <div class="for">',y="mm_dntme_for_this_website",v=a.intl,b=v||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),y=typeof b===A?b.call(t,y,{hash:{}}):b===T?N.call(t,"intl",y,{hash:{}}):b,k+=D(y)+"</div>\n    </div>\n\n    ",v=a.compact,y=v||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"compact"),b=a.unless,w=E.program(17,h,i),w.hash={},w.fn=w,w.inverse=E.noop,y=b.call(t,y,w),(y||0===y)&&(k+=y),k+="\n  </div>"}),ABINE_DNTME.CompiledTemplates.dntme_page_tracker_list}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_page_tracker_title=e.template(function(e,t,a,n,i){function r(e){var t,n,i="";return i+='\n  <div style="font-size:10pt;text-align: center;width: 100%;">',t="mm_dntme_reload_required",g=a.intl,n=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===w?n.call(e,t,{hash:{}}):n===E?k.call(e,"intl",t,{hash:{}}):n,i+=A(t)+"</div>\n"}function s(e,t){var n,i,r="";return r+='\n  <div class="left-section main-tracker-title" data-dashboard="tracking">\n  ',g=a.blacklist,n=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"blacklist"),n=null===n||void 0===n||n===!1?n:ABINE_DNTME.Duckbone.Handlebars.getAttr(n,"trackerOff"),i=a["if"],y=v.program(4,o,t),y.hash={},y.fn=y,y.inverse=v.program(6,l,t),n=i.call(e,n,y),(n||0===n)&&(r+=n),r+="\n  </div>\n"}function o(e){var t,n,i="";return i+='\n    <div class="message-disabled">\n      <div class="disabled-text">',t="mm_dntme_tracking_disabled",g=a.intl,n=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===w?n.call(e,t,{hash:{}}):n===E?k.call(e,"intl",t,{hash:{}}):n,i+=A(t)+'</div>\n      <div class="disabled-subtext" title="',g=a.host,t=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"host"),typeof t===w?t=t.call(e,{hash:{}}):t===E&&(t=k.call(e,"host",{hash:{}})),i+=A(t)+'">',g=a.host,t=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"host"),typeof t===w?t=t.call(e,{hash:{}}):t===E&&(t=k.call(e,"host",{hash:{}})),i+=A(t)+"</div>\n    </div>\n  "}function l(e,t){var n,i,r="";return r+="\n    ",g=a.safari,n=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"safari"),i=a["if"],y=v.program(7,c,t),y.hash={},y.fn=y,y.inverse=v.program(9,d,t),n=i.call(e,n,y),(n||0===n)&&(r+=n),r+="\n  "}function c(e){var t,n="";return n+='\n      <div class="message-clear">\n        <div class="all-clear" title="',g=a.host,t=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"host"),typeof t===w?t=t.call(e,{hash:{}}):t===E&&(t=k.call(e,"host",{hash:{}})),n+=A(t)+'">',g=a.host,t=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"host"),typeof t===w?t=t.call(e,{hash:{}}):t===E&&(t=k.call(e,"host",{hash:{}})),n+=A(t)+"</div>\n      </div>\n    "}function d(e,t){var n,i,r="";return r+="\n        ",g=a.trackers,n=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"trackers"),n=null===n||void 0===n||n===!1?n:ABINE_DNTME.Duckbone.Handlebars.getAttr(n,"length"),i=a["if"],y=v.program(10,u,t),y.hash={},y.fn=y,y.inverse=v.program(15,h,t),n=i.call(e,n,y),(n||0===n)&&(r+=n),r+="\n    "}function u(e,t){var n,i,r="";return r+='\n          <div class="count">',g=a.trackers,n=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"trackers"),n=null===n||void 0===n||n===!1?n:ABINE_DNTME.Duckbone.Handlebars.getAttr(n,"getBlocked"),typeof n===w?n=n.call(e,{hash:{}}):n===E&&(n=k.call(e,"trackers.getBlocked",{hash:{}})),r+=A(n)+'</div>\n          <div class="message">\n            <div class="blocked">\n              ',g=a.understanding_tracker_clicked,n=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"understanding_tracker_clicked"),i=a["if"],y=v.program(11,p,t),y.hash={},y.fn=y,y.inverse=v.program(13,m,t),n=i.call(e,n,y),(n||0===n)&&(r+=n),r+="\n              ",n="mm_dntme_blocked_at",g=a.intl,i=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===w?i.call(e,n,{hash:{}}):i===E?k.call(e,"intl",n,{hash:{}}):i,r+=A(n)+'\n            </div>\n            <div class="host" title="',g=a.host,n=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"host"),typeof n===w?n=n.call(e,{hash:{}}):n===E&&(n=k.call(e,"host",{hash:{}})),r+=A(n)+'">at&nbsp;',g=a.host,n=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"host"),typeof n===w?n=n.call(e,{hash:{}}):n===E&&(n=k.call(e,"host",{hash:{}})),r+=A(n)+"</div>\n          </div>\n        "}function p(e){var t,n,i,r="";return r+="\n                ",g=a.trackers,t=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"trackers"),t=null===t||void 0===t||t===!1?t:ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getBlocked"),n="mm_dntme_tracker",g=a.plural,i=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"plural"),t=typeof i===w?i.call(e,n,t,{hash:{}}):i===E?k.call(e,"plural",n,t,{hash:{}}):i,r+=A(t)+"\n              "}function m(e){var t,n,i,r="";return r+='\n                <a href=# class="understandingTrackers">',g=a.trackers,t=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"trackers"),t=null===t||void 0===t||t===!1?t:ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getBlocked"),n="mm_dntme_tracker",g=a.plural,i=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"plural"),t=typeof i===w?i.call(e,n,t,{hash:{}}):i===E?k.call(e,"plural",n,t,{hash:{}}):i,r+=A(t)+"</a>\n              "}function h(e){var t,n,i="";return i+='\n          <div class="message-clear">\n            <div class="count"></div>\n            <div class="all-clear">',t="mm_dntme_clear_skies",g=a.intl,n=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===w?n.call(e,t,{hash:{}}):n===E?k.call(e,"intl",t,{hash:{}}):n,i+=A(t)+'</div>\n            <div class="all-clear-subtext" title="',g=a.host,t=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"host"),typeof t===w?t=t.call(e,{hash:{}}):t===E&&(t=k.call(e,"host",{hash:{}})),i+=A(t)+'">',t="mm_dntme_at",g=a.intl,n=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===w?n.call(e,t,{hash:{}}):n===E?k.call(e,"intl",t,{hash:{}}):n,i+=A(t)+" ",g=a.host,t=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"host"),typeof t===w?t=t.call(e,{hash:{}}):t===E&&(t=k.call(e,"host",{hash:{}})),i+=A(t)+"</div>\n          </div>\n        "}a=a||e.helpers;var _,f,g,y,b="",v=this,w="function",k=a.helperMissing,E=void 0,A=this.escapeExpression;return b+="\n",g=a.reloadRequired,_=g||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"reloadRequired"),f=a["if"],y=v.program(1,r,i),y.hash={},y.fn=y,y.inverse=v.program(3,s,i),_=f.call(t,_,y),(_||0===_)&&(b+=_),b}),ABINE_DNTME.CompiledTemplates.dntme_page_tracker_title}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_page_tracker_title_goback=e.template(function(e,t,a,n,i){function r(e){var t,n,i="";return i+='\n  <div style="font-size:10pt;text-align: center;width: 100%;">',t="mm_dntme_reload_required",b=a.intl,n=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===E?n.call(e,t,{hash:{}}):n===N?A.call(e,"intl",t,{hash:{}}):n,i+=T(t)+"</div>\n"}function s(e,t){var n,i,r="";return r+="\n<div>\n  ",b=a.safari,n=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"safari"),i=a["if"],v=k.program(4,o,t),v.hash={},v.fn=v,v.inverse=k.program(6,l,t),n=i.call(e,n,v),(n||0===n)&&(r+=n),r+="\n</div>\n"}function o(e){var t,n="";return n+='\n    <div class="message">\n    <div class="blocked">\n      <div class="host" title="',b=a.host,t=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"host"),typeof t===E?t=t.call(e,{hash:{}}):t===N&&(t=A.call(e,"host",{hash:{}})),n+=T(t)+'">',b=a.host,t=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"host"),typeof t===E?t=t.call(e,{hash:{}}):t===N&&(t=A.call(e,"host",{hash:{}})),n+=T(t)+"</div>\n    </div>\n    </div>\n  "}function l(e,t){var n,i,r="";return r+="\n      ",b=a.trackers,n=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"trackers"),n=null===n||void 0===n||n===!1?n:ABINE_DNTME.Duckbone.Handlebars.getAttr(n,"length"),i=a["if"],v=k.program(7,c,t),v.hash={},v.fn=v,v.inverse=k.program(12,p,t),n=i.call(e,n,v),(n||0===n)&&(r+=n),r+="\n  "}function c(e,t){var n,i,r="";return r+='\n        <div class="message">\n          <div class="blocked">\n            <div class="host" title="',b=a.host,n=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"host"),typeof n===E?n=n.call(e,{hash:{}}):n===N&&(n=A.call(e,"host",{hash:{}})),r+=T(n)+'">',b=a.host,n=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"host"),typeof n===E?n=n.call(e,{hash:{}}):n===N&&(n=A.call(e,"host",{hash:{}})),r+=T(n)+'</div>\n            <div class="count">\n              ',b=a.trackers,n=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"trackers"),n=null===n||void 0===n||n===!1?n:ABINE_DNTME.Duckbone.Handlebars.getAttr(n,"getBlocked"),typeof n===E?n=n.call(e,{hash:{}}):n===N&&(n=A.call(e,"trackers.getBlocked",{hash:{}})),r+=T(n)+"\n              ",b=a.understanding_tracker_clicked,n=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"understanding_tracker_clicked"),i=a["if"],v=k.program(8,d,t),v.hash={},v.fn=v,v.inverse=k.program(10,u,t),n=i.call(e,n,v),(n||0===n)&&(r+=n),r+="\n              ",n="mm_dntme_blocked",b=a.intl,i=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===E?i.call(e,n,{hash:{}}):i===N?A.call(e,"intl",n,{hash:{}}):i,r+=T(n)+"\n            </div>\n          </div>\n        </div>\n      "}function d(e){var t,n,i,r="";return r+="\n                ",b=a.trackers,t=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"trackers"),t=null===t||void 0===t||t===!1?t:ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getBlocked"),n="mm_dntme_tracker",b=a.plural,i=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"plural"),t=typeof i===E?i.call(e,n,t,{hash:{}}):i===N?A.call(e,"plural",n,t,{hash:{}}):i,r+=T(t)+"\n              "}function u(e){var t,n,i,r="";return r+='\n                <a href=# class="understandingTrackers">',b=a.trackers,t=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"trackers"),t=null===t||void 0===t||t===!1?t:ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getBlocked"),n="mm_dntme_tracker",b=a.plural,i=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"plural"),t=typeof i===E?i.call(e,n,t,{hash:{}}):i===N?A.call(e,"plural",n,t,{hash:{}}):i,r+=T(t)+"</a>\n              "}function p(e,t){var n,i,r="";return r+='\n        <div class="message">\n            <div class="blocked">\n              <div class="host" title="',b=a.host,n=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"host"),typeof n===E?n=n.call(e,{hash:{}}):n===N&&(n=A.call(e,"host",{hash:{}})),r+=T(n)+'">',b=a.host,n=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"host"),typeof n===E?n=n.call(e,{hash:{}}):n===N&&(n=A.call(e,"host",{hash:{}})),r+=T(n)+'</div>\n                <div class="count">\n                  ',b=a.blacklist,n=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"blacklist"),n=null===n||void 0===n||n===!1?n:ABINE_DNTME.Duckbone.Handlebars.getAttr(n,"trackerOff"),i=a["if"],v=k.program(13,m,t),v.hash={},v.fn=v,v.inverse=k.program(15,h,t),n=i.call(e,n,v),(n||0===n)&&(r+=n),r+="\n                </div>\n            </div>\n          </div>\n      "}function m(e){var t,n,i="";return i+="\n                    ",t="mm_dntme_trackers_allowed",b=a.intl,n=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===E?n.call(e,t,{hash:{}}):n===N?A.call(e,"intl",t,{hash:{}}):n,i+=T(t)+"\n                  "}function h(e,t){var n,i,r="";return r+="\n                    <span>0</span>\n                    ",b=a.understanding_tracker_clicked,n=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"understanding_tracker_clicked"),i=a["if"],v=k.program(16,_,t),v.hash={},v.fn=v,v.inverse=k.program(18,f,t),n=i.call(e,n,v),(n||0===n)&&(r+=n),r+="\n                    ",n="mm_dntme_blocked",b=a.intl,i=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),n=typeof i===E?i.call(e,n,{hash:{}}):i===N?A.call(e,"intl",n,{hash:{}}):i,r+=T(n)+"\n                  "}function _(e){var t,n,i,r="";return r+="\n                      ",b=a.trackers,t=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"trackers"),t=null===t||void 0===t||t===!1?t:ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getBlocked"),n="mm_dntme_tracker",b=a.plural,i=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"plural"),t=typeof i===E?i.call(e,n,t,{hash:{}}):i===N?A.call(e,"plural",n,t,{hash:{}}):i,r+=T(t)+"\n                    "}function f(e){var t,n,i,r="";return r+='\n                      <a href=# class="understandingTrackers">',b=a.trackers,t=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"trackers"),t=null===t||void 0===t||t===!1?t:ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"getBlocked"),n="mm_dntme_tracker",b=a.plural,i=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"plural"),t=typeof i===E?i.call(e,n,t,{hash:{}}):i===N?A.call(e,"plural",n,t,{hash:{}}):i,r+=T(t)+"</a>\n                    "}a=a||e.helpers;var g,y,b,v,w="",k=this,E="function",A=a.helperMissing,N=void 0,T=this.escapeExpression;return w+='<div class="go-back-tracker"><img src="',g="/pages/images/back.png",b=a.assetUrl,y=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),g=typeof y===E?y.call(t,g,{hash:{}}):y===N?A.call(t,"assetUrl",g,{hash:{}}):y,w+=T(g)+'" width="18px;" style="padding-top:12px;"/></div>\n',b=a.reloadRequired,g=b||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"reloadRequired"),y=a["if"],v=k.program(1,r,i),v.hash={},v.fn=v,v.inverse=k.program(3,s,i),g=y.call(t,g,v),(g||0===g)&&(w+=g),w}),ABINE_DNTME.CompiledTemplates.dntme_page_tracker_title_goback}),ABINE_DNTME.define("abine/views/pageTracker",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/proxies"],function(e,t,a,n,i,r,s){var o=a.View.extend({tagName:"div",templateName:"dntme_page_tracker",className:"dntme_tracker",events:{"click .suggested":"openSuggested","click .tracker":"toggleTracker"},openSuggested:function(e){e.preventDefault(),s.securityManager.openLink({type:"recommended",tracker:this.model.get("name")})},toggleTracker:function(e){e.target.className&&e.target.className.indexOf("suggested")!=-1||(this.model.save({blocked:!this.model.get("blocked")}),this.model.collection.trigger("changed"))},afterInitialize:function(){this.doc=this.el.ownerDocument}}),l=a.ListView.extend({tagName:"div",className:"",viewClass:o}),c=a.View.extend({tagName:"span",templateName:"dntme_page_tracker_title",className:"dntme_tracker_title",events:{"click .understandingTrackers":"openUnderstandingTrackers"},afterInitialize:function(){this.doc=this.el.ownerDocument},openUnderstandingTrackers:function(e){e.preventDefault(),this.trigger("open:understanding:tracker")}}),d=a.View.extend({tagName:"span",templateName:"dntme_page_tracker_title_goback",className:"dntme_tracker_title",events:{"click .go-back-tracker":"goBack","click .understandingTrackers":"openUnderstandingTrackers"},afterInitialize:function(){this.doc=this.el.ownerDocument},goBack:function(){this.trigger("change-dashboard","dashboard")},openUnderstandingTrackers:function(e){e.preventDefault(),this.trigger("open:understanding:tracker")}}),u=a.View.extend({events:{"click .section-header":"toggleSection","click a.trackerDashboard":"trackerDashboard"},tagName:"div",templateName:"dntme_page_tracker_list",className:"dntme_trackers",trackerDashboard:function(e){e.preventDefault(),s.webapp.openStats(),this.trigger("close")},afterInitialize:function(){this.doc=this.el.ownerDocument,this.model.trackers.on("changed",e.bind(function(){this.children.trackersTitle.render(),this.trigger("trackerToggled")},this))},beforeRemove:function(){this.model.trackers.off("changed")},autoResize:function(){this.trigger("resize")},toggleSection:function(e){if(e&&e.preventDefault(),this.options.compact)return void this.trigger("show-dashboard")},isOpen:function(){return!this.$(".section-header").parent(".section").hasClass("off")},createChildren:function(){var e=this.options.withGoBack?d:c;return this.children={trackersTitle:new e({model:this.model,doc:this.el.ownerDocument}),trackerList:new l({collection:this.model.trackers,doc:this.el.ownerDocument})},this.children.trackersTitle.transferEvents(["change-dashboard","open:understanding:tracker"],this),this.children}});return u.TitleView=c,u}),ABINE_DNTME.require(["wycats/handlebars"],function(e){return ABINE_DNTME.CompiledTemplates||(ABINE_DNTME.CompiledTemplates={}),ABINE_DNTME.CompiledTemplates.dntme_panel=e.template(function(e,t,a,n,i){function r(e){var t,n,i="";return i+='\n          <span class="dashboard">',t="mm_dntme_premium_user",c=a.intl,n=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===m?n.call(e,t,{hash:{}}):n===_?h.call(e,"intl",t,{hash:{}}):n,i+=f(t)+"</span>\n        "}function s(e){var t,n,i="";return i+='\n          <span class="premium-link">',t="mm_dntme_go_premium",c=a.intl,n=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(e,"intl"),t=typeof n===m?n.call(e,t,{hash:{}}):n===_?h.call(e,"intl",t,{hash:{}}):n,i+=f(t)+"</span>\n        "}a=a||e.helpers;var o,l,c,d,u="",p=this,m="function",h=a.helperMissing,_=void 0,f=this.escapeExpression;return u+='<div class="panel">\n  <div class="content-wrap">\n    <div class="page-content clearfix">\n      <img src="',o="pages/images/blur_xclose_ext.png",c=a.assetUrl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"assetUrl"),o=typeof l===m?l.call(t,o,{hash:{}}):l===_?h.call(t,"assetUrl",o,{hash:{}}):l,u+=f(o)+'" class="close-link" style="cursor:pointer;position:absolute;left:280px;top:10px;z-index:1;"/>\n      <div class="one">',o="pageContent",c=a.child,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"),o=typeof l===m?l.call(t,o,{hash:{}}):l===_?h.call(t,"child",o,{hash:{}}):l,u+=f(o)+'</div>\n      <div class="two" style="display:none;border-bottom: 1px solid #cccccc;">',
o="settingsContent",c=a.child,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"child"),o=typeof l===m?l.call(t,o,{hash:{}}):l===_?h.call(t,"child",o,{hash:{}}):l,u+=f(o)+'</div>\n    </div>\n  </div>\n  <div id="mapForm" style="display:none;text-align: center;padding: 5px;font-weight: bold;border-bottom:1px solid #3498db;"><a href="#">',o="mm_correct_blur",c=a.intl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof l===m?l.call(t,o,{hash:{}}):l===_?h.call(t,"intl",o,{hash:{}}):l,u+=f(o)+'</a></div>\n  <div class="header dntme clearfix" style="height:auto;">\n    <div class="logo-link">\n      <img class="logo" id="blur-logo-action" style="margin-left:-4px;height:20px;width:auto;" src="',c=a.panelLogoBig,o=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"panelLogoBig"),typeof o===m?o=o.call(t,{hash:{}}):o===_&&(o=h.call(t,"panelLogoBig",{hash:{}})),u+=f(o)+'"/>\n    </div>\n    <div class="links-wrapper">\n      <div class="links">\n        <strong style="color:green;">\n        ',c=a.premium,o=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"premium"),l=a["if"],d=p.program(1,r,i),d.hash={},d.fn=d,d.inverse=p.program(3,s,i),o=l.call(t,o,d),(o||0===o)&&(u+=o),u+='\n        </strong>\n      </div>\n      <div class="links help-link">\n         ',o="mm_dntme_help",c=a.intl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof l===m?l.call(t,o,{hash:{}}):l===_?h.call(t,"intl",o,{hash:{}}):l,u+=f(o)+'\n      </div>\n      <div class="links settings-link">\n        ',o="mm_dntme_settings",c=a.intl,l=c||ABINE_DNTME.Duckbone.Handlebars.getAttr(t,"intl"),o=typeof l===m?l.call(t,o,{hash:{}}):l===_?h.call(t,"intl",o,{hash:{}}):l,u+=f(o)+"\n      </div>\n    </div>\n  </div>\n</div>\n"}),ABINE_DNTME.CompiledTemplates.dntme_panel}),ABINE_DNTME.define("abine/views/dntmePanel",["documentcloud/underscore","jquery","duckbone/core","models","abine/views/panelBase","abine/timer","abine/contentMessenger","documentcloud/backbone","abine/proxies","abine/views/dntmePage","abine/views/settingsDashboard","abine/intl","abine/timer","abine/responseCodes"],function(e,t,a,n,i,r,s,o,l,c,d,u,p,m){function h(e,t){t=t||"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ!-$#%^@";for(var a="",n=0;n<e;n++)a+=t.charAt(Math.floor(Math.random()*t.length));return a}var _=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/i,f=a.View.extend({tagName:"div",templateName:"dntme_empty",afterInitialize:function(){this.doc=this.el.ownerDocument},load:function(){var e=this.options.realView();e.load=e.reload,t(this.el).replaceWith(e.el),e.delegateEvents(),this.options.postLoad&&this.options.postLoad(e)}}),g=i.extend({templateName:"dntme_panel",events:{"click .close-link":"logClose","click .settings-link":"showSettingsView","click .premium-link":"showPremium","click .help-link":"showHelp","click .logo-link":"logoClick","click .home-link":"logoClick","click #pageView":"showPageView","click #mapForm":"mapForm","click .dashboard":"openDashboard","click .premium-a-link":"openPremiumA","click .premium-b-link":"openPremiumB","click .premium":"openPremiumC","click .cash-for-cards-webapp-signup":"openCashForCardsSignup","click .weeklyReport":"openWeeklyReport","click .medal-notification":"clickedNormalMedalNotification","click .medal-with-card-notification":"clickedMedalWithCardNotification","click #complete-setup":"openPostInstall","click #not-now":"clickedNotNow","click #submit-email":"autoregFromIntrusive","click #seeBlur":"openBlurPage","click .more-options":"closePanel"},logoClick:function(e){e.preventDefault(),this.children.pageContent.model.get("maskmeInstalled")?l.securityManager.openLink({type:"dntme"}):l.webapp.openDashboard(),this.closePanel()},openPostInstall:function(){l.licenseModule.logSplitData({bucket_id:this.options.intrusiveSplit,test_data:{int1:1}}),l.securityManager.openPostInstall()},clickedNotNow:function(){l.licenseModule.logSplitData({bucket_id:this.options.intrusiveSplit,test_data:{int2:1}}),this.$("#complete-setup-div").hide();var e=new n.Preference;e.save({key:"notNowClicked",value:"true"}),this.panelId&&this.contentManager.messenger.send("update:panelActivity:closed",{panelId:this.panelId})},autoregFromIntrusive:function(){l.licenseModule.logSplitData({bucket_id:this.options.intrusiveSplit,test_data:{int3:1}}),this.setupUser()},mapForm:function(e){e.preventDefault(),this.options.contentManager.showMapForm({formId:this.forms[0],forms:this.forms}),this.closePanel(e,!0),this.trigger("remove")},setupUser:function(a,n){function i(e,a){try{f.get(0).ownerDocument&&(n?t(".loading-message",f).text(u.getText("mm_loading_display_register_use"+Math.floor(e/5))):t(".loading-message",f).text(u.getText("mm_loading_display_register"+Math.floor(e/5))),e<a&&(g=p.setTimeout(function(){i(e+1,a)},500)))}catch(e){}}a&&a.preventDefault(),n=n||!1;var r=this.$("#protect-email").val(),s=this.$("#password-field").val(),o=this.$("#password-field").length>0,c=this.$("#error");if(c.hide(),!r.match(_))return this.$("#welcome-message").hide(),c.text(u.getText("mm_dntme_invalid_email")).show(),void this.autoResize();if(o&&0==s.length)return this.$("#welcome-message").hide(),c.text(u.getText("mm_dntme_invalid_password")).show(),void this.autoResize();var d=h(6),m={email:r,password:o?s:d,password_hint:u.getText("mm_pwhint_default"),generated_password:!o,register_type:"dnt_intrusive_panel",send_password_email:!o},f=this.$("#progress-section"),g=null;i(0,20),f.show(),this.$("#welcome-message, #form-div").hide(),l.licenseModule.register(m,e.bind(function(t,a){this.processRegistration(t,a,m,e.bind(function(e){e?(this.panelId&&this.contentManager.messenger.send("update:panelActivity:disclosed",{panelId:this.panelId}),p.clearTimeout(g),f.hide()):(this.panelId&&this.contentManager.messenger.send("update:panelActivity:masked",{panelId:this.panelId}),l.licenseModule.logSplitData({bucket_id:this.options.intrusiveSplit,test_data:{int4:1}}),this.$("#complete-setup-div").hide(),this.openTour())},this))},this)),this.autoResize()},processRegistration:function(t,a,n,i){if(t){var r=u.getText("mm_dntme_register_error"),s=t.responseJSON&&t.responseJSON.data?t.responseJSON.data.errors:null;"invalid email address"==t.responseJSON.error_code?r=u.getText("mm_dntme_invalid_email_server_error"):t.responseJSON.error_code==m.SCHEDULED_DOWNTIME?r=u.getText("mm_dntme_server_maintenance"):s&&s.email&&("has already been taken"==s.email[0]?r=u.getText("mm_dntme_duplicate_email",[n.email]):"was used for MaskMe Heavy"==s.email[0]&&(r=u.getText("mm_dntme_version_not_allowed"))),this.$("#welcome-message").hide(),this.$("#error").html(r).show(),t.responseJSON&&t.responseJSON.data&&1==t.responseJSON.data.generated_password?this.$("#error #loginButton").click(e.bind(function(e){return l.licenseModule.logSplitData({bucket_id:this.options.intrusiveSplit,test_data:{int5:1}}),this.openPasswordSetupPage(n.email),e.preventDefault(),!1},this)):this.$("#error #loginButton").click(e.bind(function(e){return l.licenseModule.logSplitData({bucket_id:this.options.intrusiveSplit,test_data:{int5:1}}),this.openLoginPage(),e.preventDefault(),!1},this)),this.$("#error #retryEmail").click(e.bind(this.retryEmail,this)),this.$("#error #dnt2upgrade").click(e.bind(this.openDnt2UpgradePage,this)),this.autoResize(),i(r)}else this.contentManager.preferences.fetchAll(),i()},retryEmail:function(e){e&&e.preventDefault(),this.$("#error, #progress-section").hide(),this.$("#complete-setup-div, #form-div, #welcome-message").show(),this.triggerRender()},openDashboard:function(e){l.webapp.openDashboard(),e.preventDefault(),this.closePanel()},openWeeklyReport:function(e){var t=new n.Preference;t.save({key:"weeklyReportClickedOn",value:Date.now()}),l.webapp.openWeeklyReport(),e.preventDefault(),this.closePanel()},openCashForCardsSignup:function(e){l.webapp.openCashForCardsSignup(),e.preventDefault(),this.closePanel()},clickedNormalMedalNotification:function(){this.messenger.send("update:panelActivity:click",{panelId:8000004})},clickedMedalWithCardNotification:function(){this.messenger.send("update:panelActivity:click",{panelId:8000005})},openPremiumC:function(e){this.options.compact&&!this.options.premium?l.webapp.openPiwikCampaign("extIntFooterC","premium"):l.webapp.openPremium(),e.preventDefault(),this.closePanel()},openPremiumA:function(e){l.webapp.openPiwikCampaign("extIntFooterA","premium"),e.preventDefault(),this.closePanel()},openPremiumB:function(e){l.webapp.openPiwikCampaign("extIntFooterB","premium"),e.preventDefault(),this.closePanel()},showHelp:function(e){e.preventDefault(),l.webapp.openHelp("/faq/faq-configureSettings"),this.closePanel()},showPremium:function(e){e.preventDefault(),l.webapp.openPremium(),this.closePanel()},showPageView:function(t){t&&t.preventDefault(),this.children.pageContent.load(),this.changingView||(this.changingView=!0,this.$(".settings-link").removeClass("highlight"),this.$(".settings-link").show(),this.disableAnimation?(this.$(".one").show(),this.changingView=!1,this.$(".two").hide()):this.$(".one").animate({marginLeft:0},e.bind(function(){this.$(".one").show(),this.changingView=!1,this.$(".two").hide(),this.trigger("resize")},this)),this.$(".settings-link").show())},showSettingsView:function(a,n){if(a&&a.preventDefault&&a.preventDefault(),this.options.domain&&"about:home"==this.options.domain)return t(".settings-link",this.el).attr("title",u.getText("mm_dntme_reload_required_short")),void t(".settings-link",this.el).tooltip("show");if(n)return void this.trigger("show-settings",{switchTo:n.switchTo,highlight:n.highlight,subPage:n.subPage});if(this.children.settingsContent.load(),this.$(".settings-link").hasClass("highlight")){this.options.page="dashboard";try{this.children.pageContent.options.page="dashboard"}catch(e){}return void this.showPageView(a)}return this.options.compact?void("medals"==this.options.page?this.trigger("show-settings",{highlight:"showmedals"}):"weekly-report"==this.options.page?this.trigger("show-settings",{highlight:"showweeklyreports"}):this.trigger("show-settings",{highlight:"showtrackersonload"})):void(this.changingView||(this.changingView=!0,this.children.pageContent&&this.children.pageContent.model&&(this.children.pageContent.model.compact=!1),this.$(".settings-link").addClass("highlight"),this.disableAnimation?(this.$(".two").show(),this.changingView=!1,this.$(".one").hide()):this.$(".one").animate({marginLeft:-310},e.bind(function(){this.$(".two").show(),this.changingView=!1,this.$(".one").hide(),this.trigger("resize")},this)),this.$(".settings-link").hide()))},goBack:function(e){e.preventDefault(),this.showPageView(e)},openBlurPage:function(e){e.preventDefault(),l.webapp.openPage("#blur"),this.logClose()},logClose:function(){this.options.cardAlertPanel&&(this.contentManager.preferences.getPref("entitledToPayments")?this.options.messenger.send("update:panelActivity:closed",{panelId:4000005}):this.options.messenger.send("update:panelActivity:closed",{panelId:4000006})),this.options.showBlurGrowl&&(this.contentManager.preferences.setPref("showBlurGrowl","false"),this.contentManager.preferences.setPref("blurGrowlTab","false")),this.closePanel()},bindAutoFade:function(){function a(){r.clearTimeout(i.autoCloseTimer)}function n(){a(),i.autoCloseTimer=r.setTimeout(e.bind(i.closePanel,i),7e3)}if(this.options.compact)if(this.options.cardAlertPanel||this.options.showBlurGrowl);else{var i=this;t(this.el).hover(a,n),n()}else this.doc.defaultView.focus(),this.doc.defaultView.addEventListener("blur",e.bind(function(){this._ignoreBlur||this.closePanel()},this),!1)},fetchFormIds:function(){this.forms=[],this.formIdFetchHooked||(this.formIdFetchHooked=!0,this.messenger.on("form:ids:response",e.bind(function(e){0==this.forms.length&&e.length>0&&this.$("#mapForm").show(),this.forms=this.forms.concat(e)},this))),this.messenger.sendToCS("CS","get:form:ids",this.options.contentManager.frameId)},afterInitialize:function(){this.doc=this.el.ownerDocument,this.contentManager=this.options.contentManager,this.messenger=this.options.contentManager.messenger,this.applyFadingStyle(),this.fadeIn(),this.options.compact&&(this.opacity="0.8",this.templateName="dntme_compact_panel_c",this.options.showBlurGrowl?(this.templateName="dntme_blur_panel",this.opacity="1.0"):this.options.cardAlertPanel||("weekly-report"==this.options.page?(this.templateName="dntme_compact_panel_weekly_report",this.opacity="1.0"):"medals"==this.options.page?this.templateName="dntme_compact_panel_medal":this.options.premium||(this.options.intrusiveSplit==m.SPLIT_INTRUSIVE_CONTROL?this.templateName="dntme_compact_panel_c":this.options.intrusiveSplit==m.SPLIT_INTRUSIVE_COMPLETE_SETUP_BUTTON?this.templateName="dntme_compact_panel_d":this.options.intrusiveSplit==m.SPLIT_INTRUSIVE_GOT_IT_REG?(this.panelId=4000011,this.contentManager.messenger.send("update:panelActivity:impression",{panelId:this.panelId}),this.templateName="dntme_compact_panel_e"):this.options.intrusiveSplit==m.SPLIT_INTRUSIVE_ALWAYS_REG&&(this.panelId=5000011,this.contentManager.messenger.send("update:panelActivity:impression",{panelId:this.panelId}),this.templateName="dntme_compact_panel_f"))),this.el.className=this.className=this.templateName),this.bindAutoFade(),this.model={compact:this.options.compact,notNow:this.options.notNow,premium:this.options.premium,registered:this.options.registered,safari:"Safari"!=ABINE_DNTME.config.browser},this.render();var t=this.children;"settings"==this.options.page?(this.disableAnimation=!0,this.options.settingsView="global-panel-settings",this.showSettingsView()):this.options.page in{accounts:1,masking:1,wallet:1}?(this.disableAnimation=!0,this.showSettingsView()):"trackers"==this.options.page?(t.pageContent.load(),r.setTimeout(e.bind(function(){this.children.pageContent.showTrackers()},this),100)):t.pageContent.load(),"Firefox"==ABINE_DNTME.config.browser&&this.$("#blur-logo-action").css("margin-top","3px")},getPageView:function(){var t=new c({doc:this.el.ownerDocument,contentManager:this.options.contentManager,messenger:this.messenger,dynamicPanel:this.options.dynamicPanel,domain:this.options.domain,compact:this.options.compact,cardAlertPanel:this.options.cardAlertPanel,showBlurGrowl:this.options.showBlurGrowl,highlight:this.options.highlight,switchTo:this.options.switchTo,page:this.options.page,premium:this.options.premium,timeout:this.options.timeout});return t.transferEvents(["resize","max-height","show-trackers","show-dashboard","show-medals","show-report","ignore-blur"],this),t.on("close",e.bind(function(){this.closePanel()},this)),t.on("show-settings",e.bind(this.showSettingsView,this)),t.on("fav-icons",e.bind(function(){this.replaceWithFavicons(this.contentManager.domain)},this)),t.on("ignore-blur",e.bind(function(e){this._ignoreBlur=e},this)),t.on("open:understanding:tracker",e.bind(function(){l.webapp.openPage("/#/understandingTracking");var e=new n.Preference;e.save({key:"understanding_tracker_clicked",value:"true"}),this.contentManager.preferences.fetchAll(),this.closePanel()},this)),t.on("refresh-preferences",e.bind(function(){this.contentManager.preferences.fetchAll()},this)),t},getSettingsView:function(){var t=new n.TabData({messenger:this.options.messenger}),a=new n.GlobalData({messenger:this.options.messenger}),i=new d({tabData:t,globalData:a,doc:this.el.ownerDocument,messenger:this.messenger,highlight:this.options.highlight,contentManager:this.contentManager,settingsView:this.options.settingsView,switchTo:this.options.switchTo});return delete this.options.highlight,i.transferEvents(["resize","max-height"],this),i.on("close",e.bind(function(){this.closePanel()},this)),i.on("showPageView",e.bind(function(){this.options.page="dashboard";try{this.children.pageContent.options.page="dashboard"}catch(e){}this.showPageView()},this)),i},setDelayedView:function(t,a){var n=this;this.children[t]=new f({doc:this.el.ownerDocument,realView:e.bind(a,this),postLoad:function(e){n.children[t]=e}})},createChildren:function(){return this.children={},this.setDelayedView("pageContent",this.getPageView),this.setDelayedView("settingsContent",this.getSettingsView),this.children}});return g}),ABINE_DNTME.require(["abine/contentMessenger","abine/assets","abine/views/commonhelpers","abine/eventLogger"],function(e){function t(){ABINE_DNTME.startTime=Date.now(),a(function(){ABINE_DNTME.contentMessenger.on("init-"+ABINE_DNTME.context,function(e){e.message_id in i||(i[e.message_id]=!0,n(e))}),ABINE_DNTME.contentMessenger.sendToCS("CS","panel-ready-"+ABINE_DNTME.context)})}function a(e){ABINE_DNTME.requireDuckbone(function(){ABINE_DNTME.requireModels(e)})}function n(e){ABINE_DNTME.require(["abine/proxyContentManager"],function(t){var a=window.contentManager;if(!a){window.contentManager=a=new t.ContentManager(e);var n=function(){a.destroy()};window.addEventListener("unload",n,!1)}a.show(e.view)})}ABINE_DNTME.context=window.location.href.substr(window.location.href.indexOf("?")+1),ABINE_DNTME.contentMessenger=ABINE_DNTME.contentMessenger||new e.ContentMessenger({document:document});var i={};setInterval(function(){i={}},6e4),t()});